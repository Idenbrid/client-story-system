function Dk(r,e){for(var i=0;i<e.length;i++){const n=e[i];if(typeof n!="string"&&!Array.isArray(n)){for(const t in n)if(t!=="default"&&!(t in r)){const a=Object.getOwnPropertyDescriptor(n,t);a&&Object.defineProperty(r,t,a.get?a:{enumerable:!0,get:()=>n[t]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}var St=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kk(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function $g(r){var e=r.default;if(typeof e=="function"){var i=function(){return e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var t=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(i,n,t.get?t:{enumerable:!0,get:function(){return r[n]}})}),i}var Om={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(r,e){(function(){var i,n="4.17.21",t=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",o="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,d="__lodash_placeholder__",h=1,p=2,y=4,S=1,C=2,x=1,I=2,H=4,Z=8,W=16,j=32,le=64,fe=128,Y=256,oe=512,V=30,pe="...",de=800,Se=16,Ae=1,ke=2,De=3,Fe=1/0,ge=9007199254740991,Ye=17976931348623157e292,K=0/0,w=4294967295,te=w-1,ye=w>>>1,xe=[["ary",fe],["bind",x],["bindKey",I],["curry",Z],["curryRight",W],["flip",oe],["partial",j],["partialRight",le],["rearg",Y]],re="[object Arguments]",se="[object Array]",J="[object AsyncFunction]",ie="[object Boolean]",B="[object Date]",ee="[object DOMException]",Ee="[object Error]",Ce="[object Function]",M="[object GeneratorFunction]",U="[object Map]",ae="[object Number]",be="[object Null]",G="[object Object]",ve="[object Promise]",Te="[object Proxy]",X="[object RegExp]",ue="[object Set]",_e="[object String]",Re="[object Symbol]",Ue="[object Undefined]",Ne="[object WeakMap]",$e="[object WeakSet]",Ge="[object ArrayBuffer]",tt="[object DataView]",Xe="[object Float32Array]",ut="[object Float64Array]",qe="[object Int8Array]",Pt="[object Int16Array]",gr="[object Int32Array]",$t="[object Uint8Array]",ur="[object Uint8ClampedArray]",Tt="[object Uint16Array]",Ot="[object Uint32Array]",Xi=/\b__p \+= '';/g,Ia=/\b(__p \+=) '' \+/g,ru=/(__e\(.*?\)|\b__t\)) \+\n'';/g,gn=/&(?:amp|lt|gt|quot|#39);/g,ir=/[&<>"']/g,vn=RegExp(gn.source),iu=RegExp(ir.source),Da=/<%-([\s\S]+?)%>/g,er=/<%([\s\S]+?)%>/g,Is=/<%=([\s\S]+?)%>/g,Ds=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yn=/^\w*$/,nr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ft=/[\\^$.*+?()[\]{}|]/g,qr=RegExp(Ft.source),Kt=/^\s+/,Ut=/\s/,Gt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,dt=/\{\n\/\* \[wrapped with (.+)\] \*/,Pi=/,? & /,Qi=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,_n=/[()=,{}\[\]\/\s]/,nu=/\\(\\)?/g,Oi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,kt=/\w*$/,ks=/^[-+]0x[0-9a-f]+$/i,ar=/^0b[01]+$/i,ph=/^\[object .+?Constructor\]$/,mh=/^0o[0-7]+$/i,zl=/^(?:0|[1-9]\d*)$/,au=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ka=/($^)/,ql=/['\n\r\u2028\u2029\\]/g,La="\\ud800-\\udfff",Ls="\\u0300-\\u036f",gh="\\ufe20-\\ufe2f",Ms="\\u20d0-\\u20ff",su=Ls+gh+Ms,Ma="\\u2700-\\u27bf",Kl="a-z\\xdf-\\xf6\\xf8-\\xff",vh="\\xac\\xb1\\xd7\\xf7",Ns="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Na="\\u2000-\\u206f",Fs=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Tn="A-Z\\xc0-\\xd6\\xd8-\\xde",Us="\\ufe0e\\ufe0f",ou=vh+Ns+Na+Fs,Fa="['\u2019]",Ii="["+La+"]",Yl="["+ou+"]",bn="["+su+"]",uu="\\d+",Xl="["+Ma+"]",lu="["+Kl+"]",Ql="[^"+La+ou+uu+Ma+Kl+Tn+"]",ra="\\ud83c[\\udffb-\\udfff]",Ua="(?:"+bn+"|"+ra+")",cu="[^"+La+"]",fu="(?:\\ud83c[\\udde6-\\uddff]){2}",du="[\\ud800-\\udbff][\\udc00-\\udfff]",Sn="["+Tn+"]",Jl="\\u200d",Zl="(?:"+lu+"|"+Ql+")",ec="(?:"+Sn+"|"+Ql+")",tc="(?:"+Fa+"(?:d|ll|m|re|s|t|ve))?",rc="(?:"+Fa+"(?:D|LL|M|RE|S|T|VE))?",ic=Ua+"?",nc="["+Us+"]?",yh="(?:"+Jl+"(?:"+[cu,fu,du].join("|")+")"+nc+ic+")*",_h="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Bs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ba=nc+ic+yh,Th="(?:"+[Xl,fu,du].join("|")+")"+Ba,bh="(?:"+[cu+bn+"?",bn,fu,du,Ii].join("|")+")",hu=RegExp(Fa,"g"),Sh=RegExp(bn,"g"),ja=RegExp(ra+"(?="+ra+")|"+bh+Ba,"g"),xh=RegExp([Sn+"?"+lu+"+"+tc+"(?="+[Yl,Sn,"$"].join("|")+")",ec+"+"+rc+"(?="+[Yl,Sn+Zl,"$"].join("|")+")",Sn+"?"+Zl+"+"+tc,Sn+"+"+rc,Bs,_h,uu,Th].join("|"),"g"),Eh=RegExp("["+Jl+La+su+Us+"]"),Ch=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Va=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ia=-1,Et={};Et[Xe]=Et[ut]=Et[qe]=Et[Pt]=Et[gr]=Et[$t]=Et[ur]=Et[Tt]=Et[Ot]=!0,Et[re]=Et[se]=Et[Ge]=Et[ie]=Et[tt]=Et[B]=Et[Ee]=Et[Ce]=Et[U]=Et[ae]=Et[G]=Et[X]=Et[ue]=Et[_e]=Et[Ne]=!1;var vt={};vt[re]=vt[se]=vt[Ge]=vt[tt]=vt[ie]=vt[B]=vt[Xe]=vt[ut]=vt[qe]=vt[Pt]=vt[gr]=vt[U]=vt[ae]=vt[G]=vt[X]=vt[ue]=vt[_e]=vt[Re]=vt[$t]=vt[ur]=vt[Tt]=vt[Ot]=!0,vt[Ee]=vt[Ce]=vt[Ne]=!1;var Rh={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},ac={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},sc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},wh=parseFloat,Ah=parseInt,oc=typeof St=="object"&&St&&St.Object===Object&&St,js=typeof self=="object"&&self&&self.Object===Object&&self,sr=oc||js||Function("return this")(),Di=e&&!e.nodeType&&e,xn=Di&&!0&&r&&!r.nodeType&&r,uc=xn&&xn.exports===Di,Rt=uc&&oc.process,Kr=function(){try{var A=xn&&xn.require&&xn.require("util").types;return A||Rt&&Rt.binding&&Rt.binding("util")}catch{}}(),lc=Kr&&Kr.isArrayBuffer,cc=Kr&&Kr.isDate,mu=Kr&&Kr.isMap,fc=Kr&&Kr.isRegExp,gu=Kr&&Kr.isSet,dc=Kr&&Kr.isTypedArray;function Er(A,L,D){switch(D.length){case 0:return A.call(L);case 1:return A.call(L,D[0]);case 2:return A.call(L,D[0],D[1]);case 3:return A.call(L,D[0],D[1],D[2])}return A.apply(L,D)}function Ph(A,L,D,z){for(var me=-1,Pe=A==null?0:A.length;++me<Pe;){var Be=A[me];L(z,Be,D(Be),A)}return z}function Dr(A,L){for(var D=-1,z=A==null?0:A.length;++D<z&&L(A[D],D,A)!==!1;);return A}function hc(A,L){for(var D=A==null?0:A.length;D--&&L(A[D],D,A)!==!1;);return A}function na(A,L){for(var D=-1,z=A==null?0:A.length;++D<z;)if(!L(A[D],D,A))return!1;return!0}function Yr(A,L){for(var D=-1,z=A==null?0:A.length,me=0,Pe=[];++D<z;){var Be=A[D];L(Be,D,A)&&(Pe[me++]=Be)}return Pe}function Vs(A,L){var D=A==null?0:A.length;return!!D&&En(A,L,0)>-1}function vu(A,L,D){for(var z=-1,me=A==null?0:A.length;++z<me;)if(D(L,A[z]))return!0;return!1}function Lt(A,L){for(var D=-1,z=A==null?0:A.length,me=Array(z);++D<z;)me[D]=L(A[D],D,A);return me}function Ji(A,L){for(var D=-1,z=L.length,me=A.length;++D<z;)A[me+D]=L[D];return A}function yu(A,L,D,z){var me=-1,Pe=A==null?0:A.length;for(z&&Pe&&(D=A[++me]);++me<Pe;)D=L(D,A[me],me,A);return D}function Oh(A,L,D,z){var me=A==null?0:A.length;for(z&&me&&(D=A[--me]);me--;)D=L(D,A[me],me,A);return D}function _u(A,L){for(var D=-1,z=A==null?0:A.length;++D<z;)if(L(A[D],D,A))return!0;return!1}var Ih=$s("length");function Dh(A){return A.split("")}function Hs(A){return A.match(Qi)||[]}function aa(A,L,D){var z;return D(A,function(me,Pe,Be){if(L(me,Pe,Be))return z=Pe,!1}),z}function Ws(A,L,D,z){for(var me=A.length,Pe=D+(z?1:-1);z?Pe--:++Pe<me;)if(L(A[Pe],Pe,A))return Pe;return-1}function En(A,L,D){return L===L?Fh(A,L,D):Ws(A,Tu,D)}function pc(A,L,D,z){for(var me=D-1,Pe=A.length;++me<Pe;)if(z(A[me],L))return me;return-1}function Tu(A){return A!==A}function bu(A,L){var D=A==null?0:A.length;return D?sa(A,L)/D:K}function $s(A){return function(L){return L==null?i:L[A]}}function Ha(A){return function(L){return A==null?i:A[L]}}function Su(A,L,D,z,me){return me(A,function(Pe,Be,we){D=z?(z=!1,Pe):L(D,Pe,Be,we)}),D}function mc(A,L){var D=A.length;for(A.sort(L);D--;)A[D]=A[D].value;return A}function sa(A,L){for(var D,z=-1,me=A.length;++z<me;){var Pe=L(A[z]);Pe!==i&&(D=D===i?Pe:D+Pe)}return D}function oa(A,L){for(var D=-1,z=Array(A);++D<A;)z[D]=L(D);return z}function kh(A,L){return Lt(L,function(D){return[D,A[D]]})}function gc(A){return A&&A.slice(0,g(A)+1).replace(Kt,"")}function kr(A){return function(L){return A(L)}}function xu(A,L){return Lt(L,function(D){return A[D]})}function Wa(A,L){return A.has(L)}function Gs(A,L){for(var D=-1,z=A.length;++D<z&&En(L,A[D],0)>-1;);return D}function vc(A,L){for(var D=A.length;D--&&En(L,A[D],0)>-1;);return D}function Lh(A,L){for(var D=A.length,z=0;D--;)A[D]===L&&++z;return z}var ua=Ha(Rh),xt=Ha(ac);function Cn(A){return"\\"+pu[A]}function vr(A,L){return A==null?i:A[L]}function yr(A){return Eh.test(A)}function Mh(A){return Ch.test(A)}function yc(A){for(var L,D=[];!(L=A.next()).done;)D.push(L.value);return D}function Eu(A){var L=-1,D=Array(A.size);return A.forEach(function(z,me){D[++L]=[me,z]}),D}function _c(A,L){return function(D){return A(L(D))}}function Zi(A,L){for(var D=-1,z=A.length,me=0,Pe=[];++D<z;){var Be=A[D];(Be===L||Be===d)&&(A[D]=d,Pe[me++]=D)}return Pe}function zs(A){var L=-1,D=Array(A.size);return A.forEach(function(z){D[++L]=z}),D}function Nh(A){var L=-1,D=Array(A.size);return A.forEach(function(z){D[++L]=[z,z]}),D}function Fh(A,L,D){for(var z=D-1,me=A.length;++z<me;)if(A[z]===L)return z;return-1}function Uh(A,L,D){for(var z=D+1;z--;)if(A[z]===L)return z;return z}function Rn(A){return yr(A)?v(A):Ih(A)}function O(A){return yr(A)?T(A):Dh(A)}function g(A){for(var L=A.length;L--&&Ut.test(A.charAt(L)););return L}var _=Ha(sc);function v(A){for(var L=ja.lastIndex=0;ja.test(A);)++L;return L}function T(A){return A.match(ja)||[]}function E(A){return A.match(xh)||[]}var R=function A(L){L=L==null?sr:F.defaults(sr.Object(),L,F.pick(sr,Va));var D=L.Array,z=L.Date,me=L.Error,Pe=L.Function,Be=L.Math,we=L.Object,Ke=L.RegExp,Yt=L.String,At=L.TypeError,yi=D.prototype,Cu=Pe.prototype,wn=we.prototype,$a=L["__core-js_shared__"],Ga=Cu.toString,bt=wn.hasOwnProperty,Tc=0,Bt=function(){var u=/[^.]+$/.exec($a&&$a.keys&&$a.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),za=wn.toString,An=Ga.call(we),Pw=sr._,Ow=Ke("^"+Ga.call(bt).replace(Ft,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bc=uc?L.Buffer:i,la=L.Symbol,Sc=L.Uint8Array,qy=bc?bc.allocUnsafe:i,xc=_c(we.getPrototypeOf,we),Ky=we.create,Yy=wn.propertyIsEnumerable,Ec=yi.splice,Xy=la?la.isConcatSpreadable:i,Ru=la?la.iterator:i,qa=la?la.toStringTag:i,Cc=function(){try{var u=Ja(we,"defineProperty");return u({},"",{}),u}catch{}}(),Iw=L.clearTimeout!==sr.clearTimeout&&L.clearTimeout,Dw=z&&z.now!==sr.Date.now&&z.now,kw=L.setTimeout!==sr.setTimeout&&L.setTimeout,Rc=Be.ceil,wc=Be.floor,Bh=we.getOwnPropertySymbols,Lw=bc?bc.isBuffer:i,Qy=L.isFinite,Mw=yi.join,Nw=_c(we.keys,we),or=Be.max,Cr=Be.min,Fw=z.now,Uw=L.parseInt,Jy=Be.random,Bw=yi.reverse,jh=Ja(L,"DataView"),wu=Ja(L,"Map"),Vh=Ja(L,"Promise"),qs=Ja(L,"Set"),Au=Ja(L,"WeakMap"),Pu=Ja(we,"create"),Ac=Au&&new Au,Ks={},jw=Za(jh),Vw=Za(wu),Hw=Za(Vh),Ww=Za(qs),$w=Za(Au),Pc=la?la.prototype:i,Ou=Pc?Pc.valueOf:i,Zy=Pc?Pc.toString:i;function k(u){if(zt(u)&&!nt(u)&&!(u instanceof mt)){if(u instanceof _i)return u;if(bt.call(u,"__wrapped__"))return e_(u)}return new _i(u)}var Ys=function(){function u(){}return function(f){if(!Ht(f))return{};if(Ky)return Ky(f);u.prototype=f;var m=new u;return u.prototype=i,m}}();function Oc(){}function _i(u,f){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=i}k.templateSettings={escape:Da,evaluate:er,interpolate:Is,variable:"",imports:{_:k}},k.prototype=Oc.prototype,k.prototype.constructor=k,_i.prototype=Ys(Oc.prototype),_i.prototype.constructor=_i;function mt(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=w,this.__views__=[]}function Gw(){var u=new mt(this.__wrapped__);return u.__actions__=Xr(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=Xr(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=Xr(this.__views__),u}function zw(){if(this.__filtered__){var u=new mt(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function qw(){var u=this.__wrapped__.value(),f=this.__dir__,m=nt(u),b=f<0,P=m?u.length:0,N=aP(0,P,this.__views__),Q=N.start,ne=N.end,he=ne-Q,Oe=b?ne:Q-1,Ie=this.__iteratees__,Me=Ie.length,He=0,ze=Cr(he,this.__takeCount__);if(!m||!b&&P==he&&ze==he)return x0(u,this.__actions__);var Ze=[];e:for(;he--&&He<ze;){Oe+=f;for(var st=-1,et=u[Oe];++st<Me;){var ht=Ie[st],gt=ht.iteratee,ci=ht.type,Nr=gt(et);if(ci==ke)et=Nr;else if(!Nr){if(ci==Ae)continue e;break e}}Ze[He++]=et}return Ze}mt.prototype=Ys(Oc.prototype),mt.prototype.constructor=mt;function Ka(u){var f=-1,m=u==null?0:u.length;for(this.clear();++f<m;){var b=u[f];this.set(b[0],b[1])}}function Kw(){this.__data__=Pu?Pu(null):{},this.size=0}function Yw(u){var f=this.has(u)&&delete this.__data__[u];return this.size-=f?1:0,f}function Xw(u){var f=this.__data__;if(Pu){var m=f[u];return m===l?i:m}return bt.call(f,u)?f[u]:i}function Qw(u){var f=this.__data__;return Pu?f[u]!==i:bt.call(f,u)}function Jw(u,f){var m=this.__data__;return this.size+=this.has(u)?0:1,m[u]=Pu&&f===i?l:f,this}Ka.prototype.clear=Kw,Ka.prototype.delete=Yw,Ka.prototype.get=Xw,Ka.prototype.has=Qw,Ka.prototype.set=Jw;function Pn(u){var f=-1,m=u==null?0:u.length;for(this.clear();++f<m;){var b=u[f];this.set(b[0],b[1])}}function Zw(){this.__data__=[],this.size=0}function eA(u){var f=this.__data__,m=Ic(f,u);if(m<0)return!1;var b=f.length-1;return m==b?f.pop():Ec.call(f,m,1),--this.size,!0}function tA(u){var f=this.__data__,m=Ic(f,u);return m<0?i:f[m][1]}function rA(u){return Ic(this.__data__,u)>-1}function iA(u,f){var m=this.__data__,b=Ic(m,u);return b<0?(++this.size,m.push([u,f])):m[b][1]=f,this}Pn.prototype.clear=Zw,Pn.prototype.delete=eA,Pn.prototype.get=tA,Pn.prototype.has=rA,Pn.prototype.set=iA;function On(u){var f=-1,m=u==null?0:u.length;for(this.clear();++f<m;){var b=u[f];this.set(b[0],b[1])}}function nA(){this.size=0,this.__data__={hash:new Ka,map:new(wu||Pn),string:new Ka}}function aA(u){var f=Wc(this,u).delete(u);return this.size-=f?1:0,f}function sA(u){return Wc(this,u).get(u)}function oA(u){return Wc(this,u).has(u)}function uA(u,f){var m=Wc(this,u),b=m.size;return m.set(u,f),this.size+=m.size==b?0:1,this}On.prototype.clear=nA,On.prototype.delete=aA,On.prototype.get=sA,On.prototype.has=oA,On.prototype.set=uA;function Ya(u){var f=-1,m=u==null?0:u.length;for(this.__data__=new On;++f<m;)this.add(u[f])}function lA(u){return this.__data__.set(u,l),this}function cA(u){return this.__data__.has(u)}Ya.prototype.add=Ya.prototype.push=lA,Ya.prototype.has=cA;function ki(u){var f=this.__data__=new Pn(u);this.size=f.size}function fA(){this.__data__=new Pn,this.size=0}function dA(u){var f=this.__data__,m=f.delete(u);return this.size=f.size,m}function hA(u){return this.__data__.get(u)}function pA(u){return this.__data__.has(u)}function mA(u,f){var m=this.__data__;if(m instanceof Pn){var b=m.__data__;if(!wu||b.length<t-1)return b.push([u,f]),this.size=++m.size,this;m=this.__data__=new On(b)}return m.set(u,f),this.size=m.size,this}ki.prototype.clear=fA,ki.prototype.delete=dA,ki.prototype.get=hA,ki.prototype.has=pA,ki.prototype.set=mA;function e0(u,f){var m=nt(u),b=!m&&es(u),P=!m&&!b&&pa(u),N=!m&&!b&&!P&&Zs(u),Q=m||b||P||N,ne=Q?oa(u.length,Yt):[],he=ne.length;for(var Oe in u)(f||bt.call(u,Oe))&&!(Q&&(Oe=="length"||P&&(Oe=="offset"||Oe=="parent")||N&&(Oe=="buffer"||Oe=="byteLength"||Oe=="byteOffset")||Ln(Oe,he)))&&ne.push(Oe);return ne}function t0(u){var f=u.length;return f?u[Jh(0,f-1)]:i}function gA(u,f){return $c(Xr(u),Xa(f,0,u.length))}function vA(u){return $c(Xr(u))}function Hh(u,f,m){(m!==i&&!Li(u[f],m)||m===i&&!(f in u))&&In(u,f,m)}function Iu(u,f,m){var b=u[f];(!(bt.call(u,f)&&Li(b,m))||m===i&&!(f in u))&&In(u,f,m)}function Ic(u,f){for(var m=u.length;m--;)if(Li(u[m][0],f))return m;return-1}function yA(u,f,m,b){return ca(u,function(P,N,Q){f(b,P,m(P),Q)}),b}function r0(u,f){return u&&tn(f,lr(f),u)}function _A(u,f){return u&&tn(f,Jr(f),u)}function In(u,f,m){f=="__proto__"&&Cc?Cc(u,f,{configurable:!0,enumerable:!0,value:m,writable:!0}):u[f]=m}function Wh(u,f){for(var m=-1,b=f.length,P=D(b),N=u==null;++m<b;)P[m]=N?i:xp(u,f[m]);return P}function Xa(u,f,m){return u===u&&(m!==i&&(u=u<=m?u:m),f!==i&&(u=u>=f?u:f)),u}function Ti(u,f,m,b,P,N){var Q,ne=f&h,he=f&p,Oe=f&y;if(m&&(Q=P?m(u,b,P,N):m(u)),Q!==i)return Q;if(!Ht(u))return u;var Ie=nt(u);if(Ie){if(Q=oP(u),!ne)return Xr(u,Q)}else{var Me=Rr(u),He=Me==Ce||Me==M;if(pa(u))return R0(u,ne);if(Me==G||Me==re||He&&!P){if(Q=he||He?{}:G0(u),!ne)return he?XA(u,_A(Q,u)):YA(u,r0(Q,u))}else{if(!vt[Me])return P?u:{};Q=uP(u,Me,ne)}}N||(N=new ki);var ze=N.get(u);if(ze)return ze;N.set(u,Q),T_(u)?u.forEach(function(et){Q.add(Ti(et,f,m,et,u,N))}):y_(u)&&u.forEach(function(et,ht){Q.set(ht,Ti(et,f,m,ht,u,N))});var Ze=Oe?he?lp:up:he?Jr:lr,st=Ie?i:Ze(u);return Dr(st||u,function(et,ht){st&&(ht=et,et=u[ht]),Iu(Q,ht,Ti(et,f,m,ht,u,N))}),Q}function TA(u){var f=lr(u);return function(m){return i0(m,u,f)}}function i0(u,f,m){var b=m.length;if(u==null)return!b;for(u=we(u);b--;){var P=m[b],N=f[P],Q=u[P];if(Q===i&&!(P in u)||!N(Q))return!1}return!0}function n0(u,f,m){if(typeof u!="function")throw new At(s);return Uu(function(){u.apply(i,m)},f)}function Du(u,f,m,b){var P=-1,N=Vs,Q=!0,ne=u.length,he=[],Oe=f.length;if(!ne)return he;m&&(f=Lt(f,kr(m))),b?(N=vu,Q=!1):f.length>=t&&(N=Wa,Q=!1,f=new Ya(f));e:for(;++P<ne;){var Ie=u[P],Me=m==null?Ie:m(Ie);if(Ie=b||Ie!==0?Ie:0,Q&&Me===Me){for(var He=Oe;He--;)if(f[He]===Me)continue e;he.push(Ie)}else N(f,Me,b)||he.push(Ie)}return he}var ca=I0(en),a0=I0(Gh,!0);function bA(u,f){var m=!0;return ca(u,function(b,P,N){return m=!!f(b,P,N),m}),m}function Dc(u,f,m){for(var b=-1,P=u.length;++b<P;){var N=u[b],Q=f(N);if(Q!=null&&(ne===i?Q===Q&&!li(Q):m(Q,ne)))var ne=Q,he=N}return he}function SA(u,f,m,b){var P=u.length;for(m=at(m),m<0&&(m=-m>P?0:P+m),b=b===i||b>P?P:at(b),b<0&&(b+=P),b=m>b?0:S_(b);m<b;)u[m++]=f;return u}function s0(u,f){var m=[];return ca(u,function(b,P,N){f(b,P,N)&&m.push(b)}),m}function _r(u,f,m,b,P){var N=-1,Q=u.length;for(m||(m=cP),P||(P=[]);++N<Q;){var ne=u[N];f>0&&m(ne)?f>1?_r(ne,f-1,m,b,P):Ji(P,ne):b||(P[P.length]=ne)}return P}var $h=D0(),o0=D0(!0);function en(u,f){return u&&$h(u,f,lr)}function Gh(u,f){return u&&o0(u,f,lr)}function kc(u,f){return Yr(f,function(m){return Mn(u[m])})}function Qa(u,f){f=da(f,u);for(var m=0,b=f.length;u!=null&&m<b;)u=u[rn(f[m++])];return m&&m==b?u:i}function u0(u,f,m){var b=f(u);return nt(u)?b:Ji(b,m(u))}function Lr(u){return u==null?u===i?Ue:be:qa&&qa in we(u)?nP(u):vP(u)}function zh(u,f){return u>f}function xA(u,f){return u!=null&&bt.call(u,f)}function EA(u,f){return u!=null&&f in we(u)}function CA(u,f,m){return u>=Cr(f,m)&&u<or(f,m)}function qh(u,f,m){for(var b=m?vu:Vs,P=u[0].length,N=u.length,Q=N,ne=D(N),he=1/0,Oe=[];Q--;){var Ie=u[Q];Q&&f&&(Ie=Lt(Ie,kr(f))),he=Cr(Ie.length,he),ne[Q]=!m&&(f||P>=120&&Ie.length>=120)?new Ya(Q&&Ie):i}Ie=u[0];var Me=-1,He=ne[0];e:for(;++Me<P&&Oe.length<he;){var ze=Ie[Me],Ze=f?f(ze):ze;if(ze=m||ze!==0?ze:0,!(He?Wa(He,Ze):b(Oe,Ze,m))){for(Q=N;--Q;){var st=ne[Q];if(!(st?Wa(st,Ze):b(u[Q],Ze,m)))continue e}He&&He.push(Ze),Oe.push(ze)}}return Oe}function RA(u,f,m,b){return en(u,function(P,N,Q){f(b,m(P),N,Q)}),b}function ku(u,f,m){f=da(f,u),u=Y0(u,f);var b=u==null?u:u[rn(Si(f))];return b==null?i:Er(b,u,m)}function l0(u){return zt(u)&&Lr(u)==re}function wA(u){return zt(u)&&Lr(u)==Ge}function AA(u){return zt(u)&&Lr(u)==B}function Lu(u,f,m,b,P){return u===f?!0:u==null||f==null||!zt(u)&&!zt(f)?u!==u&&f!==f:PA(u,f,m,b,Lu,P)}function PA(u,f,m,b,P,N){var Q=nt(u),ne=nt(f),he=Q?se:Rr(u),Oe=ne?se:Rr(f);he=he==re?G:he,Oe=Oe==re?G:Oe;var Ie=he==G,Me=Oe==G,He=he==Oe;if(He&&pa(u)){if(!pa(f))return!1;Q=!0,Ie=!1}if(He&&!Ie)return N||(N=new ki),Q||Zs(u)?H0(u,f,m,b,P,N):rP(u,f,he,m,b,P,N);if(!(m&S)){var ze=Ie&&bt.call(u,"__wrapped__"),Ze=Me&&bt.call(f,"__wrapped__");if(ze||Ze){var st=ze?u.value():u,et=Ze?f.value():f;return N||(N=new ki),P(st,et,m,b,N)}}return He?(N||(N=new ki),iP(u,f,m,b,P,N)):!1}function OA(u){return zt(u)&&Rr(u)==U}function Kh(u,f,m,b){var P=m.length,N=P,Q=!b;if(u==null)return!N;for(u=we(u);P--;){var ne=m[P];if(Q&&ne[2]?ne[1]!==u[ne[0]]:!(ne[0]in u))return!1}for(;++P<N;){ne=m[P];var he=ne[0],Oe=u[he],Ie=ne[1];if(Q&&ne[2]){if(Oe===i&&!(he in u))return!1}else{var Me=new ki;if(b)var He=b(Oe,Ie,he,u,f,Me);if(!(He===i?Lu(Ie,Oe,S|C,b,Me):He))return!1}}return!0}function c0(u){if(!Ht(u)||dP(u))return!1;var f=Mn(u)?Ow:ph;return f.test(Za(u))}function IA(u){return zt(u)&&Lr(u)==X}function DA(u){return zt(u)&&Rr(u)==ue}function kA(u){return zt(u)&&Xc(u.length)&&!!Et[Lr(u)]}function f0(u){return typeof u=="function"?u:u==null?Zr:typeof u=="object"?nt(u)?p0(u[0],u[1]):h0(u):k_(u)}function Yh(u){if(!Fu(u))return Nw(u);var f=[];for(var m in we(u))bt.call(u,m)&&m!="constructor"&&f.push(m);return f}function LA(u){if(!Ht(u))return gP(u);var f=Fu(u),m=[];for(var b in u)b=="constructor"&&(f||!bt.call(u,b))||m.push(b);return m}function Xh(u,f){return u<f}function d0(u,f){var m=-1,b=Qr(u)?D(u.length):[];return ca(u,function(P,N,Q){b[++m]=f(P,N,Q)}),b}function h0(u){var f=fp(u);return f.length==1&&f[0][2]?q0(f[0][0],f[0][1]):function(m){return m===u||Kh(m,u,f)}}function p0(u,f){return hp(u)&&z0(f)?q0(rn(u),f):function(m){var b=xp(m,u);return b===i&&b===f?Ep(m,u):Lu(f,b,S|C)}}function Lc(u,f,m,b,P){u!==f&&$h(f,function(N,Q){if(P||(P=new ki),Ht(N))MA(u,f,Q,m,Lc,b,P);else{var ne=b?b(mp(u,Q),N,Q+"",u,f,P):i;ne===i&&(ne=N),Hh(u,Q,ne)}},Jr)}function MA(u,f,m,b,P,N,Q){var ne=mp(u,m),he=mp(f,m),Oe=Q.get(he);if(Oe){Hh(u,m,Oe);return}var Ie=N?N(ne,he,m+"",u,f,Q):i,Me=Ie===i;if(Me){var He=nt(he),ze=!He&&pa(he),Ze=!He&&!ze&&Zs(he);Ie=he,He||ze||Ze?nt(ne)?Ie=ne:Xt(ne)?Ie=Xr(ne):ze?(Me=!1,Ie=R0(he,!0)):Ze?(Me=!1,Ie=w0(he,!0)):Ie=[]:Bu(he)||es(he)?(Ie=ne,es(ne)?Ie=x_(ne):(!Ht(ne)||Mn(ne))&&(Ie=G0(he))):Me=!1}Me&&(Q.set(he,Ie),P(Ie,he,b,N,Q),Q.delete(he)),Hh(u,m,Ie)}function m0(u,f){var m=u.length;if(!!m)return f+=f<0?m:0,Ln(f,m)?u[f]:i}function g0(u,f,m){f.length?f=Lt(f,function(N){return nt(N)?function(Q){return Qa(Q,N.length===1?N[0]:N)}:N}):f=[Zr];var b=-1;f=Lt(f,kr(Je()));var P=d0(u,function(N,Q,ne){var he=Lt(f,function(Oe){return Oe(N)});return{criteria:he,index:++b,value:N}});return mc(P,function(N,Q){return KA(N,Q,m)})}function NA(u,f){return v0(u,f,function(m,b){return Ep(u,b)})}function v0(u,f,m){for(var b=-1,P=f.length,N={};++b<P;){var Q=f[b],ne=Qa(u,Q);m(ne,Q)&&Mu(N,da(Q,u),ne)}return N}function FA(u){return function(f){return Qa(f,u)}}function Qh(u,f,m,b){var P=b?pc:En,N=-1,Q=f.length,ne=u;for(u===f&&(f=Xr(f)),m&&(ne=Lt(u,kr(m)));++N<Q;)for(var he=0,Oe=f[N],Ie=m?m(Oe):Oe;(he=P(ne,Ie,he,b))>-1;)ne!==u&&Ec.call(ne,he,1),Ec.call(u,he,1);return u}function y0(u,f){for(var m=u?f.length:0,b=m-1;m--;){var P=f[m];if(m==b||P!==N){var N=P;Ln(P)?Ec.call(u,P,1):tp(u,P)}}return u}function Jh(u,f){return u+wc(Jy()*(f-u+1))}function UA(u,f,m,b){for(var P=-1,N=or(Rc((f-u)/(m||1)),0),Q=D(N);N--;)Q[b?N:++P]=u,u+=m;return Q}function Zh(u,f){var m="";if(!u||f<1||f>ge)return m;do f%2&&(m+=u),f=wc(f/2),f&&(u+=u);while(f);return m}function lt(u,f){return gp(K0(u,f,Zr),u+"")}function BA(u){return t0(eo(u))}function jA(u,f){var m=eo(u);return $c(m,Xa(f,0,m.length))}function Mu(u,f,m,b){if(!Ht(u))return u;f=da(f,u);for(var P=-1,N=f.length,Q=N-1,ne=u;ne!=null&&++P<N;){var he=rn(f[P]),Oe=m;if(he==="__proto__"||he==="constructor"||he==="prototype")return u;if(P!=Q){var Ie=ne[he];Oe=b?b(Ie,he,ne):i,Oe===i&&(Oe=Ht(Ie)?Ie:Ln(f[P+1])?[]:{})}Iu(ne,he,Oe),ne=ne[he]}return u}var _0=Ac?function(u,f){return Ac.set(u,f),u}:Zr,VA=Cc?function(u,f){return Cc(u,"toString",{configurable:!0,enumerable:!1,value:Rp(f),writable:!0})}:Zr;function HA(u){return $c(eo(u))}function bi(u,f,m){var b=-1,P=u.length;f<0&&(f=-f>P?0:P+f),m=m>P?P:m,m<0&&(m+=P),P=f>m?0:m-f>>>0,f>>>=0;for(var N=D(P);++b<P;)N[b]=u[b+f];return N}function WA(u,f){var m;return ca(u,function(b,P,N){return m=f(b,P,N),!m}),!!m}function Mc(u,f,m){var b=0,P=u==null?b:u.length;if(typeof f=="number"&&f===f&&P<=ye){for(;b<P;){var N=b+P>>>1,Q=u[N];Q!==null&&!li(Q)&&(m?Q<=f:Q<f)?b=N+1:P=N}return P}return ep(u,f,Zr,m)}function ep(u,f,m,b){var P=0,N=u==null?0:u.length;if(N===0)return 0;f=m(f);for(var Q=f!==f,ne=f===null,he=li(f),Oe=f===i;P<N;){var Ie=wc((P+N)/2),Me=m(u[Ie]),He=Me!==i,ze=Me===null,Ze=Me===Me,st=li(Me);if(Q)var et=b||Ze;else Oe?et=Ze&&(b||He):ne?et=Ze&&He&&(b||!ze):he?et=Ze&&He&&!ze&&(b||!st):ze||st?et=!1:et=b?Me<=f:Me<f;et?P=Ie+1:N=Ie}return Cr(N,te)}function T0(u,f){for(var m=-1,b=u.length,P=0,N=[];++m<b;){var Q=u[m],ne=f?f(Q):Q;if(!m||!Li(ne,he)){var he=ne;N[P++]=Q===0?0:Q}}return N}function b0(u){return typeof u=="number"?u:li(u)?K:+u}function ui(u){if(typeof u=="string")return u;if(nt(u))return Lt(u,ui)+"";if(li(u))return Zy?Zy.call(u):"";var f=u+"";return f=="0"&&1/u==-Fe?"-0":f}function fa(u,f,m){var b=-1,P=Vs,N=u.length,Q=!0,ne=[],he=ne;if(m)Q=!1,P=vu;else if(N>=t){var Oe=f?null:eP(u);if(Oe)return zs(Oe);Q=!1,P=Wa,he=new Ya}else he=f?[]:ne;e:for(;++b<N;){var Ie=u[b],Me=f?f(Ie):Ie;if(Ie=m||Ie!==0?Ie:0,Q&&Me===Me){for(var He=he.length;He--;)if(he[He]===Me)continue e;f&&he.push(Me),ne.push(Ie)}else P(he,Me,m)||(he!==ne&&he.push(Me),ne.push(Ie))}return ne}function tp(u,f){return f=da(f,u),u=Y0(u,f),u==null||delete u[rn(Si(f))]}function S0(u,f,m,b){return Mu(u,f,m(Qa(u,f)),b)}function Nc(u,f,m,b){for(var P=u.length,N=b?P:-1;(b?N--:++N<P)&&f(u[N],N,u););return m?bi(u,b?0:N,b?N+1:P):bi(u,b?N+1:0,b?P:N)}function x0(u,f){var m=u;return m instanceof mt&&(m=m.value()),yu(f,function(b,P){return P.func.apply(P.thisArg,Ji([b],P.args))},m)}function rp(u,f,m){var b=u.length;if(b<2)return b?fa(u[0]):[];for(var P=-1,N=D(b);++P<b;)for(var Q=u[P],ne=-1;++ne<b;)ne!=P&&(N[P]=Du(N[P]||Q,u[ne],f,m));return fa(_r(N,1),f,m)}function E0(u,f,m){for(var b=-1,P=u.length,N=f.length,Q={};++b<P;){var ne=b<N?f[b]:i;m(Q,u[b],ne)}return Q}function ip(u){return Xt(u)?u:[]}function np(u){return typeof u=="function"?u:Zr}function da(u,f){return nt(u)?u:hp(u,f)?[u]:Z0(Ct(u))}var $A=lt;function ha(u,f,m){var b=u.length;return m=m===i?b:m,!f&&m>=b?u:bi(u,f,m)}var C0=Iw||function(u){return sr.clearTimeout(u)};function R0(u,f){if(f)return u.slice();var m=u.length,b=qy?qy(m):new u.constructor(m);return u.copy(b),b}function ap(u){var f=new u.constructor(u.byteLength);return new Sc(f).set(new Sc(u)),f}function GA(u,f){var m=f?ap(u.buffer):u.buffer;return new u.constructor(m,u.byteOffset,u.byteLength)}function zA(u){var f=new u.constructor(u.source,kt.exec(u));return f.lastIndex=u.lastIndex,f}function qA(u){return Ou?we(Ou.call(u)):{}}function w0(u,f){var m=f?ap(u.buffer):u.buffer;return new u.constructor(m,u.byteOffset,u.length)}function A0(u,f){if(u!==f){var m=u!==i,b=u===null,P=u===u,N=li(u),Q=f!==i,ne=f===null,he=f===f,Oe=li(f);if(!ne&&!Oe&&!N&&u>f||N&&Q&&he&&!ne&&!Oe||b&&Q&&he||!m&&he||!P)return 1;if(!b&&!N&&!Oe&&u<f||Oe&&m&&P&&!b&&!N||ne&&m&&P||!Q&&P||!he)return-1}return 0}function KA(u,f,m){for(var b=-1,P=u.criteria,N=f.criteria,Q=P.length,ne=m.length;++b<Q;){var he=A0(P[b],N[b]);if(he){if(b>=ne)return he;var Oe=m[b];return he*(Oe=="desc"?-1:1)}}return u.index-f.index}function P0(u,f,m,b){for(var P=-1,N=u.length,Q=m.length,ne=-1,he=f.length,Oe=or(N-Q,0),Ie=D(he+Oe),Me=!b;++ne<he;)Ie[ne]=f[ne];for(;++P<Q;)(Me||P<N)&&(Ie[m[P]]=u[P]);for(;Oe--;)Ie[ne++]=u[P++];return Ie}function O0(u,f,m,b){for(var P=-1,N=u.length,Q=-1,ne=m.length,he=-1,Oe=f.length,Ie=or(N-ne,0),Me=D(Ie+Oe),He=!b;++P<Ie;)Me[P]=u[P];for(var ze=P;++he<Oe;)Me[ze+he]=f[he];for(;++Q<ne;)(He||P<N)&&(Me[ze+m[Q]]=u[P++]);return Me}function Xr(u,f){var m=-1,b=u.length;for(f||(f=D(b));++m<b;)f[m]=u[m];return f}function tn(u,f,m,b){var P=!m;m||(m={});for(var N=-1,Q=f.length;++N<Q;){var ne=f[N],he=b?b(m[ne],u[ne],ne,m,u):i;he===i&&(he=u[ne]),P?In(m,ne,he):Iu(m,ne,he)}return m}function YA(u,f){return tn(u,dp(u),f)}function XA(u,f){return tn(u,W0(u),f)}function Fc(u,f){return function(m,b){var P=nt(m)?Ph:yA,N=f?f():{};return P(m,u,Je(b,2),N)}}function Xs(u){return lt(function(f,m){var b=-1,P=m.length,N=P>1?m[P-1]:i,Q=P>2?m[2]:i;for(N=u.length>3&&typeof N=="function"?(P--,N):i,Q&&Mr(m[0],m[1],Q)&&(N=P<3?i:N,P=1),f=we(f);++b<P;){var ne=m[b];ne&&u(f,ne,b,N)}return f})}function I0(u,f){return function(m,b){if(m==null)return m;if(!Qr(m))return u(m,b);for(var P=m.length,N=f?P:-1,Q=we(m);(f?N--:++N<P)&&b(Q[N],N,Q)!==!1;);return m}}function D0(u){return function(f,m,b){for(var P=-1,N=we(f),Q=b(f),ne=Q.length;ne--;){var he=Q[u?ne:++P];if(m(N[he],he,N)===!1)break}return f}}function QA(u,f,m){var b=f&x,P=Nu(u);function N(){var Q=this&&this!==sr&&this instanceof N?P:u;return Q.apply(b?m:this,arguments)}return N}function k0(u){return function(f){f=Ct(f);var m=yr(f)?O(f):i,b=m?m[0]:f.charAt(0),P=m?ha(m,1).join(""):f.slice(1);return b[u]()+P}}function Qs(u){return function(f){return yu(I_(O_(f).replace(hu,"")),u,"")}}function Nu(u){return function(){var f=arguments;switch(f.length){case 0:return new u;case 1:return new u(f[0]);case 2:return new u(f[0],f[1]);case 3:return new u(f[0],f[1],f[2]);case 4:return new u(f[0],f[1],f[2],f[3]);case 5:return new u(f[0],f[1],f[2],f[3],f[4]);case 6:return new u(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new u(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var m=Ys(u.prototype),b=u.apply(m,f);return Ht(b)?b:m}}function JA(u,f,m){var b=Nu(u);function P(){for(var N=arguments.length,Q=D(N),ne=N,he=Js(P);ne--;)Q[ne]=arguments[ne];var Oe=N<3&&Q[0]!==he&&Q[N-1]!==he?[]:Zi(Q,he);if(N-=Oe.length,N<m)return U0(u,f,Uc,P.placeholder,i,Q,Oe,i,i,m-N);var Ie=this&&this!==sr&&this instanceof P?b:u;return Er(Ie,this,Q)}return P}function L0(u){return function(f,m,b){var P=we(f);if(!Qr(f)){var N=Je(m,3);f=lr(f),m=function(ne){return N(P[ne],ne,P)}}var Q=u(f,m,b);return Q>-1?P[N?f[Q]:Q]:i}}function M0(u){return kn(function(f){var m=f.length,b=m,P=_i.prototype.thru;for(u&&f.reverse();b--;){var N=f[b];if(typeof N!="function")throw new At(s);if(P&&!Q&&Hc(N)=="wrapper")var Q=new _i([],!0)}for(b=Q?b:m;++b<m;){N=f[b];var ne=Hc(N),he=ne=="wrapper"?cp(N):i;he&&pp(he[0])&&he[1]==(fe|Z|j|Y)&&!he[4].length&&he[9]==1?Q=Q[Hc(he[0])].apply(Q,he[3]):Q=N.length==1&&pp(N)?Q[ne]():Q.thru(N)}return function(){var Oe=arguments,Ie=Oe[0];if(Q&&Oe.length==1&&nt(Ie))return Q.plant(Ie).value();for(var Me=0,He=m?f[Me].apply(this,Oe):Ie;++Me<m;)He=f[Me].call(this,He);return He}})}function Uc(u,f,m,b,P,N,Q,ne,he,Oe){var Ie=f&fe,Me=f&x,He=f&I,ze=f&(Z|W),Ze=f&oe,st=He?i:Nu(u);function et(){for(var ht=arguments.length,gt=D(ht),ci=ht;ci--;)gt[ci]=arguments[ci];if(ze)var Nr=Js(et),fi=Lh(gt,Nr);if(b&&(gt=P0(gt,b,P,ze)),N&&(gt=O0(gt,N,Q,ze)),ht-=fi,ze&&ht<Oe){var Qt=Zi(gt,Nr);return U0(u,f,Uc,et.placeholder,m,gt,Qt,ne,he,Oe-ht)}var Mi=Me?m:this,Fn=He?Mi[u]:u;return ht=gt.length,ne?gt=yP(gt,ne):Ze&&ht>1&&gt.reverse(),Ie&&he<ht&&(gt.length=he),this&&this!==sr&&this instanceof et&&(Fn=st||Nu(Fn)),Fn.apply(Mi,gt)}return et}function N0(u,f){return function(m,b){return RA(m,u,f(b),{})}}function Bc(u,f){return function(m,b){var P;if(m===i&&b===i)return f;if(m!==i&&(P=m),b!==i){if(P===i)return b;typeof m=="string"||typeof b=="string"?(m=ui(m),b=ui(b)):(m=b0(m),b=b0(b)),P=u(m,b)}return P}}function sp(u){return kn(function(f){return f=Lt(f,kr(Je())),lt(function(m){var b=this;return u(f,function(P){return Er(P,b,m)})})})}function jc(u,f){f=f===i?" ":ui(f);var m=f.length;if(m<2)return m?Zh(f,u):f;var b=Zh(f,Rc(u/Rn(f)));return yr(f)?ha(O(b),0,u).join(""):b.slice(0,u)}function ZA(u,f,m,b){var P=f&x,N=Nu(u);function Q(){for(var ne=-1,he=arguments.length,Oe=-1,Ie=b.length,Me=D(Ie+he),He=this&&this!==sr&&this instanceof Q?N:u;++Oe<Ie;)Me[Oe]=b[Oe];for(;he--;)Me[Oe++]=arguments[++ne];return Er(He,P?m:this,Me)}return Q}function F0(u){return function(f,m,b){return b&&typeof b!="number"&&Mr(f,m,b)&&(m=b=i),f=Nn(f),m===i?(m=f,f=0):m=Nn(m),b=b===i?f<m?1:-1:Nn(b),UA(f,m,b,u)}}function Vc(u){return function(f,m){return typeof f=="string"&&typeof m=="string"||(f=xi(f),m=xi(m)),u(f,m)}}function U0(u,f,m,b,P,N,Q,ne,he,Oe){var Ie=f&Z,Me=Ie?Q:i,He=Ie?i:Q,ze=Ie?N:i,Ze=Ie?i:N;f|=Ie?j:le,f&=~(Ie?le:j),f&H||(f&=~(x|I));var st=[u,f,P,ze,Me,Ze,He,ne,he,Oe],et=m.apply(i,st);return pp(u)&&X0(et,st),et.placeholder=b,Q0(et,u,f)}function op(u){var f=Be[u];return function(m,b){if(m=xi(m),b=b==null?0:Cr(at(b),292),b&&Qy(m)){var P=(Ct(m)+"e").split("e"),N=f(P[0]+"e"+(+P[1]+b));return P=(Ct(N)+"e").split("e"),+(P[0]+"e"+(+P[1]-b))}return f(m)}}var eP=qs&&1/zs(new qs([,-0]))[1]==Fe?function(u){return new qs(u)}:Pp;function B0(u){return function(f){var m=Rr(f);return m==U?Eu(f):m==ue?Nh(f):kh(f,u(f))}}function Dn(u,f,m,b,P,N,Q,ne){var he=f&I;if(!he&&typeof u!="function")throw new At(s);var Oe=b?b.length:0;if(Oe||(f&=~(j|le),b=P=i),Q=Q===i?Q:or(at(Q),0),ne=ne===i?ne:at(ne),Oe-=P?P.length:0,f&le){var Ie=b,Me=P;b=P=i}var He=he?i:cp(u),ze=[u,f,m,b,P,Ie,Me,N,Q,ne];if(He&&mP(ze,He),u=ze[0],f=ze[1],m=ze[2],b=ze[3],P=ze[4],ne=ze[9]=ze[9]===i?he?0:u.length:or(ze[9]-Oe,0),!ne&&f&(Z|W)&&(f&=~(Z|W)),!f||f==x)var Ze=QA(u,f,m);else f==Z||f==W?Ze=JA(u,f,ne):(f==j||f==(x|j))&&!P.length?Ze=ZA(u,f,m,b):Ze=Uc.apply(i,ze);var st=He?_0:X0;return Q0(st(Ze,ze),u,f)}function j0(u,f,m,b){return u===i||Li(u,wn[m])&&!bt.call(b,m)?f:u}function V0(u,f,m,b,P,N){return Ht(u)&&Ht(f)&&(N.set(f,u),Lc(u,f,i,V0,N),N.delete(f)),u}function tP(u){return Bu(u)?i:u}function H0(u,f,m,b,P,N){var Q=m&S,ne=u.length,he=f.length;if(ne!=he&&!(Q&&he>ne))return!1;var Oe=N.get(u),Ie=N.get(f);if(Oe&&Ie)return Oe==f&&Ie==u;var Me=-1,He=!0,ze=m&C?new Ya:i;for(N.set(u,f),N.set(f,u);++Me<ne;){var Ze=u[Me],st=f[Me];if(b)var et=Q?b(st,Ze,Me,f,u,N):b(Ze,st,Me,u,f,N);if(et!==i){if(et)continue;He=!1;break}if(ze){if(!_u(f,function(ht,gt){if(!Wa(ze,gt)&&(Ze===ht||P(Ze,ht,m,b,N)))return ze.push(gt)})){He=!1;break}}else if(!(Ze===st||P(Ze,st,m,b,N))){He=!1;break}}return N.delete(u),N.delete(f),He}function rP(u,f,m,b,P,N,Q){switch(m){case tt:if(u.byteLength!=f.byteLength||u.byteOffset!=f.byteOffset)return!1;u=u.buffer,f=f.buffer;case Ge:return!(u.byteLength!=f.byteLength||!N(new Sc(u),new Sc(f)));case ie:case B:case ae:return Li(+u,+f);case Ee:return u.name==f.name&&u.message==f.message;case X:case _e:return u==f+"";case U:var ne=Eu;case ue:var he=b&S;if(ne||(ne=zs),u.size!=f.size&&!he)return!1;var Oe=Q.get(u);if(Oe)return Oe==f;b|=C,Q.set(u,f);var Ie=H0(ne(u),ne(f),b,P,N,Q);return Q.delete(u),Ie;case Re:if(Ou)return Ou.call(u)==Ou.call(f)}return!1}function iP(u,f,m,b,P,N){var Q=m&S,ne=up(u),he=ne.length,Oe=up(f),Ie=Oe.length;if(he!=Ie&&!Q)return!1;for(var Me=he;Me--;){var He=ne[Me];if(!(Q?He in f:bt.call(f,He)))return!1}var ze=N.get(u),Ze=N.get(f);if(ze&&Ze)return ze==f&&Ze==u;var st=!0;N.set(u,f),N.set(f,u);for(var et=Q;++Me<he;){He=ne[Me];var ht=u[He],gt=f[He];if(b)var ci=Q?b(gt,ht,He,f,u,N):b(ht,gt,He,u,f,N);if(!(ci===i?ht===gt||P(ht,gt,m,b,N):ci)){st=!1;break}et||(et=He=="constructor")}if(st&&!et){var Nr=u.constructor,fi=f.constructor;Nr!=fi&&"constructor"in u&&"constructor"in f&&!(typeof Nr=="function"&&Nr instanceof Nr&&typeof fi=="function"&&fi instanceof fi)&&(st=!1)}return N.delete(u),N.delete(f),st}function kn(u){return gp(K0(u,i,i_),u+"")}function up(u){return u0(u,lr,dp)}function lp(u){return u0(u,Jr,W0)}var cp=Ac?function(u){return Ac.get(u)}:Pp;function Hc(u){for(var f=u.name+"",m=Ks[f],b=bt.call(Ks,f)?m.length:0;b--;){var P=m[b],N=P.func;if(N==null||N==u)return P.name}return f}function Js(u){var f=bt.call(k,"placeholder")?k:u;return f.placeholder}function Je(){var u=k.iteratee||wp;return u=u===wp?f0:u,arguments.length?u(arguments[0],arguments[1]):u}function Wc(u,f){var m=u.__data__;return fP(f)?m[typeof f=="string"?"string":"hash"]:m.map}function fp(u){for(var f=lr(u),m=f.length;m--;){var b=f[m],P=u[b];f[m]=[b,P,z0(P)]}return f}function Ja(u,f){var m=vr(u,f);return c0(m)?m:i}function nP(u){var f=bt.call(u,qa),m=u[qa];try{u[qa]=i;var b=!0}catch{}var P=za.call(u);return b&&(f?u[qa]=m:delete u[qa]),P}var dp=Bh?function(u){return u==null?[]:(u=we(u),Yr(Bh(u),function(f){return Yy.call(u,f)}))}:Op,W0=Bh?function(u){for(var f=[];u;)Ji(f,dp(u)),u=xc(u);return f}:Op,Rr=Lr;(jh&&Rr(new jh(new ArrayBuffer(1)))!=tt||wu&&Rr(new wu)!=U||Vh&&Rr(Vh.resolve())!=ve||qs&&Rr(new qs)!=ue||Au&&Rr(new Au)!=Ne)&&(Rr=function(u){var f=Lr(u),m=f==G?u.constructor:i,b=m?Za(m):"";if(b)switch(b){case jw:return tt;case Vw:return U;case Hw:return ve;case Ww:return ue;case $w:return Ne}return f});function aP(u,f,m){for(var b=-1,P=m.length;++b<P;){var N=m[b],Q=N.size;switch(N.type){case"drop":u+=Q;break;case"dropRight":f-=Q;break;case"take":f=Cr(f,u+Q);break;case"takeRight":u=or(u,f-Q);break}}return{start:u,end:f}}function sP(u){var f=u.match(dt);return f?f[1].split(Pi):[]}function $0(u,f,m){f=da(f,u);for(var b=-1,P=f.length,N=!1;++b<P;){var Q=rn(f[b]);if(!(N=u!=null&&m(u,Q)))break;u=u[Q]}return N||++b!=P?N:(P=u==null?0:u.length,!!P&&Xc(P)&&Ln(Q,P)&&(nt(u)||es(u)))}function oP(u){var f=u.length,m=new u.constructor(f);return f&&typeof u[0]=="string"&&bt.call(u,"index")&&(m.index=u.index,m.input=u.input),m}function G0(u){return typeof u.constructor=="function"&&!Fu(u)?Ys(xc(u)):{}}function uP(u,f,m){var b=u.constructor;switch(f){case Ge:return ap(u);case ie:case B:return new b(+u);case tt:return GA(u,m);case Xe:case ut:case qe:case Pt:case gr:case $t:case ur:case Tt:case Ot:return w0(u,m);case U:return new b;case ae:case _e:return new b(u);case X:return zA(u);case ue:return new b;case Re:return qA(u)}}function lP(u,f){var m=f.length;if(!m)return u;var b=m-1;return f[b]=(m>1?"& ":"")+f[b],f=f.join(m>2?", ":" "),u.replace(Gt,`{
/* [wrapped with `+f+`] */
`)}function cP(u){return nt(u)||es(u)||!!(Xy&&u&&u[Xy])}function Ln(u,f){var m=typeof u;return f=f==null?ge:f,!!f&&(m=="number"||m!="symbol"&&zl.test(u))&&u>-1&&u%1==0&&u<f}function Mr(u,f,m){if(!Ht(m))return!1;var b=typeof f;return(b=="number"?Qr(m)&&Ln(f,m.length):b=="string"&&f in m)?Li(m[f],u):!1}function hp(u,f){if(nt(u))return!1;var m=typeof u;return m=="number"||m=="symbol"||m=="boolean"||u==null||li(u)?!0:yn.test(u)||!Ds.test(u)||f!=null&&u in we(f)}function fP(u){var f=typeof u;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?u!=="__proto__":u===null}function pp(u){var f=Hc(u),m=k[f];if(typeof m!="function"||!(f in mt.prototype))return!1;if(u===m)return!0;var b=cp(m);return!!b&&u===b[0]}function dP(u){return!!Bt&&Bt in u}var hP=$a?Mn:Ip;function Fu(u){var f=u&&u.constructor,m=typeof f=="function"&&f.prototype||wn;return u===m}function z0(u){return u===u&&!Ht(u)}function q0(u,f){return function(m){return m==null?!1:m[u]===f&&(f!==i||u in we(m))}}function pP(u){var f=Kc(u,function(b){return m.size===c&&m.clear(),b}),m=f.cache;return f}function mP(u,f){var m=u[1],b=f[1],P=m|b,N=P<(x|I|fe),Q=b==fe&&m==Z||b==fe&&m==Y&&u[7].length<=f[8]||b==(fe|Y)&&f[7].length<=f[8]&&m==Z;if(!(N||Q))return u;b&x&&(u[2]=f[2],P|=m&x?0:H);var ne=f[3];if(ne){var he=u[3];u[3]=he?P0(he,ne,f[4]):ne,u[4]=he?Zi(u[3],d):f[4]}return ne=f[5],ne&&(he=u[5],u[5]=he?O0(he,ne,f[6]):ne,u[6]=he?Zi(u[5],d):f[6]),ne=f[7],ne&&(u[7]=ne),b&fe&&(u[8]=u[8]==null?f[8]:Cr(u[8],f[8])),u[9]==null&&(u[9]=f[9]),u[0]=f[0],u[1]=P,u}function gP(u){var f=[];if(u!=null)for(var m in we(u))f.push(m);return f}function vP(u){return za.call(u)}function K0(u,f,m){return f=or(f===i?u.length-1:f,0),function(){for(var b=arguments,P=-1,N=or(b.length-f,0),Q=D(N);++P<N;)Q[P]=b[f+P];P=-1;for(var ne=D(f+1);++P<f;)ne[P]=b[P];return ne[f]=m(Q),Er(u,this,ne)}}function Y0(u,f){return f.length<2?u:Qa(u,bi(f,0,-1))}function yP(u,f){for(var m=u.length,b=Cr(f.length,m),P=Xr(u);b--;){var N=f[b];u[b]=Ln(N,m)?P[N]:i}return u}function mp(u,f){if(!(f==="constructor"&&typeof u[f]=="function")&&f!="__proto__")return u[f]}var X0=J0(_0),Uu=kw||function(u,f){return sr.setTimeout(u,f)},gp=J0(VA);function Q0(u,f,m){var b=f+"";return gp(u,lP(b,_P(sP(b),m)))}function J0(u){var f=0,m=0;return function(){var b=Fw(),P=Se-(b-m);if(m=b,P>0){if(++f>=de)return arguments[0]}else f=0;return u.apply(i,arguments)}}function $c(u,f){var m=-1,b=u.length,P=b-1;for(f=f===i?b:f;++m<f;){var N=Jh(m,P),Q=u[N];u[N]=u[m],u[m]=Q}return u.length=f,u}var Z0=pP(function(u){var f=[];return u.charCodeAt(0)===46&&f.push(""),u.replace(nr,function(m,b,P,N){f.push(P?N.replace(nu,"$1"):b||m)}),f});function rn(u){if(typeof u=="string"||li(u))return u;var f=u+"";return f=="0"&&1/u==-Fe?"-0":f}function Za(u){if(u!=null){try{return Ga.call(u)}catch{}try{return u+""}catch{}}return""}function _P(u,f){return Dr(xe,function(m){var b="_."+m[0];f&m[1]&&!Vs(u,b)&&u.push(b)}),u.sort()}function e_(u){if(u instanceof mt)return u.clone();var f=new _i(u.__wrapped__,u.__chain__);return f.__actions__=Xr(u.__actions__),f.__index__=u.__index__,f.__values__=u.__values__,f}function TP(u,f,m){(m?Mr(u,f,m):f===i)?f=1:f=or(at(f),0);var b=u==null?0:u.length;if(!b||f<1)return[];for(var P=0,N=0,Q=D(Rc(b/f));P<b;)Q[N++]=bi(u,P,P+=f);return Q}function bP(u){for(var f=-1,m=u==null?0:u.length,b=0,P=[];++f<m;){var N=u[f];N&&(P[b++]=N)}return P}function SP(){var u=arguments.length;if(!u)return[];for(var f=D(u-1),m=arguments[0],b=u;b--;)f[b-1]=arguments[b];return Ji(nt(m)?Xr(m):[m],_r(f,1))}var xP=lt(function(u,f){return Xt(u)?Du(u,_r(f,1,Xt,!0)):[]}),EP=lt(function(u,f){var m=Si(f);return Xt(m)&&(m=i),Xt(u)?Du(u,_r(f,1,Xt,!0),Je(m,2)):[]}),CP=lt(function(u,f){var m=Si(f);return Xt(m)&&(m=i),Xt(u)?Du(u,_r(f,1,Xt,!0),i,m):[]});function RP(u,f,m){var b=u==null?0:u.length;return b?(f=m||f===i?1:at(f),bi(u,f<0?0:f,b)):[]}function wP(u,f,m){var b=u==null?0:u.length;return b?(f=m||f===i?1:at(f),f=b-f,bi(u,0,f<0?0:f)):[]}function AP(u,f){return u&&u.length?Nc(u,Je(f,3),!0,!0):[]}function PP(u,f){return u&&u.length?Nc(u,Je(f,3),!0):[]}function OP(u,f,m,b){var P=u==null?0:u.length;return P?(m&&typeof m!="number"&&Mr(u,f,m)&&(m=0,b=P),SA(u,f,m,b)):[]}function t_(u,f,m){var b=u==null?0:u.length;if(!b)return-1;var P=m==null?0:at(m);return P<0&&(P=or(b+P,0)),Ws(u,Je(f,3),P)}function r_(u,f,m){var b=u==null?0:u.length;if(!b)return-1;var P=b-1;return m!==i&&(P=at(m),P=m<0?or(b+P,0):Cr(P,b-1)),Ws(u,Je(f,3),P,!0)}function i_(u){var f=u==null?0:u.length;return f?_r(u,1):[]}function IP(u){var f=u==null?0:u.length;return f?_r(u,Fe):[]}function DP(u,f){var m=u==null?0:u.length;return m?(f=f===i?1:at(f),_r(u,f)):[]}function kP(u){for(var f=-1,m=u==null?0:u.length,b={};++f<m;){var P=u[f];b[P[0]]=P[1]}return b}function n_(u){return u&&u.length?u[0]:i}function LP(u,f,m){var b=u==null?0:u.length;if(!b)return-1;var P=m==null?0:at(m);return P<0&&(P=or(b+P,0)),En(u,f,P)}function MP(u){var f=u==null?0:u.length;return f?bi(u,0,-1):[]}var NP=lt(function(u){var f=Lt(u,ip);return f.length&&f[0]===u[0]?qh(f):[]}),FP=lt(function(u){var f=Si(u),m=Lt(u,ip);return f===Si(m)?f=i:m.pop(),m.length&&m[0]===u[0]?qh(m,Je(f,2)):[]}),UP=lt(function(u){var f=Si(u),m=Lt(u,ip);return f=typeof f=="function"?f:i,f&&m.pop(),m.length&&m[0]===u[0]?qh(m,i,f):[]});function BP(u,f){return u==null?"":Mw.call(u,f)}function Si(u){var f=u==null?0:u.length;return f?u[f-1]:i}function jP(u,f,m){var b=u==null?0:u.length;if(!b)return-1;var P=b;return m!==i&&(P=at(m),P=P<0?or(b+P,0):Cr(P,b-1)),f===f?Uh(u,f,P):Ws(u,Tu,P,!0)}function VP(u,f){return u&&u.length?m0(u,at(f)):i}var HP=lt(a_);function a_(u,f){return u&&u.length&&f&&f.length?Qh(u,f):u}function WP(u,f,m){return u&&u.length&&f&&f.length?Qh(u,f,Je(m,2)):u}function $P(u,f,m){return u&&u.length&&f&&f.length?Qh(u,f,i,m):u}var GP=kn(function(u,f){var m=u==null?0:u.length,b=Wh(u,f);return y0(u,Lt(f,function(P){return Ln(P,m)?+P:P}).sort(A0)),b});function zP(u,f){var m=[];if(!(u&&u.length))return m;var b=-1,P=[],N=u.length;for(f=Je(f,3);++b<N;){var Q=u[b];f(Q,b,u)&&(m.push(Q),P.push(b))}return y0(u,P),m}function vp(u){return u==null?u:Bw.call(u)}function qP(u,f,m){var b=u==null?0:u.length;return b?(m&&typeof m!="number"&&Mr(u,f,m)?(f=0,m=b):(f=f==null?0:at(f),m=m===i?b:at(m)),bi(u,f,m)):[]}function KP(u,f){return Mc(u,f)}function YP(u,f,m){return ep(u,f,Je(m,2))}function XP(u,f){var m=u==null?0:u.length;if(m){var b=Mc(u,f);if(b<m&&Li(u[b],f))return b}return-1}function QP(u,f){return Mc(u,f,!0)}function JP(u,f,m){return ep(u,f,Je(m,2),!0)}function ZP(u,f){var m=u==null?0:u.length;if(m){var b=Mc(u,f,!0)-1;if(Li(u[b],f))return b}return-1}function eO(u){return u&&u.length?T0(u):[]}function tO(u,f){return u&&u.length?T0(u,Je(f,2)):[]}function rO(u){var f=u==null?0:u.length;return f?bi(u,1,f):[]}function iO(u,f,m){return u&&u.length?(f=m||f===i?1:at(f),bi(u,0,f<0?0:f)):[]}function nO(u,f,m){var b=u==null?0:u.length;return b?(f=m||f===i?1:at(f),f=b-f,bi(u,f<0?0:f,b)):[]}function aO(u,f){return u&&u.length?Nc(u,Je(f,3),!1,!0):[]}function sO(u,f){return u&&u.length?Nc(u,Je(f,3)):[]}var oO=lt(function(u){return fa(_r(u,1,Xt,!0))}),uO=lt(function(u){var f=Si(u);return Xt(f)&&(f=i),fa(_r(u,1,Xt,!0),Je(f,2))}),lO=lt(function(u){var f=Si(u);return f=typeof f=="function"?f:i,fa(_r(u,1,Xt,!0),i,f)});function cO(u){return u&&u.length?fa(u):[]}function fO(u,f){return u&&u.length?fa(u,Je(f,2)):[]}function dO(u,f){return f=typeof f=="function"?f:i,u&&u.length?fa(u,i,f):[]}function yp(u){if(!(u&&u.length))return[];var f=0;return u=Yr(u,function(m){if(Xt(m))return f=or(m.length,f),!0}),oa(f,function(m){return Lt(u,$s(m))})}function s_(u,f){if(!(u&&u.length))return[];var m=yp(u);return f==null?m:Lt(m,function(b){return Er(f,i,b)})}var hO=lt(function(u,f){return Xt(u)?Du(u,f):[]}),pO=lt(function(u){return rp(Yr(u,Xt))}),mO=lt(function(u){var f=Si(u);return Xt(f)&&(f=i),rp(Yr(u,Xt),Je(f,2))}),gO=lt(function(u){var f=Si(u);return f=typeof f=="function"?f:i,rp(Yr(u,Xt),i,f)}),vO=lt(yp);function yO(u,f){return E0(u||[],f||[],Iu)}function _O(u,f){return E0(u||[],f||[],Mu)}var TO=lt(function(u){var f=u.length,m=f>1?u[f-1]:i;return m=typeof m=="function"?(u.pop(),m):i,s_(u,m)});function o_(u){var f=k(u);return f.__chain__=!0,f}function bO(u,f){return f(u),u}function Gc(u,f){return f(u)}var SO=kn(function(u){var f=u.length,m=f?u[0]:0,b=this.__wrapped__,P=function(N){return Wh(N,u)};return f>1||this.__actions__.length||!(b instanceof mt)||!Ln(m)?this.thru(P):(b=b.slice(m,+m+(f?1:0)),b.__actions__.push({func:Gc,args:[P],thisArg:i}),new _i(b,this.__chain__).thru(function(N){return f&&!N.length&&N.push(i),N}))});function xO(){return o_(this)}function EO(){return new _i(this.value(),this.__chain__)}function CO(){this.__values__===i&&(this.__values__=b_(this.value()));var u=this.__index__>=this.__values__.length,f=u?i:this.__values__[this.__index__++];return{done:u,value:f}}function RO(){return this}function wO(u){for(var f,m=this;m instanceof Oc;){var b=e_(m);b.__index__=0,b.__values__=i,f?P.__wrapped__=b:f=b;var P=b;m=m.__wrapped__}return P.__wrapped__=u,f}function AO(){var u=this.__wrapped__;if(u instanceof mt){var f=u;return this.__actions__.length&&(f=new mt(this)),f=f.reverse(),f.__actions__.push({func:Gc,args:[vp],thisArg:i}),new _i(f,this.__chain__)}return this.thru(vp)}function PO(){return x0(this.__wrapped__,this.__actions__)}var OO=Fc(function(u,f,m){bt.call(u,m)?++u[m]:In(u,m,1)});function IO(u,f,m){var b=nt(u)?na:bA;return m&&Mr(u,f,m)&&(f=i),b(u,Je(f,3))}function DO(u,f){var m=nt(u)?Yr:s0;return m(u,Je(f,3))}var kO=L0(t_),LO=L0(r_);function MO(u,f){return _r(zc(u,f),1)}function NO(u,f){return _r(zc(u,f),Fe)}function FO(u,f,m){return m=m===i?1:at(m),_r(zc(u,f),m)}function u_(u,f){var m=nt(u)?Dr:ca;return m(u,Je(f,3))}function l_(u,f){var m=nt(u)?hc:a0;return m(u,Je(f,3))}var UO=Fc(function(u,f,m){bt.call(u,m)?u[m].push(f):In(u,m,[f])});function BO(u,f,m,b){u=Qr(u)?u:eo(u),m=m&&!b?at(m):0;var P=u.length;return m<0&&(m=or(P+m,0)),Qc(u)?m<=P&&u.indexOf(f,m)>-1:!!P&&En(u,f,m)>-1}var jO=lt(function(u,f,m){var b=-1,P=typeof f=="function",N=Qr(u)?D(u.length):[];return ca(u,function(Q){N[++b]=P?Er(f,Q,m):ku(Q,f,m)}),N}),VO=Fc(function(u,f,m){In(u,m,f)});function zc(u,f){var m=nt(u)?Lt:d0;return m(u,Je(f,3))}function HO(u,f,m,b){return u==null?[]:(nt(f)||(f=f==null?[]:[f]),m=b?i:m,nt(m)||(m=m==null?[]:[m]),g0(u,f,m))}var WO=Fc(function(u,f,m){u[m?0:1].push(f)},function(){return[[],[]]});function $O(u,f,m){var b=nt(u)?yu:Su,P=arguments.length<3;return b(u,Je(f,4),m,P,ca)}function GO(u,f,m){var b=nt(u)?Oh:Su,P=arguments.length<3;return b(u,Je(f,4),m,P,a0)}function zO(u,f){var m=nt(u)?Yr:s0;return m(u,Yc(Je(f,3)))}function qO(u){var f=nt(u)?t0:BA;return f(u)}function KO(u,f,m){(m?Mr(u,f,m):f===i)?f=1:f=at(f);var b=nt(u)?gA:jA;return b(u,f)}function YO(u){var f=nt(u)?vA:HA;return f(u)}function XO(u){if(u==null)return 0;if(Qr(u))return Qc(u)?Rn(u):u.length;var f=Rr(u);return f==U||f==ue?u.size:Yh(u).length}function QO(u,f,m){var b=nt(u)?_u:WA;return m&&Mr(u,f,m)&&(f=i),b(u,Je(f,3))}var JO=lt(function(u,f){if(u==null)return[];var m=f.length;return m>1&&Mr(u,f[0],f[1])?f=[]:m>2&&Mr(f[0],f[1],f[2])&&(f=[f[0]]),g0(u,_r(f,1),[])}),qc=Dw||function(){return sr.Date.now()};function ZO(u,f){if(typeof f!="function")throw new At(s);return u=at(u),function(){if(--u<1)return f.apply(this,arguments)}}function c_(u,f,m){return f=m?i:f,f=u&&f==null?u.length:f,Dn(u,fe,i,i,i,i,f)}function f_(u,f){var m;if(typeof f!="function")throw new At(s);return u=at(u),function(){return--u>0&&(m=f.apply(this,arguments)),u<=1&&(f=i),m}}var _p=lt(function(u,f,m){var b=x;if(m.length){var P=Zi(m,Js(_p));b|=j}return Dn(u,b,f,m,P)}),d_=lt(function(u,f,m){var b=x|I;if(m.length){var P=Zi(m,Js(d_));b|=j}return Dn(f,b,u,m,P)});function h_(u,f,m){f=m?i:f;var b=Dn(u,Z,i,i,i,i,i,f);return b.placeholder=h_.placeholder,b}function p_(u,f,m){f=m?i:f;var b=Dn(u,W,i,i,i,i,i,f);return b.placeholder=p_.placeholder,b}function m_(u,f,m){var b,P,N,Q,ne,he,Oe=0,Ie=!1,Me=!1,He=!0;if(typeof u!="function")throw new At(s);f=xi(f)||0,Ht(m)&&(Ie=!!m.leading,Me="maxWait"in m,N=Me?or(xi(m.maxWait)||0,f):N,He="trailing"in m?!!m.trailing:He);function ze(Qt){var Mi=b,Fn=P;return b=P=i,Oe=Qt,Q=u.apply(Fn,Mi),Q}function Ze(Qt){return Oe=Qt,ne=Uu(ht,f),Ie?ze(Qt):Q}function st(Qt){var Mi=Qt-he,Fn=Qt-Oe,L_=f-Mi;return Me?Cr(L_,N-Fn):L_}function et(Qt){var Mi=Qt-he,Fn=Qt-Oe;return he===i||Mi>=f||Mi<0||Me&&Fn>=N}function ht(){var Qt=qc();if(et(Qt))return gt(Qt);ne=Uu(ht,st(Qt))}function gt(Qt){return ne=i,He&&b?ze(Qt):(b=P=i,Q)}function ci(){ne!==i&&C0(ne),Oe=0,b=he=P=ne=i}function Nr(){return ne===i?Q:gt(qc())}function fi(){var Qt=qc(),Mi=et(Qt);if(b=arguments,P=this,he=Qt,Mi){if(ne===i)return Ze(he);if(Me)return C0(ne),ne=Uu(ht,f),ze(he)}return ne===i&&(ne=Uu(ht,f)),Q}return fi.cancel=ci,fi.flush=Nr,fi}var eI=lt(function(u,f){return n0(u,1,f)}),tI=lt(function(u,f,m){return n0(u,xi(f)||0,m)});function rI(u){return Dn(u,oe)}function Kc(u,f){if(typeof u!="function"||f!=null&&typeof f!="function")throw new At(s);var m=function(){var b=arguments,P=f?f.apply(this,b):b[0],N=m.cache;if(N.has(P))return N.get(P);var Q=u.apply(this,b);return m.cache=N.set(P,Q)||N,Q};return m.cache=new(Kc.Cache||On),m}Kc.Cache=On;function Yc(u){if(typeof u!="function")throw new At(s);return function(){var f=arguments;switch(f.length){case 0:return!u.call(this);case 1:return!u.call(this,f[0]);case 2:return!u.call(this,f[0],f[1]);case 3:return!u.call(this,f[0],f[1],f[2])}return!u.apply(this,f)}}function iI(u){return f_(2,u)}var nI=$A(function(u,f){f=f.length==1&&nt(f[0])?Lt(f[0],kr(Je())):Lt(_r(f,1),kr(Je()));var m=f.length;return lt(function(b){for(var P=-1,N=Cr(b.length,m);++P<N;)b[P]=f[P].call(this,b[P]);return Er(u,this,b)})}),Tp=lt(function(u,f){var m=Zi(f,Js(Tp));return Dn(u,j,i,f,m)}),g_=lt(function(u,f){var m=Zi(f,Js(g_));return Dn(u,le,i,f,m)}),aI=kn(function(u,f){return Dn(u,Y,i,i,i,f)});function sI(u,f){if(typeof u!="function")throw new At(s);return f=f===i?f:at(f),lt(u,f)}function oI(u,f){if(typeof u!="function")throw new At(s);return f=f==null?0:or(at(f),0),lt(function(m){var b=m[f],P=ha(m,0,f);return b&&Ji(P,b),Er(u,this,P)})}function uI(u,f,m){var b=!0,P=!0;if(typeof u!="function")throw new At(s);return Ht(m)&&(b="leading"in m?!!m.leading:b,P="trailing"in m?!!m.trailing:P),m_(u,f,{leading:b,maxWait:f,trailing:P})}function lI(u){return c_(u,1)}function cI(u,f){return Tp(np(f),u)}function fI(){if(!arguments.length)return[];var u=arguments[0];return nt(u)?u:[u]}function dI(u){return Ti(u,y)}function hI(u,f){return f=typeof f=="function"?f:i,Ti(u,y,f)}function pI(u){return Ti(u,h|y)}function mI(u,f){return f=typeof f=="function"?f:i,Ti(u,h|y,f)}function gI(u,f){return f==null||i0(u,f,lr(f))}function Li(u,f){return u===f||u!==u&&f!==f}var vI=Vc(zh),yI=Vc(function(u,f){return u>=f}),es=l0(function(){return arguments}())?l0:function(u){return zt(u)&&bt.call(u,"callee")&&!Yy.call(u,"callee")},nt=D.isArray,_I=lc?kr(lc):wA;function Qr(u){return u!=null&&Xc(u.length)&&!Mn(u)}function Xt(u){return zt(u)&&Qr(u)}function TI(u){return u===!0||u===!1||zt(u)&&Lr(u)==ie}var pa=Lw||Ip,bI=cc?kr(cc):AA;function SI(u){return zt(u)&&u.nodeType===1&&!Bu(u)}function xI(u){if(u==null)return!0;if(Qr(u)&&(nt(u)||typeof u=="string"||typeof u.splice=="function"||pa(u)||Zs(u)||es(u)))return!u.length;var f=Rr(u);if(f==U||f==ue)return!u.size;if(Fu(u))return!Yh(u).length;for(var m in u)if(bt.call(u,m))return!1;return!0}function EI(u,f){return Lu(u,f)}function CI(u,f,m){m=typeof m=="function"?m:i;var b=m?m(u,f):i;return b===i?Lu(u,f,i,m):!!b}function bp(u){if(!zt(u))return!1;var f=Lr(u);return f==Ee||f==ee||typeof u.message=="string"&&typeof u.name=="string"&&!Bu(u)}function RI(u){return typeof u=="number"&&Qy(u)}function Mn(u){if(!Ht(u))return!1;var f=Lr(u);return f==Ce||f==M||f==J||f==Te}function v_(u){return typeof u=="number"&&u==at(u)}function Xc(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=ge}function Ht(u){var f=typeof u;return u!=null&&(f=="object"||f=="function")}function zt(u){return u!=null&&typeof u=="object"}var y_=mu?kr(mu):OA;function wI(u,f){return u===f||Kh(u,f,fp(f))}function AI(u,f,m){return m=typeof m=="function"?m:i,Kh(u,f,fp(f),m)}function PI(u){return __(u)&&u!=+u}function OI(u){if(hP(u))throw new me(a);return c0(u)}function II(u){return u===null}function DI(u){return u==null}function __(u){return typeof u=="number"||zt(u)&&Lr(u)==ae}function Bu(u){if(!zt(u)||Lr(u)!=G)return!1;var f=xc(u);if(f===null)return!0;var m=bt.call(f,"constructor")&&f.constructor;return typeof m=="function"&&m instanceof m&&Ga.call(m)==An}var Sp=fc?kr(fc):IA;function kI(u){return v_(u)&&u>=-ge&&u<=ge}var T_=gu?kr(gu):DA;function Qc(u){return typeof u=="string"||!nt(u)&&zt(u)&&Lr(u)==_e}function li(u){return typeof u=="symbol"||zt(u)&&Lr(u)==Re}var Zs=dc?kr(dc):kA;function LI(u){return u===i}function MI(u){return zt(u)&&Rr(u)==Ne}function NI(u){return zt(u)&&Lr(u)==$e}var FI=Vc(Xh),UI=Vc(function(u,f){return u<=f});function b_(u){if(!u)return[];if(Qr(u))return Qc(u)?O(u):Xr(u);if(Ru&&u[Ru])return yc(u[Ru]());var f=Rr(u),m=f==U?Eu:f==ue?zs:eo;return m(u)}function Nn(u){if(!u)return u===0?u:0;if(u=xi(u),u===Fe||u===-Fe){var f=u<0?-1:1;return f*Ye}return u===u?u:0}function at(u){var f=Nn(u),m=f%1;return f===f?m?f-m:f:0}function S_(u){return u?Xa(at(u),0,w):0}function xi(u){if(typeof u=="number")return u;if(li(u))return K;if(Ht(u)){var f=typeof u.valueOf=="function"?u.valueOf():u;u=Ht(f)?f+"":f}if(typeof u!="string")return u===0?u:+u;u=gc(u);var m=ar.test(u);return m||mh.test(u)?Ah(u.slice(2),m?2:8):ks.test(u)?K:+u}function x_(u){return tn(u,Jr(u))}function BI(u){return u?Xa(at(u),-ge,ge):u===0?u:0}function Ct(u){return u==null?"":ui(u)}var jI=Xs(function(u,f){if(Fu(f)||Qr(f)){tn(f,lr(f),u);return}for(var m in f)bt.call(f,m)&&Iu(u,m,f[m])}),E_=Xs(function(u,f){tn(f,Jr(f),u)}),Jc=Xs(function(u,f,m,b){tn(f,Jr(f),u,b)}),VI=Xs(function(u,f,m,b){tn(f,lr(f),u,b)}),HI=kn(Wh);function WI(u,f){var m=Ys(u);return f==null?m:r0(m,f)}var $I=lt(function(u,f){u=we(u);var m=-1,b=f.length,P=b>2?f[2]:i;for(P&&Mr(f[0],f[1],P)&&(b=1);++m<b;)for(var N=f[m],Q=Jr(N),ne=-1,he=Q.length;++ne<he;){var Oe=Q[ne],Ie=u[Oe];(Ie===i||Li(Ie,wn[Oe])&&!bt.call(u,Oe))&&(u[Oe]=N[Oe])}return u}),GI=lt(function(u){return u.push(i,V0),Er(C_,i,u)});function zI(u,f){return aa(u,Je(f,3),en)}function qI(u,f){return aa(u,Je(f,3),Gh)}function KI(u,f){return u==null?u:$h(u,Je(f,3),Jr)}function YI(u,f){return u==null?u:o0(u,Je(f,3),Jr)}function XI(u,f){return u&&en(u,Je(f,3))}function QI(u,f){return u&&Gh(u,Je(f,3))}function JI(u){return u==null?[]:kc(u,lr(u))}function ZI(u){return u==null?[]:kc(u,Jr(u))}function xp(u,f,m){var b=u==null?i:Qa(u,f);return b===i?m:b}function eD(u,f){return u!=null&&$0(u,f,xA)}function Ep(u,f){return u!=null&&$0(u,f,EA)}var tD=N0(function(u,f,m){f!=null&&typeof f.toString!="function"&&(f=za.call(f)),u[f]=m},Rp(Zr)),rD=N0(function(u,f,m){f!=null&&typeof f.toString!="function"&&(f=za.call(f)),bt.call(u,f)?u[f].push(m):u[f]=[m]},Je),iD=lt(ku);function lr(u){return Qr(u)?e0(u):Yh(u)}function Jr(u){return Qr(u)?e0(u,!0):LA(u)}function nD(u,f){var m={};return f=Je(f,3),en(u,function(b,P,N){In(m,f(b,P,N),b)}),m}function aD(u,f){var m={};return f=Je(f,3),en(u,function(b,P,N){In(m,P,f(b,P,N))}),m}var sD=Xs(function(u,f,m){Lc(u,f,m)}),C_=Xs(function(u,f,m,b){Lc(u,f,m,b)}),oD=kn(function(u,f){var m={};if(u==null)return m;var b=!1;f=Lt(f,function(N){return N=da(N,u),b||(b=N.length>1),N}),tn(u,lp(u),m),b&&(m=Ti(m,h|p|y,tP));for(var P=f.length;P--;)tp(m,f[P]);return m});function uD(u,f){return R_(u,Yc(Je(f)))}var lD=kn(function(u,f){return u==null?{}:NA(u,f)});function R_(u,f){if(u==null)return{};var m=Lt(lp(u),function(b){return[b]});return f=Je(f),v0(u,m,function(b,P){return f(b,P[0])})}function cD(u,f,m){f=da(f,u);var b=-1,P=f.length;for(P||(P=1,u=i);++b<P;){var N=u==null?i:u[rn(f[b])];N===i&&(b=P,N=m),u=Mn(N)?N.call(u):N}return u}function fD(u,f,m){return u==null?u:Mu(u,f,m)}function dD(u,f,m,b){return b=typeof b=="function"?b:i,u==null?u:Mu(u,f,m,b)}var w_=B0(lr),A_=B0(Jr);function hD(u,f,m){var b=nt(u),P=b||pa(u)||Zs(u);if(f=Je(f,4),m==null){var N=u&&u.constructor;P?m=b?new N:[]:Ht(u)?m=Mn(N)?Ys(xc(u)):{}:m={}}return(P?Dr:en)(u,function(Q,ne,he){return f(m,Q,ne,he)}),m}function pD(u,f){return u==null?!0:tp(u,f)}function mD(u,f,m){return u==null?u:S0(u,f,np(m))}function gD(u,f,m,b){return b=typeof b=="function"?b:i,u==null?u:S0(u,f,np(m),b)}function eo(u){return u==null?[]:xu(u,lr(u))}function vD(u){return u==null?[]:xu(u,Jr(u))}function yD(u,f,m){return m===i&&(m=f,f=i),m!==i&&(m=xi(m),m=m===m?m:0),f!==i&&(f=xi(f),f=f===f?f:0),Xa(xi(u),f,m)}function _D(u,f,m){return f=Nn(f),m===i?(m=f,f=0):m=Nn(m),u=xi(u),CA(u,f,m)}function TD(u,f,m){if(m&&typeof m!="boolean"&&Mr(u,f,m)&&(f=m=i),m===i&&(typeof f=="boolean"?(m=f,f=i):typeof u=="boolean"&&(m=u,u=i)),u===i&&f===i?(u=0,f=1):(u=Nn(u),f===i?(f=u,u=0):f=Nn(f)),u>f){var b=u;u=f,f=b}if(m||u%1||f%1){var P=Jy();return Cr(u+P*(f-u+wh("1e-"+((P+"").length-1))),f)}return Jh(u,f)}var bD=Qs(function(u,f,m){return f=f.toLowerCase(),u+(m?P_(f):f)});function P_(u){return Cp(Ct(u).toLowerCase())}function O_(u){return u=Ct(u),u&&u.replace(au,ua).replace(Sh,"")}function SD(u,f,m){u=Ct(u),f=ui(f);var b=u.length;m=m===i?b:Xa(at(m),0,b);var P=m;return m-=f.length,m>=0&&u.slice(m,P)==f}function xD(u){return u=Ct(u),u&&iu.test(u)?u.replace(ir,xt):u}function ED(u){return u=Ct(u),u&&qr.test(u)?u.replace(Ft,"\\$&"):u}var CD=Qs(function(u,f,m){return u+(m?"-":"")+f.toLowerCase()}),RD=Qs(function(u,f,m){return u+(m?" ":"")+f.toLowerCase()}),wD=k0("toLowerCase");function AD(u,f,m){u=Ct(u),f=at(f);var b=f?Rn(u):0;if(!f||b>=f)return u;var P=(f-b)/2;return jc(wc(P),m)+u+jc(Rc(P),m)}function PD(u,f,m){u=Ct(u),f=at(f);var b=f?Rn(u):0;return f&&b<f?u+jc(f-b,m):u}function OD(u,f,m){u=Ct(u),f=at(f);var b=f?Rn(u):0;return f&&b<f?jc(f-b,m)+u:u}function ID(u,f,m){return m||f==null?f=0:f&&(f=+f),Uw(Ct(u).replace(Kt,""),f||0)}function DD(u,f,m){return(m?Mr(u,f,m):f===i)?f=1:f=at(f),Zh(Ct(u),f)}function kD(){var u=arguments,f=Ct(u[0]);return u.length<3?f:f.replace(u[1],u[2])}var LD=Qs(function(u,f,m){return u+(m?"_":"")+f.toLowerCase()});function MD(u,f,m){return m&&typeof m!="number"&&Mr(u,f,m)&&(f=m=i),m=m===i?w:m>>>0,m?(u=Ct(u),u&&(typeof f=="string"||f!=null&&!Sp(f))&&(f=ui(f),!f&&yr(u))?ha(O(u),0,m):u.split(f,m)):[]}var ND=Qs(function(u,f,m){return u+(m?" ":"")+Cp(f)});function FD(u,f,m){return u=Ct(u),m=m==null?0:Xa(at(m),0,u.length),f=ui(f),u.slice(m,m+f.length)==f}function UD(u,f,m){var b=k.templateSettings;m&&Mr(u,f,m)&&(f=i),u=Ct(u),f=Jc({},f,b,j0);var P=Jc({},f.imports,b.imports,j0),N=lr(P),Q=xu(P,N),ne,he,Oe=0,Ie=f.interpolate||ka,Me="__p += '",He=Ke((f.escape||ka).source+"|"+Ie.source+"|"+(Ie===Is?Oi:ka).source+"|"+(f.evaluate||ka).source+"|$","g"),ze="//# sourceURL="+(bt.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ia+"]")+`
`;u.replace(He,function(et,ht,gt,ci,Nr,fi){return gt||(gt=ci),Me+=u.slice(Oe,fi).replace(ql,Cn),ht&&(ne=!0,Me+=`' +
__e(`+ht+`) +
'`),Nr&&(he=!0,Me+=`';
`+Nr+`;
__p += '`),gt&&(Me+=`' +
((__t = (`+gt+`)) == null ? '' : __t) +
'`),Oe=fi+et.length,et}),Me+=`';
`;var Ze=bt.call(f,"variable")&&f.variable;if(!Ze)Me=`with (obj) {
`+Me+`
}
`;else if(_n.test(Ze))throw new me(o);Me=(he?Me.replace(Xi,""):Me).replace(Ia,"$1").replace(ru,"$1;"),Me="function("+(Ze||"obj")+`) {
`+(Ze?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ne?", __e = _.escape":"")+(he?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Me+`return __p
}`;var st=D_(function(){return Pe(N,ze+"return "+Me).apply(i,Q)});if(st.source=Me,bp(st))throw st;return st}function BD(u){return Ct(u).toLowerCase()}function jD(u){return Ct(u).toUpperCase()}function VD(u,f,m){if(u=Ct(u),u&&(m||f===i))return gc(u);if(!u||!(f=ui(f)))return u;var b=O(u),P=O(f),N=Gs(b,P),Q=vc(b,P)+1;return ha(b,N,Q).join("")}function HD(u,f,m){if(u=Ct(u),u&&(m||f===i))return u.slice(0,g(u)+1);if(!u||!(f=ui(f)))return u;var b=O(u),P=vc(b,O(f))+1;return ha(b,0,P).join("")}function WD(u,f,m){if(u=Ct(u),u&&(m||f===i))return u.replace(Kt,"");if(!u||!(f=ui(f)))return u;var b=O(u),P=Gs(b,O(f));return ha(b,P).join("")}function $D(u,f){var m=V,b=pe;if(Ht(f)){var P="separator"in f?f.separator:P;m="length"in f?at(f.length):m,b="omission"in f?ui(f.omission):b}u=Ct(u);var N=u.length;if(yr(u)){var Q=O(u);N=Q.length}if(m>=N)return u;var ne=m-Rn(b);if(ne<1)return b;var he=Q?ha(Q,0,ne).join(""):u.slice(0,ne);if(P===i)return he+b;if(Q&&(ne+=he.length-ne),Sp(P)){if(u.slice(ne).search(P)){var Oe,Ie=he;for(P.global||(P=Ke(P.source,Ct(kt.exec(P))+"g")),P.lastIndex=0;Oe=P.exec(Ie);)var Me=Oe.index;he=he.slice(0,Me===i?ne:Me)}}else if(u.indexOf(ui(P),ne)!=ne){var He=he.lastIndexOf(P);He>-1&&(he=he.slice(0,He))}return he+b}function GD(u){return u=Ct(u),u&&vn.test(u)?u.replace(gn,_):u}var zD=Qs(function(u,f,m){return u+(m?" ":"")+f.toUpperCase()}),Cp=k0("toUpperCase");function I_(u,f,m){return u=Ct(u),f=m?i:f,f===i?Mh(u)?E(u):Hs(u):u.match(f)||[]}var D_=lt(function(u,f){try{return Er(u,i,f)}catch(m){return bp(m)?m:new me(m)}}),qD=kn(function(u,f){return Dr(f,function(m){m=rn(m),In(u,m,_p(u[m],u))}),u});function KD(u){var f=u==null?0:u.length,m=Je();return u=f?Lt(u,function(b){if(typeof b[1]!="function")throw new At(s);return[m(b[0]),b[1]]}):[],lt(function(b){for(var P=-1;++P<f;){var N=u[P];if(Er(N[0],this,b))return Er(N[1],this,b)}})}function YD(u){return TA(Ti(u,h))}function Rp(u){return function(){return u}}function XD(u,f){return u==null||u!==u?f:u}var QD=M0(),JD=M0(!0);function Zr(u){return u}function wp(u){return f0(typeof u=="function"?u:Ti(u,h))}function ZD(u){return h0(Ti(u,h))}function ek(u,f){return p0(u,Ti(f,h))}var tk=lt(function(u,f){return function(m){return ku(m,u,f)}}),rk=lt(function(u,f){return function(m){return ku(u,m,f)}});function Ap(u,f,m){var b=lr(f),P=kc(f,b);m==null&&!(Ht(f)&&(P.length||!b.length))&&(m=f,f=u,u=this,P=kc(f,lr(f)));var N=!(Ht(m)&&"chain"in m)||!!m.chain,Q=Mn(u);return Dr(P,function(ne){var he=f[ne];u[ne]=he,Q&&(u.prototype[ne]=function(){var Oe=this.__chain__;if(N||Oe){var Ie=u(this.__wrapped__),Me=Ie.__actions__=Xr(this.__actions__);return Me.push({func:he,args:arguments,thisArg:u}),Ie.__chain__=Oe,Ie}return he.apply(u,Ji([this.value()],arguments))})}),u}function ik(){return sr._===this&&(sr._=Pw),this}function Pp(){}function nk(u){return u=at(u),lt(function(f){return m0(f,u)})}var ak=sp(Lt),sk=sp(na),ok=sp(_u);function k_(u){return hp(u)?$s(rn(u)):FA(u)}function uk(u){return function(f){return u==null?i:Qa(u,f)}}var lk=F0(),ck=F0(!0);function Op(){return[]}function Ip(){return!1}function fk(){return{}}function dk(){return""}function hk(){return!0}function pk(u,f){if(u=at(u),u<1||u>ge)return[];var m=w,b=Cr(u,w);f=Je(f),u-=w;for(var P=oa(b,f);++m<u;)f(m);return P}function mk(u){return nt(u)?Lt(u,rn):li(u)?[u]:Xr(Z0(Ct(u)))}function gk(u){var f=++Tc;return Ct(u)+f}var vk=Bc(function(u,f){return u+f},0),yk=op("ceil"),_k=Bc(function(u,f){return u/f},1),Tk=op("floor");function bk(u){return u&&u.length?Dc(u,Zr,zh):i}function Sk(u,f){return u&&u.length?Dc(u,Je(f,2),zh):i}function xk(u){return bu(u,Zr)}function Ek(u,f){return bu(u,Je(f,2))}function Ck(u){return u&&u.length?Dc(u,Zr,Xh):i}function Rk(u,f){return u&&u.length?Dc(u,Je(f,2),Xh):i}var wk=Bc(function(u,f){return u*f},1),Ak=op("round"),Pk=Bc(function(u,f){return u-f},0);function Ok(u){return u&&u.length?sa(u,Zr):0}function Ik(u,f){return u&&u.length?sa(u,Je(f,2)):0}return k.after=ZO,k.ary=c_,k.assign=jI,k.assignIn=E_,k.assignInWith=Jc,k.assignWith=VI,k.at=HI,k.before=f_,k.bind=_p,k.bindAll=qD,k.bindKey=d_,k.castArray=fI,k.chain=o_,k.chunk=TP,k.compact=bP,k.concat=SP,k.cond=KD,k.conforms=YD,k.constant=Rp,k.countBy=OO,k.create=WI,k.curry=h_,k.curryRight=p_,k.debounce=m_,k.defaults=$I,k.defaultsDeep=GI,k.defer=eI,k.delay=tI,k.difference=xP,k.differenceBy=EP,k.differenceWith=CP,k.drop=RP,k.dropRight=wP,k.dropRightWhile=AP,k.dropWhile=PP,k.fill=OP,k.filter=DO,k.flatMap=MO,k.flatMapDeep=NO,k.flatMapDepth=FO,k.flatten=i_,k.flattenDeep=IP,k.flattenDepth=DP,k.flip=rI,k.flow=QD,k.flowRight=JD,k.fromPairs=kP,k.functions=JI,k.functionsIn=ZI,k.groupBy=UO,k.initial=MP,k.intersection=NP,k.intersectionBy=FP,k.intersectionWith=UP,k.invert=tD,k.invertBy=rD,k.invokeMap=jO,k.iteratee=wp,k.keyBy=VO,k.keys=lr,k.keysIn=Jr,k.map=zc,k.mapKeys=nD,k.mapValues=aD,k.matches=ZD,k.matchesProperty=ek,k.memoize=Kc,k.merge=sD,k.mergeWith=C_,k.method=tk,k.methodOf=rk,k.mixin=Ap,k.negate=Yc,k.nthArg=nk,k.omit=oD,k.omitBy=uD,k.once=iI,k.orderBy=HO,k.over=ak,k.overArgs=nI,k.overEvery=sk,k.overSome=ok,k.partial=Tp,k.partialRight=g_,k.partition=WO,k.pick=lD,k.pickBy=R_,k.property=k_,k.propertyOf=uk,k.pull=HP,k.pullAll=a_,k.pullAllBy=WP,k.pullAllWith=$P,k.pullAt=GP,k.range=lk,k.rangeRight=ck,k.rearg=aI,k.reject=zO,k.remove=zP,k.rest=sI,k.reverse=vp,k.sampleSize=KO,k.set=fD,k.setWith=dD,k.shuffle=YO,k.slice=qP,k.sortBy=JO,k.sortedUniq=eO,k.sortedUniqBy=tO,k.split=MD,k.spread=oI,k.tail=rO,k.take=iO,k.takeRight=nO,k.takeRightWhile=aO,k.takeWhile=sO,k.tap=bO,k.throttle=uI,k.thru=Gc,k.toArray=b_,k.toPairs=w_,k.toPairsIn=A_,k.toPath=mk,k.toPlainObject=x_,k.transform=hD,k.unary=lI,k.union=oO,k.unionBy=uO,k.unionWith=lO,k.uniq=cO,k.uniqBy=fO,k.uniqWith=dO,k.unset=pD,k.unzip=yp,k.unzipWith=s_,k.update=mD,k.updateWith=gD,k.values=eo,k.valuesIn=vD,k.without=hO,k.words=I_,k.wrap=cI,k.xor=pO,k.xorBy=mO,k.xorWith=gO,k.zip=vO,k.zipObject=yO,k.zipObjectDeep=_O,k.zipWith=TO,k.entries=w_,k.entriesIn=A_,k.extend=E_,k.extendWith=Jc,Ap(k,k),k.add=vk,k.attempt=D_,k.camelCase=bD,k.capitalize=P_,k.ceil=yk,k.clamp=yD,k.clone=dI,k.cloneDeep=pI,k.cloneDeepWith=mI,k.cloneWith=hI,k.conformsTo=gI,k.deburr=O_,k.defaultTo=XD,k.divide=_k,k.endsWith=SD,k.eq=Li,k.escape=xD,k.escapeRegExp=ED,k.every=IO,k.find=kO,k.findIndex=t_,k.findKey=zI,k.findLast=LO,k.findLastIndex=r_,k.findLastKey=qI,k.floor=Tk,k.forEach=u_,k.forEachRight=l_,k.forIn=KI,k.forInRight=YI,k.forOwn=XI,k.forOwnRight=QI,k.get=xp,k.gt=vI,k.gte=yI,k.has=eD,k.hasIn=Ep,k.head=n_,k.identity=Zr,k.includes=BO,k.indexOf=LP,k.inRange=_D,k.invoke=iD,k.isArguments=es,k.isArray=nt,k.isArrayBuffer=_I,k.isArrayLike=Qr,k.isArrayLikeObject=Xt,k.isBoolean=TI,k.isBuffer=pa,k.isDate=bI,k.isElement=SI,k.isEmpty=xI,k.isEqual=EI,k.isEqualWith=CI,k.isError=bp,k.isFinite=RI,k.isFunction=Mn,k.isInteger=v_,k.isLength=Xc,k.isMap=y_,k.isMatch=wI,k.isMatchWith=AI,k.isNaN=PI,k.isNative=OI,k.isNil=DI,k.isNull=II,k.isNumber=__,k.isObject=Ht,k.isObjectLike=zt,k.isPlainObject=Bu,k.isRegExp=Sp,k.isSafeInteger=kI,k.isSet=T_,k.isString=Qc,k.isSymbol=li,k.isTypedArray=Zs,k.isUndefined=LI,k.isWeakMap=MI,k.isWeakSet=NI,k.join=BP,k.kebabCase=CD,k.last=Si,k.lastIndexOf=jP,k.lowerCase=RD,k.lowerFirst=wD,k.lt=FI,k.lte=UI,k.max=bk,k.maxBy=Sk,k.mean=xk,k.meanBy=Ek,k.min=Ck,k.minBy=Rk,k.stubArray=Op,k.stubFalse=Ip,k.stubObject=fk,k.stubString=dk,k.stubTrue=hk,k.multiply=wk,k.nth=VP,k.noConflict=ik,k.noop=Pp,k.now=qc,k.pad=AD,k.padEnd=PD,k.padStart=OD,k.parseInt=ID,k.random=TD,k.reduce=$O,k.reduceRight=GO,k.repeat=DD,k.replace=kD,k.result=cD,k.round=Ak,k.runInContext=A,k.sample=qO,k.size=XO,k.snakeCase=LD,k.some=QO,k.sortedIndex=KP,k.sortedIndexBy=YP,k.sortedIndexOf=XP,k.sortedLastIndex=QP,k.sortedLastIndexBy=JP,k.sortedLastIndexOf=ZP,k.startCase=ND,k.startsWith=FD,k.subtract=Pk,k.sum=Ok,k.sumBy=Ik,k.template=UD,k.times=pk,k.toFinite=Nn,k.toInteger=at,k.toLength=S_,k.toLower=BD,k.toNumber=xi,k.toSafeInteger=BI,k.toString=Ct,k.toUpper=jD,k.trim=VD,k.trimEnd=HD,k.trimStart=WD,k.truncate=$D,k.unescape=GD,k.uniqueId=gk,k.upperCase=zD,k.upperFirst=Cp,k.each=u_,k.eachRight=l_,k.first=n_,Ap(k,function(){var u={};return en(k,function(f,m){bt.call(k.prototype,m)||(u[m]=f)}),u}(),{chain:!1}),k.VERSION=n,Dr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){k[u].placeholder=k}),Dr(["drop","take"],function(u,f){mt.prototype[u]=function(m){m=m===i?1:or(at(m),0);var b=this.__filtered__&&!f?new mt(this):this.clone();return b.__filtered__?b.__takeCount__=Cr(m,b.__takeCount__):b.__views__.push({size:Cr(m,w),type:u+(b.__dir__<0?"Right":"")}),b},mt.prototype[u+"Right"]=function(m){return this.reverse()[u](m).reverse()}}),Dr(["filter","map","takeWhile"],function(u,f){var m=f+1,b=m==Ae||m==De;mt.prototype[u]=function(P){var N=this.clone();return N.__iteratees__.push({iteratee:Je(P,3),type:m}),N.__filtered__=N.__filtered__||b,N}}),Dr(["head","last"],function(u,f){var m="take"+(f?"Right":"");mt.prototype[u]=function(){return this[m](1).value()[0]}}),Dr(["initial","tail"],function(u,f){var m="drop"+(f?"":"Right");mt.prototype[u]=function(){return this.__filtered__?new mt(this):this[m](1)}}),mt.prototype.compact=function(){return this.filter(Zr)},mt.prototype.find=function(u){return this.filter(u).head()},mt.prototype.findLast=function(u){return this.reverse().find(u)},mt.prototype.invokeMap=lt(function(u,f){return typeof u=="function"?new mt(this):this.map(function(m){return ku(m,u,f)})}),mt.prototype.reject=function(u){return this.filter(Yc(Je(u)))},mt.prototype.slice=function(u,f){u=at(u);var m=this;return m.__filtered__&&(u>0||f<0)?new mt(m):(u<0?m=m.takeRight(-u):u&&(m=m.drop(u)),f!==i&&(f=at(f),m=f<0?m.dropRight(-f):m.take(f-u)),m)},mt.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},mt.prototype.toArray=function(){return this.take(w)},en(mt.prototype,function(u,f){var m=/^(?:filter|find|map|reject)|While$/.test(f),b=/^(?:head|last)$/.test(f),P=k[b?"take"+(f=="last"?"Right":""):f],N=b||/^find/.test(f);!P||(k.prototype[f]=function(){var Q=this.__wrapped__,ne=b?[1]:arguments,he=Q instanceof mt,Oe=ne[0],Ie=he||nt(Q),Me=function(ht){var gt=P.apply(k,Ji([ht],ne));return b&&He?gt[0]:gt};Ie&&m&&typeof Oe=="function"&&Oe.length!=1&&(he=Ie=!1);var He=this.__chain__,ze=!!this.__actions__.length,Ze=N&&!He,st=he&&!ze;if(!N&&Ie){Q=st?Q:new mt(this);var et=u.apply(Q,ne);return et.__actions__.push({func:Gc,args:[Me],thisArg:i}),new _i(et,He)}return Ze&&st?u.apply(this,ne):(et=this.thru(Me),Ze?b?et.value()[0]:et.value():et)})}),Dr(["pop","push","shift","sort","splice","unshift"],function(u){var f=yi[u],m=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",b=/^(?:pop|shift)$/.test(u);k.prototype[u]=function(){var P=arguments;if(b&&!this.__chain__){var N=this.value();return f.apply(nt(N)?N:[],P)}return this[m](function(Q){return f.apply(nt(Q)?Q:[],P)})}}),en(mt.prototype,function(u,f){var m=k[f];if(m){var b=m.name+"";bt.call(Ks,b)||(Ks[b]=[]),Ks[b].push({name:f,func:m})}}),Ks[Uc(i,I).name]=[{name:"wrapper",func:i}],mt.prototype.clone=Gw,mt.prototype.reverse=zw,mt.prototype.value=qw,k.prototype.at=SO,k.prototype.chain=xO,k.prototype.commit=EO,k.prototype.next=CO,k.prototype.plant=wO,k.prototype.reverse=AO,k.prototype.toJSON=k.prototype.valueOf=k.prototype.value=PO,k.prototype.first=k.prototype.head,Ru&&(k.prototype[Ru]=RO),k},F=R();xn?((xn.exports=F)._=F,Di._=F):sr._=F}).call(St)})(Om,Om.exports);const Lk=Om.exports;var SS={exports:{}},Gg={exports:{}},xS=function(e,i){return function(){for(var t=new Array(arguments.length),a=0;a<t.length;a++)t[a]=arguments[a];return e.apply(i,t)}},Mk=xS,zg=Object.prototype.toString,qg=function(r){return function(e){var i=zg.call(e);return r[i]||(r[i]=i.slice(8,-1).toLowerCase())}}(Object.create(null));function ws(r){return r=r.toLowerCase(),function(i){return qg(i)===r}}function Kg(r){return Array.isArray(r)}function Ff(r){return typeof r>"u"}function Nk(r){return r!==null&&!Ff(r)&&r.constructor!==null&&!Ff(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}var ES=ws("ArrayBuffer");function Fk(r){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&ES(r.buffer),e}function Uk(r){return typeof r=="string"}function Bk(r){return typeof r=="number"}function CS(r){return r!==null&&typeof r=="object"}function yf(r){if(qg(r)!=="object")return!1;var e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}var jk=ws("Date"),Vk=ws("File"),Hk=ws("Blob"),Wk=ws("FileList");function Yg(r){return zg.call(r)==="[object Function]"}function $k(r){return CS(r)&&Yg(r.pipe)}function Gk(r){var e="[object FormData]";return r&&(typeof FormData=="function"&&r instanceof FormData||zg.call(r)===e||Yg(r.toString)&&r.toString()===e)}var zk=ws("URLSearchParams");function qk(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function Kk(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Xg(r,e){if(!(r===null||typeof r>"u"))if(typeof r!="object"&&(r=[r]),Kg(r))for(var i=0,n=r.length;i<n;i++)e.call(null,r[i],i,r);else for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.call(null,r[t],t,r)}function Im(){var r={};function e(t,a){yf(r[a])&&yf(t)?r[a]=Im(r[a],t):yf(t)?r[a]=Im({},t):Kg(t)?r[a]=t.slice():r[a]=t}for(var i=0,n=arguments.length;i<n;i++)Xg(arguments[i],e);return r}function Yk(r,e,i){return Xg(e,function(t,a){i&&typeof t=="function"?r[a]=Mk(t,i):r[a]=t}),r}function Xk(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}function Qk(r,e,i,n){r.prototype=Object.create(e.prototype,n),r.prototype.constructor=r,i&&Object.assign(r.prototype,i)}function Jk(r,e,i){var n,t,a,s={};e=e||{};do{for(n=Object.getOwnPropertyNames(r),t=n.length;t-- >0;)a=n[t],s[a]||(e[a]=r[a],s[a]=!0);r=Object.getPrototypeOf(r)}while(r&&(!i||i(r,e))&&r!==Object.prototype);return e}function Zk(r,e,i){r=String(r),(i===void 0||i>r.length)&&(i=r.length),i-=e.length;var n=r.indexOf(e,i);return n!==-1&&n===i}function eL(r){if(!r)return null;var e=r.length;if(Ff(e))return null;for(var i=new Array(e);e-- >0;)i[e]=r[e];return i}var tL=function(r){return function(e){return r&&e instanceof r}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),xr={isArray:Kg,isArrayBuffer:ES,isBuffer:Nk,isFormData:Gk,isArrayBufferView:Fk,isString:Uk,isNumber:Bk,isObject:CS,isPlainObject:yf,isUndefined:Ff,isDate:jk,isFile:Vk,isBlob:Hk,isFunction:Yg,isStream:$k,isURLSearchParams:zk,isStandardBrowserEnv:Kk,forEach:Xg,merge:Im,extend:Yk,trim:qk,stripBOM:Xk,inherits:Qk,toFlatObject:Jk,kindOf:qg,kindOfTest:ws,endsWith:Zk,toArray:eL,isTypedArray:tL,isFileList:Wk},to=xr;function M_(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var RS=function(e,i,n){if(!i)return e;var t;if(n)t=n(i);else if(to.isURLSearchParams(i))t=i.toString();else{var a=[];to.forEach(i,function(l,c){l===null||typeof l>"u"||(to.isArray(l)?c=c+"[]":l=[l],to.forEach(l,function(h){to.isDate(h)?h=h.toISOString():to.isObject(h)&&(h=JSON.stringify(h)),a.push(M_(c)+"="+M_(h))}))}),t=a.join("&")}if(t){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+t}return e},rL=xr;function yd(){this.handlers=[]}yd.prototype.use=function(e,i,n){return this.handlers.push({fulfilled:e,rejected:i,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};yd.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};yd.prototype.forEach=function(e){rL.forEach(this.handlers,function(n){n!==null&&e(n)})};var iL=yd,nL=xr,aL=function(e,i){nL.forEach(e,function(t,a){a!==i&&a.toUpperCase()===i.toUpperCase()&&(e[i]=t,delete e[a])})},wS=xr;function Eo(r,e,i,n,t){Error.call(this),this.message=r,this.name="AxiosError",e&&(this.code=e),i&&(this.config=i),n&&(this.request=n),t&&(this.response=t)}wS.inherits(Eo,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var AS=Eo.prototype,PS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(r){PS[r]={value:r}});Object.defineProperties(Eo,PS);Object.defineProperty(AS,"isAxiosError",{value:!0});Eo.from=function(r,e,i,n,t,a){var s=Object.create(AS);return wS.toFlatObject(r,s,function(l){return l!==Error.prototype}),Eo.call(s,r.message,e,i,n,t),s.name=r.name,a&&Object.assign(s,a),s};var Ho=Eo,OS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ni=xr;function sL(r,e){e=e||new FormData;var i=[];function n(a){return a===null?"":Ni.isDate(a)?a.toISOString():Ni.isArrayBuffer(a)||Ni.isTypedArray(a)?typeof Blob=="function"?new Blob([a]):Buffer.from(a):a}function t(a,s){if(Ni.isPlainObject(a)||Ni.isArray(a)){if(i.indexOf(a)!==-1)throw Error("Circular reference detected in "+s);i.push(a),Ni.forEach(a,function(l,c){if(!Ni.isUndefined(l)){var d=s?s+"."+c:c,h;if(l&&!s&&typeof l=="object"){if(Ni.endsWith(c,"{}"))l=JSON.stringify(l);else if(Ni.endsWith(c,"[]")&&(h=Ni.toArray(l))){h.forEach(function(p){!Ni.isUndefined(p)&&e.append(d,n(p))});return}}t(l,d)}}),i.pop()}else e.append(s,n(a))}return t(r),e}var IS=sL,Dp,N_;function oL(){if(N_)return Dp;N_=1;var r=Ho;return Dp=function(i,n,t){var a=t.config.validateStatus;!t.status||!a||a(t.status)?i(t):n(new r("Request failed with status code "+t.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))},Dp}var kp,F_;function uL(){if(F_)return kp;F_=1;var r=xr;return kp=r.isStandardBrowserEnv()?function(){return{write:function(n,t,a,s,o,l){var c=[];c.push(n+"="+encodeURIComponent(t)),r.isNumber(a)&&c.push("expires="+new Date(a).toGMTString()),r.isString(s)&&c.push("path="+s),r.isString(o)&&c.push("domain="+o),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(n){var t=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),kp}var lL=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},cL=function(e,i){return i?e.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):e},fL=lL,dL=cL,DS=function(e,i){return e&&!fL(i)?dL(e,i):i},Lp,U_;function hL(){if(U_)return Lp;U_=1;var r=xr,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Lp=function(n){var t={},a,s,o;return n&&r.forEach(n.split(`
`),function(c){if(o=c.indexOf(":"),a=r.trim(c.substr(0,o)).toLowerCase(),s=r.trim(c.substr(o+1)),a){if(t[a]&&e.indexOf(a)>=0)return;a==="set-cookie"?t[a]=(t[a]?t[a]:[]).concat([s]):t[a]=t[a]?t[a]+", "+s:s}}),t},Lp}var Mp,B_;function pL(){if(B_)return Mp;B_=1;var r=xr;return Mp=r.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),t;function a(s){var o=s;return i&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return t=a(window.location.href),function(o){var l=r.isString(o)?a(o):o;return l.protocol===t.protocol&&l.host===t.host}}():function(){return function(){return!0}}(),Mp}var Np,j_;function _d(){if(j_)return Np;j_=1;var r=Ho,e=xr;function i(n){r.call(this,n==null?"canceled":n,r.ERR_CANCELED),this.name="CanceledError"}return e.inherits(i,r,{__CANCEL__:!0}),Np=i,Np}var Fp,V_;function mL(){return V_||(V_=1,Fp=function(e){var i=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return i&&i[1]||""}),Fp}var Up,H_;function W_(){if(H_)return Up;H_=1;var r=xr,e=oL(),i=uL(),n=RS,t=DS,a=hL(),s=pL(),o=OS,l=Ho,c=_d(),d=mL();return Up=function(p){return new Promise(function(S,C){var x=p.data,I=p.headers,H=p.responseType,Z;function W(){p.cancelToken&&p.cancelToken.unsubscribe(Z),p.signal&&p.signal.removeEventListener("abort",Z)}r.isFormData(x)&&r.isStandardBrowserEnv()&&delete I["Content-Type"];var j=new XMLHttpRequest;if(p.auth){var le=p.auth.username||"",fe=p.auth.password?unescape(encodeURIComponent(p.auth.password)):"";I.Authorization="Basic "+btoa(le+":"+fe)}var Y=t(p.baseURL,p.url);j.open(p.method.toUpperCase(),n(Y,p.params,p.paramsSerializer),!0),j.timeout=p.timeout;function oe(){if(!!j){var de="getAllResponseHeaders"in j?a(j.getAllResponseHeaders()):null,Se=!H||H==="text"||H==="json"?j.responseText:j.response,Ae={data:Se,status:j.status,statusText:j.statusText,headers:de,config:p,request:j};e(function(De){S(De),W()},function(De){C(De),W()},Ae),j=null}}if("onloadend"in j?j.onloadend=oe:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(oe)},j.onabort=function(){!j||(C(new l("Request aborted",l.ECONNABORTED,p,j)),j=null)},j.onerror=function(){C(new l("Network Error",l.ERR_NETWORK,p,j,j)),j=null},j.ontimeout=function(){var Se=p.timeout?"timeout of "+p.timeout+"ms exceeded":"timeout exceeded",Ae=p.transitional||o;p.timeoutErrorMessage&&(Se=p.timeoutErrorMessage),C(new l(Se,Ae.clarifyTimeoutError?l.ETIMEDOUT:l.ECONNABORTED,p,j)),j=null},r.isStandardBrowserEnv()){var V=(p.withCredentials||s(Y))&&p.xsrfCookieName?i.read(p.xsrfCookieName):void 0;V&&(I[p.xsrfHeaderName]=V)}"setRequestHeader"in j&&r.forEach(I,function(Se,Ae){typeof x>"u"&&Ae.toLowerCase()==="content-type"?delete I[Ae]:j.setRequestHeader(Ae,Se)}),r.isUndefined(p.withCredentials)||(j.withCredentials=!!p.withCredentials),H&&H!=="json"&&(j.responseType=p.responseType),typeof p.onDownloadProgress=="function"&&j.addEventListener("progress",p.onDownloadProgress),typeof p.onUploadProgress=="function"&&j.upload&&j.upload.addEventListener("progress",p.onUploadProgress),(p.cancelToken||p.signal)&&(Z=function(de){!j||(C(!de||de&&de.type?new c:de),j.abort(),j=null)},p.cancelToken&&p.cancelToken.subscribe(Z),p.signal&&(p.signal.aborted?Z():p.signal.addEventListener("abort",Z))),x||(x=null);var pe=d(Y);if(pe&&["http","https","file"].indexOf(pe)===-1){C(new l("Unsupported protocol "+pe+":",l.ERR_BAD_REQUEST,p));return}j.send(x)})},Up}var Bp,$_;function gL(){return $_||($_=1,Bp=null),Bp}var cr=xr,G_=aL,z_=Ho,vL=OS,yL=IS,_L={"Content-Type":"application/x-www-form-urlencoded"};function q_(r,e){!cr.isUndefined(r)&&cr.isUndefined(r["Content-Type"])&&(r["Content-Type"]=e)}function TL(){var r;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(r=W_()),r}function bL(r,e,i){if(cr.isString(r))try{return(e||JSON.parse)(r),cr.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(i||JSON.stringify)(r)}var Td={transitional:vL,adapter:TL(),transformRequest:[function(e,i){if(G_(i,"Accept"),G_(i,"Content-Type"),cr.isFormData(e)||cr.isArrayBuffer(e)||cr.isBuffer(e)||cr.isStream(e)||cr.isFile(e)||cr.isBlob(e))return e;if(cr.isArrayBufferView(e))return e.buffer;if(cr.isURLSearchParams(e))return q_(i,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n=cr.isObject(e),t=i&&i["Content-Type"],a;if((a=cr.isFileList(e))||n&&t==="multipart/form-data"){var s=this.env&&this.env.FormData;return yL(a?{"files[]":e}:e,s&&new s)}else if(n||t==="application/json")return q_(i,"application/json"),bL(e);return e}],transformResponse:[function(e){var i=this.transitional||Td.transitional,n=i&&i.silentJSONParsing,t=i&&i.forcedJSONParsing,a=!n&&this.responseType==="json";if(a||t&&cr.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(a)throw s.name==="SyntaxError"?z_.from(s,z_.ERR_BAD_RESPONSE,this,null,this.response):s}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:gL()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};cr.forEach(["delete","get","head"],function(e){Td.headers[e]={}});cr.forEach(["post","put","patch"],function(e){Td.headers[e]=cr.merge(_L)});var Qg=Td,SL=xr,xL=Qg,EL=function(e,i,n){var t=this||xL;return SL.forEach(n,function(s){e=s.call(t,e,i)}),e},jp,K_;function kS(){return K_||(K_=1,jp=function(e){return!!(e&&e.__CANCEL__)}),jp}var Y_=xr,Vp=EL,CL=kS(),RL=Qg,wL=_d();function Hp(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new wL}var AL=function(e){Hp(e),e.headers=e.headers||{},e.data=Vp.call(e,e.data,e.headers,e.transformRequest),e.headers=Y_.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Y_.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]});var i=e.adapter||RL.adapter;return i(e).then(function(t){return Hp(e),t.data=Vp.call(e,t.data,t.headers,e.transformResponse),t},function(t){return CL(t)||(Hp(e),t&&t.response&&(t.response.data=Vp.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})},di=xr,LS=function(e,i){i=i||{};var n={};function t(d,h){return di.isPlainObject(d)&&di.isPlainObject(h)?di.merge(d,h):di.isPlainObject(h)?di.merge({},h):di.isArray(h)?h.slice():h}function a(d){if(di.isUndefined(i[d])){if(!di.isUndefined(e[d]))return t(void 0,e[d])}else return t(e[d],i[d])}function s(d){if(!di.isUndefined(i[d]))return t(void 0,i[d])}function o(d){if(di.isUndefined(i[d])){if(!di.isUndefined(e[d]))return t(void 0,e[d])}else return t(void 0,i[d])}function l(d){if(d in i)return t(e[d],i[d]);if(d in e)return t(void 0,e[d])}var c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l};return di.forEach(Object.keys(e).concat(Object.keys(i)),function(h){var p=c[h]||a,y=p(h);di.isUndefined(y)&&p!==l||(n[h]=y)}),n},Wp,X_;function MS(){return X_||(X_=1,Wp={version:"0.27.2"}),Wp}var PL=MS().version,va=Ho,Jg={};["object","boolean","number","function","string","symbol"].forEach(function(r,e){Jg[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});var Q_={};Jg.transitional=function(e,i,n){function t(a,s){return"[Axios v"+PL+"] Transitional option '"+a+"'"+s+(n?". "+n:"")}return function(a,s,o){if(e===!1)throw new va(t(s," has been removed"+(i?" in "+i:"")),va.ERR_DEPRECATED);return i&&!Q_[s]&&(Q_[s]=!0,console.warn(t(s," has been deprecated since v"+i+" and will be removed in the near future"))),e?e(a,s,o):!0}};function OL(r,e,i){if(typeof r!="object")throw new va("options must be an object",va.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(r),t=n.length;t-- >0;){var a=n[t],s=e[a];if(s){var o=r[a],l=o===void 0||s(o,a,r);if(l!==!0)throw new va("option "+a+" must be "+l,va.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new va("Unknown option "+a,va.ERR_BAD_OPTION)}}var IL={assertOptions:OL,validators:Jg},NS=xr,DL=RS,J_=iL,Z_=AL,bd=LS,kL=DS,FS=IL,ro=FS.validators;function Co(r){this.defaults=r,this.interceptors={request:new J_,response:new J_}}Co.prototype.request=function(e,i){typeof e=="string"?(i=i||{},i.url=e):i=e||{},i=bd(this.defaults,i),i.method?i.method=i.method.toLowerCase():this.defaults.method?i.method=this.defaults.method.toLowerCase():i.method="get";var n=i.transitional;n!==void 0&&FS.assertOptions(n,{silentJSONParsing:ro.transitional(ro.boolean),forcedJSONParsing:ro.transitional(ro.boolean),clarifyTimeoutError:ro.transitional(ro.boolean)},!1);var t=[],a=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(i)===!1||(a=a&&y.synchronous,t.unshift(y.fulfilled,y.rejected))});var s=[];this.interceptors.response.forEach(function(y){s.push(y.fulfilled,y.rejected)});var o;if(!a){var l=[Z_,void 0];for(Array.prototype.unshift.apply(l,t),l=l.concat(s),o=Promise.resolve(i);l.length;)o=o.then(l.shift(),l.shift());return o}for(var c=i;t.length;){var d=t.shift(),h=t.shift();try{c=d(c)}catch(p){h(p);break}}try{o=Z_(c)}catch(p){return Promise.reject(p)}for(;s.length;)o=o.then(s.shift(),s.shift());return o};Co.prototype.getUri=function(e){e=bd(this.defaults,e);var i=kL(e.baseURL,e.url);return DL(i,e.params,e.paramsSerializer)};NS.forEach(["delete","get","head","options"],function(e){Co.prototype[e]=function(i,n){return this.request(bd(n||{},{method:e,url:i,data:(n||{}).data}))}});NS.forEach(["post","put","patch"],function(e){function i(n){return function(a,s,o){return this.request(bd(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:s}))}}Co.prototype[e]=i(),Co.prototype[e+"Form"]=i(!0)});var LL=Co,$p,eT;function ML(){if(eT)return $p;eT=1;var r=_d();function e(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(s){n=s});var t=this;this.promise.then(function(a){if(!!t._listeners){var s,o=t._listeners.length;for(s=0;s<o;s++)t._listeners[s](a);t._listeners=null}}),this.promise.then=function(a){var s,o=new Promise(function(l){t.subscribe(l),s=l}).then(a);return o.cancel=function(){t.unsubscribe(s)},o},i(function(s){t.reason||(t.reason=new r(s),n(t.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(!!this._listeners){var t=this._listeners.indexOf(n);t!==-1&&this._listeners.splice(t,1)}},e.source=function(){var n,t=new e(function(s){n=s});return{token:t,cancel:n}},$p=e,$p}var Gp,tT;function NL(){return tT||(tT=1,Gp=function(e){return function(n){return e.apply(null,n)}}),Gp}var zp,rT;function FL(){if(rT)return zp;rT=1;var r=xr;return zp=function(i){return r.isObject(i)&&i.isAxiosError===!0},zp}var iT=xr,UL=xS,_f=LL,BL=LS,jL=Qg;function US(r){var e=new _f(r),i=UL(_f.prototype.request,e);return iT.extend(i,_f.prototype,e),iT.extend(i,e),i.create=function(t){return US(BL(r,t))},i}var ii=US(jL);ii.Axios=_f;ii.CanceledError=_d();ii.CancelToken=ML();ii.isCancel=kS();ii.VERSION=MS().version;ii.toFormData=IS;ii.AxiosError=Ho;ii.Cancel=ii.CanceledError;ii.all=function(e){return Promise.all(e)};ii.spread=NL();ii.isAxiosError=FL();Gg.exports=ii;Gg.exports.default=ii;(function(r){r.exports=Gg.exports})(SS);const BS=kk(SS.exports);window._=Lk;window.axios=BS;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var Dm=!1,km=!1,ps=[];function VL(r){HL(r)}function HL(r){ps.includes(r)||ps.push(r),WL()}function jS(r){let e=ps.indexOf(r);e!==-1&&ps.splice(e,1)}function WL(){!km&&!Dm&&(Dm=!0,queueMicrotask($L))}function $L(){Dm=!1,km=!0;for(let r=0;r<ps.length;r++)ps[r]();ps.length=0,km=!1}var Wo,Pl,Sd,VS,Lm=!0;function GL(r){Lm=!1,r(),Lm=!0}function zL(r){Wo=r.reactive,Sd=r.release,Pl=e=>r.effect(e,{scheduler:i=>{Lm?VL(i):i()}}),VS=r.raw}function nT(r){Pl=r}function qL(r){let e=()=>{};return[n=>{let t=Pl(n);return r._x_effects||(r._x_effects=new Set,r._x_runEffects=()=>{r._x_effects.forEach(a=>a())}),r._x_effects.add(t),e=()=>{t!==void 0&&(r._x_effects.delete(t),Sd(t))},t},()=>{e()}]}var HS=[],WS=[],$S=[];function KL(r){$S.push(r)}function GS(r,e){typeof e=="function"?(r._x_cleanups||(r._x_cleanups=[]),r._x_cleanups.push(e)):(e=r,WS.push(e))}function YL(r){HS.push(r)}function XL(r,e,i){r._x_attributeCleanups||(r._x_attributeCleanups={}),r._x_attributeCleanups[e]||(r._x_attributeCleanups[e]=[]),r._x_attributeCleanups[e].push(i)}function zS(r,e){!r._x_attributeCleanups||Object.entries(r._x_attributeCleanups).forEach(([i,n])=>{(e===void 0||e.includes(i))&&(n.forEach(t=>t()),delete r._x_attributeCleanups[i])})}var Zg=new MutationObserver(rv),ev=!1;function qS(){Zg.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),ev=!0}function QL(){JL(),Zg.disconnect(),ev=!1}var nl=[],qp=!1;function JL(){nl=nl.concat(Zg.takeRecords()),nl.length&&!qp&&(qp=!0,queueMicrotask(()=>{ZL(),qp=!1}))}function ZL(){rv(nl),nl.length=0}function dr(r){if(!ev)return r();QL();let e=r();return qS(),e}var tv=!1,Uf=[];function eM(){tv=!0}function tM(){tv=!1,rv(Uf),Uf=[]}function rv(r){if(tv){Uf=Uf.concat(r);return}let e=[],i=[],n=new Map,t=new Map;for(let a=0;a<r.length;a++)if(!r[a].target._x_ignoreMutationObserver&&(r[a].type==="childList"&&(r[a].addedNodes.forEach(s=>s.nodeType===1&&e.push(s)),r[a].removedNodes.forEach(s=>s.nodeType===1&&i.push(s))),r[a].type==="attributes")){let s=r[a].target,o=r[a].attributeName,l=r[a].oldValue,c=()=>{n.has(s)||n.set(s,[]),n.get(s).push({name:o,value:s.getAttribute(o)})},d=()=>{t.has(s)||t.set(s,[]),t.get(s).push(o)};s.hasAttribute(o)&&l===null?c():s.hasAttribute(o)?(d(),c()):d()}t.forEach((a,s)=>{zS(s,a)}),n.forEach((a,s)=>{HS.forEach(o=>o(s,a))});for(let a of i)if(!e.includes(a)&&(WS.forEach(s=>s(a)),a._x_cleanups))for(;a._x_cleanups.length;)a._x_cleanups.pop()();e.forEach(a=>{a._x_ignoreSelf=!0,a._x_ignore=!0});for(let a of e)i.includes(a)||!a.isConnected||(delete a._x_ignoreSelf,delete a._x_ignore,$S.forEach(s=>s(a)),a._x_ignore=!0,a._x_ignoreSelf=!0);e.forEach(a=>{delete a._x_ignoreSelf,delete a._x_ignore}),e=null,i=null,n=null,t=null}function KS(r){return Il(Ro(r))}function Ol(r,e,i){return r._x_dataStack=[e,...Ro(i||r)],()=>{r._x_dataStack=r._x_dataStack.filter(n=>n!==e)}}function aT(r,e){let i=r._x_dataStack[0];Object.entries(e).forEach(([n,t])=>{i[n]=t})}function Ro(r){return r._x_dataStack?r._x_dataStack:typeof ShadowRoot=="function"&&r instanceof ShadowRoot?Ro(r.host):r.parentNode?Ro(r.parentNode):[]}function Il(r){let e=new Proxy({},{ownKeys:()=>Array.from(new Set(r.flatMap(i=>Object.keys(i)))),has:(i,n)=>r.some(t=>t.hasOwnProperty(n)),get:(i,n)=>(r.find(t=>{if(t.hasOwnProperty(n)){let a=Object.getOwnPropertyDescriptor(t,n);if(a.get&&a.get._x_alreadyBound||a.set&&a.set._x_alreadyBound)return!0;if((a.get||a.set)&&a.enumerable){let s=a.get,o=a.set,l=a;s=s&&s.bind(e),o=o&&o.bind(e),s&&(s._x_alreadyBound=!0),o&&(o._x_alreadyBound=!0),Object.defineProperty(t,n,{...l,get:s,set:o})}return!0}return!1})||{})[n],set:(i,n,t)=>{let a=r.find(s=>s.hasOwnProperty(n));return a?a[n]=t:r[r.length-1][n]=t,!0}});return e}function YS(r){let e=n=>typeof n=="object"&&!Array.isArray(n)&&n!==null,i=(n,t="")=>{Object.entries(Object.getOwnPropertyDescriptors(n)).forEach(([a,{value:s,enumerable:o}])=>{if(o===!1||s===void 0)return;let l=t===""?a:`${t}.${a}`;typeof s=="object"&&s!==null&&s._x_interceptor?n[a]=s.initialize(r,l,a):e(s)&&s!==n&&!(s instanceof Element)&&i(s,l)})};return i(r)}function XS(r,e=()=>{}){let i={initialValue:void 0,_x_interceptor:!0,initialize(n,t,a){return r(this.initialValue,()=>rM(n,t),s=>Mm(n,t,s),t,a)}};return e(i),n=>{if(typeof n=="object"&&n!==null&&n._x_interceptor){let t=i.initialize.bind(i);i.initialize=(a,s,o)=>{let l=n.initialize(a,s,o);return i.initialValue=l,t(a,s,o)}}else i.initialValue=n;return i}}function rM(r,e){return e.split(".").reduce((i,n)=>i[n],r)}function Mm(r,e,i){if(typeof e=="string"&&(e=e.split(".")),e.length===1)r[e[0]]=i;else{if(e.length===0)throw error;return r[e[0]]||(r[e[0]]={}),Mm(r[e[0]],e.slice(1),i)}}var QS={};function Ki(r,e){QS[r]=e}function Nm(r,e){return Object.entries(QS).forEach(([i,n])=>{Object.defineProperty(r,`$${i}`,{get(){let[t,a]=ix(e);return t={interceptor:XS,...t},GS(e,a),n(e,t)},enumerable:!1})}),r}function iM(r,e,i,...n){try{return i(...n)}catch(t){hl(t,r,e)}}function hl(r,e,i=void 0){Object.assign(r,{el:e,expression:i}),console.warn(`Alpine Expression Error: ${r.message}

${i?'Expression: "'+i+`"

`:""}`,e),setTimeout(()=>{throw r},0)}var Tf=!0;function nM(r){let e=Tf;Tf=!1,r(),Tf=e}function go(r,e,i={}){let n;return Gr(r,e)(t=>n=t,i),n}function Gr(...r){return JS(...r)}var JS=ZS;function aM(r){JS=r}function ZS(r,e){let i={};Nm(i,r);let n=[i,...Ro(r)];if(typeof e=="function")return sM(n,e);let t=uM(n,e,r);return iM.bind(null,r,e,t)}function sM(r,e){return(i=()=>{},{scope:n={},params:t=[]}={})=>{let a=e.apply(Il([n,...r]),t);Bf(i,a)}}var Kp={};function oM(r,e){if(Kp[r])return Kp[r];let i=Object.getPrototypeOf(async function(){}).constructor,n=/^[\n\s]*if.*\(.*\)/.test(r)||/^(let|const)\s/.test(r)?`(() => { ${r} })()`:r,a=(()=>{try{return new i(["__self","scope"],`with (scope) { __self.result = ${n} }; __self.finished = true; return __self.result;`)}catch(s){return hl(s,e,r),Promise.resolve()}})();return Kp[r]=a,a}function uM(r,e,i){let n=oM(e,i);return(t=()=>{},{scope:a={},params:s=[]}={})=>{n.result=void 0,n.finished=!1;let o=Il([a,...r]);if(typeof n=="function"){let l=n(n,o).catch(c=>hl(c,i,e));n.finished?(Bf(t,n.result,o,s,i),n.result=void 0):l.then(c=>{Bf(t,c,o,s,i)}).catch(c=>hl(c,i,e)).finally(()=>n.result=void 0)}}}function Bf(r,e,i,n,t){if(Tf&&typeof e=="function"){let a=e.apply(i,n);a instanceof Promise?a.then(s=>Bf(r,s,i,n)).catch(s=>hl(s,t,e)):r(a)}else r(e)}var iv="x-";function $o(r=""){return iv+r}function lM(r){iv=r}var ex={};function rr(r,e){ex[r]=e}function nv(r,e,i){if(e=Array.from(e),r._x_virtualDirectives){let a=Object.entries(r._x_virtualDirectives).map(([o,l])=>({name:o,value:l})),s=tx(a);a=a.map(o=>s.find(l=>l.name===o.name)?{name:`x-bind:${o.name}`,value:`"${o.value}"`}:o),e=e.concat(a)}let n={};return e.map(sx((a,s)=>n[a]=s)).filter(ux).map(dM(n,i)).sort(hM).map(a=>fM(r,a))}function tx(r){return Array.from(r).map(sx()).filter(e=>!ux(e))}var Fm=!1,Xu=new Map,rx=Symbol();function cM(r){Fm=!0;let e=Symbol();rx=e,Xu.set(e,[]);let i=()=>{for(;Xu.get(e).length;)Xu.get(e).shift()();Xu.delete(e)},n=()=>{Fm=!1,i()};r(i),n()}function ix(r){let e=[],i=o=>e.push(o),[n,t]=qL(r);return e.push(t),[{Alpine:Dl,effect:n,cleanup:i,evaluateLater:Gr.bind(Gr,r),evaluate:go.bind(go,r)},()=>e.forEach(o=>o())]}function fM(r,e){let i=()=>{},n=ex[e.type]||i,[t,a]=ix(r);XL(r,e.original,a);let s=()=>{r._x_ignore||r._x_ignoreSelf||(n.inline&&n.inline(r,e,t),n=n.bind(n,r,e,t),Fm?Xu.get(rx).push(n):n())};return s.runCleanups=a,s}var nx=(r,e)=>({name:i,value:n})=>(i.startsWith(r)&&(i=i.replace(r,e)),{name:i,value:n}),ax=r=>r;function sx(r=()=>{}){return({name:e,value:i})=>{let{name:n,value:t}=ox.reduce((a,s)=>s(a),{name:e,value:i});return n!==e&&r(n,e),{name:n,value:t}}}var ox=[];function av(r){ox.push(r)}function ux({name:r}){return lx().test(r)}var lx=()=>new RegExp(`^${iv}([^:^.]+)\\b`);function dM(r,e){return({name:i,value:n})=>{let t=i.match(lx()),a=i.match(/:([a-zA-Z0-9\-:]+)/),s=i.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],o=e||r[i]||i;return{type:t?t[1]:null,value:a?a[1]:null,modifiers:s.map(l=>l.replace(".","")),expression:n,original:o}}}var Um="DEFAULT",Zc=["ignore","ref","data","id","bind","init","for","mask","model","modelable","transition","show","if",Um,"teleport"];function hM(r,e){let i=Zc.indexOf(r.type)===-1?Um:r.type,n=Zc.indexOf(e.type)===-1?Um:e.type;return Zc.indexOf(i)-Zc.indexOf(n)}function al(r,e,i={}){r.dispatchEvent(new CustomEvent(e,{detail:i,bubbles:!0,composed:!0,cancelable:!0}))}var Bm=[],sv=!1;function cx(r=()=>{}){return queueMicrotask(()=>{sv||setTimeout(()=>{jm()})}),new Promise(e=>{Bm.push(()=>{r(),e()})})}function jm(){for(sv=!1;Bm.length;)Bm.shift()()}function pM(){sv=!0}function xs(r,e){if(typeof ShadowRoot=="function"&&r instanceof ShadowRoot){Array.from(r.children).forEach(t=>xs(t,e));return}let i=!1;if(e(r,()=>i=!0),i)return;let n=r.firstElementChild;for(;n;)xs(n,e),n=n.nextElementSibling}function wo(r,...e){console.warn(`Alpine Warning: ${r}`,...e)}function mM(){document.body||wo("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),al(document,"alpine:init"),al(document,"alpine:initializing"),qS(),KL(e=>xa(e,xs)),GS(e=>vM(e)),YL((e,i)=>{nv(e,i).forEach(n=>n())});let r=e=>!xd(e.parentElement,!0);Array.from(document.querySelectorAll(hx())).filter(r).forEach(e=>{xa(e)}),al(document,"alpine:initialized")}var ov=[],fx=[];function dx(){return ov.map(r=>r())}function hx(){return ov.concat(fx).map(r=>r())}function px(r){ov.push(r)}function mx(r){fx.push(r)}function xd(r,e=!1){return Ed(r,i=>{if((e?hx():dx()).some(t=>i.matches(t)))return!0})}function Ed(r,e){if(!!r){if(e(r))return r;if(r._x_teleportBack&&(r=r._x_teleportBack),!!r.parentElement)return Ed(r.parentElement,e)}}function gM(r){return dx().some(e=>r.matches(e))}function xa(r,e=xs){cM(()=>{e(r,(i,n)=>{nv(i,i.attributes).forEach(t=>t()),i._x_ignore&&n()})})}function vM(r){xs(r,e=>zS(e))}function uv(r,e){return Array.isArray(e)?sT(r,e.join(" ")):typeof e=="object"&&e!==null?yM(r,e):typeof e=="function"?uv(r,e()):sT(r,e)}function sT(r,e){let i=t=>t.split(" ").filter(a=>!r.classList.contains(a)).filter(Boolean),n=t=>(r.classList.add(...t),()=>{r.classList.remove(...t)});return e=e===!0?e="":e||"",n(i(e))}function yM(r,e){let i=o=>o.split(" ").filter(Boolean),n=Object.entries(e).flatMap(([o,l])=>l?i(o):!1).filter(Boolean),t=Object.entries(e).flatMap(([o,l])=>l?!1:i(o)).filter(Boolean),a=[],s=[];return t.forEach(o=>{r.classList.contains(o)&&(r.classList.remove(o),s.push(o))}),n.forEach(o=>{r.classList.contains(o)||(r.classList.add(o),a.push(o))}),()=>{s.forEach(o=>r.classList.add(o)),a.forEach(o=>r.classList.remove(o))}}function Cd(r,e){return typeof e=="object"&&e!==null?_M(r,e):TM(r,e)}function _M(r,e){let i={};return Object.entries(e).forEach(([n,t])=>{i[n]=r.style[n],n.startsWith("--")||(n=bM(n)),r.style.setProperty(n,t)}),setTimeout(()=>{r.style.length===0&&r.removeAttribute("style")}),()=>{Cd(r,i)}}function TM(r,e){let i=r.getAttribute("style",e);return r.setAttribute("style",e),()=>{r.setAttribute("style",i||"")}}function bM(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Vm(r,e=()=>{}){let i=!1;return function(){i?e.apply(this,arguments):(i=!0,r.apply(this,arguments))}}rr("transition",(r,{value:e,modifiers:i,expression:n},{evaluate:t})=>{typeof n=="function"&&(n=t(n)),n?SM(r,n,e):xM(r,i,e)});function SM(r,e,i){gx(r,uv,""),{enter:t=>{r._x_transition.enter.during=t},"enter-start":t=>{r._x_transition.enter.start=t},"enter-end":t=>{r._x_transition.enter.end=t},leave:t=>{r._x_transition.leave.during=t},"leave-start":t=>{r._x_transition.leave.start=t},"leave-end":t=>{r._x_transition.leave.end=t}}[i](e)}function xM(r,e,i){gx(r,Cd);let n=!e.includes("in")&&!e.includes("out")&&!i,t=n||e.includes("in")||["enter"].includes(i),a=n||e.includes("out")||["leave"].includes(i);e.includes("in")&&!n&&(e=e.filter((I,H)=>H<e.indexOf("out"))),e.includes("out")&&!n&&(e=e.filter((I,H)=>H>e.indexOf("out")));let s=!e.includes("opacity")&&!e.includes("scale"),o=s||e.includes("opacity"),l=s||e.includes("scale"),c=o?0:1,d=l?ju(e,"scale",95)/100:1,h=ju(e,"delay",0),p=ju(e,"origin","center"),y="opacity, transform",S=ju(e,"duration",150)/1e3,C=ju(e,"duration",75)/1e3,x="cubic-bezier(0.4, 0.0, 0.2, 1)";t&&(r._x_transition.enter.during={transformOrigin:p,transitionDelay:h,transitionProperty:y,transitionDuration:`${S}s`,transitionTimingFunction:x},r._x_transition.enter.start={opacity:c,transform:`scale(${d})`},r._x_transition.enter.end={opacity:1,transform:"scale(1)"}),a&&(r._x_transition.leave.during={transformOrigin:p,transitionDelay:h,transitionProperty:y,transitionDuration:`${C}s`,transitionTimingFunction:x},r._x_transition.leave.start={opacity:1,transform:"scale(1)"},r._x_transition.leave.end={opacity:c,transform:`scale(${d})`})}function gx(r,e,i={}){r._x_transition||(r._x_transition={enter:{during:i,start:i,end:i},leave:{during:i,start:i,end:i},in(n=()=>{},t=()=>{}){Hm(r,e,{during:this.enter.during,start:this.enter.start,end:this.enter.end},n,t)},out(n=()=>{},t=()=>{}){Hm(r,e,{during:this.leave.during,start:this.leave.start,end:this.leave.end},n,t)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(r,e,i,n){const t=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let a=()=>t(i);if(e){r._x_transition&&(r._x_transition.enter||r._x_transition.leave)?r._x_transition.enter&&(Object.entries(r._x_transition.enter.during).length||Object.entries(r._x_transition.enter.start).length||Object.entries(r._x_transition.enter.end).length)?r._x_transition.in(i):a():r._x_transition?r._x_transition.in(i):a();return}r._x_hidePromise=r._x_transition?new Promise((s,o)=>{r._x_transition.out(()=>{},()=>s(n)),r._x_transitioning.beforeCancel(()=>o({isFromCancelledTransition:!0}))}):Promise.resolve(n),queueMicrotask(()=>{let s=vx(r);s?(s._x_hideChildren||(s._x_hideChildren=[]),s._x_hideChildren.push(r)):t(()=>{let o=l=>{let c=Promise.all([l._x_hidePromise,...(l._x_hideChildren||[]).map(o)]).then(([d])=>d());return delete l._x_hidePromise,delete l._x_hideChildren,c};o(r).catch(l=>{if(!l.isFromCancelledTransition)throw l})})})};function vx(r){let e=r.parentNode;if(!!e)return e._x_hidePromise?e:vx(e)}function Hm(r,e,{during:i,start:n,end:t}={},a=()=>{},s=()=>{}){if(r._x_transitioning&&r._x_transitioning.cancel(),Object.keys(i).length===0&&Object.keys(n).length===0&&Object.keys(t).length===0){a(),s();return}let o,l,c;EM(r,{start(){o=e(r,n)},during(){l=e(r,i)},before:a,end(){o(),c=e(r,t)},after:s,cleanup(){l(),c()}})}function EM(r,e){let i,n,t,a=Vm(()=>{dr(()=>{i=!0,n||e.before(),t||(e.end(),jm()),e.after(),r.isConnected&&e.cleanup(),delete r._x_transitioning})});r._x_transitioning={beforeCancels:[],beforeCancel(s){this.beforeCancels.push(s)},cancel:Vm(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();a()}),finish:a},dr(()=>{e.start(),e.during()}),pM(),requestAnimationFrame(()=>{if(i)return;let s=Number(getComputedStyle(r).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,o=Number(getComputedStyle(r).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;s===0&&(s=Number(getComputedStyle(r).animationDuration.replace("s",""))*1e3),dr(()=>{e.before()}),n=!0,requestAnimationFrame(()=>{i||(dr(()=>{e.end()}),jm(),setTimeout(r._x_transitioning.finish,s+o),t=!0)})})}function ju(r,e,i){if(r.indexOf(e)===-1)return i;const n=r[r.indexOf(e)+1];if(!n||e==="scale"&&isNaN(n))return i;if(e==="duration"){let t=n.match(/([0-9]+)ms/);if(t)return t[1]}return e==="origin"&&["top","right","left","center","bottom"].includes(r[r.indexOf(e)+2])?[n,r[r.indexOf(e)+2]].join(" "):n}var Wm=!1;function Rd(r,e=()=>{}){return(...i)=>Wm?e(...i):r(...i)}function CM(r,e){e._x_dataStack||(e._x_dataStack=r._x_dataStack),Wm=!0,wM(()=>{RM(e)}),Wm=!1}function RM(r){let e=!1;xa(r,(n,t)=>{xs(n,(a,s)=>{if(e&&gM(a))return s();e=!0,t(a,s)})})}function wM(r){let e=Pl;nT((i,n)=>{let t=e(i);return Sd(t),()=>{}}),r(),nT(e)}function yx(r,e,i,n=[]){switch(r._x_bindings||(r._x_bindings=Wo({})),r._x_bindings[e]=i,e=n.includes("camel")?LM(e):e,e){case"value":AM(r,i);break;case"style":OM(r,i);break;case"class":PM(r,i);break;default:IM(r,e,i);break}}function AM(r,e){if(r.type==="radio")r.attributes.value===void 0&&(r.value=e),window.fromModel&&(r.checked=oT(r.value,e));else if(r.type==="checkbox")Number.isInteger(e)?r.value=e:!Number.isInteger(e)&&!Array.isArray(e)&&typeof e!="boolean"&&![null,void 0].includes(e)?r.value=String(e):Array.isArray(e)?r.checked=e.some(i=>oT(i,r.value)):r.checked=!!e;else if(r.tagName==="SELECT")kM(r,e);else{if(r.value===e)return;r.value=e}}function PM(r,e){r._x_undoAddedClasses&&r._x_undoAddedClasses(),r._x_undoAddedClasses=uv(r,e)}function OM(r,e){r._x_undoAddedStyles&&r._x_undoAddedStyles(),r._x_undoAddedStyles=Cd(r,e)}function IM(r,e,i){[null,void 0,!1].includes(i)&&MM(e)?r.removeAttribute(e):(_x(e)&&(i=e),DM(r,e,i))}function DM(r,e,i){r.getAttribute(e)!=i&&r.setAttribute(e,i)}function kM(r,e){const i=[].concat(e).map(n=>n+"");Array.from(r.options).forEach(n=>{n.selected=i.includes(n.value)})}function LM(r){return r.toLowerCase().replace(/-(\w)/g,(e,i)=>i.toUpperCase())}function oT(r,e){return r==e}function _x(r){return["disabled","checked","required","readonly","hidden","open","selected","autofocus","itemscope","multiple","novalidate","allowfullscreen","allowpaymentrequest","formnovalidate","autoplay","controls","loop","muted","playsinline","default","ismap","reversed","async","defer","nomodule"].includes(r)}function MM(r){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(r)}function NM(r,e,i){if(r._x_bindings&&r._x_bindings[e]!==void 0)return r._x_bindings[e];let n=r.getAttribute(e);return n===null?typeof i=="function"?i():i:_x(e)?!![e,"true"].includes(n):n===""?!0:n}function Tx(r,e){var i;return function(){var n=this,t=arguments,a=function(){i=null,r.apply(n,t)};clearTimeout(i),i=setTimeout(a,e)}}function bx(r,e){let i;return function(){let n=this,t=arguments;i||(r.apply(n,t),i=!0,setTimeout(()=>i=!1,e))}}function FM(r){r(Dl)}var ns={},uT=!1;function UM(r,e){if(uT||(ns=Wo(ns),uT=!0),e===void 0)return ns[r];ns[r]=e,typeof e=="object"&&e!==null&&e.hasOwnProperty("init")&&typeof e.init=="function"&&ns[r].init(),YS(ns[r])}function BM(){return ns}var Sx={};function jM(r,e){let i=typeof e!="function"?()=>e:e;r instanceof Element?xx(r,i()):Sx[r]=i}function VM(r){return Object.entries(Sx).forEach(([e,i])=>{Object.defineProperty(r,e,{get(){return(...n)=>i(...n)}})}),r}function xx(r,e,i){let n=[];for(;n.length;)n.pop()();let t=Object.entries(e).map(([s,o])=>({name:s,value:o})),a=tx(t);t=t.map(s=>a.find(o=>o.name===s.name)?{name:`x-bind:${s.name}`,value:`"${s.value}"`}:s),nv(r,t,i).map(s=>{n.push(s.runCleanups),s()})}var Ex={};function HM(r,e){Ex[r]=e}function WM(r,e){return Object.entries(Ex).forEach(([i,n])=>{Object.defineProperty(r,i,{get(){return(...t)=>n.bind(e)(...t)},enumerable:!1})}),r}var $M={get reactive(){return Wo},get release(){return Sd},get effect(){return Pl},get raw(){return VS},version:"3.10.3",flushAndStopDeferringMutations:tM,dontAutoEvaluateFunctions:nM,disableEffectScheduling:GL,setReactivityEngine:zL,closestDataStack:Ro,skipDuringClone:Rd,addRootSelector:px,addInitSelector:mx,addScopeToNode:Ol,deferMutations:eM,mapAttributes:av,evaluateLater:Gr,setEvaluator:aM,mergeProxies:Il,findClosest:Ed,closestRoot:xd,interceptor:XS,transition:Hm,setStyles:Cd,mutateDom:dr,directive:rr,throttle:bx,debounce:Tx,evaluate:go,initTree:xa,nextTick:cx,prefixed:$o,prefix:lM,plugin:FM,magic:Ki,store:UM,start:mM,clone:CM,bound:NM,$data:KS,data:HM,bind:jM},Dl=$M;function GM(r,e){const i=Object.create(null),n=r.split(",");for(let t=0;t<n.length;t++)i[n[t]]=!0;return e?t=>!!i[t.toLowerCase()]:t=>!!i[t]}var zM=Object.freeze({});Object.freeze([]);var Cx=Object.assign,qM=Object.prototype.hasOwnProperty,wd=(r,e)=>qM.call(r,e),ms=Array.isArray,sl=r=>Rx(r)==="[object Map]",KM=r=>typeof r=="string",lv=r=>typeof r=="symbol",Ad=r=>r!==null&&typeof r=="object",YM=Object.prototype.toString,Rx=r=>YM.call(r),wx=r=>Rx(r).slice(8,-1),cv=r=>KM(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,XM=r=>{const e=Object.create(null);return i=>e[i]||(e[i]=r(i))},QM=XM(r=>r.charAt(0).toUpperCase()+r.slice(1)),Ax=(r,e)=>r!==e&&(r===r||e===e),$m=new WeakMap,Vu=[],sn,gs=Symbol("iterate"),Gm=Symbol("Map key iterate");function JM(r){return r&&r._isEffect===!0}function ZM(r,e=zM){JM(r)&&(r=r.raw);const i=rN(r,e);return e.lazy||i(),i}function eN(r){r.active&&(Px(r),r.options.onStop&&r.options.onStop(),r.active=!1)}var tN=0;function rN(r,e){const i=function(){if(!i.active)return r();if(!Vu.includes(i)){Px(i);try{return nN(),Vu.push(i),sn=i,r()}finally{Vu.pop(),Ox(),sn=Vu[Vu.length-1]}}};return i.id=tN++,i.allowRecurse=!!e.allowRecurse,i._isEffect=!0,i.active=!0,i.raw=r,i.deps=[],i.options=e,i}function Px(r){const{deps:e}=r;if(e.length){for(let i=0;i<e.length;i++)e[i].delete(r);e.length=0}}var Ao=!0,fv=[];function iN(){fv.push(Ao),Ao=!1}function nN(){fv.push(Ao),Ao=!0}function Ox(){const r=fv.pop();Ao=r===void 0?!0:r}function zi(r,e,i){if(!Ao||sn===void 0)return;let n=$m.get(r);n||$m.set(r,n=new Map);let t=n.get(i);t||n.set(i,t=new Set),t.has(sn)||(t.add(sn),sn.deps.push(t),sn.options.onTrack&&sn.options.onTrack({effect:sn,target:r,type:e,key:i}))}function Ea(r,e,i,n,t,a){const s=$m.get(r);if(!s)return;const o=new Set,l=d=>{d&&d.forEach(h=>{(h!==sn||h.allowRecurse)&&o.add(h)})};if(e==="clear")s.forEach(l);else if(i==="length"&&ms(r))s.forEach((d,h)=>{(h==="length"||h>=n)&&l(d)});else switch(i!==void 0&&l(s.get(i)),e){case"add":ms(r)?cv(i)&&l(s.get("length")):(l(s.get(gs)),sl(r)&&l(s.get(Gm)));break;case"delete":ms(r)||(l(s.get(gs)),sl(r)&&l(s.get(Gm)));break;case"set":sl(r)&&l(s.get(gs));break}const c=d=>{d.options.onTrigger&&d.options.onTrigger({effect:d,target:r,key:i,type:e,newValue:n,oldValue:t,oldTarget:a}),d.options.scheduler?d.options.scheduler(d):d()};o.forEach(c)}var aN=GM("__proto__,__v_isRef,__isVue"),Ix=new Set(Object.getOwnPropertyNames(Symbol).map(r=>Symbol[r]).filter(lv)),sN=Pd(),oN=Pd(!1,!0),uN=Pd(!0),lN=Pd(!0,!0),jf={};["includes","indexOf","lastIndexOf"].forEach(r=>{const e=Array.prototype[r];jf[r]=function(...i){const n=Vt(this);for(let a=0,s=this.length;a<s;a++)zi(n,"get",a+"");const t=e.apply(n,i);return t===-1||t===!1?e.apply(n,i.map(Vt)):t}});["push","pop","shift","unshift","splice"].forEach(r=>{const e=Array.prototype[r];jf[r]=function(...i){iN();const n=e.apply(this,i);return Ox(),n}});function Pd(r=!1,e=!1){return function(n,t,a){if(t==="__v_isReactive")return!r;if(t==="__v_isReadonly")return r;if(t==="__v_raw"&&a===(r?e?_N:zx:e?yN:Gx).get(n))return n;const s=ms(n);if(!r&&s&&wd(jf,t))return Reflect.get(jf,t,a);const o=Reflect.get(n,t,a);return(lv(t)?Ix.has(t):aN(t))||(r||zi(n,"get",t),e)?o:zm(o)?!s||!cv(t)?o.value:o:Ad(o)?r?qx(o):mv(o):o}}var cN=Dx(),fN=Dx(!0);function Dx(r=!1){return function(i,n,t,a){let s=i[n];if(!r&&(t=Vt(t),s=Vt(s),!ms(i)&&zm(s)&&!zm(t)))return s.value=t,!0;const o=ms(i)&&cv(n)?Number(n)<i.length:wd(i,n),l=Reflect.set(i,n,t,a);return i===Vt(a)&&(o?Ax(t,s)&&Ea(i,"set",n,t,s):Ea(i,"add",n,t)),l}}function dN(r,e){const i=wd(r,e),n=r[e],t=Reflect.deleteProperty(r,e);return t&&i&&Ea(r,"delete",e,void 0,n),t}function hN(r,e){const i=Reflect.has(r,e);return(!lv(e)||!Ix.has(e))&&zi(r,"has",e),i}function pN(r){return zi(r,"iterate",ms(r)?"length":gs),Reflect.ownKeys(r)}var kx={get:sN,set:cN,deleteProperty:dN,has:hN,ownKeys:pN},Lx={get:uN,set(r,e){return console.warn(`Set operation on key "${String(e)}" failed: target is readonly.`,r),!0},deleteProperty(r,e){return console.warn(`Delete operation on key "${String(e)}" failed: target is readonly.`,r),!0}};Cx({},kx,{get:oN,set:fN});Cx({},Lx,{get:lN});var dv=r=>Ad(r)?mv(r):r,hv=r=>Ad(r)?qx(r):r,pv=r=>r,Od=r=>Reflect.getPrototypeOf(r);function Id(r,e,i=!1,n=!1){r=r.__v_raw;const t=Vt(r),a=Vt(e);e!==a&&!i&&zi(t,"get",e),!i&&zi(t,"get",a);const{has:s}=Od(t),o=n?pv:i?hv:dv;if(s.call(t,e))return o(r.get(e));if(s.call(t,a))return o(r.get(a));r!==t&&r.get(e)}function Dd(r,e=!1){const i=this.__v_raw,n=Vt(i),t=Vt(r);return r!==t&&!e&&zi(n,"has",r),!e&&zi(n,"has",t),r===t?i.has(r):i.has(r)||i.has(t)}function kd(r,e=!1){return r=r.__v_raw,!e&&zi(Vt(r),"iterate",gs),Reflect.get(r,"size",r)}function Mx(r){r=Vt(r);const e=Vt(this);return Od(e).has.call(e,r)||(e.add(r),Ea(e,"add",r,r)),this}function Nx(r,e){e=Vt(e);const i=Vt(this),{has:n,get:t}=Od(i);let a=n.call(i,r);a?$x(i,n,r):(r=Vt(r),a=n.call(i,r));const s=t.call(i,r);return i.set(r,e),a?Ax(e,s)&&Ea(i,"set",r,e,s):Ea(i,"add",r,e),this}function Fx(r){const e=Vt(this),{has:i,get:n}=Od(e);let t=i.call(e,r);t?$x(e,i,r):(r=Vt(r),t=i.call(e,r));const a=n?n.call(e,r):void 0,s=e.delete(r);return t&&Ea(e,"delete",r,void 0,a),s}function Ux(){const r=Vt(this),e=r.size!==0,i=sl(r)?new Map(r):new Set(r),n=r.clear();return e&&Ea(r,"clear",void 0,void 0,i),n}function Ld(r,e){return function(n,t){const a=this,s=a.__v_raw,o=Vt(s),l=e?pv:r?hv:dv;return!r&&zi(o,"iterate",gs),s.forEach((c,d)=>n.call(t,l(c),l(d),a))}}function ef(r,e,i){return function(...n){const t=this.__v_raw,a=Vt(t),s=sl(a),o=r==="entries"||r===Symbol.iterator&&s,l=r==="keys"&&s,c=t[r](...n),d=i?pv:e?hv:dv;return!e&&zi(a,"iterate",l?Gm:gs),{next(){const{value:h,done:p}=c.next();return p?{value:h,done:p}:{value:o?[d(h[0]),d(h[1])]:d(h),done:p}},[Symbol.iterator](){return this}}}}function _a(r){return function(...e){{const i=e[0]?`on key "${e[0]}" `:"";console.warn(`${QM(r)} operation ${i}failed: target is readonly.`,Vt(this))}return r==="delete"?!1:this}}var Bx={get(r){return Id(this,r)},get size(){return kd(this)},has:Dd,add:Mx,set:Nx,delete:Fx,clear:Ux,forEach:Ld(!1,!1)},jx={get(r){return Id(this,r,!1,!0)},get size(){return kd(this)},has:Dd,add:Mx,set:Nx,delete:Fx,clear:Ux,forEach:Ld(!1,!0)},Vx={get(r){return Id(this,r,!0)},get size(){return kd(this,!0)},has(r){return Dd.call(this,r,!0)},add:_a("add"),set:_a("set"),delete:_a("delete"),clear:_a("clear"),forEach:Ld(!0,!1)},Hx={get(r){return Id(this,r,!0,!0)},get size(){return kd(this,!0)},has(r){return Dd.call(this,r,!0)},add:_a("add"),set:_a("set"),delete:_a("delete"),clear:_a("clear"),forEach:Ld(!0,!0)},mN=["keys","values","entries",Symbol.iterator];mN.forEach(r=>{Bx[r]=ef(r,!1,!1),Vx[r]=ef(r,!0,!1),jx[r]=ef(r,!1,!0),Hx[r]=ef(r,!0,!0)});function Wx(r,e){const i=e?r?Hx:jx:r?Vx:Bx;return(n,t,a)=>t==="__v_isReactive"?!r:t==="__v_isReadonly"?r:t==="__v_raw"?n:Reflect.get(wd(i,t)&&t in n?i:n,t,a)}var gN={get:Wx(!1,!1)},vN={get:Wx(!0,!1)};function $x(r,e,i){const n=Vt(i);if(n!==i&&e.call(r,n)){const t=wx(r);console.warn(`Reactive ${t} contains both the raw and reactive versions of the same object${t==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var Gx=new WeakMap,yN=new WeakMap,zx=new WeakMap,_N=new WeakMap;function TN(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function bN(r){return r.__v_skip||!Object.isExtensible(r)?0:TN(wx(r))}function mv(r){return r&&r.__v_isReadonly?r:Kx(r,!1,kx,gN,Gx)}function qx(r){return Kx(r,!0,Lx,vN,zx)}function Kx(r,e,i,n,t){if(!Ad(r))return console.warn(`value cannot be made reactive: ${String(r)}`),r;if(r.__v_raw&&!(e&&r.__v_isReactive))return r;const a=t.get(r);if(a)return a;const s=bN(r);if(s===0)return r;const o=new Proxy(r,s===2?n:i);return t.set(r,o),o}function Vt(r){return r&&Vt(r.__v_raw)||r}function zm(r){return Boolean(r&&r.__v_isRef===!0)}Ki("nextTick",()=>cx);Ki("dispatch",r=>al.bind(al,r));Ki("watch",(r,{evaluateLater:e,effect:i})=>(n,t)=>{let a=e(n),s=!0,o,l=i(()=>a(c=>{JSON.stringify(c),s?o=c:queueMicrotask(()=>{t(c,o),o=c}),s=!1}));r._x_effects.delete(l)});Ki("store",BM);Ki("data",r=>KS(r));Ki("root",r=>xd(r));Ki("refs",r=>(r._x_refs_proxy||(r._x_refs_proxy=Il(SN(r))),r._x_refs_proxy));function SN(r){let e=[],i=r;for(;i;)i._x_refs&&e.push(i._x_refs),i=i.parentNode;return e}var Yp={};function Yx(r){return Yp[r]||(Yp[r]=0),++Yp[r]}function xN(r,e){return Ed(r,i=>{if(i._x_ids&&i._x_ids[e])return!0})}function EN(r,e){r._x_ids||(r._x_ids={}),r._x_ids[e]||(r._x_ids[e]=Yx(e))}Ki("id",r=>(e,i=null)=>{let n=xN(r,e),t=n?n._x_ids[e]:Yx(e);return i?`${e}-${t}-${i}`:`${e}-${t}`});Ki("el",r=>r);Xx("Focus","focus","focus");Xx("Persist","persist","persist");function Xx(r,e,i){Ki(e,n=>wo(`You can't use [$${directiveName}] without first installing the "${r}" plugin here: https://alpinejs.dev/plugins/${i}`,n))}rr("modelable",(r,{expression:e},{effect:i,evaluateLater:n})=>{let t=n(e),a=()=>{let c;return t(d=>c=d),c},s=n(`${e} = __placeholder`),o=c=>s(()=>{},{scope:{__placeholder:c}}),l=a();o(l),queueMicrotask(()=>{if(!r._x_model)return;r._x_removeModelListeners.default();let c=r._x_model.get,d=r._x_model.set;i(()=>o(c())),i(()=>d(a()))})});rr("teleport",(r,{expression:e},{cleanup:i})=>{r.tagName.toLowerCase()!=="template"&&wo("x-teleport can only be used on a <template> tag",r);let n=document.querySelector(e);n||wo(`Cannot find x-teleport element for selector: "${e}"`);let t=r.content.cloneNode(!0).firstElementChild;r._x_teleport=t,t._x_teleportBack=r,r._x_forwardEvents&&r._x_forwardEvents.forEach(a=>{t.addEventListener(a,s=>{s.stopPropagation(),r.dispatchEvent(new s.constructor(s.type,s))})}),Ol(t,{},r),dr(()=>{n.appendChild(t),xa(t),t._x_ignore=!0}),i(()=>t.remove())});var Qx=()=>{};Qx.inline=(r,{modifiers:e},{cleanup:i})=>{e.includes("self")?r._x_ignoreSelf=!0:r._x_ignore=!0,i(()=>{e.includes("self")?delete r._x_ignoreSelf:delete r._x_ignore})};rr("ignore",Qx);rr("effect",(r,{expression:e},{effect:i})=>i(Gr(r,e)));function Jx(r,e,i,n){let t=r,a=l=>n(l),s={},o=(l,c)=>d=>c(l,d);if(i.includes("dot")&&(e=CN(e)),i.includes("camel")&&(e=RN(e)),i.includes("passive")&&(s.passive=!0),i.includes("capture")&&(s.capture=!0),i.includes("window")&&(t=window),i.includes("document")&&(t=document),i.includes("prevent")&&(a=o(a,(l,c)=>{c.preventDefault(),l(c)})),i.includes("stop")&&(a=o(a,(l,c)=>{c.stopPropagation(),l(c)})),i.includes("self")&&(a=o(a,(l,c)=>{c.target===r&&l(c)})),(i.includes("away")||i.includes("outside"))&&(t=document,a=o(a,(l,c)=>{r.contains(c.target)||c.target.isConnected!==!1&&(r.offsetWidth<1&&r.offsetHeight<1||r._x_isShown!==!1&&l(c))})),i.includes("once")&&(a=o(a,(l,c)=>{l(c),t.removeEventListener(e,a,s)})),a=o(a,(l,c)=>{AN(e)&&PN(c,i)||l(c)}),i.includes("debounce")){let l=i[i.indexOf("debounce")+1]||"invalid-wait",c=qm(l.split("ms")[0])?Number(l.split("ms")[0]):250;a=Tx(a,c)}if(i.includes("throttle")){let l=i[i.indexOf("throttle")+1]||"invalid-wait",c=qm(l.split("ms")[0])?Number(l.split("ms")[0]):250;a=bx(a,c)}return t.addEventListener(e,a,s),()=>{t.removeEventListener(e,a,s)}}function CN(r){return r.replace(/-/g,".")}function RN(r){return r.toLowerCase().replace(/-(\w)/g,(e,i)=>i.toUpperCase())}function qm(r){return!Array.isArray(r)&&!isNaN(r)}function wN(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function AN(r){return["keydown","keyup"].includes(r)}function PN(r,e){let i=e.filter(a=>!["window","document","prevent","stop","once"].includes(a));if(i.includes("debounce")){let a=i.indexOf("debounce");i.splice(a,qm((i[a+1]||"invalid-wait").split("ms")[0])?2:1)}if(i.length===0||i.length===1&&lT(r.key).includes(i[0]))return!1;const t=["ctrl","shift","alt","meta","cmd","super"].filter(a=>i.includes(a));return i=i.filter(a=>!t.includes(a)),!(t.length>0&&t.filter(s=>((s==="cmd"||s==="super")&&(s="meta"),r[`${s}Key`])).length===t.length&&lT(r.key).includes(i[0]))}function lT(r){if(!r)return[];r=wN(r);let e={ctrl:"control",slash:"/",space:"-",spacebar:"-",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",equal:"="};return e[r]=r,Object.keys(e).map(i=>{if(e[i]===r)return i}).filter(i=>i)}rr("model",(r,{modifiers:e,expression:i},{effect:n,cleanup:t})=>{let a=Gr(r,i),s=`${i} = rightSideOfExpression($event, ${i})`,o=Gr(r,s);var l=r.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(r.type)||e.includes("lazy")?"change":"input";let c=ON(r,e,i),d=Jx(r,l,e,p=>{o(()=>{},{scope:{$event:p,rightSideOfExpression:c}})});r._x_removeModelListeners||(r._x_removeModelListeners={}),r._x_removeModelListeners.default=d,t(()=>r._x_removeModelListeners.default());let h=Gr(r,`${i} = __placeholder`);r._x_model={get(){let p;return a(y=>p=y),p},set(p){h(()=>{},{scope:{__placeholder:p}})}},r._x_forceModelUpdate=()=>{a(p=>{p===void 0&&i.match(/\./)&&(p=""),window.fromModel=!0,dr(()=>yx(r,"value",p)),delete window.fromModel})},n(()=>{e.includes("unintrusive")&&document.activeElement.isSameNode(r)||r._x_forceModelUpdate()})});function ON(r,e,i){return r.type==="radio"&&dr(()=>{r.hasAttribute("name")||r.setAttribute("name",i)}),(n,t)=>dr(()=>{if(n instanceof CustomEvent&&n.detail!==void 0)return n.detail||n.target.value;if(r.type==="checkbox")if(Array.isArray(t)){let a=e.includes("number")?Xp(n.target.value):n.target.value;return n.target.checked?t.concat([a]):t.filter(s=>!IN(s,a))}else return n.target.checked;else{if(r.tagName.toLowerCase()==="select"&&r.multiple)return e.includes("number")?Array.from(n.target.selectedOptions).map(a=>{let s=a.value||a.text;return Xp(s)}):Array.from(n.target.selectedOptions).map(a=>a.value||a.text);{let a=n.target.value;return e.includes("number")?Xp(a):e.includes("trim")?a.trim():a}}})}function Xp(r){let e=r?parseFloat(r):null;return DN(e)?e:r}function IN(r,e){return r==e}function DN(r){return!Array.isArray(r)&&!isNaN(r)}rr("cloak",r=>queueMicrotask(()=>dr(()=>r.removeAttribute($o("cloak")))));mx(()=>`[${$o("init")}]`);rr("init",Rd((r,{expression:e},{evaluate:i})=>typeof e=="string"?!!e.trim()&&i(e,{},!1):i(e,{},!1)));rr("text",(r,{expression:e},{effect:i,evaluateLater:n})=>{let t=n(e);i(()=>{t(a=>{dr(()=>{r.textContent=a})})})});rr("html",(r,{expression:e},{effect:i,evaluateLater:n})=>{let t=n(e);i(()=>{t(a=>{dr(()=>{r.innerHTML=a,r._x_ignoreSelf=!0,xa(r),delete r._x_ignoreSelf})})})});av(nx(":",ax($o("bind:"))));rr("bind",(r,{value:e,modifiers:i,expression:n,original:t},{effect:a})=>{if(!e){let o={};VM(o),Gr(r,n)(c=>{xx(r,c,t)},{scope:o});return}if(e==="key")return kN(r,n);let s=Gr(r,n);a(()=>s(o=>{o===void 0&&n.match(/\./)&&(o=""),dr(()=>yx(r,e,o,i))}))});function kN(r,e){r._x_keyExpression=e}px(()=>`[${$o("data")}]`);rr("data",Rd((r,{expression:e},{cleanup:i})=>{e=e===""?"{}":e;let n={};Nm(n,r);let t={};WM(t,n);let a=go(r,e,{scope:t});a===void 0&&(a={}),Nm(a,r);let s=Wo(a);YS(s);let o=Ol(r,s);s.init&&go(r,s.init),i(()=>{s.destroy&&go(r,s.destroy),o()})}));rr("show",(r,{modifiers:e,expression:i},{effect:n})=>{let t=Gr(r,i);r._x_doHide||(r._x_doHide=()=>{dr(()=>{r.style.setProperty("display","none",e.includes("important")?"important":void 0)})}),r._x_doShow||(r._x_doShow=()=>{dr(()=>{r.style.length===1&&r.style.display==="none"?r.removeAttribute("style"):r.style.removeProperty("display")})});let a=()=>{r._x_doHide(),r._x_isShown=!1},s=()=>{r._x_doShow(),r._x_isShown=!0},o=()=>setTimeout(s),l=Vm(h=>h?s():a(),h=>{typeof r._x_toggleAndCascadeWithTransitions=="function"?r._x_toggleAndCascadeWithTransitions(r,h,s,a):h?o():a()}),c,d=!0;n(()=>t(h=>{!d&&h===c||(e.includes("immediate")&&(h?o():a()),l(h),c=h,d=!1)}))});rr("for",(r,{expression:e},{effect:i,cleanup:n})=>{let t=MN(e),a=Gr(r,t.items),s=Gr(r,r._x_keyExpression||"index");r._x_prevKeys=[],r._x_lookup={},i(()=>LN(r,t,a,s)),n(()=>{Object.values(r._x_lookup).forEach(o=>o.remove()),delete r._x_prevKeys,delete r._x_lookup})});function LN(r,e,i,n){let t=s=>typeof s=="object"&&!Array.isArray(s),a=r;i(s=>{NN(s)&&s>=0&&(s=Array.from(Array(s).keys(),x=>x+1)),s===void 0&&(s=[]);let o=r._x_lookup,l=r._x_prevKeys,c=[],d=[];if(t(s))s=Object.entries(s).map(([x,I])=>{let H=cT(e,I,x,s);n(Z=>d.push(Z),{scope:{index:x,...H}}),c.push(H)});else for(let x=0;x<s.length;x++){let I=cT(e,s[x],x,s);n(H=>d.push(H),{scope:{index:x,...I}}),c.push(I)}let h=[],p=[],y=[],S=[];for(let x=0;x<l.length;x++){let I=l[x];d.indexOf(I)===-1&&y.push(I)}l=l.filter(x=>!y.includes(x));let C="template";for(let x=0;x<d.length;x++){let I=d[x],H=l.indexOf(I);if(H===-1)l.splice(x,0,I),h.push([C,x]);else if(H!==x){let Z=l.splice(x,1)[0],W=l.splice(H-1,1)[0];l.splice(x,0,W),l.splice(H,0,Z),p.push([Z,W])}else S.push(I);C=I}for(let x=0;x<y.length;x++){let I=y[x];o[I]._x_effects&&o[I]._x_effects.forEach(jS),o[I].remove(),o[I]=null,delete o[I]}for(let x=0;x<p.length;x++){let[I,H]=p[x],Z=o[I],W=o[H],j=document.createElement("div");dr(()=>{W.after(j),Z.after(W),W._x_currentIfEl&&W.after(W._x_currentIfEl),j.before(Z),Z._x_currentIfEl&&Z.after(Z._x_currentIfEl),j.remove()}),aT(W,c[d.indexOf(H)])}for(let x=0;x<h.length;x++){let[I,H]=h[x],Z=I==="template"?a:o[I];Z._x_currentIfEl&&(Z=Z._x_currentIfEl);let W=c[H],j=d[H],le=document.importNode(a.content,!0).firstElementChild;Ol(le,Wo(W),a),dr(()=>{Z.after(le),xa(le)}),typeof j=="object"&&wo("x-for key cannot be an object, it must be a string or an integer",a),o[j]=le}for(let x=0;x<S.length;x++)aT(o[S[x]],c[d.indexOf(S[x])]);a._x_prevKeys=d})}function MN(r){let e=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,i=/^\s*\(|\)\s*$/g,n=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,t=r.match(n);if(!t)return;let a={};a.items=t[2].trim();let s=t[1].replace(i,"").trim(),o=s.match(e);return o?(a.item=s.replace(e,"").trim(),a.index=o[1].trim(),o[2]&&(a.collection=o[2].trim())):a.item=s,a}function cT(r,e,i,n){let t={};return/^\[.*\]$/.test(r.item)&&Array.isArray(e)?r.item.replace("[","").replace("]","").split(",").map(s=>s.trim()).forEach((s,o)=>{t[s]=e[o]}):/^\{.*\}$/.test(r.item)&&!Array.isArray(e)&&typeof e=="object"?r.item.replace("{","").replace("}","").split(",").map(s=>s.trim()).forEach(s=>{t[s]=e[s]}):t[r.item]=e,r.index&&(t[r.index]=i),r.collection&&(t[r.collection]=n),t}function NN(r){return!Array.isArray(r)&&!isNaN(r)}function Zx(){}Zx.inline=(r,{expression:e},{cleanup:i})=>{let n=xd(r);n._x_refs||(n._x_refs={}),n._x_refs[e]=r,i(()=>delete n._x_refs[e])};rr("ref",Zx);rr("if",(r,{expression:e},{effect:i,cleanup:n})=>{let t=Gr(r,e),a=()=>{if(r._x_currentIfEl)return r._x_currentIfEl;let o=r.content.cloneNode(!0).firstElementChild;return Ol(o,{},r),dr(()=>{r.after(o),xa(o)}),r._x_currentIfEl=o,r._x_undoIf=()=>{xs(o,l=>{l._x_effects&&l._x_effects.forEach(jS)}),o.remove(),delete r._x_currentIfEl},o},s=()=>{!r._x_undoIf||(r._x_undoIf(),delete r._x_undoIf)};i(()=>t(o=>{o?a():s()})),n(()=>r._x_undoIf&&r._x_undoIf())});rr("id",(r,{expression:e},{evaluate:i})=>{i(e).forEach(t=>EN(r,t))});av(nx("@",ax($o("on:"))));rr("on",Rd((r,{value:e,modifiers:i,expression:n},{cleanup:t})=>{let a=n?Gr(r,n):()=>{};r.tagName.toLowerCase()==="template"&&(r._x_forwardEvents||(r._x_forwardEvents=[]),r._x_forwardEvents.includes(e)||r._x_forwardEvents.push(e));let s=Jx(r,e,i,o=>{a(()=>{},{scope:{$event:o},params:[o]})});t(()=>s())}));Md("Collapse","collapse","collapse");Md("Intersect","intersect","intersect");Md("Focus","trap","focus");Md("Mask","mask","mask");function Md(r,e,i){rr(e,n=>wo(`You can't use [x-${e}] without first installing the "${r}" plugin here: https://alpinejs.dev/plugins/${i}`,n))}Dl.setEvaluator(ZS);Dl.setReactivityEngine({reactive:mv,effect:ZM,release:eN,raw:Vt});var FN=Dl,eE=FN;function tE(r,e){const i=Object.create(null),n=r.split(",");for(let t=0;t<n.length;t++)i[n[t]]=!0;return e?t=>!!i[t.toLowerCase()]:t=>!!i[t]}function gv(r){if(ot(r)){const e={};for(let i=0;i<r.length;i++){const n=r[i],t=ai(n)?jN(n):gv(n);if(t)for(const a in t)e[a]=t[a]}return e}else{if(ai(r))return r;if(Wt(r))return r}}const UN=/;(?![^(]*\))/g,BN=/:(.+)/;function jN(r){const e={};return r.split(UN).forEach(i=>{if(i){const n=i.split(BN);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function vv(r){let e="";if(ai(r))e=r;else if(ot(r))for(let i=0;i<r.length;i++){const n=vv(r[i]);n&&(e+=n+" ")}else if(Wt(r))for(const i in r)r[i]&&(e+=i+" ");return e.trim()}const fT=r=>ai(r)?r:r==null?"":ot(r)||Wt(r)&&(r.toString===sE||!pt(r.toString))?JSON.stringify(r,rE,2):String(r),rE=(r,e)=>e&&e.__v_isRef?rE(r,e.value):yo(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((i,[n,t])=>(i[`${n} =>`]=t,i),{})}:nE(e)?{[`Set(${e.size})`]:[...e.values()]}:Wt(e)&&!ot(e)&&!oE(e)?String(e):e,It={},vo=[],Wi=()=>{},VN=()=>!1,HN=/^on[^a-z]/,yv=r=>HN.test(r),iE=r=>r.startsWith("onUpdate:"),ni=Object.assign,_v=(r,e)=>{const i=r.indexOf(e);i>-1&&r.splice(i,1)},WN=Object.prototype.hasOwnProperty,yt=(r,e)=>WN.call(r,e),ot=Array.isArray,yo=r=>Nd(r)==="[object Map]",nE=r=>Nd(r)==="[object Set]",pt=r=>typeof r=="function",ai=r=>typeof r=="string",Tv=r=>typeof r=="symbol",Wt=r=>r!==null&&typeof r=="object",aE=r=>Wt(r)&&pt(r.then)&&pt(r.catch),sE=Object.prototype.toString,Nd=r=>sE.call(r),$N=r=>Nd(r).slice(8,-1),oE=r=>Nd(r)==="[object Object]",bv=r=>ai(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,bf=tE(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Fd=r=>{const e=Object.create(null);return i=>e[i]||(e[i]=r(i))},GN=/-(\w)/g,Po=Fd(r=>r.replace(GN,(e,i)=>i?i.toUpperCase():"")),zN=/\B([A-Z])/g,Ud=Fd(r=>r.replace(zN,"-$1").toLowerCase()),qN=Fd(r=>r.charAt(0).toUpperCase()+r.slice(1)),Qp=Fd(r=>r?`on${qN(r)}`:""),Vf=(r,e)=>!Object.is(r,e),Jp=(r,e)=>{for(let i=0;i<r.length;i++)r[i](e)},Hf=(r,e,i)=>{Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value:i})},KN=r=>{const e=parseFloat(r);return isNaN(e)?r:e};let dT;const YN=()=>dT||(dT=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let an;class XN{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&an&&(this.parent=an,this.index=(an.scopes||(an.scopes=[])).push(this)-1)}run(e){if(this.active){const i=an;try{return an=this,e()}finally{an=i}}}on(){an=this}off(){an=this.parent}stop(e){if(this.active){let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.scopes)for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);if(this.parent&&!e){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.active=!1}}}function QN(r,e=an){e&&e.active&&e.effects.push(r)}const Sv=r=>{const e=new Set(r);return e.w=0,e.n=0,e},uE=r=>(r.w&Ca)>0,lE=r=>(r.n&Ca)>0,JN=({deps:r})=>{if(r.length)for(let e=0;e<r.length;e++)r[e].w|=Ca},ZN=r=>{const{deps:e}=r;if(e.length){let i=0;for(let n=0;n<e.length;n++){const t=e[n];uE(t)&&!lE(t)?t.delete(r):e[i++]=t,t.w&=~Ca,t.n&=~Ca}e.length=i}},Km=new WeakMap;let Qu=0,Ca=1;const Ym=30;let ji;const vs=Symbol(""),Xm=Symbol("");class xv{constructor(e,i=null,n){this.fn=e,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,QN(this,n)}run(){if(!this.active)return this.fn();let e=ji,i=Ta;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=ji,ji=this,Ta=!0,Ca=1<<++Qu,Qu<=Ym?JN(this):hT(this),this.fn()}finally{Qu<=Ym&&ZN(this),Ca=1<<--Qu,ji=this.parent,Ta=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ji===this?this.deferStop=!0:this.active&&(hT(this),this.onStop&&this.onStop(),this.active=!1)}}function hT(r){const{deps:e}=r;if(e.length){for(let i=0;i<e.length;i++)e[i].delete(r);e.length=0}}let Ta=!0;const cE=[];function Go(){cE.push(Ta),Ta=!1}function zo(){const r=cE.pop();Ta=r===void 0?!0:r}function gi(r,e,i){if(Ta&&ji){let n=Km.get(r);n||Km.set(r,n=new Map);let t=n.get(i);t||n.set(i,t=Sv()),fE(t)}}function fE(r,e){let i=!1;Qu<=Ym?lE(r)||(r.n|=Ca,i=!uE(r)):i=!r.has(ji),i&&(r.add(ji),ji.deps.push(r))}function qn(r,e,i,n,t,a){const s=Km.get(r);if(!s)return;let o=[];if(e==="clear")o=[...s.values()];else if(i==="length"&&ot(r))s.forEach((l,c)=>{(c==="length"||c>=n)&&o.push(l)});else switch(i!==void 0&&o.push(s.get(i)),e){case"add":ot(r)?bv(i)&&o.push(s.get("length")):(o.push(s.get(vs)),yo(r)&&o.push(s.get(Xm)));break;case"delete":ot(r)||(o.push(s.get(vs)),yo(r)&&o.push(s.get(Xm)));break;case"set":yo(r)&&o.push(s.get(vs));break}if(o.length===1)o[0]&&Qm(o[0]);else{const l=[];for(const c of o)c&&l.push(...c);Qm(Sv(l))}}function Qm(r,e){const i=ot(r)?r:[...r];for(const n of i)n.computed&&pT(n);for(const n of i)n.computed||pT(n)}function pT(r,e){(r!==ji||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}const eF=tE("__proto__,__v_isRef,__isVue"),dE=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(Tv)),tF=Ev(),rF=Ev(!1,!0),iF=Ev(!0),mT=nF();function nF(){const r={};return["includes","indexOf","lastIndexOf"].forEach(e=>{r[e]=function(...i){const n=wt(this);for(let a=0,s=this.length;a<s;a++)gi(n,"get",a+"");const t=n[e](...i);return t===-1||t===!1?n[e](...i.map(wt)):t}}),["push","pop","shift","unshift","splice"].forEach(e=>{r[e]=function(...i){Go();const n=wt(this)[e].apply(this,i);return zo(),n}}),r}function Ev(r=!1,e=!1){return function(n,t,a){if(t==="__v_isReactive")return!r;if(t==="__v_isReadonly")return r;if(t==="__v_isShallow")return e;if(t==="__v_raw"&&a===(r?e?TF:vE:e?gE:mE).get(n))return n;const s=ot(n);if(!r&&s&&yt(mT,t))return Reflect.get(mT,t,a);const o=Reflect.get(n,t,a);return(Tv(t)?dE.has(t):eF(t))||(r||gi(n,"get",t),e)?o:$r(o)?s&&bv(t)?o:o.value:Wt(o)?r?yE(o):wv(o):o}}const aF=hE(),sF=hE(!0);function hE(r=!1){return function(i,n,t,a){let s=i[n];if(pl(s)&&$r(s)&&!$r(t))return!1;if(!r&&(!Jm(t)&&!pl(t)&&(s=wt(s),t=wt(t)),!ot(i)&&$r(s)&&!$r(t)))return s.value=t,!0;const o=ot(i)&&bv(n)?Number(n)<i.length:yt(i,n),l=Reflect.set(i,n,t,a);return i===wt(a)&&(o?Vf(t,s)&&qn(i,"set",n,t):qn(i,"add",n,t)),l}}function oF(r,e){const i=yt(r,e);r[e];const n=Reflect.deleteProperty(r,e);return n&&i&&qn(r,"delete",e,void 0),n}function uF(r,e){const i=Reflect.has(r,e);return(!Tv(e)||!dE.has(e))&&gi(r,"has",e),i}function lF(r){return gi(r,"iterate",ot(r)?"length":vs),Reflect.ownKeys(r)}const pE={get:tF,set:aF,deleteProperty:oF,has:uF,ownKeys:lF},cF={get:iF,set(r,e){return!0},deleteProperty(r,e){return!0}},fF=ni({},pE,{get:rF,set:sF}),Cv=r=>r,Bd=r=>Reflect.getPrototypeOf(r);function tf(r,e,i=!1,n=!1){r=r.__v_raw;const t=wt(r),a=wt(e);i||(e!==a&&gi(t,"get",e),gi(t,"get",a));const{has:s}=Bd(t),o=n?Cv:i?Ov:Pv;if(s.call(t,e))return o(r.get(e));if(s.call(t,a))return o(r.get(a));r!==t&&r.get(e)}function rf(r,e=!1){const i=this.__v_raw,n=wt(i),t=wt(r);return e||(r!==t&&gi(n,"has",r),gi(n,"has",t)),r===t?i.has(r):i.has(r)||i.has(t)}function nf(r,e=!1){return r=r.__v_raw,!e&&gi(wt(r),"iterate",vs),Reflect.get(r,"size",r)}function gT(r){r=wt(r);const e=wt(this);return Bd(e).has.call(e,r)||(e.add(r),qn(e,"add",r,r)),this}function vT(r,e){e=wt(e);const i=wt(this),{has:n,get:t}=Bd(i);let a=n.call(i,r);a||(r=wt(r),a=n.call(i,r));const s=t.call(i,r);return i.set(r,e),a?Vf(e,s)&&qn(i,"set",r,e):qn(i,"add",r,e),this}function yT(r){const e=wt(this),{has:i,get:n}=Bd(e);let t=i.call(e,r);t||(r=wt(r),t=i.call(e,r)),n&&n.call(e,r);const a=e.delete(r);return t&&qn(e,"delete",r,void 0),a}function _T(){const r=wt(this),e=r.size!==0,i=r.clear();return e&&qn(r,"clear",void 0,void 0),i}function af(r,e){return function(n,t){const a=this,s=a.__v_raw,o=wt(s),l=e?Cv:r?Ov:Pv;return!r&&gi(o,"iterate",vs),s.forEach((c,d)=>n.call(t,l(c),l(d),a))}}function sf(r,e,i){return function(...n){const t=this.__v_raw,a=wt(t),s=yo(a),o=r==="entries"||r===Symbol.iterator&&s,l=r==="keys"&&s,c=t[r](...n),d=i?Cv:e?Ov:Pv;return!e&&gi(a,"iterate",l?Xm:vs),{next(){const{value:h,done:p}=c.next();return p?{value:h,done:p}:{value:o?[d(h[0]),d(h[1])]:d(h),done:p}},[Symbol.iterator](){return this}}}}function ma(r){return function(...e){return r==="delete"?!1:this}}function dF(){const r={get(a){return tf(this,a)},get size(){return nf(this)},has:rf,add:gT,set:vT,delete:yT,clear:_T,forEach:af(!1,!1)},e={get(a){return tf(this,a,!1,!0)},get size(){return nf(this)},has:rf,add:gT,set:vT,delete:yT,clear:_T,forEach:af(!1,!0)},i={get(a){return tf(this,a,!0)},get size(){return nf(this,!0)},has(a){return rf.call(this,a,!0)},add:ma("add"),set:ma("set"),delete:ma("delete"),clear:ma("clear"),forEach:af(!0,!1)},n={get(a){return tf(this,a,!0,!0)},get size(){return nf(this,!0)},has(a){return rf.call(this,a,!0)},add:ma("add"),set:ma("set"),delete:ma("delete"),clear:ma("clear"),forEach:af(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{r[a]=sf(a,!1,!1),i[a]=sf(a,!0,!1),e[a]=sf(a,!1,!0),n[a]=sf(a,!0,!0)}),[r,i,e,n]}const[hF,pF,mF,gF]=dF();function Rv(r,e){const i=e?r?gF:mF:r?pF:hF;return(n,t,a)=>t==="__v_isReactive"?!r:t==="__v_isReadonly"?r:t==="__v_raw"?n:Reflect.get(yt(i,t)&&t in n?i:n,t,a)}const vF={get:Rv(!1,!1)},yF={get:Rv(!1,!0)},_F={get:Rv(!0,!1)},mE=new WeakMap,gE=new WeakMap,vE=new WeakMap,TF=new WeakMap;function bF(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function SF(r){return r.__v_skip||!Object.isExtensible(r)?0:bF($N(r))}function wv(r){return pl(r)?r:Av(r,!1,pE,vF,mE)}function xF(r){return Av(r,!1,fF,yF,gE)}function yE(r){return Av(r,!0,cF,_F,vE)}function Av(r,e,i,n,t){if(!Wt(r)||r.__v_raw&&!(e&&r.__v_isReactive))return r;const a=t.get(r);if(a)return a;const s=SF(r);if(s===0)return r;const o=new Proxy(r,s===2?n:i);return t.set(r,o),o}function _o(r){return pl(r)?_o(r.__v_raw):!!(r&&r.__v_isReactive)}function pl(r){return!!(r&&r.__v_isReadonly)}function Jm(r){return!!(r&&r.__v_isShallow)}function _E(r){return _o(r)||pl(r)}function wt(r){const e=r&&r.__v_raw;return e?wt(e):r}function TE(r){return Hf(r,"__v_skip",!0),r}const Pv=r=>Wt(r)?wv(r):r,Ov=r=>Wt(r)?yE(r):r;function EF(r){Ta&&ji&&(r=wt(r),fE(r.dep||(r.dep=Sv())))}function CF(r,e){r=wt(r),r.dep&&Qm(r.dep)}function $r(r){return!!(r&&r.__v_isRef===!0)}function RF(r){return $r(r)?r.value:r}const wF={get:(r,e,i)=>RF(Reflect.get(r,e,i)),set:(r,e,i,n)=>{const t=r[e];return $r(t)&&!$r(i)?(t.value=i,!0):Reflect.set(r,e,i,n)}};function bE(r){return _o(r)?r:new Proxy(r,wF)}var SE;class AF{constructor(e,i,n,t){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this[SE]=!1,this._dirty=!0,this.effect=new xv(e,()=>{this._dirty||(this._dirty=!0,CF(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!t,this.__v_isReadonly=n}get value(){const e=wt(this);return EF(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}SE="__v_isReadonly";function PF(r,e,i=!1){let n,t;const a=pt(r);return a?(n=r,t=Wi):(n=r.get,t=r.set),new AF(n,t,a||!t,i)}function ba(r,e,i,n){let t;try{t=n?r(...n):r()}catch(a){jd(a,e,i)}return t}function Ri(r,e,i,n){if(pt(r)){const a=ba(r,e,i,n);return a&&aE(a)&&a.catch(s=>{jd(s,e,i)}),a}const t=[];for(let a=0;a<r.length;a++)t.push(Ri(r[a],e,i,n));return t}function jd(r,e,i,n=!0){const t=e?e.vnode:null;if(e){let a=e.parent;const s=e.proxy,o=i;for(;a;){const c=a.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](r,s,o)===!1)return}a=a.parent}const l=e.appContext.config.errorHandler;if(l){ba(l,null,10,[r,s,o]);return}}OF(r,i,t,n)}function OF(r,e,i,n=!0){console.error(r)}let ml=!1,Zm=!1;const Ar=[];let cn=0;const To=[];let Bn=null,os=0;const xE=Promise.resolve();let Iv=null;function IF(r){const e=Iv||xE;return r?e.then(this?r.bind(this):r):e}function DF(r){let e=cn+1,i=Ar.length;for(;e<i;){const n=e+i>>>1;gl(Ar[n])<r?e=n+1:i=n}return e}function Dv(r){(!Ar.length||!Ar.includes(r,ml&&r.allowRecurse?cn+1:cn))&&(r.id==null?Ar.push(r):Ar.splice(DF(r.id),0,r),EE())}function EE(){!ml&&!Zm&&(Zm=!0,Iv=xE.then(RE))}function kF(r){const e=Ar.indexOf(r);e>cn&&Ar.splice(e,1)}function LF(r){ot(r)?To.push(...r):(!Bn||!Bn.includes(r,r.allowRecurse?os+1:os))&&To.push(r),EE()}function TT(r,e=ml?cn+1:0){for(;e<Ar.length;e++){const i=Ar[e];i&&i.pre&&(Ar.splice(e,1),e--,i())}}function CE(r){if(To.length){const e=[...new Set(To)];if(To.length=0,Bn){Bn.push(...e);return}for(Bn=e,Bn.sort((i,n)=>gl(i)-gl(n)),os=0;os<Bn.length;os++)Bn[os]();Bn=null,os=0}}const gl=r=>r.id==null?1/0:r.id,MF=(r,e)=>{const i=gl(r)-gl(e);if(i===0){if(r.pre&&!e.pre)return-1;if(e.pre&&!r.pre)return 1}return i};function RE(r){Zm=!1,ml=!0,Ar.sort(MF);const e=Wi;try{for(cn=0;cn<Ar.length;cn++){const i=Ar[cn];i&&i.active!==!1&&ba(i,null,14)}}finally{cn=0,Ar.length=0,CE(),ml=!1,Iv=null,(Ar.length||To.length)&&RE()}}function NF(r,e,...i){if(r.isUnmounted)return;const n=r.vnode.props||It;let t=i;const a=e.startsWith("update:"),s=a&&e.slice(7);if(s&&s in n){const d=`${s==="modelValue"?"model":s}Modifiers`,{number:h,trim:p}=n[d]||It;p&&(t=i.map(y=>y.trim())),h&&(t=i.map(KN))}let o,l=n[o=Qp(e)]||n[o=Qp(Po(e))];!l&&a&&(l=n[o=Qp(Ud(e))]),l&&Ri(l,r,6,t);const c=n[o+"Once"];if(c){if(!r.emitted)r.emitted={};else if(r.emitted[o])return;r.emitted[o]=!0,Ri(c,r,6,t)}}function wE(r,e,i=!1){const n=e.emitsCache,t=n.get(r);if(t!==void 0)return t;const a=r.emits;let s={},o=!1;if(!pt(r)){const l=c=>{const d=wE(c,e,!0);d&&(o=!0,ni(s,d))};!i&&e.mixins.length&&e.mixins.forEach(l),r.extends&&l(r.extends),r.mixins&&r.mixins.forEach(l)}return!a&&!o?(Wt(r)&&n.set(r,null),null):(ot(a)?a.forEach(l=>s[l]=null):ni(s,a),Wt(r)&&n.set(r,s),s)}function Vd(r,e){return!r||!yv(e)?!1:(e=e.slice(2).replace(/Once$/,""),yt(r,e[0].toLowerCase()+e.slice(1))||yt(r,Ud(e))||yt(r,e))}let Vi=null,AE=null;function Wf(r){const e=Vi;return Vi=r,AE=r&&r.type.__scopeId||null,e}function FF(r,e=Vi,i){if(!e||r._n)return r;const n=(...t)=>{n._d&&OT(-1);const a=Wf(e),s=r(...t);return Wf(a),n._d&&OT(1),s};return n._n=!0,n._c=!0,n._d=!0,n}function Zp(r){const{type:e,vnode:i,proxy:n,withProxy:t,props:a,propsOptions:[s],slots:o,attrs:l,emit:c,render:d,renderCache:h,data:p,setupState:y,ctx:S,inheritAttrs:C}=r;let x,I;const H=Wf(r);try{if(i.shapeFlag&4){const W=t||n;x=un(d.call(W,W,h,a,y,p,S)),I=l}else{const W=e;x=un(W.length>1?W(a,{attrs:l,slots:o,emit:c}):W(a,null)),I=e.props?l:UF(l)}}catch(W){ol.length=0,jd(W,r,1),x=Sa(Wn)}let Z=x;if(I&&C!==!1){const W=Object.keys(I),{shapeFlag:j}=Z;W.length&&j&7&&(s&&W.some(iE)&&(I=BF(I,s)),Z=Ra(Z,I))}return i.dirs&&(Z=Ra(Z),Z.dirs=Z.dirs?Z.dirs.concat(i.dirs):i.dirs),i.transition&&(Z.transition=i.transition),x=Z,Wf(H),x}const UF=r=>{let e;for(const i in r)(i==="class"||i==="style"||yv(i))&&((e||(e={}))[i]=r[i]);return e},BF=(r,e)=>{const i={};for(const n in r)(!iE(n)||!(n.slice(9)in e))&&(i[n]=r[n]);return i};function jF(r,e,i){const{props:n,children:t,component:a}=r,{props:s,children:o,patchFlag:l}=e,c=a.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return n?bT(n,s,c):!!s;if(l&8){const d=e.dynamicProps;for(let h=0;h<d.length;h++){const p=d[h];if(s[p]!==n[p]&&!Vd(c,p))return!0}}}else return(t||o)&&(!o||!o.$stable)?!0:n===s?!1:n?s?bT(n,s,c):!0:!!s;return!1}function bT(r,e,i){const n=Object.keys(e);if(n.length!==Object.keys(r).length)return!0;for(let t=0;t<n.length;t++){const a=n[t];if(e[a]!==r[a]&&!Vd(i,a))return!0}return!1}function VF({vnode:r,parent:e},i){for(;e&&e.subTree===r;)(r=e.vnode).el=i,e=e.parent}const HF=r=>r.__isSuspense;function WF(r,e){e&&e.pendingBranch?ot(r)?e.effects.push(...r):e.effects.push(r):LF(r)}function $F(r,e){if(br){let i=br.provides;const n=br.parent&&br.parent.provides;n===i&&(i=br.provides=Object.create(n)),i[r]=e}}function em(r,e,i=!1){const n=br||Vi;if(n){const t=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(t&&r in t)return t[r];if(arguments.length>1)return i&&pt(e)?e.call(n.proxy):e}}const ST={};function tm(r,e,i){return PE(r,e,i)}function PE(r,e,{immediate:i,deep:n,flush:t,onTrack:a,onTrigger:s}=It){const o=br;let l,c=!1,d=!1;if($r(r)?(l=()=>r.value,c=Jm(r)):_o(r)?(l=()=>r,n=!0):ot(r)?(d=!0,c=r.some(I=>_o(I)||Jm(I)),l=()=>r.map(I=>{if($r(I))return I.value;if(_o(I))return ds(I);if(pt(I))return ba(I,o,2)})):pt(r)?e?l=()=>ba(r,o,2):l=()=>{if(!(o&&o.isUnmounted))return h&&h(),Ri(r,o,3,[p])}:l=Wi,e&&n){const I=l;l=()=>ds(I())}let h,p=I=>{h=x.onStop=()=>{ba(I,o,4)}};if(yl)return p=Wi,e?i&&Ri(e,o,3,[l(),d?[]:void 0,p]):l(),Wi;let y=d?[]:ST;const S=()=>{if(!!x.active)if(e){const I=x.run();(n||c||(d?I.some((H,Z)=>Vf(H,y[Z])):Vf(I,y)))&&(h&&h(),Ri(e,o,3,[I,y===ST?void 0:y,p]),y=I)}else x.run()};S.allowRecurse=!!e;let C;t==="sync"?C=S:t==="post"?C=()=>ei(S,o&&o.suspense):(S.pre=!0,o&&(S.id=o.uid),C=()=>Dv(S));const x=new xv(l,C);return e?i?S():y=x.run():t==="post"?ei(x.run.bind(x),o&&o.suspense):x.run(),()=>{x.stop(),o&&o.scope&&_v(o.scope.effects,x)}}function GF(r,e,i){const n=this.proxy,t=ai(r)?r.includes(".")?OE(n,r):()=>n[r]:r.bind(n,n);let a;pt(e)?a=e:(a=e.handler,i=e);const s=br;Oo(this);const o=PE(t,a.bind(n),i);return s?Oo(s):ys(),o}function OE(r,e){const i=e.split(".");return()=>{let n=r;for(let t=0;t<i.length&&n;t++)n=n[i[t]];return n}}function ds(r,e){if(!Wt(r)||r.__v_skip||(e=e||new Set,e.has(r)))return r;if(e.add(r),$r(r))ds(r.value,e);else if(ot(r))for(let i=0;i<r.length;i++)ds(r[i],e);else if(nE(r)||yo(r))r.forEach(i=>{ds(i,e)});else if(oE(r))for(const i in r)ds(r[i],e);return r}function zF(){const r={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return LE(()=>{r.isMounted=!0}),ME(()=>{r.isUnmounting=!0}),r}const Ei=[Function,Array],qF={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ei,onEnter:Ei,onAfterEnter:Ei,onEnterCancelled:Ei,onBeforeLeave:Ei,onLeave:Ei,onAfterLeave:Ei,onLeaveCancelled:Ei,onBeforeAppear:Ei,onAppear:Ei,onAfterAppear:Ei,onAppearCancelled:Ei},setup(r,{slots:e}){const i=MU(),n=zF();let t;return()=>{const a=e.default&&DE(e.default(),!0);if(!a||!a.length)return;let s=a[0];if(a.length>1){for(const C of a)if(C.type!==Wn){s=C;break}}const o=wt(r),{mode:l}=o;if(n.isLeaving)return rm(s);const c=xT(s);if(!c)return rm(s);const d=eg(c,o,n,i);tg(c,d);const h=i.subTree,p=h&&xT(h);let y=!1;const{getTransitionKey:S}=c.type;if(S){const C=S();t===void 0?t=C:C!==t&&(t=C,y=!0)}if(p&&p.type!==Wn&&(!us(c,p)||y)){const C=eg(p,o,n,i);if(tg(p,C),l==="out-in")return n.isLeaving=!0,C.afterLeave=()=>{n.isLeaving=!1,i.update()},rm(s);l==="in-out"&&c.type!==Wn&&(C.delayLeave=(x,I,H)=>{const Z=IE(n,p);Z[String(p.key)]=p,x._leaveCb=()=>{I(),x._leaveCb=void 0,delete d.delayedLeave},d.delayedLeave=H})}return s}}},KF=qF;function IE(r,e){const{leavingVNodes:i}=r;let n=i.get(e.type);return n||(n=Object.create(null),i.set(e.type,n)),n}function eg(r,e,i,n){const{appear:t,mode:a,persisted:s=!1,onBeforeEnter:o,onEnter:l,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:h,onLeave:p,onAfterLeave:y,onLeaveCancelled:S,onBeforeAppear:C,onAppear:x,onAfterAppear:I,onAppearCancelled:H}=e,Z=String(r.key),W=IE(i,r),j=(Y,oe)=>{Y&&Ri(Y,n,9,oe)},le=(Y,oe)=>{const V=oe[1];j(Y,oe),ot(Y)?Y.every(pe=>pe.length<=1)&&V():Y.length<=1&&V()},fe={mode:a,persisted:s,beforeEnter(Y){let oe=o;if(!i.isMounted)if(t)oe=C||o;else return;Y._leaveCb&&Y._leaveCb(!0);const V=W[Z];V&&us(r,V)&&V.el._leaveCb&&V.el._leaveCb(),j(oe,[Y])},enter(Y){let oe=l,V=c,pe=d;if(!i.isMounted)if(t)oe=x||l,V=I||c,pe=H||d;else return;let de=!1;const Se=Y._enterCb=Ae=>{de||(de=!0,Ae?j(pe,[Y]):j(V,[Y]),fe.delayedLeave&&fe.delayedLeave(),Y._enterCb=void 0)};oe?le(oe,[Y,Se]):Se()},leave(Y,oe){const V=String(r.key);if(Y._enterCb&&Y._enterCb(!0),i.isUnmounting)return oe();j(h,[Y]);let pe=!1;const de=Y._leaveCb=Se=>{pe||(pe=!0,oe(),Se?j(S,[Y]):j(y,[Y]),Y._leaveCb=void 0,W[V]===r&&delete W[V])};W[V]=r,p?le(p,[Y,de]):de()},clone(Y){return eg(Y,e,i,n)}};return fe}function rm(r){if(Hd(r))return r=Ra(r),r.children=null,r}function xT(r){return Hd(r)?r.children?r.children[0]:void 0:r}function tg(r,e){r.shapeFlag&6&&r.component?tg(r.component.subTree,e):r.shapeFlag&128?(r.ssContent.transition=e.clone(r.ssContent),r.ssFallback.transition=e.clone(r.ssFallback)):r.transition=e}function DE(r,e=!1,i){let n=[],t=0;for(let a=0;a<r.length;a++){let s=r[a];const o=i==null?s.key:String(i)+String(s.key!=null?s.key:a);s.type===Ui?(s.patchFlag&128&&t++,n=n.concat(DE(s.children,e,o))):(e||s.type!==Wn)&&n.push(o!=null?Ra(s,{key:o}):s)}if(t>1)for(let a=0;a<n.length;a++)n[a].patchFlag=-2;return n}const Sf=r=>!!r.type.__asyncLoader,Hd=r=>r.type.__isKeepAlive;function YF(r,e){kE(r,"a",e)}function XF(r,e){kE(r,"da",e)}function kE(r,e,i=br){const n=r.__wdc||(r.__wdc=()=>{let t=i;for(;t;){if(t.isDeactivated)return;t=t.parent}return r()});if(Wd(e,n,i),i){let t=i.parent;for(;t&&t.parent;)Hd(t.parent.vnode)&&QF(n,e,i,t),t=t.parent}}function QF(r,e,i,n){const t=Wd(e,r,n,!0);NE(()=>{_v(n[e],t)},i)}function Wd(r,e,i=br,n=!1){if(i){const t=i[r]||(i[r]=[]),a=e.__weh||(e.__weh=(...s)=>{if(i.isUnmounted)return;Go(),Oo(i);const o=Ri(e,i,r,s);return ys(),zo(),o});return n?t.unshift(a):t.push(a),a}}const Jn=r=>(e,i=br)=>(!yl||r==="sp")&&Wd(r,e,i),JF=Jn("bm"),LE=Jn("m"),ZF=Jn("bu"),eU=Jn("u"),ME=Jn("bum"),NE=Jn("um"),tU=Jn("sp"),rU=Jn("rtg"),iU=Jn("rtc");function nU(r,e=br){Wd("ec",r,e)}function Hu(r,e){const i=Vi;if(i===null)return r;const n=Gd(i)||i.proxy,t=r.dirs||(r.dirs=[]);for(let a=0;a<e.length;a++){let[s,o,l,c=It]=e[a];pt(s)&&(s={mounted:s,updated:s}),s.deep&&ds(o),t.push({dir:s,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c})}return r}function ts(r,e,i,n){const t=r.dirs,a=e&&e.dirs;for(let s=0;s<t.length;s++){const o=t[s];a&&(o.oldValue=a[s].value);let l=o.dir[n];l&&(Go(),Ri(l,i,8,[r.el,o,r,e]),zo())}}const aU=Symbol();function sU(r,e,i,n){let t;const a=i&&i[n];if(ot(r)||ai(r)){t=new Array(r.length);for(let s=0,o=r.length;s<o;s++)t[s]=e(r[s],s,void 0,a&&a[s])}else if(typeof r=="number"){t=new Array(r);for(let s=0;s<r;s++)t[s]=e(s+1,s,void 0,a&&a[s])}else if(Wt(r))if(r[Symbol.iterator])t=Array.from(r,(s,o)=>e(s,o,void 0,a&&a[o]));else{const s=Object.keys(r);t=new Array(s.length);for(let o=0,l=s.length;o<l;o++){const c=s[o];t[o]=e(r[c],c,o,a&&a[o])}}else t=[];return i&&(i[n]=t),t}const rg=r=>r?zE(r)?Gd(r)||r.proxy:rg(r.parent):null,$f=ni(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>rg(r.parent),$root:r=>rg(r.root),$emit:r=>r.emit,$options:r=>kv(r),$forceUpdate:r=>r.f||(r.f=()=>Dv(r.update)),$nextTick:r=>r.n||(r.n=IF.bind(r.proxy)),$watch:r=>GF.bind(r)}),oU={get({_:r},e){const{ctx:i,setupState:n,data:t,props:a,accessCache:s,type:o,appContext:l}=r;let c;if(e[0]!=="$"){const y=s[e];if(y!==void 0)switch(y){case 1:return n[e];case 2:return t[e];case 4:return i[e];case 3:return a[e]}else{if(n!==It&&yt(n,e))return s[e]=1,n[e];if(t!==It&&yt(t,e))return s[e]=2,t[e];if((c=r.propsOptions[0])&&yt(c,e))return s[e]=3,a[e];if(i!==It&&yt(i,e))return s[e]=4,i[e];ig&&(s[e]=0)}}const d=$f[e];let h,p;if(d)return e==="$attrs"&&gi(r,"get",e),d(r);if((h=o.__cssModules)&&(h=h[e]))return h;if(i!==It&&yt(i,e))return s[e]=4,i[e];if(p=l.config.globalProperties,yt(p,e))return p[e]},set({_:r},e,i){const{data:n,setupState:t,ctx:a}=r;return t!==It&&yt(t,e)?(t[e]=i,!0):n!==It&&yt(n,e)?(n[e]=i,!0):yt(r.props,e)||e[0]==="$"&&e.slice(1)in r?!1:(a[e]=i,!0)},has({_:{data:r,setupState:e,accessCache:i,ctx:n,appContext:t,propsOptions:a}},s){let o;return!!i[s]||r!==It&&yt(r,s)||e!==It&&yt(e,s)||(o=a[0])&&yt(o,s)||yt(n,s)||yt($f,s)||yt(t.config.globalProperties,s)},defineProperty(r,e,i){return i.get!=null?r._.accessCache[e]=0:yt(i,"value")&&this.set(r,e,i.value,null),Reflect.defineProperty(r,e,i)}};let ig=!0;function uU(r){const e=kv(r),i=r.proxy,n=r.ctx;ig=!1,e.beforeCreate&&ET(e.beforeCreate,r,"bc");const{data:t,computed:a,methods:s,watch:o,provide:l,inject:c,created:d,beforeMount:h,mounted:p,beforeUpdate:y,updated:S,activated:C,deactivated:x,beforeDestroy:I,beforeUnmount:H,destroyed:Z,unmounted:W,render:j,renderTracked:le,renderTriggered:fe,errorCaptured:Y,serverPrefetch:oe,expose:V,inheritAttrs:pe,components:de,directives:Se,filters:Ae}=e;if(c&&lU(c,n,null,r.appContext.config.unwrapInjectedRef),s)for(const Fe in s){const ge=s[Fe];pt(ge)&&(n[Fe]=ge.bind(i))}if(t){const Fe=t.call(i,i);Wt(Fe)&&(r.data=wv(Fe))}if(ig=!0,a)for(const Fe in a){const ge=a[Fe],Ye=pt(ge)?ge.bind(i,i):pt(ge.get)?ge.get.bind(i,i):Wi,K=!pt(ge)&&pt(ge.set)?ge.set.bind(i):Wi,w=VU({get:Ye,set:K});Object.defineProperty(n,Fe,{enumerable:!0,configurable:!0,get:()=>w.value,set:te=>w.value=te})}if(o)for(const Fe in o)FE(o[Fe],n,i,Fe);if(l){const Fe=pt(l)?l.call(i):l;Reflect.ownKeys(Fe).forEach(ge=>{$F(ge,Fe[ge])})}d&&ET(d,r,"c");function De(Fe,ge){ot(ge)?ge.forEach(Ye=>Fe(Ye.bind(i))):ge&&Fe(ge.bind(i))}if(De(JF,h),De(LE,p),De(ZF,y),De(eU,S),De(YF,C),De(XF,x),De(nU,Y),De(iU,le),De(rU,fe),De(ME,H),De(NE,W),De(tU,oe),ot(V))if(V.length){const Fe=r.exposed||(r.exposed={});V.forEach(ge=>{Object.defineProperty(Fe,ge,{get:()=>i[ge],set:Ye=>i[ge]=Ye})})}else r.exposed||(r.exposed={});j&&r.render===Wi&&(r.render=j),pe!=null&&(r.inheritAttrs=pe),de&&(r.components=de),Se&&(r.directives=Se)}function lU(r,e,i=Wi,n=!1){ot(r)&&(r=ng(r));for(const t in r){const a=r[t];let s;Wt(a)?"default"in a?s=em(a.from||t,a.default,!0):s=em(a.from||t):s=em(a),$r(s)&&n?Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[t]=s}}function ET(r,e,i){Ri(ot(r)?r.map(n=>n.bind(e.proxy)):r.bind(e.proxy),e,i)}function FE(r,e,i,n){const t=n.includes(".")?OE(i,n):()=>i[n];if(ai(r)){const a=e[r];pt(a)&&tm(t,a)}else if(pt(r))tm(t,r.bind(i));else if(Wt(r))if(ot(r))r.forEach(a=>FE(a,e,i,n));else{const a=pt(r.handler)?r.handler.bind(i):e[r.handler];pt(a)&&tm(t,a,r)}}function kv(r){const e=r.type,{mixins:i,extends:n}=e,{mixins:t,optionsCache:a,config:{optionMergeStrategies:s}}=r.appContext,o=a.get(e);let l;return o?l=o:!t.length&&!i&&!n?l=e:(l={},t.length&&t.forEach(c=>Gf(l,c,s,!0)),Gf(l,e,s)),Wt(e)&&a.set(e,l),l}function Gf(r,e,i,n=!1){const{mixins:t,extends:a}=e;a&&Gf(r,a,i,!0),t&&t.forEach(s=>Gf(r,s,i,!0));for(const s in e)if(!(n&&s==="expose")){const o=cU[s]||i&&i[s];r[s]=o?o(r[s],e[s]):e[s]}return r}const cU={data:CT,props:as,emits:as,methods:as,computed:as,beforeCreate:Ur,created:Ur,beforeMount:Ur,mounted:Ur,beforeUpdate:Ur,updated:Ur,beforeDestroy:Ur,beforeUnmount:Ur,destroyed:Ur,unmounted:Ur,activated:Ur,deactivated:Ur,errorCaptured:Ur,serverPrefetch:Ur,components:as,directives:as,watch:dU,provide:CT,inject:fU};function CT(r,e){return e?r?function(){return ni(pt(r)?r.call(this,this):r,pt(e)?e.call(this,this):e)}:e:r}function fU(r,e){return as(ng(r),ng(e))}function ng(r){if(ot(r)){const e={};for(let i=0;i<r.length;i++)e[r[i]]=r[i];return e}return r}function Ur(r,e){return r?[...new Set([].concat(r,e))]:e}function as(r,e){return r?ni(ni(Object.create(null),r),e):e}function dU(r,e){if(!r)return e;if(!e)return r;const i=ni(Object.create(null),r);for(const n in e)i[n]=Ur(r[n],e[n]);return i}function hU(r,e,i,n=!1){const t={},a={};Hf(a,$d,1),r.propsDefaults=Object.create(null),UE(r,e,t,a);for(const s in r.propsOptions[0])s in t||(t[s]=void 0);i?r.props=n?t:xF(t):r.type.props?r.props=t:r.props=a,r.attrs=a}function pU(r,e,i,n){const{props:t,attrs:a,vnode:{patchFlag:s}}=r,o=wt(t),[l]=r.propsOptions;let c=!1;if((n||s>0)&&!(s&16)){if(s&8){const d=r.vnode.dynamicProps;for(let h=0;h<d.length;h++){let p=d[h];if(Vd(r.emitsOptions,p))continue;const y=e[p];if(l)if(yt(a,p))y!==a[p]&&(a[p]=y,c=!0);else{const S=Po(p);t[S]=ag(l,o,S,y,r,!1)}else y!==a[p]&&(a[p]=y,c=!0)}}}else{UE(r,e,t,a)&&(c=!0);let d;for(const h in o)(!e||!yt(e,h)&&((d=Ud(h))===h||!yt(e,d)))&&(l?i&&(i[h]!==void 0||i[d]!==void 0)&&(t[h]=ag(l,o,h,void 0,r,!0)):delete t[h]);if(a!==o)for(const h in a)(!e||!yt(e,h)&&!0)&&(delete a[h],c=!0)}c&&qn(r,"set","$attrs")}function UE(r,e,i,n){const[t,a]=r.propsOptions;let s=!1,o;if(e)for(let l in e){if(bf(l))continue;const c=e[l];let d;t&&yt(t,d=Po(l))?!a||!a.includes(d)?i[d]=c:(o||(o={}))[d]=c:Vd(r.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,s=!0)}if(a){const l=wt(i),c=o||It;for(let d=0;d<a.length;d++){const h=a[d];i[h]=ag(t,l,h,c[h],r,!yt(c,h))}}return s}function ag(r,e,i,n,t,a){const s=r[i];if(s!=null){const o=yt(s,"default");if(o&&n===void 0){const l=s.default;if(s.type!==Function&&pt(l)){const{propsDefaults:c}=t;i in c?n=c[i]:(Oo(t),n=c[i]=l.call(null,e),ys())}else n=l}s[0]&&(a&&!o?n=!1:s[1]&&(n===""||n===Ud(i))&&(n=!0))}return n}function BE(r,e,i=!1){const n=e.propsCache,t=n.get(r);if(t)return t;const a=r.props,s={},o=[];let l=!1;if(!pt(r)){const d=h=>{l=!0;const[p,y]=BE(h,e,!0);ni(s,p),y&&o.push(...y)};!i&&e.mixins.length&&e.mixins.forEach(d),r.extends&&d(r.extends),r.mixins&&r.mixins.forEach(d)}if(!a&&!l)return Wt(r)&&n.set(r,vo),vo;if(ot(a))for(let d=0;d<a.length;d++){const h=Po(a[d]);RT(h)&&(s[h]=It)}else if(a)for(const d in a){const h=Po(d);if(RT(h)){const p=a[d],y=s[h]=ot(p)||pt(p)?{type:p}:p;if(y){const S=PT(Boolean,y.type),C=PT(String,y.type);y[0]=S>-1,y[1]=C<0||S<C,(S>-1||yt(y,"default"))&&o.push(h)}}}const c=[s,o];return Wt(r)&&n.set(r,c),c}function RT(r){return r[0]!=="$"}function wT(r){const e=r&&r.toString().match(/^\s*function (\w+)/);return e?e[1]:r===null?"null":""}function AT(r,e){return wT(r)===wT(e)}function PT(r,e){return ot(e)?e.findIndex(i=>AT(i,r)):pt(e)&&AT(e,r)?0:-1}const jE=r=>r[0]==="_"||r==="$stable",Lv=r=>ot(r)?r.map(un):[un(r)],mU=(r,e,i)=>{if(e._n)return e;const n=FF((...t)=>Lv(e(...t)),i);return n._c=!1,n},VE=(r,e,i)=>{const n=r._ctx;for(const t in r){if(jE(t))continue;const a=r[t];if(pt(a))e[t]=mU(t,a,n);else if(a!=null){const s=Lv(a);e[t]=()=>s}}},HE=(r,e)=>{const i=Lv(e);r.slots.default=()=>i},gU=(r,e)=>{if(r.vnode.shapeFlag&32){const i=e._;i?(r.slots=wt(e),Hf(e,"_",i)):VE(e,r.slots={})}else r.slots={},e&&HE(r,e);Hf(r.slots,$d,1)},vU=(r,e,i)=>{const{vnode:n,slots:t}=r;let a=!0,s=It;if(n.shapeFlag&32){const o=e._;o?i&&o===1?a=!1:(ni(t,e),!i&&o===1&&delete t._):(a=!e.$stable,VE(e,t)),s=e}else e&&(HE(r,e),s={default:1});if(a)for(const o in t)!jE(o)&&!(o in s)&&delete t[o]};function WE(){return{app:null,config:{isNativeTag:VN,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let yU=0;function _U(r,e){return function(n,t=null){pt(n)||(n=Object.assign({},n)),t!=null&&!Wt(t)&&(t=null);const a=WE(),s=new Set;let o=!1;const l=a.app={_uid:yU++,_component:n,_props:t,_container:null,_context:a,_instance:null,version:HU,get config(){return a.config},set config(c){},use(c,...d){return s.has(c)||(c&&pt(c.install)?(s.add(c),c.install(l,...d)):pt(c)&&(s.add(c),c(l,...d))),l},mixin(c){return a.mixins.includes(c)||a.mixins.push(c),l},component(c,d){return d?(a.components[c]=d,l):a.components[c]},directive(c,d){return d?(a.directives[c]=d,l):a.directives[c]},mount(c,d,h){if(!o){const p=Sa(n,t);return p.appContext=a,d&&e?e(p,c):r(p,c,h),o=!0,l._container=c,c.__vue_app__=l,Gd(p.component)||p.component.proxy}},unmount(){o&&(r(null,l._container),delete l._container.__vue_app__)},provide(c,d){return a.provides[c]=d,l}};return l}}function sg(r,e,i,n,t=!1){if(ot(r)){r.forEach((p,y)=>sg(p,e&&(ot(e)?e[y]:e),i,n,t));return}if(Sf(n)&&!t)return;const a=n.shapeFlag&4?Gd(n.component)||n.component.proxy:n.el,s=t?null:a,{i:o,r:l}=r,c=e&&e.r,d=o.refs===It?o.refs={}:o.refs,h=o.setupState;if(c!=null&&c!==l&&(ai(c)?(d[c]=null,yt(h,c)&&(h[c]=null)):$r(c)&&(c.value=null)),pt(l))ba(l,o,12,[s,d]);else{const p=ai(l),y=$r(l);if(p||y){const S=()=>{if(r.f){const C=p?d[l]:l.value;t?ot(C)&&_v(C,a):ot(C)?C.includes(a)||C.push(a):p?(d[l]=[a],yt(h,l)&&(h[l]=d[l])):(l.value=[a],r.k&&(d[r.k]=l.value))}else p?(d[l]=s,yt(h,l)&&(h[l]=s)):y&&(l.value=s,r.k&&(d[r.k]=s))};s?(S.id=-1,ei(S,i)):S()}}}const ei=WF;function TU(r){return bU(r)}function bU(r,e){const i=YN();i.__VUE__=!0;const{insert:n,remove:t,patchProp:a,createElement:s,createText:o,createComment:l,setText:c,setElementText:d,parentNode:h,nextSibling:p,setScopeId:y=Wi,cloneNode:S,insertStaticContent:C}=r,x=(M,U,ae,be=null,G=null,ve=null,Te=!1,X=null,ue=!!U.dynamicChildren)=>{if(M===U)return;M&&!us(M,U)&&(be=ie(M),ye(M,G,ve,!0),M=null),U.patchFlag===-2&&(ue=!1,U.dynamicChildren=null);const{type:_e,ref:Re,shapeFlag:Ue}=U;switch(_e){case Mv:I(M,U,ae,be);break;case Wn:H(M,U,ae,be);break;case xf:M==null&&Z(U,ae,be,Te);break;case Ui:Se(M,U,ae,be,G,ve,Te,X,ue);break;default:Ue&1?le(M,U,ae,be,G,ve,Te,X,ue):Ue&6?Ae(M,U,ae,be,G,ve,Te,X,ue):(Ue&64||Ue&128)&&_e.process(M,U,ae,be,G,ve,Te,X,ue,ee)}Re!=null&&G&&sg(Re,M&&M.ref,ve,U||M,!U)},I=(M,U,ae,be)=>{if(M==null)n(U.el=o(U.children),ae,be);else{const G=U.el=M.el;U.children!==M.children&&c(G,U.children)}},H=(M,U,ae,be)=>{M==null?n(U.el=l(U.children||""),ae,be):U.el=M.el},Z=(M,U,ae,be)=>{[M.el,M.anchor]=C(M.children,U,ae,be,M.el,M.anchor)},W=({el:M,anchor:U},ae,be)=>{let G;for(;M&&M!==U;)G=p(M),n(M,ae,be),M=G;n(U,ae,be)},j=({el:M,anchor:U})=>{let ae;for(;M&&M!==U;)ae=p(M),t(M),M=ae;t(U)},le=(M,U,ae,be,G,ve,Te,X,ue)=>{Te=Te||U.type==="svg",M==null?fe(U,ae,be,G,ve,Te,X,ue):V(M,U,G,ve,Te,X,ue)},fe=(M,U,ae,be,G,ve,Te,X)=>{let ue,_e;const{type:Re,props:Ue,shapeFlag:Ne,transition:$e,patchFlag:Ge,dirs:tt}=M;if(M.el&&S!==void 0&&Ge===-1)ue=M.el=S(M.el);else{if(ue=M.el=s(M.type,ve,Ue&&Ue.is,Ue),Ne&8?d(ue,M.children):Ne&16&&oe(M.children,ue,null,be,G,ve&&Re!=="foreignObject",Te,X),tt&&ts(M,null,be,"created"),Ue){for(const ut in Ue)ut!=="value"&&!bf(ut)&&a(ue,ut,null,Ue[ut],ve,M.children,be,G,J);"value"in Ue&&a(ue,"value",null,Ue.value),(_e=Ue.onVnodeBeforeMount)&&nn(_e,be,M)}Y(ue,M,M.scopeId,Te,be)}tt&&ts(M,null,be,"beforeMount");const Xe=(!G||G&&!G.pendingBranch)&&$e&&!$e.persisted;Xe&&$e.beforeEnter(ue),n(ue,U,ae),((_e=Ue&&Ue.onVnodeMounted)||Xe||tt)&&ei(()=>{_e&&nn(_e,be,M),Xe&&$e.enter(ue),tt&&ts(M,null,be,"mounted")},G)},Y=(M,U,ae,be,G)=>{if(ae&&y(M,ae),be)for(let ve=0;ve<be.length;ve++)y(M,be[ve]);if(G){let ve=G.subTree;if(U===ve){const Te=G.vnode;Y(M,Te,Te.scopeId,Te.slotScopeIds,G.parent)}}},oe=(M,U,ae,be,G,ve,Te,X,ue=0)=>{for(let _e=ue;_e<M.length;_e++){const Re=M[_e]=X?ya(M[_e]):un(M[_e]);x(null,Re,U,ae,be,G,ve,Te,X)}},V=(M,U,ae,be,G,ve,Te)=>{const X=U.el=M.el;let{patchFlag:ue,dynamicChildren:_e,dirs:Re}=U;ue|=M.patchFlag&16;const Ue=M.props||It,Ne=U.props||It;let $e;ae&&rs(ae,!1),($e=Ne.onVnodeBeforeUpdate)&&nn($e,ae,U,M),Re&&ts(U,M,ae,"beforeUpdate"),ae&&rs(ae,!0);const Ge=G&&U.type!=="foreignObject";if(_e?pe(M.dynamicChildren,_e,X,ae,be,Ge,ve):Te||Ye(M,U,X,null,ae,be,Ge,ve,!1),ue>0){if(ue&16)de(X,U,Ue,Ne,ae,be,G);else if(ue&2&&Ue.class!==Ne.class&&a(X,"class",null,Ne.class,G),ue&4&&a(X,"style",Ue.style,Ne.style,G),ue&8){const tt=U.dynamicProps;for(let Xe=0;Xe<tt.length;Xe++){const ut=tt[Xe],qe=Ue[ut],Pt=Ne[ut];(Pt!==qe||ut==="value")&&a(X,ut,qe,Pt,G,M.children,ae,be,J)}}ue&1&&M.children!==U.children&&d(X,U.children)}else!Te&&_e==null&&de(X,U,Ue,Ne,ae,be,G);(($e=Ne.onVnodeUpdated)||Re)&&ei(()=>{$e&&nn($e,ae,U,M),Re&&ts(U,M,ae,"updated")},be)},pe=(M,U,ae,be,G,ve,Te)=>{for(let X=0;X<U.length;X++){const ue=M[X],_e=U[X],Re=ue.el&&(ue.type===Ui||!us(ue,_e)||ue.shapeFlag&70)?h(ue.el):ae;x(ue,_e,Re,null,be,G,ve,Te,!0)}},de=(M,U,ae,be,G,ve,Te)=>{if(ae!==be){for(const X in be){if(bf(X))continue;const ue=be[X],_e=ae[X];ue!==_e&&X!=="value"&&a(M,X,_e,ue,Te,U.children,G,ve,J)}if(ae!==It)for(const X in ae)!bf(X)&&!(X in be)&&a(M,X,ae[X],null,Te,U.children,G,ve,J);"value"in be&&a(M,"value",ae.value,be.value)}},Se=(M,U,ae,be,G,ve,Te,X,ue)=>{const _e=U.el=M?M.el:o(""),Re=U.anchor=M?M.anchor:o("");let{patchFlag:Ue,dynamicChildren:Ne,slotScopeIds:$e}=U;$e&&(X=X?X.concat($e):$e),M==null?(n(_e,ae,be),n(Re,ae,be),oe(U.children,ae,Re,G,ve,Te,X,ue)):Ue>0&&Ue&64&&Ne&&M.dynamicChildren?(pe(M.dynamicChildren,Ne,ae,G,ve,Te,X),(U.key!=null||G&&U===G.subTree)&&$E(M,U,!0)):Ye(M,U,ae,Re,G,ve,Te,X,ue)},Ae=(M,U,ae,be,G,ve,Te,X,ue)=>{U.slotScopeIds=X,M==null?U.shapeFlag&512?G.ctx.activate(U,ae,be,Te,ue):ke(U,ae,be,G,ve,Te,ue):De(M,U,ue)},ke=(M,U,ae,be,G,ve,Te)=>{const X=M.component=LU(M,be,G);if(Hd(M)&&(X.ctx.renderer=ee),NU(X),X.asyncDep){if(G&&G.registerDep(X,Fe),!M.el){const ue=X.subTree=Sa(Wn);H(null,ue,U,ae)}return}Fe(X,M,U,ae,G,ve,Te)},De=(M,U,ae)=>{const be=U.component=M.component;if(jF(M,U,ae))if(be.asyncDep&&!be.asyncResolved){ge(be,U,ae);return}else be.next=U,kF(be.update),be.update();else U.el=M.el,be.vnode=U},Fe=(M,U,ae,be,G,ve,Te)=>{const X=()=>{if(M.isMounted){let{next:Re,bu:Ue,u:Ne,parent:$e,vnode:Ge}=M,tt=Re,Xe;rs(M,!1),Re?(Re.el=Ge.el,ge(M,Re,Te)):Re=Ge,Ue&&Jp(Ue),(Xe=Re.props&&Re.props.onVnodeBeforeUpdate)&&nn(Xe,$e,Re,Ge),rs(M,!0);const ut=Zp(M),qe=M.subTree;M.subTree=ut,x(qe,ut,h(qe.el),ie(qe),M,G,ve),Re.el=ut.el,tt===null&&VF(M,ut.el),Ne&&ei(Ne,G),(Xe=Re.props&&Re.props.onVnodeUpdated)&&ei(()=>nn(Xe,$e,Re,Ge),G)}else{let Re;const{el:Ue,props:Ne}=U,{bm:$e,m:Ge,parent:tt}=M,Xe=Sf(U);if(rs(M,!1),$e&&Jp($e),!Xe&&(Re=Ne&&Ne.onVnodeBeforeMount)&&nn(Re,tt,U),rs(M,!0),Ue&&Ce){const ut=()=>{M.subTree=Zp(M),Ce(Ue,M.subTree,M,G,null)};Xe?U.type.__asyncLoader().then(()=>!M.isUnmounted&&ut()):ut()}else{const ut=M.subTree=Zp(M);x(null,ut,ae,be,M,G,ve),U.el=ut.el}if(Ge&&ei(Ge,G),!Xe&&(Re=Ne&&Ne.onVnodeMounted)){const ut=U;ei(()=>nn(Re,tt,ut),G)}(U.shapeFlag&256||tt&&Sf(tt.vnode)&&tt.vnode.shapeFlag&256)&&M.a&&ei(M.a,G),M.isMounted=!0,U=ae=be=null}},ue=M.effect=new xv(X,()=>Dv(_e),M.scope),_e=M.update=()=>ue.run();_e.id=M.uid,rs(M,!0),_e()},ge=(M,U,ae)=>{U.component=M;const be=M.vnode.props;M.vnode=U,M.next=null,pU(M,U.props,be,ae),vU(M,U.children,ae),Go(),TT(),zo()},Ye=(M,U,ae,be,G,ve,Te,X,ue=!1)=>{const _e=M&&M.children,Re=M?M.shapeFlag:0,Ue=U.children,{patchFlag:Ne,shapeFlag:$e}=U;if(Ne>0){if(Ne&128){w(_e,Ue,ae,be,G,ve,Te,X,ue);return}else if(Ne&256){K(_e,Ue,ae,be,G,ve,Te,X,ue);return}}$e&8?(Re&16&&J(_e,G,ve),Ue!==_e&&d(ae,Ue)):Re&16?$e&16?w(_e,Ue,ae,be,G,ve,Te,X,ue):J(_e,G,ve,!0):(Re&8&&d(ae,""),$e&16&&oe(Ue,ae,be,G,ve,Te,X,ue))},K=(M,U,ae,be,G,ve,Te,X,ue)=>{M=M||vo,U=U||vo;const _e=M.length,Re=U.length,Ue=Math.min(_e,Re);let Ne;for(Ne=0;Ne<Ue;Ne++){const $e=U[Ne]=ue?ya(U[Ne]):un(U[Ne]);x(M[Ne],$e,ae,null,G,ve,Te,X,ue)}_e>Re?J(M,G,ve,!0,!1,Ue):oe(U,ae,be,G,ve,Te,X,ue,Ue)},w=(M,U,ae,be,G,ve,Te,X,ue)=>{let _e=0;const Re=U.length;let Ue=M.length-1,Ne=Re-1;for(;_e<=Ue&&_e<=Ne;){const $e=M[_e],Ge=U[_e]=ue?ya(U[_e]):un(U[_e]);if(us($e,Ge))x($e,Ge,ae,null,G,ve,Te,X,ue);else break;_e++}for(;_e<=Ue&&_e<=Ne;){const $e=M[Ue],Ge=U[Ne]=ue?ya(U[Ne]):un(U[Ne]);if(us($e,Ge))x($e,Ge,ae,null,G,ve,Te,X,ue);else break;Ue--,Ne--}if(_e>Ue){if(_e<=Ne){const $e=Ne+1,Ge=$e<Re?U[$e].el:be;for(;_e<=Ne;)x(null,U[_e]=ue?ya(U[_e]):un(U[_e]),ae,Ge,G,ve,Te,X,ue),_e++}}else if(_e>Ne)for(;_e<=Ue;)ye(M[_e],G,ve,!0),_e++;else{const $e=_e,Ge=_e,tt=new Map;for(_e=Ge;_e<=Ne;_e++){const Tt=U[_e]=ue?ya(U[_e]):un(U[_e]);Tt.key!=null&&tt.set(Tt.key,_e)}let Xe,ut=0;const qe=Ne-Ge+1;let Pt=!1,gr=0;const $t=new Array(qe);for(_e=0;_e<qe;_e++)$t[_e]=0;for(_e=$e;_e<=Ue;_e++){const Tt=M[_e];if(ut>=qe){ye(Tt,G,ve,!0);continue}let Ot;if(Tt.key!=null)Ot=tt.get(Tt.key);else for(Xe=Ge;Xe<=Ne;Xe++)if($t[Xe-Ge]===0&&us(Tt,U[Xe])){Ot=Xe;break}Ot===void 0?ye(Tt,G,ve,!0):($t[Ot-Ge]=_e+1,Ot>=gr?gr=Ot:Pt=!0,x(Tt,U[Ot],ae,null,G,ve,Te,X,ue),ut++)}const ur=Pt?SU($t):vo;for(Xe=ur.length-1,_e=qe-1;_e>=0;_e--){const Tt=Ge+_e,Ot=U[Tt],Xi=Tt+1<Re?U[Tt+1].el:be;$t[_e]===0?x(null,Ot,ae,Xi,G,ve,Te,X,ue):Pt&&(Xe<0||_e!==ur[Xe]?te(Ot,ae,Xi,2):Xe--)}}},te=(M,U,ae,be,G=null)=>{const{el:ve,type:Te,transition:X,children:ue,shapeFlag:_e}=M;if(_e&6){te(M.component.subTree,U,ae,be);return}if(_e&128){M.suspense.move(U,ae,be);return}if(_e&64){Te.move(M,U,ae,ee);return}if(Te===Ui){n(ve,U,ae);for(let Ue=0;Ue<ue.length;Ue++)te(ue[Ue],U,ae,be);n(M.anchor,U,ae);return}if(Te===xf){W(M,U,ae);return}if(be!==2&&_e&1&&X)if(be===0)X.beforeEnter(ve),n(ve,U,ae),ei(()=>X.enter(ve),G);else{const{leave:Ue,delayLeave:Ne,afterLeave:$e}=X,Ge=()=>n(ve,U,ae),tt=()=>{Ue(ve,()=>{Ge(),$e&&$e()})};Ne?Ne(ve,Ge,tt):tt()}else n(ve,U,ae)},ye=(M,U,ae,be=!1,G=!1)=>{const{type:ve,props:Te,ref:X,children:ue,dynamicChildren:_e,shapeFlag:Re,patchFlag:Ue,dirs:Ne}=M;if(X!=null&&sg(X,null,ae,M,!0),Re&256){U.ctx.deactivate(M);return}const $e=Re&1&&Ne,Ge=!Sf(M);let tt;if(Ge&&(tt=Te&&Te.onVnodeBeforeUnmount)&&nn(tt,U,M),Re&6)se(M.component,ae,be);else{if(Re&128){M.suspense.unmount(ae,be);return}$e&&ts(M,null,U,"beforeUnmount"),Re&64?M.type.remove(M,U,ae,G,ee,be):_e&&(ve!==Ui||Ue>0&&Ue&64)?J(_e,U,ae,!1,!0):(ve===Ui&&Ue&384||!G&&Re&16)&&J(ue,U,ae),be&&xe(M)}(Ge&&(tt=Te&&Te.onVnodeUnmounted)||$e)&&ei(()=>{tt&&nn(tt,U,M),$e&&ts(M,null,U,"unmounted")},ae)},xe=M=>{const{type:U,el:ae,anchor:be,transition:G}=M;if(U===Ui){re(ae,be);return}if(U===xf){j(M);return}const ve=()=>{t(ae),G&&!G.persisted&&G.afterLeave&&G.afterLeave()};if(M.shapeFlag&1&&G&&!G.persisted){const{leave:Te,delayLeave:X}=G,ue=()=>Te(ae,ve);X?X(M.el,ve,ue):ue()}else ve()},re=(M,U)=>{let ae;for(;M!==U;)ae=p(M),t(M),M=ae;t(U)},se=(M,U,ae)=>{const{bum:be,scope:G,update:ve,subTree:Te,um:X}=M;be&&Jp(be),G.stop(),ve&&(ve.active=!1,ye(Te,M,U,ae)),X&&ei(X,U),ei(()=>{M.isUnmounted=!0},U),U&&U.pendingBranch&&!U.isUnmounted&&M.asyncDep&&!M.asyncResolved&&M.suspenseId===U.pendingId&&(U.deps--,U.deps===0&&U.resolve())},J=(M,U,ae,be=!1,G=!1,ve=0)=>{for(let Te=ve;Te<M.length;Te++)ye(M[Te],U,ae,be,G)},ie=M=>M.shapeFlag&6?ie(M.component.subTree):M.shapeFlag&128?M.suspense.next():p(M.anchor||M.el),B=(M,U,ae)=>{M==null?U._vnode&&ye(U._vnode,null,null,!0):x(U._vnode||null,M,U,null,null,null,ae),TT(),CE(),U._vnode=M},ee={p:x,um:ye,m:te,r:xe,mt:ke,mc:oe,pc:Ye,pbc:pe,n:ie,o:r};let Ee,Ce;return e&&([Ee,Ce]=e(ee)),{render:B,hydrate:Ee,createApp:_U(B,Ee)}}function rs({effect:r,update:e},i){r.allowRecurse=e.allowRecurse=i}function $E(r,e,i=!1){const n=r.children,t=e.children;if(ot(n)&&ot(t))for(let a=0;a<n.length;a++){const s=n[a];let o=t[a];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=t[a]=ya(t[a]),o.el=s.el),i||$E(s,o))}}function SU(r){const e=r.slice(),i=[0];let n,t,a,s,o;const l=r.length;for(n=0;n<l;n++){const c=r[n];if(c!==0){if(t=i[i.length-1],r[t]<c){e[n]=t,i.push(n);continue}for(a=0,s=i.length-1;a<s;)o=a+s>>1,r[i[o]]<c?a=o+1:s=o;c<r[i[a]]&&(a>0&&(e[n]=i[a-1]),i[a]=n)}}for(a=i.length,s=i[a-1];a-- >0;)i[a]=s,s=e[s];return i}const xU=r=>r.__isTeleport,Ui=Symbol(void 0),Mv=Symbol(void 0),Wn=Symbol(void 0),xf=Symbol(void 0),ol=[];let Hi=null;function im(r=!1){ol.push(Hi=r?null:[])}function EU(){ol.pop(),Hi=ol[ol.length-1]||null}let vl=1;function OT(r){vl+=r}function CU(r){return r.dynamicChildren=vl>0?Hi||vo:null,EU(),vl>0&&Hi&&Hi.push(r),r}function nm(r,e,i,n,t,a){return CU(ct(r,e,i,n,t,a,!0))}function RU(r){return r?r.__v_isVNode===!0:!1}function us(r,e){return r.type===e.type&&r.key===e.key}const $d="__vInternal",GE=({key:r})=>r!=null?r:null,Ef=({ref:r,ref_key:e,ref_for:i})=>r!=null?ai(r)||$r(r)||pt(r)?{i:Vi,r,k:e,f:!!i}:r:null;function ct(r,e=null,i=null,n=0,t=null,a=r===Ui?0:1,s=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:r,props:e,key:e&&GE(e),ref:e&&Ef(e),scopeId:AE,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:t,dynamicChildren:null,appContext:null};return o?(Nv(l,i),a&128&&r.normalize(l)):i&&(l.shapeFlag|=ai(i)?8:16),vl>0&&!s&&Hi&&(l.patchFlag>0||a&6)&&l.patchFlag!==32&&Hi.push(l),l}const Sa=wU;function wU(r,e=null,i=null,n=0,t=null,a=!1){if((!r||r===aU)&&(r=Wn),RU(r)){const o=Ra(r,e,!0);return i&&Nv(o,i),vl>0&&!a&&Hi&&(o.shapeFlag&6?Hi[Hi.indexOf(r)]=o:Hi.push(o)),o.patchFlag|=-2,o}if(jU(r)&&(r=r.__vccOpts),e){e=AU(e);let{class:o,style:l}=e;o&&!ai(o)&&(e.class=vv(o)),Wt(l)&&(_E(l)&&!ot(l)&&(l=ni({},l)),e.style=gv(l))}const s=ai(r)?1:HF(r)?128:xU(r)?64:Wt(r)?4:pt(r)?2:0;return ct(r,e,i,n,t,s,a,!0)}function AU(r){return r?_E(r)||$d in r?ni({},r):r:null}function Ra(r,e,i=!1){const{props:n,ref:t,patchFlag:a,children:s}=r,o=e?IU(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:r.type,props:o,key:o&&GE(o),ref:e&&e.ref?i&&t?ot(t)?t.concat(Ef(e)):[t,Ef(e)]:Ef(e):t,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:s,target:r.target,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:e&&r.type!==Ui?a===-1?16:a|16:a,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:r.transition,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&Ra(r.ssContent),ssFallback:r.ssFallback&&Ra(r.ssFallback),el:r.el,anchor:r.anchor}}function PU(r=" ",e=0){return Sa(Mv,null,r,e)}function OU(r,e){const i=Sa(xf,null,r);return i.staticCount=e,i}function un(r){return r==null||typeof r=="boolean"?Sa(Wn):ot(r)?Sa(Ui,null,r.slice()):typeof r=="object"?ya(r):Sa(Mv,null,String(r))}function ya(r){return r.el===null||r.memo?r:Ra(r)}function Nv(r,e){let i=0;const{shapeFlag:n}=r;if(e==null)e=null;else if(ot(e))i=16;else if(typeof e=="object")if(n&65){const t=e.default;t&&(t._c&&(t._d=!1),Nv(r,t()),t._c&&(t._d=!0));return}else{i=32;const t=e._;!t&&!($d in e)?e._ctx=Vi:t===3&&Vi&&(Vi.slots._===1?e._=1:(e._=2,r.patchFlag|=1024))}else pt(e)?(e={default:e,_ctx:Vi},i=32):(e=String(e),n&64?(i=16,e=[PU(e)]):i=8);r.children=e,r.shapeFlag|=i}function IU(...r){const e={};for(let i=0;i<r.length;i++){const n=r[i];for(const t in n)if(t==="class")e.class!==n.class&&(e.class=vv([e.class,n.class]));else if(t==="style")e.style=gv([e.style,n.style]);else if(yv(t)){const a=e[t],s=n[t];s&&a!==s&&!(ot(a)&&a.includes(s))&&(e[t]=a?[].concat(a,s):s)}else t!==""&&(e[t]=n[t])}return e}function nn(r,e,i,n=null){Ri(r,e,7,[i,n])}const DU=WE();let kU=0;function LU(r,e,i){const n=r.type,t=(e?e.appContext:r.appContext)||DU,a={uid:kU++,vnode:r,type:n,parent:e,appContext:t,root:null,next:null,subTree:null,effect:null,update:null,scope:new XN(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(t.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:BE(n,t),emitsOptions:wE(n,t),emit:null,emitted:null,propsDefaults:It,inheritAttrs:n.inheritAttrs,ctx:It,data:It,props:It,attrs:It,slots:It,refs:It,setupState:It,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=NF.bind(null,a),r.ce&&r.ce(a),a}let br=null;const MU=()=>br||Vi,Oo=r=>{br=r,r.scope.on()},ys=()=>{br&&br.scope.off(),br=null};function zE(r){return r.vnode.shapeFlag&4}let yl=!1;function NU(r,e=!1){yl=e;const{props:i,children:n}=r.vnode,t=zE(r);hU(r,i,t,e),gU(r,n);const a=t?FU(r,e):void 0;return yl=!1,a}function FU(r,e){const i=r.type;r.accessCache=Object.create(null),r.proxy=TE(new Proxy(r.ctx,oU));const{setup:n}=i;if(n){const t=r.setupContext=n.length>1?BU(r):null;Oo(r),Go();const a=ba(n,r,0,[r.props,t]);if(zo(),ys(),aE(a)){if(a.then(ys,ys),e)return a.then(s=>{IT(r,s,e)}).catch(s=>{jd(s,r,0)});r.asyncDep=a}else IT(r,a,e)}else qE(r,e)}function IT(r,e,i){pt(e)?r.type.__ssrInlineRender?r.ssrRender=e:r.render=e:Wt(e)&&(r.setupState=bE(e)),qE(r,i)}let DT;function qE(r,e,i){const n=r.type;if(!r.render){if(!e&&DT&&!n.render){const t=n.template||kv(r).template;if(t){const{isCustomElement:a,compilerOptions:s}=r.appContext.config,{delimiters:o,compilerOptions:l}=n,c=ni(ni({isCustomElement:a,delimiters:o},s),l);n.render=DT(t,c)}}r.render=n.render||Wi}Oo(r),Go(),uU(r),zo(),ys()}function UU(r){return new Proxy(r.attrs,{get(e,i){return gi(r,"get","$attrs"),e[i]}})}function BU(r){const e=n=>{r.exposed=n||{}};let i;return{get attrs(){return i||(i=UU(r))},slots:r.slots,emit:r.emit,expose:e}}function Gd(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy(bE(TE(r.exposed)),{get(e,i){if(i in e)return e[i];if(i in $f)return $f[i](r)}}))}function jU(r){return pt(r)&&"__vccOpts"in r}const VU=(r,e)=>PF(r,e,yl),HU="3.2.39";function WU(r,e){const i=Object.create(null),n=r.split(",");for(let t=0;t<n.length;t++)i[n[t]]=!0;return e?t=>!!i[t.toLowerCase()]:t=>!!i[t]}const $U="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",GU=WU($U);function KE(r){return!!r||r===""}function zU(r,e){if(r.length!==e.length)return!1;let i=!0;for(let n=0;i&&n<r.length;n++)i=zd(r[n],e[n]);return i}function zd(r,e){if(r===e)return!0;let i=kT(r),n=kT(e);if(i||n)return i&&n?r.getTime()===e.getTime():!1;if(i=LT(r),n=LT(e),i||n)return r===e;if(i=Es(r),n=Es(e),i||n)return i&&n?zU(r,e):!1;if(i=MT(r),n=MT(e),i||n){if(!i||!n)return!1;const t=Object.keys(r).length,a=Object.keys(e).length;if(t!==a)return!1;for(const s in r){const o=r.hasOwnProperty(s),l=e.hasOwnProperty(s);if(o&&!l||!o&&l||!zd(r[s],e[s]))return!1}}return String(r)===String(e)}function qU(r,e){return r.findIndex(i=>zd(i,e))}const KU=/^on[^a-z]/,YU=r=>KU.test(r),XU=r=>r.startsWith("onUpdate:"),YE=Object.assign,Es=Array.isArray,XE=r=>JE(r)==="[object Set]",kT=r=>JE(r)==="[object Date]",QE=r=>typeof r=="function",zf=r=>typeof r=="string",LT=r=>typeof r=="symbol",MT=r=>r!==null&&typeof r=="object",QU=Object.prototype.toString,JE=r=>QU.call(r),ZE=r=>{const e=Object.create(null);return i=>e[i]||(e[i]=r(i))},JU=/\B([A-Z])/g,eC=ZE(r=>r.replace(JU,"-$1").toLowerCase()),ZU=ZE(r=>r.charAt(0).toUpperCase()+r.slice(1)),eB=(r,e)=>{for(let i=0;i<r.length;i++)r[i](e)},og=r=>{const e=parseFloat(r);return isNaN(e)?r:e},tB="http://www.w3.org/2000/svg",ls=typeof document<"u"?document:null,NT=ls&&ls.createElement("template"),rB={insert:(r,e,i)=>{e.insertBefore(r,i||null)},remove:r=>{const e=r.parentNode;e&&e.removeChild(r)},createElement:(r,e,i,n)=>{const t=e?ls.createElementNS(tB,r):ls.createElement(r,i?{is:i}:void 0);return r==="select"&&n&&n.multiple!=null&&t.setAttribute("multiple",n.multiple),t},createText:r=>ls.createTextNode(r),createComment:r=>ls.createComment(r),setText:(r,e)=>{r.nodeValue=e},setElementText:(r,e)=>{r.textContent=e},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>ls.querySelector(r),setScopeId(r,e){r.setAttribute(e,"")},cloneNode(r){const e=r.cloneNode(!0);return"_value"in r&&(e._value=r._value),e},insertStaticContent(r,e,i,n,t,a){const s=i?i.previousSibling:e.lastChild;if(t&&(t===a||t.nextSibling))for(;e.insertBefore(t.cloneNode(!0),i),!(t===a||!(t=t.nextSibling)););else{NT.innerHTML=n?`<svg>${r}</svg>`:r;const o=NT.content;if(n){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,i)}return[s?s.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}};function iB(r,e,i){const n=r._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?r.removeAttribute("class"):i?r.setAttribute("class",e):r.className=e}function nB(r,e,i){const n=r.style,t=zf(i);if(i&&!t){for(const a in i)ug(n,a,i[a]);if(e&&!zf(e))for(const a in e)i[a]==null&&ug(n,a,"")}else{const a=n.display;t?e!==i&&(n.cssText=i):e&&r.removeAttribute("style"),"_vod"in r&&(n.display=a)}}const FT=/\s*!important$/;function ug(r,e,i){if(Es(i))i.forEach(n=>ug(r,e,n));else if(i==null&&(i=""),e.startsWith("--"))r.setProperty(e,i);else{const n=aB(r,e);FT.test(i)?r.setProperty(eC(n),i.replace(FT,""),"important"):r[n]=i}}const UT=["Webkit","Moz","ms"],am={};function aB(r,e){const i=am[e];if(i)return i;let n=Po(e);if(n!=="filter"&&n in r)return am[e]=n;n=ZU(n);for(let t=0;t<UT.length;t++){const a=UT[t]+n;if(a in r)return am[e]=a}return e}const BT="http://www.w3.org/1999/xlink";function sB(r,e,i,n,t){if(n&&e.startsWith("xlink:"))i==null?r.removeAttributeNS(BT,e.slice(6,e.length)):r.setAttributeNS(BT,e,i);else{const a=GU(e);i==null||a&&!KE(i)?r.removeAttribute(e):r.setAttribute(e,a?"":i)}}function oB(r,e,i,n,t,a,s){if(e==="innerHTML"||e==="textContent"){n&&s(n,t,a),r[e]=i==null?"":i;return}if(e==="value"&&r.tagName!=="PROGRESS"&&!r.tagName.includes("-")){r._value=i;const l=i==null?"":i;(r.value!==l||r.tagName==="OPTION")&&(r.value=l),i==null&&r.removeAttribute(e);return}let o=!1;if(i===""||i==null){const l=typeof r[e];l==="boolean"?i=KE(i):i==null&&l==="string"?(i="",o=!0):l==="number"&&(i=0,o=!0)}try{r[e]=i}catch{}o&&r.removeAttribute(e)}const[tC,uB]=(()=>{let r=Date.now,e=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(r=performance.now.bind(performance));const i=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(i&&Number(i[1])<=53)}return[r,e]})();let lg=0;const lB=Promise.resolve(),cB=()=>{lg=0},fB=()=>lg||(lB.then(cB),lg=tC());function cs(r,e,i,n){r.addEventListener(e,i,n)}function dB(r,e,i,n){r.removeEventListener(e,i,n)}function hB(r,e,i,n,t=null){const a=r._vei||(r._vei={}),s=a[e];if(n&&s)s.value=n;else{const[o,l]=pB(e);if(n){const c=a[e]=mB(n,t);cs(r,o,c,l)}else s&&(dB(r,o,s,l),a[e]=void 0)}}const jT=/(?:Once|Passive|Capture)$/;function pB(r){let e;if(jT.test(r)){e={};let n;for(;n=r.match(jT);)r=r.slice(0,r.length-n[0].length),e[n[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):eC(r.slice(2)),e]}function mB(r,e){const i=n=>{const t=n.timeStamp||tC();(uB||t>=i.attached-1)&&Ri(gB(n,i.value),e,5,[n])};return i.value=r,i.attached=fB(),i}function gB(r,e){if(Es(e)){const i=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{i.call(r),r._stopped=!0},e.map(n=>t=>!t._stopped&&n&&n(t))}else return e}const VT=/^on[a-z]/,vB=(r,e,i,n,t=!1,a,s,o,l)=>{e==="class"?iB(r,n,t):e==="style"?nB(r,i,n):YU(e)?XU(e)||hB(r,e,i,n,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):yB(r,e,n,t))?oB(r,e,n,a,s,o,l):(e==="true-value"?r._trueValue=n:e==="false-value"&&(r._falseValue=n),sB(r,e,n,t))};function yB(r,e,i,n){return n?!!(e==="innerHTML"||e==="textContent"||e in r&&VT.test(e)&&QE(i)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&r.tagName==="INPUT"||e==="type"&&r.tagName==="TEXTAREA"||VT.test(e)&&zf(i)?!1:e in r}const _B={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};KF.props;const qf=r=>{const e=r.props["onUpdate:modelValue"]||!1;return Es(e)?i=>eB(e,i):e};function TB(r){r.target.composing=!0}function HT(r){const e=r.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const WT={created(r,{modifiers:{lazy:e,trim:i,number:n}},t){r._assign=qf(t);const a=n||t.props&&t.props.type==="number";cs(r,e?"change":"input",s=>{if(s.target.composing)return;let o=r.value;i&&(o=o.trim()),a&&(o=og(o)),r._assign(o)}),i&&cs(r,"change",()=>{r.value=r.value.trim()}),e||(cs(r,"compositionstart",TB),cs(r,"compositionend",HT),cs(r,"change",HT))},mounted(r,{value:e}){r.value=e==null?"":e},beforeUpdate(r,{value:e,modifiers:{lazy:i,trim:n,number:t}},a){if(r._assign=qf(a),r.composing||document.activeElement===r&&r.type!=="range"&&(i||n&&r.value.trim()===e||(t||r.type==="number")&&og(r.value)===e))return;const s=e==null?"":e;r.value!==s&&(r.value=s)}},sm={deep:!0,created(r,{value:e,modifiers:{number:i}},n){const t=XE(e);cs(r,"change",()=>{const a=Array.prototype.filter.call(r.options,s=>s.selected).map(s=>i?og(Kf(s)):Kf(s));r._assign(r.multiple?t?new Set(a):a:a[0])}),r._assign=qf(n)},mounted(r,{value:e}){$T(r,e)},beforeUpdate(r,e,i){r._assign=qf(i)},updated(r,{value:e}){$T(r,e)}};function $T(r,e){const i=r.multiple;if(!(i&&!Es(e)&&!XE(e))){for(let n=0,t=r.options.length;n<t;n++){const a=r.options[n],s=Kf(a);if(i)Es(e)?a.selected=qU(e,s)>-1:a.selected=e.has(s);else if(zd(Kf(a),e)){r.selectedIndex!==n&&(r.selectedIndex=n);return}}!i&&r.selectedIndex!==-1&&(r.selectedIndex=-1)}}function Kf(r){return"_value"in r?r._value:r.value}const bB=["ctrl","shift","alt","meta"],SB={stop:r=>r.stopPropagation(),prevent:r=>r.preventDefault(),self:r=>r.target!==r.currentTarget,ctrl:r=>!r.ctrlKey,shift:r=>!r.shiftKey,alt:r=>!r.altKey,meta:r=>!r.metaKey,left:r=>"button"in r&&r.button!==0,middle:r=>"button"in r&&r.button!==1,right:r=>"button"in r&&r.button!==2,exact:(r,e)=>bB.some(i=>r[`${i}Key`]&&!e.includes(i))},xB=(r,e)=>(i,...n)=>{for(let t=0;t<e.length;t++){const a=SB[e[t]];if(a&&a(i,e))return}return r(i,...n)},EB=YE({patchProp:vB},rB);let GT;function CB(){return GT||(GT=TU(EB))}const RB=(...r)=>{const e=CB().createApp(...r),{mount:i}=e;return e.mount=n=>{const t=wB(n);if(!t)return;const a=e._component;!QE(a)&&!a.render&&!a.template&&(a.template=t.innerHTML),t.innerHTML="";const s=i(t,!1,t instanceof SVGElement);return t instanceof Element&&(t.removeAttribute("v-cloak"),t.setAttribute("data-v-app","")),s},e};function wB(r){return zf(r)?document.querySelector(r):r}var Ju;typeof window<"u"?Ju=window:typeof St<"u"?Ju=St:typeof self<"u"?Ju=self:Ju={};var q=Ju;const AB={},PB=Object.freeze(Object.defineProperty({__proto__:null,default:AB},Symbol.toStringTag,{value:"Module"})),OB=$g(PB);var zT=typeof St<"u"?St:typeof window<"u"?window:{},IB=OB,Zu;typeof document<"u"?Zu=document:(Zu=zT["__GLOBAL_DOCUMENT_CACHE@4"],Zu||(Zu=zT["__GLOBAL_DOCUMENT_CACHE@4"]=IB));var je=Zu;function Ai(){return Ai=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])}return r},Ai.apply(this,arguments)}const DB=Object.freeze(Object.defineProperty({__proto__:null,default:Ai},Symbol.toStringTag,{value:"Module"}));var cg={exports:{}};(function(r,e){function i(l){if(l&&typeof l=="object"){var c=l.which||l.keyCode||l.charCode;c&&(l=c)}if(typeof l=="number")return s[l];var d=String(l),h=n[d.toLowerCase()];if(h)return h;var h=t[d.toLowerCase()];if(h)return h;if(d.length===1)return d.charCodeAt(0)}i.isEventKey=function(c,d){if(c&&typeof c=="object"){var h=c.which||c.keyCode||c.charCode;if(h==null)return!1;if(typeof d=="string"){var p=n[d.toLowerCase()];if(p)return p===h;var p=t[d.toLowerCase()];if(p)return p===h}else if(typeof d=="number")return d===h;return!1}},e=r.exports=i;var n=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},t=e.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(a=97;a<123;a++)n[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)n[a-48]=a;for(a=1;a<13;a++)n["f"+a]=a+111;for(a=0;a<10;a++)n["numpad "+a]=a+96;var s=e.names=e.title={};for(a in n)s[n[a]]=a;for(var o in t)n[o]=t[o]})(cg,cg.exports);const it=cg.exports;function rt(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function _l(r,e){return _l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},_l(r,e)}function Ve(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,_l(r,e)}var kB=LB;function LB(r,e){var i,n=null;try{i=JSON.parse(r,e)}catch(t){n=t}return[n,i]}var qd={exports:{}};const MB=$g(DB);var NB=UB,FB=Object.prototype.toString;function UB(r){if(!r)return!1;var e=FB.call(r);return e==="[object Function]"||typeof r=="function"&&e!=="[object RegExp]"||typeof window<"u"&&(r===window.setTimeout||r===window.alert||r===window.confirm||r===window.prompt)}var BB=q,jB=function(e,i){return i===void 0&&(i=!1),function(n,t,a){if(n){e(n);return}if(t.statusCode>=400&&t.statusCode<=599){var s=a;if(i)if(BB.TextDecoder){var o=VB(t.headers&&t.headers["content-type"]);try{s=new TextDecoder(o).decode(a)}catch{}}else s=String.fromCharCode.apply(null,new Uint8Array(a));e({cause:s});return}e(null,a)}};function VB(r){return r===void 0&&(r=""),r.toLowerCase().split(";").reduce(function(e,i){var n=i.split("="),t=n[0],a=n[1];return t.trim()==="charset"?a.trim():e},"utf-8")}var HB=jB,rC=q,WB=MB,$B=NB;pn.httpHandler=HB;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Björklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var GB=function(e){var i={};return e&&e.trim().split(`
`).forEach(function(n){var t=n.indexOf(":"),a=n.slice(0,t).trim().toLowerCase(),s=n.slice(t+1).trim();typeof i[a]>"u"?i[a]=s:Array.isArray(i[a])?i[a].push(s):i[a]=[i[a],s]}),i};qd.exports=pn;qd.exports.default=pn;pn.XMLHttpRequest=rC.XMLHttpRequest||YB;pn.XDomainRequest="withCredentials"in new pn.XMLHttpRequest?pn.XMLHttpRequest:rC.XDomainRequest;zB(["get","put","post","patch","head","delete"],function(r){pn[r==="delete"?"del":r]=function(e,i,n){return i=iC(e,i,n),i.method=r.toUpperCase(),nC(i)}});function zB(r,e){for(var i=0;i<r.length;i++)e(r[i])}function qB(r){for(var e in r)if(r.hasOwnProperty(e))return!1;return!0}function iC(r,e,i){var n=r;return $B(e)?(i=e,typeof r=="string"&&(n={uri:r})):n=WB({},e,{uri:r}),n.callback=i,n}function pn(r,e,i){return e=iC(r,e,i),nC(e)}function nC(r){if(typeof r.callback>"u")throw new Error("callback argument missing");var e=!1,i=function(Z,W,j){e||(e=!0,r.callback(Z,W,j))};function n(){o.readyState===4&&setTimeout(s,0)}function t(){var H=void 0;if(o.response?H=o.response:H=o.responseText||KB(o),C)try{H=JSON.parse(H)}catch{}return H}function a(H){return clearTimeout(x),H instanceof Error||(H=new Error(""+(H||"Unknown XMLHttpRequest Error"))),H.statusCode=0,i(H,I)}function s(){if(!c){var H;clearTimeout(x),r.useXDR&&o.status===void 0?H=200:H=o.status===1223?204:o.status;var Z=I,W=null;return H!==0?(Z={body:t(),statusCode:H,method:h,headers:{},url:d,rawRequest:o},o.getAllResponseHeaders&&(Z.headers=GB(o.getAllResponseHeaders()))):W=new Error("Internal XMLHttpRequest Error"),i(W,Z,Z.body)}}var o=r.xhr||null;o||(r.cors||r.useXDR?o=new pn.XDomainRequest:o=new pn.XMLHttpRequest);var l,c,d=o.url=r.uri||r.url,h=o.method=r.method||"GET",p=r.body||r.data,y=o.headers=r.headers||{},S=!!r.sync,C=!1,x,I={body:void 0,headers:{},statusCode:0,method:h,url:d,rawRequest:o};if("json"in r&&r.json!==!1&&(C=!0,y.accept||y.Accept||(y.Accept="application/json"),h!=="GET"&&h!=="HEAD"&&(y["content-type"]||y["Content-Type"]||(y["Content-Type"]="application/json"),p=JSON.stringify(r.json===!0?p:r.json))),o.onreadystatechange=n,o.onload=s,o.onerror=a,o.onprogress=function(){},o.onabort=function(){c=!0},o.ontimeout=a,o.open(h,d,!S,r.username,r.password),S||(o.withCredentials=!!r.withCredentials),!S&&r.timeout>0&&(x=setTimeout(function(){if(!c){c=!0,o.abort("timeout");var H=new Error("XMLHttpRequest timeout");H.code="ETIMEDOUT",a(H)}},r.timeout)),o.setRequestHeader)for(l in y)y.hasOwnProperty(l)&&o.setRequestHeader(l,y[l]);else if(r.headers&&!qB(r.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in r&&(o.responseType=r.responseType),"beforeSend"in r&&typeof r.beforeSend=="function"&&r.beforeSend(o),o.send(p||null),o}function KB(r){try{if(r.responseType==="document")return r.responseXML;var e=r.responseXML&&r.responseXML.documentElement.nodeName==="parsererror";if(r.responseType===""&&!e)return r.responseXML}catch{}return null}function YB(){}var fg={exports:{}},qT=je,Fv=Object.create||function(){function r(){}return function(e){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return r.prototype=e,new r}}();function mi(r,e){this.name="ParsingError",this.code=r.code,this.message=e||r.message}mi.prototype=Fv(Error.prototype);mi.prototype.constructor=mi;mi.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function Uv(r){function e(n,t,a,s){return(n|0)*3600+(t|0)*60+(a|0)+(s|0)/1e3}var i=r.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return i?i[3]?e(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?e(i[1],i[2],0,i[4]):e(0,i[1],i[2],i[4]):null}function ul(){this.values=Fv(null)}ul.prototype={set:function(r,e){!this.get(r)&&e!==""&&(this.values[r]=e)},get:function(r,e,i){return i?this.has(r)?this.values[r]:e[i]:this.has(r)?this.values[r]:e},has:function(r){return r in this.values},alt:function(r,e,i){for(var n=0;n<i.length;++n)if(e===i[n]){this.set(r,e);break}},integer:function(r,e){/^-?\d+$/.test(e)&&this.set(r,parseInt(e,10))},percent:function(r,e){return e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e),e>=0&&e<=100)?(this.set(r,e),!0):!1}};function el(r,e,i,n){var t=n?r.split(n):[r];for(var a in t)if(typeof t[a]=="string"){var s=t[a].split(i);if(s.length===2){var o=s[0].trim(),l=s[1].trim();e(o,l)}}}function XB(r,e,i){var n=r;function t(){var o=Uv(r);if(o===null)throw new mi(mi.Errors.BadTimeStamp,"Malformed timestamp: "+n);return r=r.replace(/^[^\sa-zA-Z-]+/,""),o}function a(o,l){var c=new ul;el(o,function(d,h){switch(d){case"region":for(var p=i.length-1;p>=0;p--)if(i[p].id===h){c.set(d,i[p].region);break}break;case"vertical":c.alt(d,h,["rl","lr"]);break;case"line":var y=h.split(","),S=y[0];c.integer(d,S),c.percent(d,S)&&c.set("snapToLines",!1),c.alt(d,S,["auto"]),y.length===2&&c.alt("lineAlign",y[1],["start","center","end"]);break;case"position":y=h.split(","),c.percent(d,y[0]),y.length===2&&c.alt("positionAlign",y[1],["start","center","end"]);break;case"size":c.percent(d,h);break;case"align":c.alt(d,h,["start","center","end","left","right"]);break}},/:/,/\s/),l.region=c.get("region",null),l.vertical=c.get("vertical","");try{l.line=c.get("line","auto")}catch{}l.lineAlign=c.get("lineAlign","start"),l.snapToLines=c.get("snapToLines",!0),l.size=c.get("size",100);try{l.align=c.get("align","center")}catch{l.align=c.get("align","middle")}try{l.position=c.get("position","auto")}catch{l.position=c.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},l.align)}l.positionAlign=c.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},l.align)}function s(){r=r.replace(/^\s+/,"")}if(s(),e.startTime=t(),s(),r.substr(0,3)!=="-->")throw new mi(mi.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+n);r=r.substr(3),s(),e.endTime=t(),s(),a(r,e)}var om=qT.createElement&&qT.createElement("textarea"),QB={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},KT={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},JB={v:"title",lang:"lang"},YT={rt:"ruby"};function aC(r,e){function i(){if(!e)return null;function S(x){return e=e.substr(x.length),x}var C=e.match(/^([^<]*)(<[^>]*>?)?/);return S(C[1]?C[1]:C[2])}function n(S){return om.innerHTML=S,S=om.textContent,om.textContent="",S}function t(S,C){return!YT[C.localName]||YT[C.localName]===S.localName}function a(S,C){var x=QB[S];if(!x)return null;var I=r.document.createElement(x),H=JB[S];return H&&C&&(I[H]=C.trim()),I}for(var s=r.document.createElement("div"),o=s,l,c=[];(l=i())!==null;){if(l[0]==="<"){if(l[1]==="/"){c.length&&c[c.length-1]===l.substr(2).replace(">","")&&(c.pop(),o=o.parentNode);continue}var d=Uv(l.substr(1,l.length-2)),h;if(d){h=r.document.createProcessingInstruction("timestamp",d),o.appendChild(h);continue}var p=l.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!p||(h=a(p[1],p[3]),!h)||!t(o,h))continue;if(p[2]){var y=p[2].split(".");y.forEach(function(S){var C=/^bg_/.test(S),x=C?S.slice(3):S;if(KT.hasOwnProperty(x)){var I=C?"background-color":"color",H=KT[x];h.style[I]=H}}),h.className=y.join(" ")}c.push(p[1]),o.appendChild(h),o=h;continue}o.appendChild(r.document.createTextNode(n(l)))}return s}var XT=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function ZB(r){for(var e=0;e<XT.length;e++){var i=XT[e];if(r>=i[0]&&r<=i[1])return!0}return!1}function e2(r){var e=[],i="",n;if(!r||!r.childNodes)return"ltr";function t(o,l){for(var c=l.childNodes.length-1;c>=0;c--)o.push(l.childNodes[c])}function a(o){if(!o||!o.length)return null;var l=o.pop(),c=l.textContent||l.innerText;if(c){var d=c.match(/^.*(\n|\r)/);return d?(o.length=0,d[0]):c}if(l.tagName==="ruby")return a(o);if(l.childNodes)return t(o,l),a(o)}for(t(e,r);i=a(e);)for(var s=0;s<i.length;s++)if(n=i.charCodeAt(s),ZB(n))return"rtl";return"ltr"}function t2(r){if(typeof r.line=="number"&&(r.snapToLines||r.line>=0&&r.line<=100))return r.line;if(!r.track||!r.track.textTrackList||!r.track.textTrackList.mediaElement)return-1;for(var e=r.track,i=e.textTrackList,n=0,t=0;t<i.length&&i[t]!==e;t++)i[t].mode==="showing"&&n++;return++n*-1}function Kd(){}Kd.prototype.applyStyles=function(r,e){e=e||this.div;for(var i in r)r.hasOwnProperty(i)&&(e.style[i]=r[i])};Kd.prototype.formatStyle=function(r,e){return r===0?0:r+e};function Yf(r,e,i){Kd.call(this),this.cue=e,this.cueDiv=aC(r,e.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv),this.div=r.document.createElement("div"),n={direction:e2(this.cueDiv),writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:e.align==="middle"?"center":e.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv);var t=0;switch(e.positionAlign){case"start":t=e.position;break;case"center":t=e.position-e.size/2;break;case"end":t=e.position-e.size;break}e.vertical===""?this.applyStyles({left:this.formatStyle(t,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(t,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}Yf.prototype=Fv(Kd.prototype);Yf.prototype.constructor=Yf;function jr(r){var e,i,n,t;if(r.div){i=r.div.offsetHeight,n=r.div.offsetWidth,t=r.div.offsetTop;var a=(a=r.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();r=r.div.getBoundingClientRect(),e=a?Math.max(a[0]&&a[0].height||0,r.height/a.length):0}this.left=r.left,this.right=r.right,this.top=r.top||t,this.height=r.height||i,this.bottom=r.bottom||t+(r.height||i),this.width=r.width||n,this.lineHeight=e!==void 0?e:r.lineHeight}jr.prototype.move=function(r,e){switch(e=e!==void 0?e:this.lineHeight,r){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e;break}};jr.prototype.overlaps=function(r){return this.left<r.right&&this.right>r.left&&this.top<r.bottom&&this.bottom>r.top};jr.prototype.overlapsAny=function(r){for(var e=0;e<r.length;e++)if(this.overlaps(r[e]))return!0;return!1};jr.prototype.within=function(r){return this.top>=r.top&&this.bottom<=r.bottom&&this.left>=r.left&&this.right<=r.right};jr.prototype.overlapsOppositeAxis=function(r,e){switch(e){case"+x":return this.left<r.left;case"-x":return this.right>r.right;case"+y":return this.top<r.top;case"-y":return this.bottom>r.bottom}};jr.prototype.intersectPercentage=function(r){var e=Math.max(0,Math.min(this.right,r.right)-Math.max(this.left,r.left)),i=Math.max(0,Math.min(this.bottom,r.bottom)-Math.max(this.top,r.top)),n=e*i;return n/(this.height*this.width)};jr.prototype.toCSSCompatValues=function(r){return{top:this.top-r.top,bottom:r.bottom-this.bottom,left:this.left-r.left,right:r.right-this.right,height:this.height,width:this.width}};jr.getSimpleBoxPosition=function(r){var e=r.div?r.div.offsetHeight:r.tagName?r.offsetHeight:0,i=r.div?r.div.offsetWidth:r.tagName?r.offsetWidth:0,n=r.div?r.div.offsetTop:r.tagName?r.offsetTop:0;r=r.div?r.div.getBoundingClientRect():r.tagName?r.getBoundingClientRect():r;var t={left:r.left,right:r.right,top:r.top||n,height:r.height||e,bottom:r.bottom||n+(r.height||e),width:r.width||i};return t};function r2(r,e,i,n){function t(x,I){for(var H,Z=new jr(x),W=1,j=0;j<I.length;j++){for(;x.overlapsOppositeAxis(i,I[j])||x.within(i)&&x.overlapsAny(n);)x.move(I[j]);if(x.within(i))return x;var le=x.intersectPercentage(i);W>le&&(H=new jr(x),W=le),x=new jr(Z)}return H||Z}var a=new jr(e),s=e.cue,o=t2(s),l=[];if(s.snapToLines){var c;switch(s.vertical){case"":l=["+y","-y"],c="height";break;case"rl":l=["+x","-x"],c="width";break;case"lr":l=["-x","+x"],c="width";break}var d=a.lineHeight,h=d*Math.round(o),p=i[c]+d,y=l[0];Math.abs(h)>p&&(h=h<0?-1:1,h*=Math.ceil(p/d)*d),o<0&&(h+=s.vertical===""?i.height:i.width,l=l.reverse()),a.move(y,h)}else{var S=a.lineHeight/i.height*100;switch(s.lineAlign){case"center":o-=S/2;break;case"end":o-=S;break}switch(s.vertical){case"":e.applyStyles({top:e.formatStyle(o,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(o,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(o,"%")});break}l=["+y","-x","+x","-y"],a=new jr(e)}var C=t(a,l);e.move(C.toCSSCompatValues(i))}function qo(){}qo.StringDecoder=function(){return{decode:function(r){if(!r)return"";if(typeof r!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(r))}}};qo.convertCueToDOMTree=function(r,e){return!r||!e?null:aC(r,e)};var i2=.05,n2="sans-serif",a2="1.5%";qo.processCues=function(r,e,i){if(!r||!e||!i)return null;for(;i.firstChild;)i.removeChild(i.firstChild);var n=r.document.createElement("div");n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin=a2,i.appendChild(n);function t(d){for(var h=0;h<d.length;h++)if(d[h].hasBeenReset||!d[h].displayState)return!0;return!1}if(!t(e)){for(var a=0;a<e.length;a++)n.appendChild(e[a].displayState);return}var s=[],o=jr.getSimpleBoxPosition(n),l=Math.round(o.height*i2*100)/100,c={font:l+"px "+n2};(function(){for(var d,h,p=0;p<e.length;p++)h=e[p],d=new Yf(r,h,c),n.appendChild(d.div),r2(r,d,o,s),h.displayState=d.div,s.push(jr.getSimpleBoxPosition(d))})()};qo.Parser=function(r,e,i){i||(i=e,e={}),e||(e={}),this.window=r,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]};qo.Parser.prototype={reportOrThrowError:function(r){if(r instanceof mi)this.onparsingerror&&this.onparsingerror(r);else throw r},parse:function(r){var e=this;r&&(e.buffer+=e.decoder.decode(r,{stream:!0}));function i(){for(var d=e.buffer,h=0;h<d.length&&d[h]!=="\r"&&d[h]!==`
`;)++h;var p=d.substr(0,h);return d[h]==="\r"&&++h,d[h]===`
`&&++h,e.buffer=d.substr(h),p}function n(d){var h=new ul;if(el(d,function(y,S){switch(y){case"id":h.set(y,S);break;case"width":h.percent(y,S);break;case"lines":h.integer(y,S);break;case"regionanchor":case"viewportanchor":var C=S.split(",");if(C.length!==2)break;var x=new ul;if(x.percent("x",C[0]),x.percent("y",C[1]),!x.has("x")||!x.has("y"))break;h.set(y+"X",x.get("x")),h.set(y+"Y",x.get("y"));break;case"scroll":h.alt(y,S,["up"]);break}},/=/,/\s/),h.has("id")){var p=new(e.vttjs.VTTRegion||e.window.VTTRegion);p.width=h.get("width",100),p.lines=h.get("lines",3),p.regionAnchorX=h.get("regionanchorX",0),p.regionAnchorY=h.get("regionanchorY",100),p.viewportAnchorX=h.get("viewportanchorX",0),p.viewportAnchorY=h.get("viewportanchorY",100),p.scroll=h.get("scroll",""),e.onregion&&e.onregion(p),e.regionList.push({id:h.get("id"),region:p})}}function t(d){var h=new ul;el(d,function(p,y){switch(p){case"MPEGT":h.integer(p+"S",y);break;case"LOCA":h.set(p+"L",Uv(y));break}},/[^\d]:/,/,/),e.ontimestampmap&&e.ontimestampmap({MPEGTS:h.get("MPEGTS"),LOCAL:h.get("LOCAL")})}function a(d){d.match(/X-TIMESTAMP-MAP/)?el(d,function(h,p){switch(h){case"X-TIMESTAMP-MAP":t(p);break}},/=/):el(d,function(h,p){switch(h){case"Region":n(p);break}},/:/)}try{var s;if(e.state==="INITIAL"){if(!/\r\n|\n/.test(e.buffer))return this;s=i();var o=s.match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new mi(mi.Errors.BadSignature);e.state="HEADER"}for(var l=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(l?l=!1:s=i(),e.state){case"HEADER":/:/.test(s)?a(s):s||(e.state="ID");continue;case"NOTE":s||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){e.state="NOTE";break}if(!s)continue;e.cue=new(e.vttjs.VTTCue||e.window.VTTCue)(0,0,"");try{e.cue.align="center"}catch{e.cue.align="middle"}if(e.state="CUE",s.indexOf("-->")===-1){e.cue.id=s;continue}case"CUE":try{XB(s,e.cue,e.regionList)}catch(d){e.reportOrThrowError(d),e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var c=s.indexOf("-->")!==-1;if(!s||c&&(l=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+=`
`),e.cue.text+=s.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":s||(e.state="ID");continue}}}catch(d){e.reportOrThrowError(d),e.state==="CUETEXT"&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state=e.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var r=this;try{if(r.buffer+=r.decoder.decode(),(r.cue||r.state==="HEADER")&&(r.buffer+=`

`,r.parse()),r.state==="INITIAL")throw new mi(mi.Errors.BadSignature)}catch(e){r.reportOrThrowError(e)}return r.onflush&&r.onflush(),this}};var s2=qo,o2="auto",u2={"":1,lr:1,rl:1},l2={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function c2(r){if(typeof r!="string")return!1;var e=u2[r.toLowerCase()];return e?r.toLowerCase():!1}function um(r){if(typeof r!="string")return!1;var e=l2[r.toLowerCase()];return e?r.toLowerCase():!1}function sC(r,e,i){this.hasBeenReset=!1;var n="",t=!1,a=r,s=e,o=i,l=null,c="",d=!0,h="auto",p="start",y="auto",S="auto",C=100,x="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return n},set:function(I){n=""+I}},pauseOnExit:{enumerable:!0,get:function(){return t},set:function(I){t=!!I}},startTime:{enumerable:!0,get:function(){return a},set:function(I){if(typeof I!="number")throw new TypeError("Start time must be set to a number.");a=I,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(I){if(typeof I!="number")throw new TypeError("End time must be set to a number.");s=I,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(I){o=""+I,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(I){l=I,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return c},set:function(I){var H=c2(I);if(H===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");c=H,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return d},set:function(I){d=!!I,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return h},set:function(I){if(typeof I!="number"&&I!==o2)throw new SyntaxError("Line: an invalid number or illegal string was specified.");h=I,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return p},set:function(I){var H=um(I);H?(p=H,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return y},set:function(I){if(I<0||I>100)throw new Error("Position must be between 0 and 100.");y=I,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return S},set:function(I){var H=um(I);H?(S=H,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return C},set:function(I){if(I<0||I>100)throw new Error("Size must be between 0 and 100.");C=I,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return x},set:function(I){var H=um(I);if(!H)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");x=H,this.hasBeenReset=!0}}}),this.displayState=void 0}sC.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var f2=sC,d2={"":!0,up:!0};function h2(r){if(typeof r!="string")return!1;var e=d2[r.toLowerCase()];return e?r.toLowerCase():!1}function Wu(r){return typeof r=="number"&&r>=0&&r<=100}function p2(){var r=100,e=3,i=0,n=100,t=0,a=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return r},set:function(o){if(!Wu(o))throw new Error("Width must be between 0 and 100.");r=o}},lines:{enumerable:!0,get:function(){return e},set:function(o){if(typeof o!="number")throw new TypeError("Lines must be set to a number.");e=o}},regionAnchorY:{enumerable:!0,get:function(){return n},set:function(o){if(!Wu(o))throw new Error("RegionAnchorX must be between 0 and 100.");n=o}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(o){if(!Wu(o))throw new Error("RegionAnchorY must be between 0 and 100.");i=o}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(o){if(!Wu(o))throw new Error("ViewportAnchorY must be between 0 and 100.");a=o}},viewportAnchorX:{enumerable:!0,get:function(){return t},set:function(o){if(!Wu(o))throw new Error("ViewportAnchorX must be between 0 and 100.");t=o}},scroll:{enumerable:!0,get:function(){return s},set:function(o){var l=h2(o);l===!1?console.warn("Scroll: an invalid or illegal string was specified."):s=l}}})}var m2=p2,Kn=q,As=fg.exports={WebVTT:s2,VTTCue:f2,VTTRegion:m2};Kn.vttjs=As;Kn.WebVTT=As.WebVTT;var g2=As.VTTCue,v2=As.VTTRegion,y2=Kn.VTTCue,_2=Kn.VTTRegion;As.shim=function(){Kn.VTTCue=g2,Kn.VTTRegion=v2};As.restore=function(){Kn.VTTCue=y2,Kn.VTTRegion=_2};Kn.VTTCue||As.shim();function T2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Cf(r,e,i){return T2()?Cf=Reflect.construct.bind():Cf=function(t,a,s){var o=[null];o.push.apply(o,a);var l=Function.bind.apply(t,o),c=new l;return s&&_l(c,s.prototype),c},Cf.apply(null,arguments)}function b2(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&_l(r,e)}var oC={exports:{}};(function(r,e){(function(i){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,t=/^(?=([^\/?#]*))\1([^]*)$/,a=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,c,d){if(d=d||{},l=l.trim(),c=c.trim(),!c){if(!d.alwaysNormalize)return l;var h=o.parseURL(l);if(!h)throw new Error("Error trying to parse base URL.");return h.path=o.normalizePath(h.path),o.buildURLFromParts(h)}var p=o.parseURL(c);if(!p)throw new Error("Error trying to parse relative URL.");if(p.scheme)return d.alwaysNormalize?(p.path=o.normalizePath(p.path),o.buildURLFromParts(p)):c;var y=o.parseURL(l);if(!y)throw new Error("Error trying to parse base URL.");if(!y.netLoc&&y.path&&y.path[0]!=="/"){var S=t.exec(y.path);y.netLoc=S[1],y.path=S[2]}y.netLoc&&!y.path&&(y.path="/");var C={scheme:y.scheme,netLoc:p.netLoc,path:null,params:p.params,query:p.query,fragment:p.fragment};if(!p.netLoc&&(C.netLoc=y.netLoc,p.path[0]!=="/"))if(!p.path)C.path=y.path,p.params||(C.params=y.params,p.query||(C.query=y.query));else{var x=y.path,I=x.substring(0,x.lastIndexOf("/")+1)+p.path;C.path=o.normalizePath(I)}return C.path===null&&(C.path=d.alwaysNormalize?o.normalizePath(p.path):p.path),o.buildURLFromParts(C)},parseURL:function(l){var c=n.exec(l);return c?{scheme:c[1]||"",netLoc:c[2]||"",path:c[3]||"",params:c[4]||"",query:c[5]||"",fragment:c[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(a,"");l.length!==(l=l.replace(s,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};r.exports=o})()})(oC);const QT=oC.exports;var JT="http://example.com",Yd=function(e,i){if(/^[a-z]+:/i.test(i))return i;/^data:/.test(e)&&(e=q.location&&q.location.href||"");var n=typeof q.URL=="function",t=/^\/\//.test(e),a=!q.location&&!/\/\//i.test(e);if(n?e=new q.URL(e,q.location||JT):/\/\//i.test(e)||(e=QT.buildAbsoluteURL(q.location&&q.location.href||"",e)),n){var s=new URL(i,e);return a?s.href.slice(JT.length):t?s.href.slice(s.protocol.length):s.href}return QT.buildAbsoluteURL(e,i)},Bv=function(){function r(){this.listeners={}}var e=r.prototype;return e.on=function(n,t){this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push(t)},e.off=function(n,t){if(!this.listeners[n])return!1;var a=this.listeners[n].indexOf(t);return this.listeners[n]=this.listeners[n].slice(0),this.listeners[n].splice(a,1),a>-1},e.trigger=function(n){var t=this.listeners[n];if(!!t)if(arguments.length===2)for(var a=t.length,s=0;s<a;++s)t[s].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),l=t.length,c=0;c<l;++c)t[c].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(n){this.on("data",function(t){n.push(t)})},r}(),S2=function(e){return q.atob?q.atob(e):Buffer.from(e,"base64").toString("binary")};function uC(r){for(var e=S2(r),i=new Uint8Array(e.length),n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i}/*! @name m3u8-parser @version 4.7.1 @license Apache-2.0 */var x2=function(r){Ve(e,r);function e(){var n;return n=r.call(this)||this,n.buffer="",n}var i=e.prototype;return i.push=function(t){var a;for(this.buffer+=t,a=this.buffer.indexOf(`
`);a>-1;a=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,a)),this.buffer=this.buffer.substring(a+1)},e}(Bv),E2=String.fromCharCode(9),lm=function(e){var i=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),n={};return i[1]&&(n.length=parseInt(i[1],10)),i[2]&&(n.offset=parseInt(i[2],10)),n},C2=function(){var e="[^=]*",i='"[^"]*"|[^,]*',n="(?:"+e+")=(?:"+i+")";return new RegExp("(?:^|,)("+n+")")},Fi=function(e){for(var i=e.split(C2()),n={},t=i.length,a;t--;)i[t]!==""&&(a=/([^=]*)=(.*)/.exec(i[t]).slice(1),a[0]=a[0].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^['"](.*)['"]$/g,"$1"),n[a[0]]=a[1]);return n},R2=function(r){Ve(e,r);function e(){var n;return n=r.call(this)||this,n.customParsers=[],n.tagMappers=[],n}var i=e.prototype;return i.push=function(t){var a=this,s,o;if(t=t.trim(),t.length!==0){if(t[0]!=="#"){this.trigger("data",{type:"uri",uri:t});return}var l=this.tagMappers.reduce(function(c,d){var h=d(t);return h===t?c:c.concat([h])},[t]);l.forEach(function(c){for(var d=0;d<a.customParsers.length;d++)if(a.customParsers[d].call(a,c))return;if(c.indexOf("#EXT")!==0){a.trigger("data",{type:"comment",text:c.slice(1)});return}if(c=c.replace("\r",""),s=/^#EXTM3U/.exec(c),s){a.trigger("data",{type:"tag",tagType:"m3u"});return}if(s=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(c),s){o={type:"tag",tagType:"inf"},s[1]&&(o.duration=parseFloat(s[1])),s[2]&&(o.title=s[2]),a.trigger("data",o);return}if(s=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(c),s){o={type:"tag",tagType:"targetduration"},s[1]&&(o.duration=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(c),s){o={type:"tag",tagType:"version"},s[1]&&(o.version=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(c),s){o={type:"tag",tagType:"media-sequence"},s[1]&&(o.number=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(c),s){o={type:"tag",tagType:"discontinuity-sequence"},s[1]&&(o.number=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(c),s){o={type:"tag",tagType:"playlist-type"},s[1]&&(o.playlistType=s[1]),a.trigger("data",o);return}if(s=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(c),s){o=Ai(lm(s[1]),{type:"tag",tagType:"byterange"}),a.trigger("data",o);return}if(s=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(c),s){o={type:"tag",tagType:"allow-cache"},s[1]&&(o.allowed=!/NO/.test(s[1])),a.trigger("data",o);return}if(s=/^#EXT-X-MAP:?(.*)$/.exec(c),s){if(o={type:"tag",tagType:"map"},s[1]){var h=Fi(s[1]);h.URI&&(o.uri=h.URI),h.BYTERANGE&&(o.byterange=lm(h.BYTERANGE))}a.trigger("data",o);return}if(s=/^#EXT-X-STREAM-INF:?(.*)$/.exec(c),s){if(o={type:"tag",tagType:"stream-inf"},s[1]){if(o.attributes=Fi(s[1]),o.attributes.RESOLUTION){var p=o.attributes.RESOLUTION.split("x"),y={};p[0]&&(y.width=parseInt(p[0],10)),p[1]&&(y.height=parseInt(p[1],10)),o.attributes.RESOLUTION=y}o.attributes.BANDWIDTH&&(o.attributes.BANDWIDTH=parseInt(o.attributes.BANDWIDTH,10)),o.attributes["PROGRAM-ID"]&&(o.attributes["PROGRAM-ID"]=parseInt(o.attributes["PROGRAM-ID"],10))}a.trigger("data",o);return}if(s=/^#EXT-X-MEDIA:?(.*)$/.exec(c),s){o={type:"tag",tagType:"media"},s[1]&&(o.attributes=Fi(s[1])),a.trigger("data",o);return}if(s=/^#EXT-X-ENDLIST/.exec(c),s){a.trigger("data",{type:"tag",tagType:"endlist"});return}if(s=/^#EXT-X-DISCONTINUITY/.exec(c),s){a.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(s=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(c),s){o={type:"tag",tagType:"program-date-time"},s[1]&&(o.dateTimeString=s[1],o.dateTimeObject=new Date(s[1])),a.trigger("data",o);return}if(s=/^#EXT-X-KEY:?(.*)$/.exec(c),s){o={type:"tag",tagType:"key"},s[1]&&(o.attributes=Fi(s[1]),o.attributes.IV&&(o.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(o.attributes.IV=o.attributes.IV.substring(2)),o.attributes.IV=o.attributes.IV.match(/.{8}/g),o.attributes.IV[0]=parseInt(o.attributes.IV[0],16),o.attributes.IV[1]=parseInt(o.attributes.IV[1],16),o.attributes.IV[2]=parseInt(o.attributes.IV[2],16),o.attributes.IV[3]=parseInt(o.attributes.IV[3],16),o.attributes.IV=new Uint32Array(o.attributes.IV))),a.trigger("data",o);return}if(s=/^#EXT-X-START:?(.*)$/.exec(c),s){o={type:"tag",tagType:"start"},s[1]&&(o.attributes=Fi(s[1]),o.attributes["TIME-OFFSET"]=parseFloat(o.attributes["TIME-OFFSET"]),o.attributes.PRECISE=/YES/.test(o.attributes.PRECISE)),a.trigger("data",o);return}if(s=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(c),s){o={type:"tag",tagType:"cue-out-cont"},s[1]?o.data=s[1]:o.data="",a.trigger("data",o);return}if(s=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(c),s){o={type:"tag",tagType:"cue-out"},s[1]?o.data=s[1]:o.data="",a.trigger("data",o);return}if(s=/^#EXT-X-CUE-IN:?(.*)?$/.exec(c),s){o={type:"tag",tagType:"cue-in"},s[1]?o.data=s[1]:o.data="",a.trigger("data",o);return}if(s=/^#EXT-X-SKIP:(.*)$/.exec(c),s&&s[1]){o={type:"tag",tagType:"skip"},o.attributes=Fi(s[1]),o.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(o.attributes["SKIPPED-SEGMENTS"]=parseInt(o.attributes["SKIPPED-SEGMENTS"],10)),o.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(o.attributes["RECENTLY-REMOVED-DATERANGES"]=o.attributes["RECENTLY-REMOVED-DATERANGES"].split(E2)),a.trigger("data",o);return}if(s=/^#EXT-X-PART:(.*)$/.exec(c),s&&s[1]){o={type:"tag",tagType:"part"},o.attributes=Fi(s[1]),["DURATION"].forEach(function(S){o.attributes.hasOwnProperty(S)&&(o.attributes[S]=parseFloat(o.attributes[S]))}),["INDEPENDENT","GAP"].forEach(function(S){o.attributes.hasOwnProperty(S)&&(o.attributes[S]=/YES/.test(o.attributes[S]))}),o.attributes.hasOwnProperty("BYTERANGE")&&(o.attributes.byterange=lm(o.attributes.BYTERANGE)),a.trigger("data",o);return}if(s=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(c),s&&s[1]){o={type:"tag",tagType:"server-control"},o.attributes=Fi(s[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(S){o.attributes.hasOwnProperty(S)&&(o.attributes[S]=parseFloat(o.attributes[S]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(S){o.attributes.hasOwnProperty(S)&&(o.attributes[S]=/YES/.test(o.attributes[S]))}),a.trigger("data",o);return}if(s=/^#EXT-X-PART-INF:(.*)$/.exec(c),s&&s[1]){o={type:"tag",tagType:"part-inf"},o.attributes=Fi(s[1]),["PART-TARGET"].forEach(function(S){o.attributes.hasOwnProperty(S)&&(o.attributes[S]=parseFloat(o.attributes[S]))}),a.trigger("data",o);return}if(s=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(c),s&&s[1]){o={type:"tag",tagType:"preload-hint"},o.attributes=Fi(s[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(S){if(o.attributes.hasOwnProperty(S)){o.attributes[S]=parseInt(o.attributes[S],10);var C=S==="BYTERANGE-LENGTH"?"length":"offset";o.attributes.byterange=o.attributes.byterange||{},o.attributes.byterange[C]=o.attributes[S],delete o.attributes[S]}}),a.trigger("data",o);return}if(s=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(c),s&&s[1]){o={type:"tag",tagType:"rendition-report"},o.attributes=Fi(s[1]),["LAST-MSN","LAST-PART"].forEach(function(S){o.attributes.hasOwnProperty(S)&&(o.attributes[S]=parseInt(o.attributes[S],10))}),a.trigger("data",o);return}a.trigger("data",{type:"tag",data:c.slice(4)})})}},i.addParser=function(t){var a=this,s=t.expression,o=t.customType,l=t.dataParser,c=t.segment;typeof l!="function"&&(l=function(h){return h}),this.customParsers.push(function(d){var h=s.exec(d);if(h)return a.trigger("data",{type:"custom",data:l(d),customType:o,segment:c}),!0})},i.addTagMapper=function(t){var a=t.expression,s=t.map,o=function(c){return a.test(c)?s(c):c};this.tagMappers.push(o)},e}(Bv),w2=function(e){return e.toLowerCase().replace(/-(\w)/g,function(i){return i[1].toUpperCase()})},io=function(e){var i={};return Object.keys(e).forEach(function(n){i[w2(n)]=e[n]}),i},cm=function(e){var i=e.serverControl,n=e.targetDuration,t=e.partTargetDuration;if(!!i){var a="#EXT-X-SERVER-CONTROL",s="holdBack",o="partHoldBack",l=n&&n*3,c=t&&t*2;n&&!i.hasOwnProperty(s)&&(i[s]=l,this.trigger("info",{message:a+" defaulting HOLD-BACK to targetDuration * 3 ("+l+")."})),l&&i[s]<l&&(this.trigger("warn",{message:a+" clamping HOLD-BACK ("+i[s]+") to targetDuration * 3 ("+l+")"}),i[s]=l),t&&!i.hasOwnProperty(o)&&(i[o]=t*3,this.trigger("info",{message:a+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+i[o]+")."})),t&&i[o]<c&&(this.trigger("warn",{message:a+" clamping PART-HOLD-BACK ("+i[o]+") to partTargetDuration * 2 ("+c+")."}),i[o]=c)}},A2=function(r){Ve(e,r);function e(){var n;n=r.call(this)||this,n.lineStream=new x2,n.parseStream=new R2,n.lineStream.pipe(n.parseStream);var t=rt(n),a=[],s={},o,l,c=!1,d=function(){},h={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},p="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",y=0;n.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var S=0,C=0;return n.on("end",function(){s.uri||!s.parts&&!s.preloadHints||(!s.map&&o&&(s.map=o),!s.key&&l&&(s.key=l),!s.timeline&&typeof y=="number"&&(s.timeline=y),n.manifest.preloadSegment=s)}),n.parseStream.on("data",function(x){var I,H;({tag:function(){({version:function(){x.version&&(this.manifest.version=x.version)},"allow-cache":function(){this.manifest.allowCache=x.allowed,"allowed"in x||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var j={};"length"in x&&(s.byterange=j,j.length=x.length,"offset"in x||(x.offset=S)),"offset"in x&&(s.byterange=j,j.offset=x.offset),S=j.offset+j.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),x.duration>0&&(s.duration=x.duration),x.duration===0&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){if(!x.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(x.attributes.METHOD==="NONE"){l=null;return}if(!x.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(x.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:x.attributes};return}if(x.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:x.attributes.URI};return}if(x.attributes.KEYFORMAT===p){var j=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];if(j.indexOf(x.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(x.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),x.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(x.attributes.KEYID&&x.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:x.attributes.KEYFORMAT,keyId:x.attributes.KEYID.substring(2)},pssh:uC(x.attributes.URI.split(",")[1])};return}x.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),l={method:x.attributes.METHOD||"AES-128",uri:x.attributes.URI},typeof x.attributes.IV<"u"&&(l.iv=x.attributes.IV)},"media-sequence":function(){if(!isFinite(x.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+x.number});return}this.manifest.mediaSequence=x.number},"discontinuity-sequence":function(){if(!isFinite(x.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+x.number});return}this.manifest.discontinuitySequence=x.number,y=x.number},"playlist-type":function(){if(!/VOD|EVENT/.test(x.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+x.playlist});return}this.manifest.playlistType=x.playlistType},map:function(){o={},x.uri&&(o.uri=x.uri),x.byterange&&(o.byterange=x.byterange),l&&(o.key=l)},"stream-inf":function(){if(this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||h,!x.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}s.attributes||(s.attributes={}),Ai(s.attributes,x.attributes)},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||h,!(x.attributes&&x.attributes.TYPE&&x.attributes["GROUP-ID"]&&x.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var j=this.manifest.mediaGroups[x.attributes.TYPE];j[x.attributes["GROUP-ID"]]=j[x.attributes["GROUP-ID"]]||{},I=j[x.attributes["GROUP-ID"]],H={default:/yes/i.test(x.attributes.DEFAULT)},H.default?H.autoselect=!0:H.autoselect=/yes/i.test(x.attributes.AUTOSELECT),x.attributes.LANGUAGE&&(H.language=x.attributes.LANGUAGE),x.attributes.URI&&(H.uri=x.attributes.URI),x.attributes["INSTREAM-ID"]&&(H.instreamId=x.attributes["INSTREAM-ID"]),x.attributes.CHARACTERISTICS&&(H.characteristics=x.attributes.CHARACTERISTICS),x.attributes.FORCED&&(H.forced=/yes/i.test(x.attributes.FORCED)),I[x.attributes.NAME]=H},discontinuity:function(){y+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=x.dateTimeString,this.manifest.dateTimeObject=x.dateTimeObject),s.dateTimeString=x.dateTimeString,s.dateTimeObject=x.dateTimeObject},targetduration:function(){if(!isFinite(x.duration)||x.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+x.duration});return}this.manifest.targetDuration=x.duration,cm.call(this,this.manifest)},start:function(){if(!x.attributes||isNaN(x.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:x.attributes["TIME-OFFSET"],precise:x.attributes.PRECISE}},"cue-out":function(){s.cueOut=x.data},"cue-out-cont":function(){s.cueOutCont=x.data},"cue-in":function(){s.cueIn=x.data},skip:function(){this.manifest.skip=io(x.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",x.attributes,["SKIPPED-SEGMENTS"])},part:function(){var j=this;c=!0;var le=this.manifest.segments.length,fe=io(x.attributes);s.parts=s.parts||[],s.parts.push(fe),fe.byterange&&(fe.byterange.hasOwnProperty("offset")||(fe.byterange.offset=C),C=fe.byterange.offset+fe.byterange.length);var Y=s.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+Y+" for segment #"+le,x.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(oe,V){oe.hasOwnProperty("lastPart")||j.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+V+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var j=this.manifest.serverControl=io(x.attributes);j.hasOwnProperty("canBlockReload")||(j.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),cm.call(this,this.manifest),j.canSkipDateranges&&!j.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var j=this.manifest.segments.length,le=io(x.attributes),fe=le.type&&le.type==="PART";s.preloadHints=s.preloadHints||[],s.preloadHints.push(le),le.byterange&&(le.byterange.hasOwnProperty("offset")||(le.byterange.offset=fe?C:0,fe&&(C=le.byterange.offset+le.byterange.length)));var Y=s.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+Y+" for segment #"+j,x.attributes,["TYPE","URI"]),!!le.type)for(var oe=0;oe<s.preloadHints.length-1;oe++){var V=s.preloadHints[oe];!V.type||V.type===le.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+Y+" for segment #"+j+" has the same TYPE "+le.type+" as preload hint #"+oe})}},"rendition-report":function(){var j=io(x.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(j);var le=this.manifest.renditionReports.length-1,fe=["LAST-MSN","URI"];c&&fe.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+le,x.attributes,fe)},"part-inf":function(){this.manifest.partInf=io(x.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",x.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),cm.call(this,this.manifest)}}[x.tagType]||d).call(t)},uri:function(){s.uri=x.uri,a.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),l&&(s.key=l),s.timeline=y,o&&(s.map=o),C=0,s={}},comment:function(){},custom:function(){x.segment?(s.custom=s.custom||{},s.custom[x.customType]=x.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[x.customType]=x.data)}})[x.type].call(t)}),n}var i=e.prototype;return i.warnOnMissingAttributes_=function(t,a,s){var o=[];s.forEach(function(l){a.hasOwnProperty(l)||o.push(l)}),o.length&&this.trigger("warn",{message:t+" lacks required attribute(s): "+o.join(", ")})},i.push=function(t){this.lineStream.push(t)},i.end=function(){this.lineStream.push(`
`),this.trigger("end")},i.addParser=function(t){this.parseStream.addParser(t)},i.addTagMapper=function(t){this.parseStream.addTagMapper(t)},e}(Bv),_s={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},P2=["video","audio","text"],ZT=["Video","Audio","Text"],lC=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(i,n,t){var a=("00"+Number(n).toString(16)).slice(-2),s=("00"+Number(t).toString(16)).slice(-2);return"avc1."+a+"00"+s})},on=function(e){e===void 0&&(e="");var i=e.split(","),n=[];return i.forEach(function(t){t=t.trim();var a;P2.forEach(function(s){var o=_s[s].exec(t.toLowerCase());if(!(!o||o.length<=1)){a=s;var l=t.substring(0,o[1].length),c=t.replace(l,"");n.push({type:l,details:c,mediaType:s})}}),a||n.push({type:t,details:"",mediaType:"unknown"})}),n},O2=function(e,i){if(!e.mediaGroups.AUDIO||!i)return null;var n=e.mediaGroups.AUDIO[i];if(!n)return null;for(var t in n){var a=n[t];if(a.default&&a.playlists)return on(a.playlists[0].attributes.CODECS)}return null},cC=function(e){return e===void 0&&(e=""),_s.audio.test(e.trim().toLowerCase())},I2=function(e){return e===void 0&&(e=""),_s.text.test(e.trim().toLowerCase())},Tl=function(e){if(!(!e||typeof e!="string")){var i=e.toLowerCase().split(",").map(function(a){return lC(a.trim())}),n="video";i.length===1&&cC(i[0])?n="audio":i.length===1&&I2(i[0])&&(n="application");var t="mp4";return i.every(function(a){return _s.mp4.test(a)})?t="mp4":i.every(function(a){return _s.webm.test(a)})?t="webm":i.every(function(a){return _s.ogg.test(a)})&&(t="ogg"),n+"/"+t+';codecs="'+e+'"'}},Rf=function(e){return e===void 0&&(e=""),q.MediaSource&&q.MediaSource.isTypeSupported&&q.MediaSource.isTypeSupported(Tl(e))||!1},fm=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(i){i=i.trim();for(var n=0;n<ZT.length;n++){var t=ZT[n];if(_s["muxer"+t].test(i))return!0}return!1})},eb="mp4a.40.2",D2="avc1.4d400d",k2=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,L2=/^application\/dash\+xml/i,fC=function(e){return k2.test(e)?"hls":L2.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},M2=function(e){return e.toString(2).length},N2=function(e){return Math.ceil(M2(e)/8)},dC=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},F2=function(e){return dC(e)},Qe=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!F2(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},Tr=q.BigInt||Number,dg=[Tr("0x1"),Tr("0x100"),Tr("0x10000"),Tr("0x1000000"),Tr("0x100000000"),Tr("0x10000000000"),Tr("0x1000000000000"),Tr("0x100000000000000"),Tr("0x10000000000000000")];(function(){var r=new Uint16Array([65484]),e=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var U2=function(e,i){var n=i===void 0?{}:i,t=n.signed,a=t===void 0?!1:t,s=n.le,o=s===void 0?!1:s;e=Qe(e);var l=o?"reduce":"reduceRight",c=e[l]?e[l]:Array.prototype[l],d=c.call(e,function(p,y,S){var C=o?S:Math.abs(S+1-e.length);return p+Tr(y)*dg[C]},Tr(0));if(a){var h=dg[e.length]/Tr(2)-Tr(1);d=Tr(d),d>h&&(d-=h,d-=h,d-=Tr(2))}return Number(d)},B2=function(e,i){var n=i===void 0?{}:i,t=n.le,a=t===void 0?!1:t;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=Tr(e);for(var s=N2(e),o=new Uint8Array(new ArrayBuffer(s)),l=0;l<s;l++){var c=a?l:Math.abs(l+1-o.length);o[c]=Number(e/dg[l]&Tr(255)),e<0&&(o[c]=Math.abs(~o[c]),o[c]-=l===0?1:2)}return o},hC=function(e,i){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;i||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n},j2=function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];if(i=i.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),i.length<=1)return Qe(i[0]);var t=i.reduce(function(o,l,c){return o+(l.byteLength||l.length)},0),a=new Uint8Array(t),s=0;return i.forEach(function(o){o=Qe(o),a.set(o,s),s+=o.byteLength}),a},jt=function(e,i,n){var t=n===void 0?{}:n,a=t.offset,s=a===void 0?0:a,o=t.mask,l=o===void 0?[]:o;e=Qe(e),i=Qe(i);var c=i.every?i.every:Array.prototype.every;return i.length&&e.length-s>=i.length&&c.call(i,function(d,h){var p=l[h]?l[h]&e[s+h]:e[s+h];return d===p})},V2=function(e,i,n){i.forEach(function(t){for(var a in e.mediaGroups[t])for(var s in e.mediaGroups[t][a]){var o=e.mediaGroups[t][a][s];n(o,t,a,s)}})},Oa={},Ps={};function jv(r,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(r):r}var pC=jv({HTML:"text/html",isHTML:function(r){return r===pC.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),mC=jv({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(r){return r===mC.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Ps.freeze=jv;Ps.MIME_TYPE=pC;Ps.NAMESPACE=mC;var H2=Ps,bl=H2.NAMESPACE;function W2(r){return r!==""}function $2(r){return r?r.split(/[\t\n\f\r ]+/).filter(W2):[]}function G2(r,e){return r.hasOwnProperty(e)||(r[e]=!0),r}function tb(r){if(!r)return[];var e=$2(r);return Object.keys(e.reduce(G2,{}))}function z2(r){return function(e){return r&&r.indexOf(e)!==-1}}function kl(r,e){for(var i in r)e[i]=r[i]}function si(r,e){var i=r.prototype;if(!(i instanceof e)){let t=function(){};var n=t;t.prototype=e.prototype,t=new t,kl(i,t),r.prototype=i=t}i.constructor!=r&&(typeof r!="function"&&console.error("unknown Class:"+r),i.constructor=r)}var oi={},$i=oi.ELEMENT_NODE=1,Io=oi.ATTRIBUTE_NODE=2,Xf=oi.TEXT_NODE=3,gC=oi.CDATA_SECTION_NODE=4,vC=oi.ENTITY_REFERENCE_NODE=5,q2=oi.ENTITY_NODE=6,yC=oi.PROCESSING_INSTRUCTION_NODE=7,_C=oi.COMMENT_NODE=8,TC=oi.DOCUMENT_NODE=9,bC=oi.DOCUMENT_TYPE_NODE=10,Yn=oi.DOCUMENT_FRAGMENT_NODE=11,K2=oi.NOTATION_NODE=12,Or={},pr={};Or.INDEX_SIZE_ERR=(pr[1]="Index size error",1);Or.DOMSTRING_SIZE_ERR=(pr[2]="DOMString size error",2);var Y2=Or.HIERARCHY_REQUEST_ERR=(pr[3]="Hierarchy request error",3);Or.WRONG_DOCUMENT_ERR=(pr[4]="Wrong document",4);Or.INVALID_CHARACTER_ERR=(pr[5]="Invalid character",5);Or.NO_DATA_ALLOWED_ERR=(pr[6]="No data allowed",6);Or.NO_MODIFICATION_ALLOWED_ERR=(pr[7]="No modification allowed",7);var X2=Or.NOT_FOUND_ERR=(pr[8]="Not found",8);Or.NOT_SUPPORTED_ERR=(pr[9]="Not supported",9);var rb=Or.INUSE_ATTRIBUTE_ERR=(pr[10]="Attribute in use",10);Or.INVALID_STATE_ERR=(pr[11]="Invalid state",11);Or.SYNTAX_ERR=(pr[12]="Syntax error",12);Or.INVALID_MODIFICATION_ERR=(pr[13]="Invalid modification",13);Or.NAMESPACE_ERR=(pr[14]="Invalid namespace",14);Or.INVALID_ACCESS_ERR=(pr[15]="Invalid access",15);function Cs(r,e){if(e instanceof Error)var i=e;else i=this,Error.call(this,pr[r]),this.message=pr[r],Error.captureStackTrace&&Error.captureStackTrace(this,Cs);return i.code=r,e&&(this.message=this.message+": "+e),i}Cs.prototype=Error.prototype;kl(Or,Cs);function $n(){}$n.prototype={length:0,item:function(r){return this[r]||null},toString:function(r,e){for(var i=[],n=0;n<this.length;n++)fo(this[n],i,r,e);return i.join("")}};function Do(r,e){this._node=r,this._refresh=e,Vv(this)}function Vv(r){var e=r._node._inc||r._node.ownerDocument._inc;if(r._inc!=e){var i=r._refresh(r._node);kC(r,"length",i.length),kl(i,r),r._inc=e}}Do.prototype.item=function(r){return Vv(this),this[r]};si(Do,$n);function Qf(){}function SC(r,e){for(var i=r.length;i--;)if(r[i]===e)return i}function ib(r,e,i,n){if(n?e[SC(e,n)]=i:e[e.length++]=i,r){i.ownerElement=r;var t=r.ownerDocument;t&&(n&&CC(t,r,n),Q2(t,r,i))}}function nb(r,e,i){var n=SC(e,i);if(n>=0){for(var t=e.length-1;n<t;)e[n]=e[++n];if(e.length=t,r){var a=r.ownerDocument;a&&(CC(a,r,i),i.ownerElement=null)}}else throw Cs(X2,new Error(r.tagName+"@"+i))}Qf.prototype={length:0,item:$n.prototype.item,getNamedItem:function(r){for(var e=this.length;e--;){var i=this[e];if(i.nodeName==r)return i}},setNamedItem:function(r){var e=r.ownerElement;if(e&&e!=this._ownerElement)throw new Cs(rb);var i=this.getNamedItem(r.nodeName);return ib(this._ownerElement,this,r,i),i},setNamedItemNS:function(r){var e=r.ownerElement,i;if(e&&e!=this._ownerElement)throw new Cs(rb);return i=this.getNamedItemNS(r.namespaceURI,r.localName),ib(this._ownerElement,this,r,i),i},removeNamedItem:function(r){var e=this.getNamedItem(r);return nb(this._ownerElement,this,e),e},removeNamedItemNS:function(r,e){var i=this.getNamedItemNS(r,e);return nb(this._ownerElement,this,i),i},getNamedItemNS:function(r,e){for(var i=this.length;i--;){var n=this[i];if(n.localName==e&&n.namespaceURI==r)return n}return null}};function xC(){}xC.prototype={hasFeature:function(r,e){return!0},createDocument:function(r,e,i){var n=new Ll;if(n.implementation=this,n.childNodes=new $n,n.doctype=i||null,i&&n.appendChild(i),e){var t=n.createElementNS(r,e);n.appendChild(t)}return n},createDocumentType:function(r,e,i){var n=new Xd;return n.name=r,n.nodeName=r,n.publicId=e||"",n.systemId=i||"",n}};function Ir(){}Ir.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(r,e){return wC(this,r,e)},replaceChild:function(r,e){this.insertBefore(r,e),e&&this.removeChild(e)},removeChild:function(r){return RC(this,r)},appendChild:function(r){return this.insertBefore(r,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(r){return hg(this.ownerDocument||this,this,r)},normalize:function(){for(var r=this.firstChild;r;){var e=r.nextSibling;e&&e.nodeType==Xf&&r.nodeType==Xf?(this.removeChild(e),r.appendData(e.data)):(r.normalize(),r=e)}},isSupported:function(r,e){return this.ownerDocument.implementation.hasFeature(r,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(r){for(var e=this;e;){var i=e._nsMap;if(i){for(var n in i)if(i[n]==r)return n}e=e.nodeType==Io?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(r){for(var e=this;e;){var i=e._nsMap;if(i&&r in i)return i[r];e=e.nodeType==Io?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(r){var e=this.lookupPrefix(r);return e==null}};function EC(r){return r=="<"&&"&lt;"||r==">"&&"&gt;"||r=="&"&&"&amp;"||r=='"'&&"&quot;"||"&#"+r.charCodeAt()+";"}kl(oi,Ir);kl(oi,Ir.prototype);function Sl(r,e){if(e(r))return!0;if(r=r.firstChild)do if(Sl(r,e))return!0;while(r=r.nextSibling)}function Ll(){}function Q2(r,e,i){r&&r._inc++;var n=i.namespaceURI;n===bl.XMLNS&&(e._nsMap[i.prefix?i.localName:""]=i.value)}function CC(r,e,i,n){r&&r._inc++;var t=i.namespaceURI;t===bl.XMLNS&&delete e._nsMap[i.prefix?i.localName:""]}function Hv(r,e,i){if(r&&r._inc){r._inc++;var n=e.childNodes;if(i)n[n.length++]=i;else{for(var t=e.firstChild,a=0;t;)n[a++]=t,t=t.nextSibling;n.length=a}}}function RC(r,e){var i=e.previousSibling,n=e.nextSibling;return i?i.nextSibling=n:r.firstChild=n,n?n.previousSibling=i:r.lastChild=i,Hv(r.ownerDocument,r),e}function wC(r,e,i){var n=e.parentNode;if(n&&n.removeChild(e),e.nodeType===Yn){var t=e.firstChild;if(t==null)return e;var a=e.lastChild}else t=a=e;var s=i?i.previousSibling:r.lastChild;t.previousSibling=s,a.nextSibling=i,s?s.nextSibling=t:r.firstChild=t,i==null?r.lastChild=a:i.previousSibling=a;do t.parentNode=r;while(t!==a&&(t=t.nextSibling));return Hv(r.ownerDocument||r,r),e.nodeType==Yn&&(e.firstChild=e.lastChild=null),e}function J2(r,e){var i=e.parentNode;if(i){var n=r.lastChild;i.removeChild(e);var n=r.lastChild}var n=r.lastChild;return e.parentNode=r,e.previousSibling=n,e.nextSibling=null,n?n.nextSibling=e:r.firstChild=e,r.lastChild=e,Hv(r.ownerDocument,r,e),e}Ll.prototype={nodeName:"#document",nodeType:TC,doctype:null,documentElement:null,_inc:1,insertBefore:function(r,e){if(r.nodeType==Yn){for(var i=r.firstChild;i;){var n=i.nextSibling;this.insertBefore(i,e),i=n}return r}return this.documentElement==null&&r.nodeType==$i&&(this.documentElement=r),wC(this,r,e),r.ownerDocument=this,r},removeChild:function(r){return this.documentElement==r&&(this.documentElement=null),RC(this,r)},importNode:function(r,e){return DC(this,r,e)},getElementById:function(r){var e=null;return Sl(this.documentElement,function(i){if(i.nodeType==$i&&i.getAttribute("id")==r)return e=i,!0}),e},getElementsByClassName:function(r){var e=tb(r);return new Do(this,function(i){var n=[];return e.length>0&&Sl(i.documentElement,function(t){if(t!==i&&t.nodeType===$i){var a=t.getAttribute("class");if(a){var s=r===a;if(!s){var o=tb(a);s=e.every(z2(o))}s&&n.push(t)}}}),n})},createElement:function(r){var e=new Rs;e.ownerDocument=this,e.nodeName=r,e.tagName=r,e.localName=r,e.childNodes=new $n;var i=e.attributes=new Qf;return i._ownerElement=e,e},createDocumentFragment:function(){var r=new Qd;return r.ownerDocument=this,r.childNodes=new $n,r},createTextNode:function(r){var e=new Wv;return e.ownerDocument=this,e.appendData(r),e},createComment:function(r){var e=new $v;return e.ownerDocument=this,e.appendData(r),e},createCDATASection:function(r){var e=new Gv;return e.ownerDocument=this,e.appendData(r),e},createProcessingInstruction:function(r,e){var i=new qv;return i.ownerDocument=this,i.tagName=i.target=r,i.nodeValue=i.data=e,i},createAttribute:function(r){var e=new Jf;return e.ownerDocument=this,e.name=r,e.nodeName=r,e.localName=r,e.specified=!0,e},createEntityReference:function(r){var e=new zv;return e.ownerDocument=this,e.nodeName=r,e},createElementNS:function(r,e){var i=new Rs,n=e.split(":"),t=i.attributes=new Qf;return i.childNodes=new $n,i.ownerDocument=this,i.nodeName=e,i.tagName=e,i.namespaceURI=r,n.length==2?(i.prefix=n[0],i.localName=n[1]):i.localName=e,t._ownerElement=i,i},createAttributeNS:function(r,e){var i=new Jf,n=e.split(":");return i.ownerDocument=this,i.nodeName=e,i.name=e,i.namespaceURI=r,i.specified=!0,n.length==2?(i.prefix=n[0],i.localName=n[1]):i.localName=e,i}};si(Ll,Ir);function Rs(){this._nsMap={}}Rs.prototype={nodeType:$i,hasAttribute:function(r){return this.getAttributeNode(r)!=null},getAttribute:function(r){var e=this.getAttributeNode(r);return e&&e.value||""},getAttributeNode:function(r){return this.attributes.getNamedItem(r)},setAttribute:function(r,e){var i=this.ownerDocument.createAttribute(r);i.value=i.nodeValue=""+e,this.setAttributeNode(i)},removeAttribute:function(r){var e=this.getAttributeNode(r);e&&this.removeAttributeNode(e)},appendChild:function(r){return r.nodeType===Yn?this.insertBefore(r,null):J2(this,r)},setAttributeNode:function(r){return this.attributes.setNamedItem(r)},setAttributeNodeNS:function(r){return this.attributes.setNamedItemNS(r)},removeAttributeNode:function(r){return this.attributes.removeNamedItem(r.nodeName)},removeAttributeNS:function(r,e){var i=this.getAttributeNodeNS(r,e);i&&this.removeAttributeNode(i)},hasAttributeNS:function(r,e){return this.getAttributeNodeNS(r,e)!=null},getAttributeNS:function(r,e){var i=this.getAttributeNodeNS(r,e);return i&&i.value||""},setAttributeNS:function(r,e,i){var n=this.ownerDocument.createAttributeNS(r,e);n.value=n.nodeValue=""+i,this.setAttributeNode(n)},getAttributeNodeNS:function(r,e){return this.attributes.getNamedItemNS(r,e)},getElementsByTagName:function(r){return new Do(this,function(e){var i=[];return Sl(e,function(n){n!==e&&n.nodeType==$i&&(r==="*"||n.tagName==r)&&i.push(n)}),i})},getElementsByTagNameNS:function(r,e){return new Do(this,function(i){var n=[];return Sl(i,function(t){t!==i&&t.nodeType===$i&&(r==="*"||t.namespaceURI===r)&&(e==="*"||t.localName==e)&&n.push(t)}),n})}};Ll.prototype.getElementsByTagName=Rs.prototype.getElementsByTagName;Ll.prototype.getElementsByTagNameNS=Rs.prototype.getElementsByTagNameNS;si(Rs,Ir);function Jf(){}Jf.prototype.nodeType=Io;si(Jf,Ir);function Ml(){}Ml.prototype={data:"",substringData:function(r,e){return this.data.substring(r,r+e)},appendData:function(r){r=this.data+r,this.nodeValue=this.data=r,this.length=r.length},insertData:function(r,e){this.replaceData(r,0,e)},appendChild:function(r){throw new Error(pr[Y2])},deleteData:function(r,e){this.replaceData(r,e,"")},replaceData:function(r,e,i){var n=this.data.substring(0,r),t=this.data.substring(r+e);i=n+i+t,this.nodeValue=this.data=i,this.length=i.length}};si(Ml,Ir);function Wv(){}Wv.prototype={nodeName:"#text",nodeType:Xf,splitText:function(r){var e=this.data,i=e.substring(r);e=e.substring(0,r),this.data=this.nodeValue=e,this.length=e.length;var n=this.ownerDocument.createTextNode(i);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}};si(Wv,Ml);function $v(){}$v.prototype={nodeName:"#comment",nodeType:_C};si($v,Ml);function Gv(){}Gv.prototype={nodeName:"#cdata-section",nodeType:gC};si(Gv,Ml);function Xd(){}Xd.prototype.nodeType=bC;si(Xd,Ir);function AC(){}AC.prototype.nodeType=K2;si(AC,Ir);function PC(){}PC.prototype.nodeType=q2;si(PC,Ir);function zv(){}zv.prototype.nodeType=vC;si(zv,Ir);function Qd(){}Qd.prototype.nodeName="#document-fragment";Qd.prototype.nodeType=Yn;si(Qd,Ir);function qv(){}qv.prototype.nodeType=yC;si(qv,Ir);function OC(){}OC.prototype.serializeToString=function(r,e,i){return IC.call(r,e,i)};Ir.prototype.toString=IC;function IC(r,e){var i=[],n=this.nodeType==9&&this.documentElement||this,t=n.prefix,a=n.namespaceURI;if(a&&t==null){var t=n.lookupPrefix(a);if(t==null)var s=[{namespace:a,prefix:null}]}return fo(this,i,r,e,s),i.join("")}function ab(r,e,i){var n=r.prefix||"",t=r.namespaceURI;if(!t||n==="xml"&&t===bl.XML||t===bl.XMLNS)return!1;for(var a=i.length;a--;){var s=i[a];if(s.prefix===n)return s.namespace!==t}return!0}function dm(r,e,i){r.push(" ",e,'="',i.replace(/[<&"]/g,EC),'"')}function fo(r,e,i,n,t){if(t||(t=[]),n)if(r=n(r),r){if(typeof r=="string"){e.push(r);return}}else return;switch(r.nodeType){case $i:var a=r.attributes,s=a.length,I=r.firstChild,o=r.tagName;i=bl.isHTML(r.namespaceURI)||i;var l=o;if(!i&&!r.prefix&&r.namespaceURI){for(var c,d=0;d<a.length;d++)if(a.item(d).name==="xmlns"){c=a.item(d).value;break}if(!c)for(var h=t.length-1;h>=0;h--){var p=t[h];if(p.prefix===""&&p.namespace===r.namespaceURI){c=p.namespace;break}}if(c!==r.namespaceURI)for(var h=t.length-1;h>=0;h--){var p=t[h];if(p.namespace===r.namespaceURI){p.prefix&&(l=p.prefix+":"+o);break}}}e.push("<",l);for(var y=0;y<s;y++){var S=a.item(y);S.prefix=="xmlns"?t.push({prefix:S.localName,namespace:S.value}):S.nodeName=="xmlns"&&t.push({prefix:"",namespace:S.value})}for(var y=0;y<s;y++){var S=a.item(y);if(ab(S,i,t)){var C=S.prefix||"",x=S.namespaceURI;dm(e,C?"xmlns:"+C:"xmlns",x),t.push({prefix:C,namespace:x})}fo(S,e,i,n,t)}if(o===l&&ab(r,i,t)){var C=r.prefix||"",x=r.namespaceURI;dm(e,C?"xmlns:"+C:"xmlns",x),t.push({prefix:C,namespace:x})}if(I||i&&!/^(?:meta|link|img|br|hr|input)$/i.test(o)){if(e.push(">"),i&&/^script$/i.test(o))for(;I;)I.data?e.push(I.data):fo(I,e,i,n,t.slice()),I=I.nextSibling;else for(;I;)fo(I,e,i,n,t.slice()),I=I.nextSibling;e.push("</",l,">")}else e.push("/>");return;case TC:case Yn:for(var I=r.firstChild;I;)fo(I,e,i,n,t.slice()),I=I.nextSibling;return;case Io:return dm(e,r.name,r.value);case Xf:return e.push(r.data.replace(/[<&]/g,EC).replace(/]]>/g,"]]&gt;"));case gC:return e.push("<![CDATA[",r.data,"]]>");case _C:return e.push("<!--",r.data,"-->");case bC:var H=r.publicId,Z=r.systemId;if(e.push("<!DOCTYPE ",r.name),H)e.push(" PUBLIC ",H),Z&&Z!="."&&e.push(" ",Z),e.push(">");else if(Z&&Z!=".")e.push(" SYSTEM ",Z,">");else{var W=r.internalSubset;W&&e.push(" [",W,"]"),e.push(">")}return;case yC:return e.push("<?",r.target," ",r.data,"?>");case vC:return e.push("&",r.nodeName,";");default:e.push("??",r.nodeName)}}function DC(r,e,i){var n;switch(e.nodeType){case $i:n=e.cloneNode(!1),n.ownerDocument=r;case Yn:break;case Io:i=!0;break}if(n||(n=e.cloneNode(!1)),n.ownerDocument=r,n.parentNode=null,i)for(var t=e.firstChild;t;)n.appendChild(DC(r,t,i)),t=t.nextSibling;return n}function hg(r,e,i){var n=new e.constructor;for(var t in e){var a=e[t];typeof a!="object"&&a!=n[t]&&(n[t]=a)}switch(e.childNodes&&(n.childNodes=new $n),n.ownerDocument=r,n.nodeType){case $i:var s=e.attributes,o=n.attributes=new Qf,l=s.length;o._ownerElement=n;for(var c=0;c<l;c++)n.setAttributeNode(hg(r,s.item(c),!0));break;case Io:i=!0}if(i)for(var d=e.firstChild;d;)n.appendChild(hg(r,d,i)),d=d.nextSibling;return n}function kC(r,e,i){r[e]=i}try{if(Object.defineProperty){let r=function(e){switch(e.nodeType){case $i:case Yn:var i=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&i.push(r(e)),e=e.nextSibling;return i.join("");default:return e.nodeValue}};var getTextContent=r;Object.defineProperty(Do.prototype,"length",{get:function(){return Vv(this),this.$$length}}),Object.defineProperty(Ir.prototype,"textContent",{get:function(){return r(this)},set:function(e){switch(this.nodeType){case $i:case Yn:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),kC=function(e,i,n){e["$$"+i]=n}}}catch{}Oa.DocumentType=Xd;Oa.DOMException=Cs;Oa.DOMImplementation=xC;Oa.Element=Rs;Oa.Node=Ir;Oa.NodeList=$n;Oa.XMLSerializer=OC;var Nl={},LC={};(function(r){var e=Ps.freeze;r.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),r.HTML_ENTITIES=e({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",times:"\xD7",divide:"\xF7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",euro:"\u20AC",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),r.entityMap=r.HTML_ENTITIES})(LC);var Kv={},xl=Ps.NAMESPACE,pg=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,sb=new RegExp("[\\-\\.0-9"+pg.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),ob=new RegExp("^"+pg.source+sb.source+"*(?::"+pg.source+sb.source+"*)?$"),$u=0,ga=1,no=2,Gu=3,ao=4,so=5,zu=6,of=7;function ko(r,e){this.message=r,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,ko)}ko.prototype=new Error;ko.prototype.name=ko.name;function MC(){}MC.prototype={parse:function(r,e,i){var n=this.domBuilder;n.startDocument(),NC(e,e={}),Z2(r,e,i,n,this.errorHandler),n.endDocument()}};function Z2(r,e,i,n,t){function a(De){if(De>65535){De-=65536;var Fe=55296+(De>>10),ge=56320+(De&1023);return String.fromCharCode(Fe,ge)}else return String.fromCharCode(De)}function s(De){var Fe=De.slice(1,-1);return Fe in i?i[Fe]:Fe.charAt(0)==="#"?a(parseInt(Fe.substr(1).replace("x","0x"))):(t.error("entity not found:"+De),De)}function o(De){if(De>C){var Fe=r.substring(C,De).replace(/&#?\w+;/g,s);p&&l(C),n.characters(Fe,0,De-C),C=De}}function l(De,Fe){for(;De>=d&&(Fe=h.exec(r));)c=Fe.index,d=c+Fe[0].length,p.lineNumber++;p.columnNumber=De-c+1}for(var c=0,d=0,h=/.*(?:\r\n?|\n)|.*$/g,p=n.locator,y=[{currentNSMap:e}],S={},C=0;;){try{var x=r.indexOf("<",C);if(x<0){if(!r.substr(C).match(/^\s*$/)){var I=n.doc,H=I.createTextNode(r.substr(C));I.appendChild(H),n.currentElement=H}return}switch(x>C&&o(x),r.charAt(x+1)){case"/":var pe=r.indexOf(">",x+3),Z=r.substring(x+2,pe).replace(/[ \t\n\r]+$/g,""),W=y.pop();pe<0?(Z=r.substring(x+2).replace(/[\s<].*/,""),t.error("end tag name: "+Z+" is not complete:"+W.tagName),pe=x+1+Z.length):Z.match(/\s</)&&(Z=Z.replace(/[\s<].*/,""),t.error("end tag name: "+Z+" maybe not complete"),pe=x+1+Z.length);var j=W.localNSMap,le=W.tagName==Z,fe=le||W.tagName&&W.tagName.toLowerCase()==Z.toLowerCase();if(fe){if(n.endElement(W.uri,W.localName,Z),j)for(var Y in j)n.endPrefixMapping(Y);le||t.fatalError("end tag name: "+Z+" is not match the current start tagName:"+W.tagName)}else y.push(W);pe++;break;case"?":p&&l(x),pe=nj(r,x,n);break;case"!":p&&l(x),pe=ij(r,x,n,t);break;default:p&&l(x);var oe=new FC,V=y[y.length-1].currentNSMap,pe=ej(r,x,oe,V,s,t),de=oe.length;if(!oe.closed&&rj(r,pe,oe.tagName,S)&&(oe.closed=!0,i.nbsp||t.warning("unclosed xml attribute")),p&&de){for(var Se=ub(p,{}),Ae=0;Ae<de;Ae++){var ke=oe[Ae];l(ke.offset),ke.locator=ub(p,{})}n.locator=Se,lb(oe,n,V)&&y.push(oe),n.locator=p}else lb(oe,n,V)&&y.push(oe);xl.isHTML(oe.uri)&&!oe.closed?pe=tj(r,pe,oe.tagName,s,n):pe++}}catch(De){if(De instanceof ko)throw De;t.error("element parse error: "+De),pe=-1}pe>C?C=pe:o(Math.max(x,C)+1)}}function ub(r,e){return e.lineNumber=r.lineNumber,e.columnNumber=r.columnNumber,e}function ej(r,e,i,n,t,a){function s(p,y,S){i.attributeNames.hasOwnProperty(p)&&a.fatalError("Attribute "+p+" redefined"),i.addValue(p,y,S)}for(var o,l,c=++e,d=$u;;){var h=r.charAt(c);switch(h){case"=":if(d===ga)o=r.slice(e,c),d=Gu;else if(d===no)d=Gu;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(d===Gu||d===ga)if(d===ga&&(a.warning('attribute value must after "="'),o=r.slice(e,c)),e=c+1,c=r.indexOf(h,e),c>0)l=r.slice(e,c).replace(/&#?\w+;/g,t),s(o,l,e-1),d=so;else throw new Error("attribute value no end '"+h+"' match");else if(d==ao)l=r.slice(e,c).replace(/&#?\w+;/g,t),s(o,l,e),a.warning('attribute "'+o+'" missed start quot('+h+")!!"),e=c+1,d=so;else throw new Error('attribute value must after "="');break;case"/":switch(d){case $u:i.setTagName(r.slice(e,c));case so:case zu:case of:d=of,i.closed=!0;case ao:case ga:case no:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),d==$u&&i.setTagName(r.slice(e,c)),c;case">":switch(d){case $u:i.setTagName(r.slice(e,c));case so:case zu:case of:break;case ao:case ga:l=r.slice(e,c),l.slice(-1)==="/"&&(i.closed=!0,l=l.slice(0,-1));case no:d===no&&(l=o),d==ao?(a.warning('attribute "'+l+'" missed quot(")!'),s(o,l.replace(/&#?\w+;/g,t),e)):((!xl.isHTML(n[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&a.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),s(l,l,e));break;case Gu:throw new Error("attribute value missed!!")}return c;case"\x80":h=" ";default:if(h<=" ")switch(d){case $u:i.setTagName(r.slice(e,c)),d=zu;break;case ga:o=r.slice(e,c),d=no;break;case ao:var l=r.slice(e,c).replace(/&#?\w+;/g,t);a.warning('attribute "'+l+'" missed quot(")!!'),s(o,l,e);case so:d=zu;break}else switch(d){case no:i.tagName,(!xl.isHTML(n[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&a.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),s(o,o,e),e=c,d=ga;break;case so:a.warning('attribute space is required"'+o+'"!!');case zu:d=ga,e=c;break;case Gu:d=ao,e=c;break;case of:throw new Error("elements closed character '/' and '>' must be connected to")}}c++}}function lb(r,e,i){for(var n=r.tagName,t=null,h=r.length;h--;){var a=r[h],s=a.qName,o=a.value,p=s.indexOf(":");if(p>0)var l=a.prefix=s.slice(0,p),c=s.slice(p+1),d=l==="xmlns"&&c;else c=s,l=null,d=s==="xmlns"&&"";a.localName=c,d!==!1&&(t==null&&(t={},NC(i,i={})),i[d]=t[d]=o,a.uri=xl.XMLNS,e.startPrefixMapping(d,o))}for(var h=r.length;h--;){a=r[h];var l=a.prefix;l&&(l==="xml"&&(a.uri=xl.XML),l!=="xmlns"&&(a.uri=i[l||""]))}var p=n.indexOf(":");p>0?(l=r.prefix=n.slice(0,p),c=r.localName=n.slice(p+1)):(l=null,c=r.localName=n);var y=r.uri=i[l||""];if(e.startElement(y,c,n,r),r.closed){if(e.endElement(y,c,n),t)for(l in t)e.endPrefixMapping(l)}else return r.currentNSMap=i,r.localNSMap=t,!0}function tj(r,e,i,n,t){if(/^(?:script|textarea)$/i.test(i)){var a=r.indexOf("</"+i+">",e),s=r.substring(e+1,a);if(/[&<]/.test(s))return/^script$/i.test(i)?(t.characters(s,0,s.length),a):(s=s.replace(/&#?\w+;/g,n),t.characters(s,0,s.length),a)}return e+1}function rj(r,e,i,n){var t=n[i];return t==null&&(t=r.lastIndexOf("</"+i+">"),t<e&&(t=r.lastIndexOf("</"+i)),n[i]=t),t<e}function NC(r,e){for(var i in r)e[i]=r[i]}function ij(r,e,i,n){var t=r.charAt(e+2);switch(t){case"-":if(r.charAt(e+3)==="-"){var a=r.indexOf("-->",e+4);return a>e?(i.comment(r,e+4,a-e-4),a+3):(n.error("Unclosed comment"),-1)}else return-1;default:if(r.substr(e+3,6)=="CDATA["){var a=r.indexOf("]]>",e+9);return i.startCDATA(),i.characters(r,e+9,a-e-9),i.endCDATA(),a+3}var s=aj(r,e),o=s.length;if(o>1&&/!doctype/i.test(s[0][0])){var l=s[1][0],c=!1,d=!1;o>3&&(/^public$/i.test(s[2][0])?(c=s[3][0],d=o>4&&s[4][0]):/^system$/i.test(s[2][0])&&(d=s[3][0]));var h=s[o-1];return i.startDTD(l,c,d),i.endDTD(),h.index+h[0].length}}return-1}function nj(r,e,i){var n=r.indexOf("?>",e);if(n){var t=r.substring(e,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return t?(t[0].length,i.processingInstruction(t[1],t[2]),n+2):-1}return-1}function FC(){this.attributeNames={}}FC.prototype={setTagName:function(r){if(!ob.test(r))throw new Error("invalid tagName:"+r);this.tagName=r},addValue:function(r,e,i){if(!ob.test(r))throw new Error("invalid attribute:"+r);this.attributeNames[r]=this.length,this[this.length++]={qName:r,value:e,offset:i}},length:0,getLocalName:function(r){return this[r].localName},getLocator:function(r){return this[r].locator},getQName:function(r){return this[r].qName},getURI:function(r){return this[r].uri},getValue:function(r){return this[r].value}};function aj(r,e){var i,n=[],t=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(t.lastIndex=e,t.exec(r);i=t.exec(r);)if(n.push(i),i[1])return n}Kv.XMLReader=MC;Kv.ParseError=ko;var sj=Ps,Yv=Oa,cb=LC,UC=Kv,oj=Yv.DOMImplementation,fb=sj.NAMESPACE,uj=UC.ParseError,lj=UC.XMLReader;function BC(r){this.options=r||{locator:{}}}BC.prototype.parseFromString=function(r,e){var i=this.options,n=new lj,t=i.domBuilder||new Fl,a=i.errorHandler,s=i.locator,o=i.xmlns||{},l=/\/x?html?$/.test(e),c=l?cb.HTML_ENTITIES:cb.XML_ENTITIES;return s&&t.setDocumentLocator(s),n.errorHandler=cj(a,t,s),n.domBuilder=i.domBuilder||t,l&&(o[""]=fb.HTML),o.xml=o.xml||fb.XML,r&&typeof r=="string"?n.parse(r,o,c):n.errorHandler.error("invalid doc source"),t.doc};function cj(r,e,i){if(!r){if(e instanceof Fl)return e;r=e}var n={},t=r instanceof Function;i=i||{};function a(s){var o=r[s];!o&&t&&(o=r.length==2?function(l){r(s,l)}:r),n[s]=o&&function(l){o("[xmldom "+s+"]	"+l+mg(i))}||function(){}}return a("warning"),a("error"),a("fatalError"),n}function Fl(){this.cdata=!1}function oo(r,e){e.lineNumber=r.lineNumber,e.columnNumber=r.columnNumber}Fl.prototype={startDocument:function(){this.doc=new oj().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(r,e,i,n){var t=this.doc,a=t.createElementNS(r,i||e),s=n.length;uf(this,a),this.currentElement=a,this.locator&&oo(this.locator,a);for(var o=0;o<s;o++){var r=n.getURI(o),l=n.getValue(o),i=n.getQName(o),c=t.createAttributeNS(r,i);this.locator&&oo(n.getLocator(o),c),c.value=c.nodeValue=l,a.setAttributeNode(c)}},endElement:function(r,e,i){var n=this.currentElement;n.tagName,this.currentElement=n.parentNode},startPrefixMapping:function(r,e){},endPrefixMapping:function(r){},processingInstruction:function(r,e){var i=this.doc.createProcessingInstruction(r,e);this.locator&&oo(this.locator,i),uf(this,i)},ignorableWhitespace:function(r,e,i){},characters:function(r,e,i){if(r=db.apply(this,arguments),r){if(this.cdata)var n=this.doc.createCDATASection(r);else var n=this.doc.createTextNode(r);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(r)&&this.doc.appendChild(n),this.locator&&oo(this.locator,n)}},skippedEntity:function(r){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(r){(this.locator=r)&&(r.lineNumber=0)},comment:function(r,e,i){r=db.apply(this,arguments);var n=this.doc.createComment(r);this.locator&&oo(this.locator,n),uf(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(r,e,i){var n=this.doc.implementation;if(n&&n.createDocumentType){var t=n.createDocumentType(r,e,i);this.locator&&oo(this.locator,t),uf(this,t),this.doc.doctype=t}},warning:function(r){console.warn("[xmldom warning]	"+r,mg(this.locator))},error:function(r){console.error("[xmldom error]	"+r,mg(this.locator))},fatalError:function(r){throw new uj(r,this.locator)}};function mg(r){if(r)return`
@`+(r.systemId||"")+"#[line:"+r.lineNumber+",col:"+r.columnNumber+"]"}function db(r,e,i){return typeof r=="string"?r.substr(e,i):r.length>=e+i||e?new java.lang.String(r,e,i)+"":r}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(r){Fl.prototype[r]=function(){return null}});function uf(r,e){r.currentElement?r.currentElement.appendChild(e):r.doc.appendChild(e)}Nl.__DOMHandler=Fl;Nl.DOMParser=BC;Nl.DOMImplementation=Yv.DOMImplementation;Nl.XMLSerializer=Yv.XMLSerializer;var fj=Nl.DOMParser;/*! @name mpd-parser @version 0.21.1 @license Apache-2.0 */var hb=function(e){return!!e&&typeof e=="object"},Vr=function r(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return i.reduce(function(t,a){return typeof a!="object"||Object.keys(a).forEach(function(s){Array.isArray(t[s])&&Array.isArray(a[s])?t[s]=t[s].concat(a[s]):hb(t[s])&&hb(a[s])?t[s]=r(t[s],a[s]):t[s]=a[s]}),t},{})},jC=function(e){return Object.keys(e).map(function(i){return e[i]})},dj=function(e,i){for(var n=[],t=e;t<i;t++)n.push(t);return n},Jd=function(e){return e.reduce(function(i,n){return i.concat(n)},[])},VC=function(e){if(!e.length)return[];for(var i=[],n=0;n<e.length;n++)i.push(e[n]);return i},hj=function(e,i){return e.reduce(function(n,t,a){return t[i]&&n.push(a),n},[])},gg=function(e,i){for(var n=0;n<e.length;n++)if(i(e[n]))return n;return-1},pj=function(e,i){return jC(e.reduce(function(n,t){return t.forEach(function(a){n[i(a)]=a}),n},{}))},Lo={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},El=function(e){var i=e.baseUrl,n=i===void 0?"":i,t=e.source,a=t===void 0?"":t,s=e.range,o=s===void 0?"":s,l=e.indexRange,c=l===void 0?"":l,d={uri:a,resolvedUri:Yd(n||"",a)};if(o||c){var h=o||c,p=h.split("-"),y=q.BigInt?q.BigInt(p[0]):parseInt(p[0],10),S=q.BigInt?q.BigInt(p[1]):parseInt(p[1],10);y<Number.MAX_SAFE_INTEGER&&typeof y=="bigint"&&(y=Number(y)),S<Number.MAX_SAFE_INTEGER&&typeof S=="bigint"&&(S=Number(S));var C;typeof S=="bigint"||typeof y=="bigint"?C=q.BigInt(S)-q.BigInt(y)+q.BigInt(1):C=S-y+1,typeof C=="bigint"&&C<Number.MAX_SAFE_INTEGER&&(C=Number(C)),d.byterange={length:C,offset:y}}return d},mj=function(e){var i;return typeof e.offset=="bigint"||typeof e.length=="bigint"?i=q.BigInt(e.offset)+q.BigInt(e.length)-q.BigInt(1):i=e.offset+e.length-1,e.offset+"-"+i},pb=function(e){return e&&typeof e!="number"&&(e=parseInt(e,10)),isNaN(e)?null:e},gj={static:function(e){var i=e.duration,n=e.timescale,t=n===void 0?1:n,a=e.sourceDuration,s=e.periodDuration,o=pb(e.endNumber),l=i/t;return typeof o=="number"?{start:0,end:o}:typeof s=="number"?{start:0,end:s/l}:{start:0,end:a/l}},dynamic:function(e){var i=e.NOW,n=e.clientOffset,t=e.availabilityStartTime,a=e.timescale,s=a===void 0?1:a,o=e.duration,l=e.periodStart,c=l===void 0?0:l,d=e.minimumUpdatePeriod,h=d===void 0?0:d,p=e.timeShiftBufferDepth,y=p===void 0?1/0:p,S=pb(e.endNumber),C=(i+n)/1e3,x=t+c,I=C+h,H=I-x,Z=Math.ceil(H*s/o),W=Math.floor((C-x-y)*s/o),j=Math.floor((C-x)*s/o);return{start:Math.max(0,W),end:typeof S=="number"?S:Math.min(Z,j)}}},vj=function(e){return function(i){var n=e.duration,t=e.timescale,a=t===void 0?1:t,s=e.periodStart,o=e.startNumber,l=o===void 0?1:o;return{number:l+i,duration:n/a,timeline:s,time:i*n}}},Xv=function(e){var i=e.type,n=e.duration,t=e.timescale,a=t===void 0?1:t,s=e.periodDuration,o=e.sourceDuration,l=gj[i](e),c=l.start,d=l.end,h=dj(c,d).map(vj(e));if(i==="static"){var p=h.length-1,y=typeof s=="number"?s:o;h[p].duration=y-n/a*p}return h},HC=function(e){var i=e.baseUrl,n=e.initialization,t=n===void 0?{}:n,a=e.sourceDuration,s=e.indexRange,o=s===void 0?"":s,l=e.periodStart,c=e.presentationTime,d=e.number,h=d===void 0?0:d,p=e.duration;if(!i)throw new Error(Lo.NO_BASE_URL);var y=El({baseUrl:i,source:t.sourceURL,range:t.range}),S=El({baseUrl:i,source:i,indexRange:o});if(S.map=y,p){var C=Xv(e);C.length&&(S.duration=C[0].duration,S.timeline=C[0].timeline)}else a&&(S.duration=a,S.timeline=l);return S.presentationTime=c||l,S.number=h,[S]},Qv=function(e,i,n){var t=e.sidx.map?e.sidx.map:null,a=e.sidx.duration,s=e.timeline||0,o=e.sidx.byterange,l=o.offset+o.length,c=i.timescale,d=i.references.filter(function(oe){return oe.referenceType!==1}),h=[],p=e.endList?"static":"dynamic",y=e.sidx.timeline,S=y,C=e.mediaSequence||0,x;typeof i.firstOffset=="bigint"?x=q.BigInt(l)+i.firstOffset:x=l+i.firstOffset;for(var I=0;I<d.length;I++){var H=i.references[I],Z=H.referencedSize,W=H.subsegmentDuration,j=void 0;typeof x=="bigint"?j=x+q.BigInt(Z)-q.BigInt(1):j=x+Z-1;var le=x+"-"+j,fe={baseUrl:n,timescale:c,timeline:s,periodStart:y,presentationTime:S,number:C,duration:W,sourceDuration:a,indexRange:le,type:p},Y=HC(fe)[0];t&&(Y.map=t),h.push(Y),typeof x=="bigint"?x+=q.BigInt(Z):x+=Z,S+=W/c,C++}return e.segments=h,e},yj=["AUDIO","SUBTITLES"],_j=1/60,WC=function(e){return pj(e,function(i){var n=i.timeline;return n}).sort(function(i,n){return i.timeline>n.timeline?1:-1})},Tj=function(e,i){for(var n=0;n<e.length;n++)if(e[n].attributes.NAME===i)return e[n];return null},mb=function(e){var i=[];return V2(e,yj,function(n,t,a,s){i=i.concat(n.playlists||[])}),i},gb=function(e){var i=e.playlist,n=e.mediaSequence;i.mediaSequence=n,i.segments.forEach(function(t,a){t.number=i.mediaSequence+a})},bj=function(e){var i=e.oldPlaylists,n=e.newPlaylists,t=e.timelineStarts;n.forEach(function(a){a.discontinuitySequence=gg(t,function(d){var h=d.timeline;return h===a.timeline});var s=Tj(i,a.attributes.NAME);if(!!s&&!a.sidx){var o=a.segments[0],l=gg(s.segments,function(d){return Math.abs(d.presentationTime-o.presentationTime)<_j});if(l===-1){gb({playlist:a,mediaSequence:s.mediaSequence+s.segments.length}),a.segments[0].discontinuity=!0,a.discontinuityStarts.unshift(0),(!s.segments.length&&a.timeline>s.timeline||s.segments.length&&a.timeline>s.segments[s.segments.length-1].timeline)&&a.discontinuitySequence--;return}var c=s.segments[l];c.discontinuity&&!o.discontinuity&&(o.discontinuity=!0,a.discontinuityStarts.unshift(0),a.discontinuitySequence--),gb({playlist:a,mediaSequence:s.segments[l].number})}})},Sj=function(e){var i=e.oldManifest,n=e.newManifest,t=i.playlists.concat(mb(i)),a=n.playlists.concat(mb(n));return n.timelineStarts=WC([i.timelineStarts,n.timelineStarts]),bj({oldPlaylists:t,newPlaylists:a,timelineStarts:n.timelineStarts}),n},Zd=function(e){return e&&e.uri+"-"+mj(e.byterange)},hm=function(e){var i=jC(e.reduce(function(n,t){var a=t.attributes.id+(t.attributes.lang||"");if(!n[a])n[a]=t,n[a].attributes.timelineStarts=[];else{if(t.segments){var s;t.segments[0]&&(t.segments[0].discontinuity=!0),(s=n[a].segments).push.apply(s,t.segments)}t.attributes.contentProtection&&(n[a].attributes.contentProtection=t.attributes.contentProtection)}return n[a].attributes.timelineStarts.push({start:t.attributes.periodStart,timeline:t.attributes.periodStart}),n},{}));return i.map(function(n){return n.discontinuityStarts=hj(n.segments||[],"discontinuity"),n})},Jv=function(e,i){var n=Zd(e.sidx),t=n&&i[n]&&i[n].sidx;return t&&Qv(e,t,e.sidx.resolvedUri),e},xj=function(e,i){if(i===void 0&&(i={}),!Object.keys(i).length)return e;for(var n in e)e[n]=Jv(e[n],i);return e},Ej=function(e,i){var n,t=e.attributes,a=e.segments,s=e.sidx,o=e.mediaSequence,l=e.discontinuitySequence,c=e.discontinuityStarts,d={attributes:(n={NAME:t.id,BANDWIDTH:t.bandwidth,CODECS:t.codecs},n["PROGRAM-ID"]=1,n),uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:"",targetDuration:t.duration,discontinuitySequence:l,discontinuityStarts:c,timelineStarts:t.timelineStarts,mediaSequence:o,segments:a};return t.contentProtection&&(d.contentProtection=t.contentProtection),s&&(d.sidx=s),i&&(d.attributes.AUDIO="audio",d.attributes.SUBTITLES="subs"),d},Cj=function(e){var i,n=e.attributes,t=e.segments,a=e.mediaSequence,s=e.discontinuityStarts,o=e.discontinuitySequence;typeof t>"u"&&(t=[{uri:n.baseUrl,timeline:n.periodStart,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);var l=(i={NAME:n.id,BANDWIDTH:n.bandwidth},i["PROGRAM-ID"]=1,i);return n.codecs&&(l.CODECS=n.codecs),{attributes:l,uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,timelineStarts:n.timelineStarts,discontinuityStarts:s,discontinuitySequence:o,mediaSequence:a,segments:t}},Rj=function(e,i,n){i===void 0&&(i={}),n===void 0&&(n=!1);var t,a=e.reduce(function(o,l){var c=l.attributes.role&&l.attributes.role.value||"",d=l.attributes.lang||"",h=l.attributes.label||"main";if(d&&!l.attributes.label){var p=c?" ("+c+")":"";h=""+l.attributes.lang+p}o[h]||(o[h]={language:d,autoselect:!0,default:c==="main",playlists:[],uri:""});var y=Jv(Ej(l,n),i);return o[h].playlists.push(y),typeof t>"u"&&c==="main"&&(t=l,t.default=!0),o},{});if(!t){var s=Object.keys(a)[0];a[s].default=!0}return a},wj=function(e,i){return i===void 0&&(i={}),e.reduce(function(n,t){var a=t.attributes.lang||"text";return n[a]||(n[a]={language:a,default:!1,autoselect:!1,playlists:[],uri:""}),n[a].playlists.push(Jv(Cj(t),i)),n},{})},Aj=function(e){return e.reduce(function(i,n){return n&&n.forEach(function(t){var a=t.channel,s=t.language;i[s]={autoselect:!1,default:!1,instreamId:a,language:s},t.hasOwnProperty("aspectRatio")&&(i[s].aspectRatio=t.aspectRatio),t.hasOwnProperty("easyReader")&&(i[s].easyReader=t.easyReader),t.hasOwnProperty("3D")&&(i[s]["3D"]=t["3D"])}),i},{})},Pj=function(e){var i,n=e.attributes,t=e.segments,a=e.sidx,s=e.discontinuityStarts,o={attributes:(i={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},i["PROGRAM-ID"]=1,i),uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:"",targetDuration:n.duration,discontinuityStarts:s,timelineStarts:n.timelineStarts,segments:t};return n.contentProtection&&(o.contentProtection=n.contentProtection),a&&(o.sidx=a),o},Oj=function(e){var i=e.attributes;return i.mimeType==="video/mp4"||i.mimeType==="video/webm"||i.contentType==="video"},Ij=function(e){var i=e.attributes;return i.mimeType==="audio/mp4"||i.mimeType==="audio/webm"||i.contentType==="audio"},Dj=function(e){var i=e.attributes;return i.mimeType==="text/vtt"||i.contentType==="text"},kj=function(e,i){e.forEach(function(n){n.mediaSequence=0,n.discontinuitySequence=gg(i,function(t){var a=t.timeline;return a===n.timeline}),n.segments&&n.segments.forEach(function(t,a){t.number=a})})},vb=function(e){return e?Object.keys(e).reduce(function(i,n){var t=e[n];return i.concat(t.playlists)},[]):[]},Lj=function(e){var i,n=e.dashPlaylists,t=e.locations,a=e.sidxMapping,s=a===void 0?{}:a,o=e.previousManifest;if(!n.length)return{};var l=n[0].attributes,c=l.sourceDuration,d=l.type,h=l.suggestedPresentationDelay,p=l.minimumUpdatePeriod,y=hm(n.filter(Oj)).map(Pj),S=hm(n.filter(Ij)),C=hm(n.filter(Dj)),x=n.map(function(fe){return fe.attributes.captionServices}).filter(Boolean),I={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(i={AUDIO:{},VIDEO:{}},i["CLOSED-CAPTIONS"]={},i.SUBTITLES={},i),uri:"",duration:c,playlists:xj(y,s)};p>=0&&(I.minimumUpdatePeriod=p*1e3),t&&(I.locations=t),d==="dynamic"&&(I.suggestedPresentationDelay=h);var H=I.playlists.length===0,Z=S.length?Rj(S,s,H):null,W=C.length?wj(C,s):null,j=y.concat(vb(Z),vb(W)),le=j.map(function(fe){var Y=fe.timelineStarts;return Y});return I.timelineStarts=WC(le),kj(j,I.timelineStarts),Z&&(I.mediaGroups.AUDIO.audio=Z),W&&(I.mediaGroups.SUBTITLES.subs=W),x.length&&(I.mediaGroups["CLOSED-CAPTIONS"].cc=Aj(x)),o?Sj({oldManifest:o,newManifest:I}):I},Mj=function(e,i,n){var t=e.NOW,a=e.clientOffset,s=e.availabilityStartTime,o=e.timescale,l=o===void 0?1:o,c=e.periodStart,d=c===void 0?0:c,h=e.minimumUpdatePeriod,p=h===void 0?0:h,y=(t+a)/1e3,S=s+d,C=y+p,x=C-S;return Math.ceil((x*l-i)/n)},$C=function(e,i){for(var n=e.type,t=e.minimumUpdatePeriod,a=t===void 0?0:t,s=e.media,o=s===void 0?"":s,l=e.sourceDuration,c=e.timescale,d=c===void 0?1:c,h=e.startNumber,p=h===void 0?1:h,y=e.periodStart,S=[],C=-1,x=0;x<i.length;x++){var I=i[x],H=I.d,Z=I.r||0,W=I.t||0;C<0&&(C=W),W&&W>C&&(C=W);var j=void 0;if(Z<0){var le=x+1;le===i.length?n==="dynamic"&&a>0&&o.indexOf("$Number$")>0?j=Mj(e,C,H):j=(l*d-C)/H:j=(i[le].t-C)/H}else j=Z+1;for(var fe=p+S.length+j,Y=p+S.length;Y<fe;)S.push({number:Y,duration:H/d,time:C,timeline:y}),C+=H,Y++}return S},Nj=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Fj=function(e){return function(i,n,t,a){if(i==="$$")return"$";if(typeof e[n]>"u")return i;var s=""+e[n];return n==="RepresentationID"||(t?a=parseInt(a,10):a=1,s.length>=a)?s:""+new Array(a-s.length+1).join("0")+s}},yb=function(e,i){return e.replace(Nj,Fj(i))},Uj=function(e,i){return!e.duration&&!i?[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}]:e.duration?Xv(e):$C(e,i)},Bj=function(e,i){var n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},t=e.initialization,a=t===void 0?{sourceURL:"",range:""}:t,s=El({baseUrl:e.baseUrl,source:yb(a.sourceURL,n),range:a.range}),o=Uj(e,i);return o.map(function(l){n.Number=l.number,n.Time=l.time;var c=yb(e.media||"",n),d=e.timescale||1,h=e.presentationTimeOffset||0,p=e.periodStart+(l.time-h)/d,y={uri:c,timeline:l.timeline,duration:l.duration,resolvedUri:Yd(e.baseUrl||"",c),map:s,number:l.number,presentationTime:p};return y})},jj=function(e,i){var n=e.baseUrl,t=e.initialization,a=t===void 0?{}:t,s=El({baseUrl:n,source:a.sourceURL,range:a.range}),o=El({baseUrl:n,source:i.media,range:i.mediaRange});return o.map=s,o},Vj=function(e,i){var n=e.duration,t=e.segmentUrls,a=t===void 0?[]:t,s=e.periodStart;if(!n&&!i||n&&i)throw new Error(Lo.SEGMENT_TIME_UNSPECIFIED);var o=a.map(function(d){return jj(e,d)}),l;n&&(l=Xv(e)),i&&(l=$C(e,i));var c=l.map(function(d,h){if(o[h]){var p=o[h],y=e.timescale||1,S=e.presentationTimeOffset||0;return p.timeline=d.timeline,p.duration=d.duration,p.number=d.number,p.presentationTime=s+(d.time-S)/y,p}}).filter(function(d){return d});return c},Hj=function(e){var i=e.attributes,n=e.segmentInfo,t,a;n.template?(a=Bj,t=Vr(i,n.template)):n.base?(a=HC,t=Vr(i,n.base)):n.list&&(a=Vj,t=Vr(i,n.list));var s={attributes:i};if(!a)return s;var o=a(t,n.segmentTimeline);if(t.duration){var l=t,c=l.duration,d=l.timescale,h=d===void 0?1:d;t.duration=c/h}else o.length?t.duration=o.reduce(function(p,y){return Math.max(p,Math.ceil(y.duration))},0):t.duration=0;return s.attributes=t,s.segments=o,n.base&&t.indexRange&&(s.sidx=o[0],s.segments=[]),s},Wj=function(e){return e.map(Hj)},Jt=function(e,i){return VC(e.childNodes).filter(function(n){var t=n.tagName;return t===i})},Zv=function(e){return e.textContent.trim()},uo=function(e){var i=31536e3,n=30*24*60*60,t=24*60*60,a=60*60,s=60,o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,l=o.exec(e);if(!l)return 0;var c=l.slice(1),d=c[0],h=c[1],p=c[2],y=c[3],S=c[4],C=c[5];return parseFloat(d||0)*i+parseFloat(h||0)*n+parseFloat(p||0)*t+parseFloat(y||0)*a+parseFloat(S||0)*s+parseFloat(C||0)},$j=function(e){var i=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;return i.test(e)&&(e+="Z"),Date.parse(e)},_b={mediaPresentationDuration:function(e){return uo(e)},availabilityStartTime:function(e){return $j(e)/1e3},minimumUpdatePeriod:function(e){return uo(e)},suggestedPresentationDelay:function(e){return uo(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return uo(e)},start:function(e){return uo(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var i=parseInt(e,10);return isNaN(i)?uo(e):i},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},wr=function(e){return e&&e.attributes?VC(e.attributes).reduce(function(i,n){var t=_b[n.name]||_b.DEFAULT;return i[n.name]=t(n.value),i},{}):{}},Gj={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},eh=function(e,i){return i.length?Jd(e.map(function(n){return i.map(function(t){return Yd(n,Zv(t))})})):e},ey=function(e){var i=Jt(e,"SegmentTemplate")[0],n=Jt(e,"SegmentList")[0],t=n&&Jt(n,"SegmentURL").map(function(p){return Vr({tag:"SegmentURL"},wr(p))}),a=Jt(e,"SegmentBase")[0],s=n||i,o=s&&Jt(s,"SegmentTimeline")[0],l=n||a||i,c=l&&Jt(l,"Initialization")[0],d=i&&wr(i);d&&c?d.initialization=c&&wr(c):d&&d.initialization&&(d.initialization={sourceURL:d.initialization});var h={template:d,segmentTimeline:o&&Jt(o,"S").map(function(p){return wr(p)}),list:n&&Vr(wr(n),{segmentUrls:t,initialization:wr(c)}),base:a&&Vr(wr(a),{initialization:wr(c)})};return Object.keys(h).forEach(function(p){h[p]||delete h[p]}),h},zj=function(e,i,n){return function(t){var a=Jt(t,"BaseURL"),s=eh(i,a),o=Vr(e,wr(t)),l=ey(t);return s.map(function(c){return{segmentInfo:Vr(n,l),attributes:Vr(o,{baseUrl:c})}})}},qj=function(e){return e.reduce(function(i,n){var t=wr(n);t.schemeIdUri&&(t.schemeIdUri=t.schemeIdUri.toLowerCase());var a=Gj[t.schemeIdUri];if(a){i[a]={attributes:t};var s=Jt(n,"cenc:pssh")[0];if(s){var o=Zv(s);i[a].pssh=o&&uC(o)}}return i},{})},Kj=function(e){if(e.schemeIdUri==="urn:scte:dash:cc:cea-608:2015"){var i=typeof e.value!="string"?[]:e.value.split(";");return i.map(function(t){var a,s;if(s=t,/^CC\d=/.test(t)){var o=t.split("=");a=o[0],s=o[1]}else/^CC\d$/.test(t)&&(a=t);return{channel:a,language:s}})}else if(e.schemeIdUri==="urn:scte:dash:cc:cea-708:2015"){var n=typeof e.value!="string"?[]:e.value.split(";");return n.map(function(t){var a={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){var s=t.split("="),o=s[0],l=s[1],c=l===void 0?"":l;a.channel=o,a.language=t,c.split(",").forEach(function(d){var h=d.split(":"),p=h[0],y=h[1];p==="lang"?a.language=y:p==="er"?a.easyReader=Number(y):p==="war"?a.aspectRatio=Number(y):p==="3D"&&(a["3D"]=Number(y))})}else a.language=t;return a.channel&&(a.channel="SERVICE"+a.channel),a})}},Yj=function(e,i,n){return function(t){var a=wr(t),s=eh(i,Jt(t,"BaseURL")),o=Jt(t,"Role")[0],l={role:wr(o)},c=Vr(e,a,l),d=Jt(t,"Accessibility")[0],h=Kj(wr(d));h&&(c=Vr(c,{captionServices:h}));var p=Jt(t,"Label")[0];if(p&&p.childNodes.length){var y=p.childNodes[0].nodeValue.trim();c=Vr(c,{label:y})}var S=qj(Jt(t,"ContentProtection"));Object.keys(S).length&&(c=Vr(c,{contentProtection:S}));var C=ey(t),x=Jt(t,"Representation"),I=Vr(n,C);return Jd(x.map(zj(c,s,I)))}},Xj=function(e,i){return function(n,t){var a=eh(i,Jt(n.node,"BaseURL")),s=Vr(e,{periodStart:n.attributes.start});typeof n.attributes.duration=="number"&&(s.periodDuration=n.attributes.duration);var o=Jt(n.node,"AdaptationSet"),l=ey(n.node);return Jd(o.map(Yj(s,a,l)))}},Qj=function(e){var i=e.attributes,n=e.priorPeriodAttributes,t=e.mpdType;return typeof i.start=="number"?i.start:n&&typeof n.start=="number"&&typeof n.duration=="number"?n.start+n.duration:!n&&t==="static"?0:null},Jj=function(e,i){i===void 0&&(i={});var n=i,t=n.manifestUri,a=t===void 0?"":t,s=n.NOW,o=s===void 0?Date.now():s,l=n.clientOffset,c=l===void 0?0:l,d=Jt(e,"Period");if(!d.length)throw new Error(Lo.INVALID_NUMBER_OF_PERIOD);var h=Jt(e,"Location"),p=wr(e),y=eh([a],Jt(e,"BaseURL"));p.type=p.type||"static",p.sourceDuration=p.mediaPresentationDuration||0,p.NOW=o,p.clientOffset=c,h.length&&(p.locations=h.map(Zv));var S=[];return d.forEach(function(C,x){var I=wr(C),H=S[x-1];I.start=Qj({attributes:I,priorPeriodAttributes:H?H.attributes:null,mpdType:p.type}),S.push({node:C,attributes:I})}),{locations:p.locations,representationInfo:Jd(S.map(Xj(p,y)))}},GC=function(e){if(e==="")throw new Error(Lo.DASH_EMPTY_MANIFEST);var i=new fj,n,t;try{n=i.parseFromString(e,"application/xml"),t=n&&n.documentElement.tagName==="MPD"?n.documentElement:null}catch{}if(!t||t&&t.getElementsByTagName("parsererror").length>0)throw new Error(Lo.DASH_INVALID_XML);return t},Zj=function(e){var i=Jt(e,"UTCTiming")[0];if(!i)return null;var n=wr(i);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Lo.UNSUPPORTED_UTC_TIMING_SCHEME)}return n},e3=function(e,i){i===void 0&&(i={});var n=Jj(GC(e),i),t=Wj(n.representationInfo);return Lj({dashPlaylists:t,locations:n.locations,sidxMapping:i.sidxMapping,previousManifest:i.previousManifest})},t3=function(e){return Zj(GC(e))},zC=Math.pow(2,32),r3=function(r){var e=new DataView(r.buffer,r.byteOffset,r.byteLength),i;return e.getBigUint64?(i=e.getBigUint64(0),i<Number.MAX_SAFE_INTEGER?Number(i):i):e.getUint32(0)*zC+e.getUint32(4)},i3={getUint64:r3,MAX_UINT32:zC},Tb=i3.getUint64,n3=function(r){var e=new DataView(r.buffer,r.byteOffset,r.byteLength),i={version:r[0],flags:new Uint8Array(r.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},n=12;i.version===0?(i.earliestPresentationTime=e.getUint32(n),i.firstOffset=e.getUint32(n+4),n+=8):(i.earliestPresentationTime=Tb(r.subarray(n)),i.firstOffset=Tb(r.subarray(n+8)),n+=16),n+=2;var t=e.getUint16(n);for(n+=2;t>0;n+=12,t--)i.references.push({referenceType:(r[n]&128)>>>7,referencedSize:e.getUint32(n)&2147483647,subsegmentDuration:e.getUint32(n+4),startsWithSap:!!(r[n+8]&128),sapType:(r[n+8]&112)>>>4,sapDeltaTime:e.getUint32(n+8)&268435455});return i},a3=n3,s3=Qe([73,68,51]),o3=function(e,i){i===void 0&&(i=0),e=Qe(e);var n=e[i+5],t=e[i+6]<<21|e[i+7]<<14|e[i+8]<<7|e[i+9],a=(n&16)>>4;return a?t+20:t+10},tl=function r(e,i){return i===void 0&&(i=0),e=Qe(e),e.length-i<10||!jt(e,s3,{offset:i})?i:(i+=o3(e,i),r(e,i))},bb=function(e){return typeof e=="string"?hC(e):e},u3=function(e){return Array.isArray(e)?e.map(function(i){return bb(i)}):[bb(e)]},l3=function r(e,i,n){n===void 0&&(n=!1),i=u3(i),e=Qe(e);var t=[];if(!i.length)return t;for(var a=0;a<e.length;){var s=(e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3])>>>0,o=e.subarray(a+4,a+8);if(s===0)break;var l=a+s;if(l>e.length){if(n)break;l=e.length}var c=e.subarray(a+8,l);jt(o,i[0])&&(i.length===1?t.push(c):t.push.apply(t,r(c,i.slice(1),n))),a=l}return t},lf={EBML:Qe([26,69,223,163]),DocType:Qe([66,130]),Segment:Qe([24,83,128,103]),SegmentInfo:Qe([21,73,169,102]),Tracks:Qe([22,84,174,107]),Track:Qe([174]),TrackNumber:Qe([215]),DefaultDuration:Qe([35,227,131]),TrackEntry:Qe([174]),TrackType:Qe([131]),FlagDefault:Qe([136]),CodecID:Qe([134]),CodecPrivate:Qe([99,162]),VideoTrack:Qe([224]),AudioTrack:Qe([225]),Cluster:Qe([31,67,182,117]),Timestamp:Qe([231]),TimestampScale:Qe([42,215,177]),BlockGroup:Qe([160]),BlockDuration:Qe([155]),Block:Qe([161]),SimpleBlock:Qe([163])},vg=[128,64,32,16,8,4,2,1],c3=function(e){for(var i=1,n=0;n<vg.length&&!(e&vg[n]);n++)i++;return i},Zf=function(e,i,n,t){n===void 0&&(n=!0),t===void 0&&(t=!1);var a=c3(e[i]),s=e.subarray(i,i+a);return n&&(s=Array.prototype.slice.call(e,i,i+a),s[0]^=vg[a-1]),{length:a,value:U2(s,{signed:t}),bytes:s}},Sb=function r(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(i){return r(i)}):typeof e=="number"?B2(e):e},f3=function(e){return Array.isArray(e)?e.map(function(i){return Sb(i)}):[Sb(e)]},d3=function r(e,i,n){if(n>=i.length)return i.length;var t=Zf(i,n,!1);if(jt(e.bytes,t.bytes))return n;var a=Zf(i,n+t.length);return r(e,i,n+a.length+a.value+t.length)},xb=function r(e,i){i=f3(i),e=Qe(e);var n=[];if(!i.length)return n;for(var t=0;t<e.length;){var a=Zf(e,t,!1),s=Zf(e,t+a.length),o=t+a.length+s.length;s.value===127&&(s.value=d3(a,e,o),s.value!==e.length&&(s.value-=o));var l=o+s.value>e.length?e.length:o+s.value,c=e.subarray(o,l);jt(i[0],a.bytes)&&(i.length===1?n.push(c):n=n.concat(r(c,i.slice(1))));var d=a.length+s.length+c.length;t+=d}return n},h3=Qe([0,0,0,1]),p3=Qe([0,0,1]),m3=Qe([0,0,3]),g3=function(e){for(var i=[],n=1;n<e.length-2;)jt(e.subarray(n,n+3),m3)&&(i.push(n+2),n++),n++;if(i.length===0)return e;var t=e.length-i.length,a=new Uint8Array(t),s=0;for(n=0;n<t;s++,n++)s===i[0]&&(s++,i.shift()),a[n]=e[s];return a},qC=function(e,i,n,t){t===void 0&&(t=1/0),e=Qe(e),n=[].concat(n);for(var a=0,s,o=0;a<e.length&&(o<t||s);){var l=void 0;if(jt(e.subarray(a),h3)?l=4:jt(e.subarray(a),p3)&&(l=3),!l){a++;continue}if(o++,s)return g3(e.subarray(s,a));var c=void 0;i==="h264"?c=e[a+l]&31:i==="h265"&&(c=e[a+l]>>1&63),n.indexOf(c)!==-1&&(s=a+l),a+=l+(i==="h264"?1:2)}return e.subarray(0,0)},v3=function(e,i,n){return qC(e,"h264",i,n)},y3=function(e,i,n){return qC(e,"h265",i,n)},Fr={webm:Qe([119,101,98,109]),matroska:Qe([109,97,116,114,111,115,107,97]),flac:Qe([102,76,97,67]),ogg:Qe([79,103,103,83]),ac3:Qe([11,119]),riff:Qe([82,73,70,70]),avi:Qe([65,86,73]),wav:Qe([87,65,86,69]),"3gp":Qe([102,116,121,112,51,103]),mp4:Qe([102,116,121,112]),fmp4:Qe([115,116,121,112]),mov:Qe([102,116,121,112,113,116]),moov:Qe([109,111,111,118]),moof:Qe([109,111,111,102])},Mo={aac:function(e){var i=tl(e);return jt(e,[255,16],{offset:i,mask:[255,22]})},mp3:function(e){var i=tl(e);return jt(e,[255,2],{offset:i,mask:[255,6]})},webm:function(e){var i=xb(e,[lf.EBML,lf.DocType])[0];return jt(i,Fr.webm)},mkv:function(e){var i=xb(e,[lf.EBML,lf.DocType])[0];return jt(i,Fr.matroska)},mp4:function(e){if(Mo["3gp"](e)||Mo.mov(e))return!1;if(jt(e,Fr.mp4,{offset:4})||jt(e,Fr.fmp4,{offset:4})||jt(e,Fr.moof,{offset:4})||jt(e,Fr.moov,{offset:4}))return!0},mov:function(e){return jt(e,Fr.mov,{offset:4})},"3gp":function(e){return jt(e,Fr["3gp"],{offset:4})},ac3:function(e){var i=tl(e);return jt(e,Fr.ac3,{offset:i})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var i=0;i+188<e.length&&i<188;){if(e[i]===71&&e[i+188]===71)return!0;i+=1}return!1},flac:function(e){var i=tl(e);return jt(e,Fr.flac,{offset:i})},ogg:function(e){return jt(e,Fr.ogg)},avi:function(e){return jt(e,Fr.riff)&&jt(e,Fr.avi,{offset:8})},wav:function(e){return jt(e,Fr.riff)&&jt(e,Fr.wav,{offset:8})},h264:function(e){return v3(e,7,3).length},h265:function(e){return y3(e,[32,33],3).length}},yg=Object.keys(Mo).filter(function(r){return r!=="ts"&&r!=="h264"&&r!=="h265"}).concat(["ts","h264","h265"]);yg.forEach(function(r){var e=Mo[r];Mo[r]=function(i){return e(Qe(i))}});var _3=Mo,ty=function(e){e=Qe(e);for(var i=0;i<yg.length;i++){var n=yg[i];if(_3[n](e))return n}return""},T3=function(e){return l3(e,["moof"]).length>0},ry=9e4,iy,ny,th,ay,KC,YC,XC;iy=function(r){return r*ry};ny=function(r,e){return r*e};th=function(r){return r/ry};ay=function(r,e){return r/e};KC=function(r,e){return iy(ay(r,e))};YC=function(r,e){return ny(th(r),e)};XC=function(r,e,i){return th(i?r:r-e)};var ed={ONE_SECOND_IN_TS:ry,secondsToVideoTs:iy,secondsToAudioTs:ny,videoTsToSeconds:th,audioTsToSeconds:ay,audioTsToVideoTs:KC,videoTsToAudioTs:YC,metadataTsToSeconds:XC};/**
 * @license
 * Video.js 7.20.3 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var QC="7.20.3",Vn={},wa=function(e,i){return Vn[e]=Vn[e]||[],i&&(Vn[e]=Vn[e].concat(i)),Vn[e]},b3=function(e,i){wa(e,i)},JC=function(e,i){var n=wa(e).indexOf(i);return n<=-1?!1:(Vn[e]=Vn[e].slice(),Vn[e].splice(n,1),!0)},S3=function(e,i){wa(e,[].concat(i).map(function(n){var t=function a(){return JC(e,a),n.apply(void 0,arguments)};return t}))},td={prefixed:!0},wf=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],Eb=wf[0],rl;for(var cf=0;cf<wf.length;cf++)if(wf[cf][1]in je){rl=wf[cf];break}if(rl){for(var ff=0;ff<rl.length;ff++)td[Eb[ff]]=rl[ff];td.prefixed=rl[0]!==Eb[0]}var ti=[],x3=function(e,i){return function(n,t,a){var s=i.levels[t],o=new RegExp("^("+s+")$");if(n!=="log"&&a.unshift(n.toUpperCase()+":"),a.unshift(e+":"),ti){ti.push([].concat(a));var l=ti.length-1e3;ti.splice(0,l>0?l:0)}if(!!q.console){var c=q.console[n];!c&&n==="debug"&&(c=q.console.info||q.console.log),!(!c||!s||!o.test(n))&&c[Array.isArray(a)?"apply":"call"](q.console,a)}}};function ZC(r){var e="info",i,n=function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];i("log",e,s)};return i=x3(r,n),n.createLogger=function(t){return ZC(r+": "+t)},n.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:e},n.level=function(t){if(typeof t=="string"){if(!n.levels.hasOwnProperty(t))throw new Error('"'+t+'" in not a valid log level');e=t}return e},n.history=function(){return ti?[].concat(ti):[]},n.history.filter=function(t){return(ti||[]).filter(function(a){return new RegExp(".*"+t+".*").test(a[0])})},n.history.clear=function(){ti&&(ti.length=0)},n.history.disable=function(){ti!==null&&(ti.length=0,ti=null)},n.history.enable=function(){ti===null&&(ti=[])},n.error=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return i("error",e,a)},n.warn=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return i("warn",e,a)},n.debug=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return i("debug",e,a)},n}var ft=ZC("VIDEOJS"),e1=ft.createLogger,E3=Object.prototype.toString,t1=function(e){return Xn(e)?Object.keys(e):[]};function bo(r,e){t1(r).forEach(function(i){return e(r[i],i)})}function C3(r,e,i){return i===void 0&&(i=0),t1(r).reduce(function(n,t){return e(n,r[t],t)},i)}function qt(r){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return Object.assign?Ai.apply(void 0,[r].concat(i)):(i.forEach(function(t){!t||bo(t,function(a,s){r[s]=a})}),r)}function Xn(r){return!!r&&typeof r=="object"}function Cl(r){return Xn(r)&&E3.call(r)==="[object Object]"&&r.constructor===Object}function Rl(r,e){if(!r||!e)return"";if(typeof q.getComputedStyle=="function"){var i;try{i=q.getComputedStyle(r)}catch{return""}return i?i.getPropertyValue(e)||i[e]:""}return""}var hr=q.navigator&&q.navigator.userAgent||"",Cb=/AppleWebKit\/([\d.]+)/i.exec(hr),R3=Cb?parseFloat(Cb.pop()):null,r1=/iPod/i.test(hr),w3=function(){var r=hr.match(/OS (\d+)_/i);return r&&r[1]?r[1]:null}(),Zn=/Android/i.test(hr),sy=function(){var r=hr.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!r)return null;var e=r[1]&&parseFloat(r[1]),i=r[2]&&parseFloat(r[2]);return e&&i?parseFloat(r[1]+"."+r[2]):e||null}(),i1=Zn&&sy<5&&R3<537,n1=/Firefox/i.test(hr),Ul=/Edg/i.test(hr),ea=!Ul&&(/Chrome/i.test(hr)||/CriOS/i.test(hr)),a1=function(){var r=hr.match(/(Chrome|CriOS)\/(\d+)/);return r&&r[2]?parseFloat(r[2]):null}(),Bl=function(){var r=/MSIE\s(\d+)\.\d/.exec(hr),e=r&&parseFloat(r[1]);return!e&&/Trident\/7.0/i.test(hr)&&/rv:11.0/.test(hr)&&(e=11),e}(),oy=/Safari/i.test(hr)&&!ea&&!Zn&&!Ul,s1=/Windows/i.test(hr),No=Boolean(Ko()&&("ontouchstart"in q||q.navigator.maxTouchPoints||q.DocumentTouch&&q.document instanceof q.DocumentTouch)),uy=/iPad/i.test(hr)||oy&&No&&!/iPhone/i.test(hr),ly=/iPhone/i.test(hr)&&!uy,zr=ly||uy||r1,rh=(oy||zr)&&!ea,A3=Object.freeze({__proto__:null,IS_IPOD:r1,IOS_VERSION:w3,IS_ANDROID:Zn,ANDROID_VERSION:sy,IS_NATIVE_ANDROID:i1,IS_FIREFOX:n1,IS_EDGE:Ul,IS_CHROME:ea,CHROME_VERSION:a1,IE_VERSION:Bl,IS_SAFARI:oy,IS_WINDOWS:s1,TOUCH_ENABLED:No,IS_IPAD:uy,IS_IPHONE:ly,IS_IOS:zr,IS_ANY_SAFARI:rh});function Rb(r){return typeof r=="string"&&Boolean(r.trim())}function o1(r){if(r.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function P3(r){return new RegExp("(^|\\s)"+r+"($|\\s)")}function Ko(){return je===q.document}function Yo(r){return Xn(r)&&r.nodeType===1}function u1(){try{return q.parent!==q.self}catch{return!0}}function l1(r){return function(e,i){if(!Rb(e))return je[r](null);Rb(i)&&(i=je.querySelector(i));var n=Yo(i)?i:je;return n[r]&&n[r](e)}}function _t(r,e,i,n){r===void 0&&(r="div"),e===void 0&&(e={}),i===void 0&&(i={});var t=je.createElement(r);return Object.getOwnPropertyNames(e).forEach(function(a){var s=e[a];a.indexOf("aria-")!==-1||a==="role"||a==="type"?(ft.warn(`Setting attributes in the second argument of createEl()
has been deprecated. Use the third argument instead.
`+("createEl(type, properties, attributes). Attempting to set "+a+" to "+s+".")),t.setAttribute(a,s)):a==="textContent"?Os(t,s):(t[a]!==s||a==="tabIndex")&&(t[a]=s)}),Object.getOwnPropertyNames(i).forEach(function(a){t.setAttribute(a,i[a])}),n&&fy(t,n),t}function Os(r,e){return typeof r.textContent>"u"?r.innerText=e:r.textContent=e,r}function _g(r,e){e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}function Ts(r,e){return o1(e),r.classList?r.classList.contains(e):P3(e).test(r.className)}function Gn(r,e){return r.classList?r.classList.add(e):Ts(r,e)||(r.className=(r.className+" "+e).trim()),r}function jl(r,e){return r?(r.classList?r.classList.remove(e):(o1(e),r.className=r.className.split(/\s+/).filter(function(i){return i!==e}).join(" ")),r):(ft.warn("removeClass was called with an element that doesn't exist"),null)}function c1(r,e,i){var n=Ts(r,e);if(typeof i=="function"&&(i=i(r,e)),typeof i!="boolean"&&(i=!n),i!==n)return i?Gn(r,e):jl(r,e),r}function f1(r,e){Object.getOwnPropertyNames(e).forEach(function(i){var n=e[i];n===null||typeof n>"u"||n===!1?r.removeAttribute(i):r.setAttribute(i,n===!0?"":n)})}function jn(r){var e={},i=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(r&&r.attributes&&r.attributes.length>0)for(var n=r.attributes,t=n.length-1;t>=0;t--){var a=n[t].name,s=n[t].value;(typeof r[a]=="boolean"||i.indexOf(","+a+",")!==-1)&&(s=s!==null),e[a]=s}return e}function d1(r,e){return r.getAttribute(e)}function Fo(r,e,i){r.setAttribute(e,i)}function ih(r,e){r.removeAttribute(e)}function h1(){je.body.focus(),je.onselectstart=function(){return!1}}function p1(){je.onselectstart=function(){return!0}}function Uo(r){if(r&&r.getBoundingClientRect&&r.parentNode){var e=r.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach(function(n){e[n]!==void 0&&(i[n]=e[n])}),i.height||(i.height=parseFloat(Rl(r,"height"))),i.width||(i.width=parseFloat(Rl(r,"width"))),i}}function wl(r){if(!r||r&&!r.offsetParent)return{left:0,top:0,width:0,height:0};for(var e=r.offsetWidth,i=r.offsetHeight,n=0,t=0;r.offsetParent&&r!==je[td.fullscreenElement];)n+=r.offsetLeft,t+=r.offsetTop,r=r.offsetParent;return{left:n,top:t,width:e,height:i}}function nh(r,e){var i={x:0,y:0};if(zr)for(var n=r;n&&n.nodeName.toLowerCase()!=="html";){var t=Rl(n,"transform");if(/^matrix/.test(t)){var a=t.slice(7,-1).split(/,\s/).map(Number);i.x+=a[4],i.y+=a[5]}else if(/^matrix3d/.test(t)){var s=t.slice(9,-1).split(/,\s/).map(Number);i.x+=s[12],i.y+=s[13]}n=n.parentNode}var o={},l=wl(e.target),c=wl(r),d=c.width,h=c.height,p=e.offsetY-(c.top-l.top),y=e.offsetX-(c.left-l.left);return e.changedTouches&&(y=e.changedTouches[0].pageX-c.left,p=e.changedTouches[0].pageY+c.top,zr&&(y-=i.x,p-=i.y)),o.y=1-Math.max(0,Math.min(1,p/h)),o.x=Math.max(0,Math.min(1,y/d)),o}function m1(r){return Xn(r)&&r.nodeType===3}function cy(r){for(;r.firstChild;)r.removeChild(r.firstChild);return r}function g1(r){return typeof r=="function"&&(r=r()),(Array.isArray(r)?r:[r]).map(function(e){if(typeof e=="function"&&(e=e()),Yo(e)||m1(e))return e;if(typeof e=="string"&&/\S/.test(e))return je.createTextNode(e)}).filter(function(e){return e})}function fy(r,e){return g1(e).forEach(function(i){return r.appendChild(i)}),r}function v1(r,e){return fy(cy(r),e)}function Al(r){return r.button===void 0&&r.buttons===void 0||r.button===0&&r.buttons===void 0||r.type==="mouseup"&&r.button===0&&r.buttons===0?!0:!(r.button!==0||r.buttons!==1)}var Aa=l1("querySelector"),y1=l1("querySelectorAll"),_1=Object.freeze({__proto__:null,isReal:Ko,isEl:Yo,isInFrame:u1,createEl:_t,textContent:Os,prependTo:_g,hasClass:Ts,addClass:Gn,removeClass:jl,toggleClass:c1,setAttributes:f1,getAttributes:jn,getAttribute:d1,setAttribute:Fo,removeAttribute:ih,blockTextSelection:h1,unblockTextSelection:p1,getBoundingClientRect:Uo,findPosition:wl,getPointerPosition:nh,isTextNode:m1,emptyEl:cy,normalizeContent:g1,appendContent:fy,insertContent:v1,isSingleLeftClick:Al,$:Aa,$$:y1}),T1=!1,Tg,O3=function(){if(Tg.options.autoSetup!==!1){var e=Array.prototype.slice.call(je.getElementsByTagName("video")),i=Array.prototype.slice.call(je.getElementsByTagName("audio")),n=Array.prototype.slice.call(je.getElementsByTagName("video-js")),t=e.concat(i,n);if(t&&t.length>0)for(var a=0,s=t.length;a<s;a++){var o=t[a];if(o&&o.getAttribute){if(o.player===void 0){var l=o.getAttribute("data-setup");l!==null&&Tg(o)}}else{bg(1);break}}else T1||bg(1)}};function bg(r,e){!Ko()||(e&&(Tg=e),q.setTimeout(O3,r))}function Sg(){T1=!0,q.removeEventListener("load",Sg)}Ko()&&(je.readyState==="complete"?Sg():q.addEventListener("load",Sg));var b1=function(e){var i=je.createElement("style");return i.className=e,i},S1=function(e,i){e.styleSheet?e.styleSheet.cssText=i:e.textContent=i},I3=3,D3=I3;function ta(){return D3++}var x1;q.WeakMap||(x1=function(){function r(){this.vdata="vdata"+Math.floor(q.performance&&q.performance.now()||Date.now()),this.data={}}var e=r.prototype;return e.set=function(n,t){var a=n[this.vdata]||ta();return n[this.vdata]||(n[this.vdata]=a),this.data[a]=t,this},e.get=function(n){var t=n[this.vdata];if(t)return this.data[t];ft("We have no data for this element",n)},e.has=function(n){var t=n[this.vdata];return t in this.data},e.delete=function(n){var t=n[this.vdata];t&&(delete this.data[t],delete n[this.vdata])},r}());var Hr=q.WeakMap?new WeakMap:new x1;function wb(r,e){if(!!Hr.has(r)){var i=Hr.get(r);i.handlers[e].length===0&&(delete i.handlers[e],r.removeEventListener?r.removeEventListener(e,i.dispatcher,!1):r.detachEvent&&r.detachEvent("on"+e,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),Object.getOwnPropertyNames(i).length===0&&Hr.delete(r)}}function dy(r,e,i,n){i.forEach(function(t){r(e,t,n)})}function ah(r){if(r.fixed_)return r;function e(){return!0}function i(){return!1}if(!r||!r.isPropagationStopped||!r.isImmediatePropagationStopped){var n=r||q.event;r={};for(var t in n)t!=="layerX"&&t!=="layerY"&&t!=="keyLocation"&&t!=="webkitMovementX"&&t!=="webkitMovementY"&&t!=="path"&&(t==="returnValue"&&n.preventDefault||(r[t]=n[t]));if(r.target||(r.target=r.srcElement||je),r.relatedTarget||(r.relatedTarget=r.fromElement===r.target?r.toElement:r.fromElement),r.preventDefault=function(){n.preventDefault&&n.preventDefault(),r.returnValue=!1,n.returnValue=!1,r.defaultPrevented=!0},r.defaultPrevented=!1,r.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),r.cancelBubble=!0,n.cancelBubble=!0,r.isPropagationStopped=e},r.isPropagationStopped=i,r.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),r.isImmediatePropagationStopped=e,r.stopPropagation()},r.isImmediatePropagationStopped=i,r.clientX!==null&&r.clientX!==void 0){var a=je.documentElement,s=je.body;r.pageX=r.clientX+(a&&a.scrollLeft||s&&s.scrollLeft||0)-(a&&a.clientLeft||s&&s.clientLeft||0),r.pageY=r.clientY+(a&&a.scrollTop||s&&s.scrollTop||0)-(a&&a.clientTop||s&&s.clientTop||0)}r.which=r.charCode||r.keyCode,r.button!==null&&r.button!==void 0&&(r.button=r.button&1?0:r.button&4?1:r.button&2?2:0)}return r.fixed_=!0,r}var df,k3=function(){if(typeof df!="boolean"){df=!1;try{var e=Object.defineProperty({},"passive",{get:function(){df=!0}});q.addEventListener("test",null,e),q.removeEventListener("test",null,e)}catch{}}return df},L3=["touchstart","touchmove"];function vi(r,e,i){if(Array.isArray(e))return dy(vi,r,e,i);Hr.has(r)||Hr.set(r,{});var n=Hr.get(r);if(n.handlers||(n.handlers={}),n.handlers[e]||(n.handlers[e]=[]),i.guid||(i.guid=ta()),n.handlers[e].push(i),n.dispatcher||(n.disabled=!1,n.dispatcher=function(a,s){if(!n.disabled){a=ah(a);var o=n.handlers[a.type];if(o)for(var l=o.slice(0),c=0,d=l.length;c<d&&!a.isImmediatePropagationStopped();c++)try{l[c].call(r,a,s)}catch(h){ft.error(h)}}}),n.handlers[e].length===1)if(r.addEventListener){var t=!1;k3()&&L3.indexOf(e)>-1&&(t={passive:!0}),r.addEventListener(e,n.dispatcher,t)}else r.attachEvent&&r.attachEvent("on"+e,n.dispatcher)}function Pr(r,e,i){if(!!Hr.has(r)){var n=Hr.get(r);if(!!n.handlers){if(Array.isArray(e))return dy(Pr,r,e,i);var t=function(c,d){n.handlers[d]=[],wb(c,d)};if(e===void 0){for(var a in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},a)&&t(r,a);return}var s=n.handlers[e];if(!!s){if(!i){t(r,e);return}if(i.guid)for(var o=0;o<s.length;o++)s[o].guid===i.guid&&s.splice(o--,1);wb(r,e)}}}}function Xo(r,e,i){var n=Hr.has(r)?Hr.get(r):{},t=r.parentNode||r.ownerDocument;if(typeof e=="string"?e={type:e,target:r}:e.target||(e.target=r),e=ah(e),n.dispatcher&&n.dispatcher.call(r,e,i),t&&!e.isPropagationStopped()&&e.bubbles===!0)Xo.call(null,t,e,i);else if(!t&&!e.defaultPrevented&&e.target&&e.target[e.type]){Hr.has(e.target)||Hr.set(e.target,{});var a=Hr.get(e.target);e.target[e.type]&&(a.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),a.disabled=!1)}return!e.defaultPrevented}function sh(r,e,i){if(Array.isArray(e))return dy(sh,r,e,i);var n=function t(){Pr(r,e,t),i.apply(this,arguments)};n.guid=i.guid=i.guid||ta(),vi(r,e,n)}function E1(r,e,i){var n=function t(){Pr(r,e,t),i.apply(this,arguments)};n.guid=i.guid=i.guid||ta(),vi(r,e,n)}var M3=Object.freeze({__proto__:null,fixEvent:ah,on:vi,off:Pr,trigger:Xo,one:sh,any:E1}),qi=30,Nt=function(e,i,n){i.guid||(i.guid=ta());var t=i.bind(e);return t.guid=n?n+"_"+i.guid:i.guid,t},Qn=function(e,i){var n=q.performance.now(),t=function(){var s=q.performance.now();s-n>=i&&(e.apply(void 0,arguments),n=s)};return t},N3=function(e,i,n,t){t===void 0&&(t=q);var a,s=function(){t.clearTimeout(a),a=null},o=function(){var c=this,d=arguments,h=function(){a=null,h=null,n||e.apply(c,d)};!a&&n&&e.apply(c,d),t.clearTimeout(a),a=t.setTimeout(h,i)};return o.cancel=s,o},mr=function(){};mr.prototype.allowedEvents_={};mr.prototype.on=function(r,e){var i=this.addEventListener;this.addEventListener=function(){},vi(this,r,e),this.addEventListener=i};mr.prototype.addEventListener=mr.prototype.on;mr.prototype.off=function(r,e){Pr(this,r,e)};mr.prototype.removeEventListener=mr.prototype.off;mr.prototype.one=function(r,e){var i=this.addEventListener;this.addEventListener=function(){},sh(this,r,e),this.addEventListener=i};mr.prototype.any=function(r,e){var i=this.addEventListener;this.addEventListener=function(){},E1(this,r,e),this.addEventListener=i};mr.prototype.trigger=function(r){var e=r.type||r;typeof r=="string"&&(r={type:e}),r=ah(r),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](r),Xo(this,r)};mr.prototype.dispatchEvent=mr.prototype.trigger;var qu;mr.prototype.queueTrigger=function(r){var e=this;qu||(qu=new Map);var i=r.type||r,n=qu.get(this);n||(n=new Map,qu.set(this,n));var t=n.get(i);n.delete(i),q.clearTimeout(t);var a=q.setTimeout(function(){n.size===0&&(n=null,qu.delete(e)),e.trigger(r)},0);n.set(i,a)};var oh=function(e){return typeof e.name=="function"?e.name():typeof e.name=="string"?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e},zn=function(e){return e instanceof mr||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(i){return typeof e[i]=="function"})},F3=function(e,i){zn(e)?i():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(i))},xg=function(e){return typeof e=="string"&&/\S/.test(e)||Array.isArray(e)&&!!e.length},rd=function(e,i,n){if(!e||!e.nodeName&&!zn(e))throw new Error("Invalid target for "+oh(i)+"#"+n+"; must be a DOM node or evented object.")},C1=function(e,i,n){if(!xg(e))throw new Error("Invalid event type for "+oh(i)+"#"+n+"; must be a non-empty string or array.")},R1=function(e,i,n){if(typeof e!="function")throw new Error("Invalid listener for "+oh(i)+"#"+n+"; must be a function.")},pm=function(e,i,n){var t=i.length<3||i[0]===e||i[0]===e.eventBusEl_,a,s,o;return t?(a=e.eventBusEl_,i.length>=3&&i.shift(),s=i[0],o=i[1]):(a=i[0],s=i[1],o=i[2]),rd(a,e,n),C1(s,e,n),R1(o,e,n),o=Nt(e,o),{isTargetingSelf:t,target:a,type:s,listener:o}},is=function(e,i,n,t){rd(e,e,i),e.nodeName?M3[i](e,n,t):e[i](n,t)},U3={on:function(){for(var e=this,i=arguments.length,n=new Array(i),t=0;t<i;t++)n[t]=arguments[t];var a=pm(this,n,"on"),s=a.isTargetingSelf,o=a.target,l=a.type,c=a.listener;if(is(o,"on",l,c),!s){var d=function(){return e.off(o,l,c)};d.guid=c.guid;var h=function(){return e.off("dispose",d)};h.guid=c.guid,is(this,"on","dispose",d),is(o,"on","dispose",h)}},one:function(){for(var e=this,i=arguments.length,n=new Array(i),t=0;t<i;t++)n[t]=arguments[t];var a=pm(this,n,"one"),s=a.isTargetingSelf,o=a.target,l=a.type,c=a.listener;if(s)is(o,"one",l,c);else{var d=function h(){e.off(o,l,h);for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];c.apply(null,y)};d.guid=c.guid,is(o,"one",l,d)}},any:function(){for(var e=this,i=arguments.length,n=new Array(i),t=0;t<i;t++)n[t]=arguments[t];var a=pm(this,n,"any"),s=a.isTargetingSelf,o=a.target,l=a.type,c=a.listener;if(s)is(o,"any",l,c);else{var d=function h(){e.off(o,l,h);for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];c.apply(null,y)};d.guid=c.guid,is(o,"any",l,d)}},off:function(e,i,n){if(!e||xg(e))Pr(this.eventBusEl_,e,i);else{var t=e,a=i;rd(t,this,"off"),C1(a,this,"off"),R1(n,this,"off"),n=Nt(this,n),this.off("dispose",n),t.nodeName?(Pr(t,a,n),Pr(t,"dispose",n)):zn(t)&&(t.off(a,n),t.off("dispose",n))}},trigger:function(e,i){rd(this.eventBusEl_,this,"trigger");var n=e&&typeof e!="string"?e.type:e;if(!xg(n)){var t="Invalid event type for "+oh(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(e)(this.log||ft).error(t);else throw new Error(t)}return Xo(this.eventBusEl_,e,i)}};function hy(r,e){e===void 0&&(e={});var i=e,n=i.eventBusKey;if(n){if(!r[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');r.eventBusEl_=r[n]}else r.eventBusEl_=_t("span",{className:"vjs-event-bus"});return qt(r,U3),r.eventedCallbacks&&r.eventedCallbacks.forEach(function(t){t()}),r.on("dispose",function(){r.off(),[r,r.el_,r.eventBusEl_].forEach(function(t){t&&Hr.has(t)&&Hr.delete(t)}),q.setTimeout(function(){r.eventBusEl_=null},0)}),r}var B3={state:{},setState:function(e){var i=this;typeof e=="function"&&(e=e());var n;return bo(e,function(t,a){i.state[a]!==t&&(n=n||{},n[a]={from:i.state[a],to:t}),i.state[a]=t}),n&&zn(this)&&this.trigger({changes:n,type:"statechanged"}),n}};function w1(r,e){return qt(r,B3),r.state=qt({},r.state,e),typeof r.handleStateChanged=="function"&&zn(r)&&r.on("statechanged",r.handleStateChanged),r}var Af=function(e){return typeof e!="string"?e:e.replace(/./,function(i){return i.toLowerCase()})},Zt=function(e){return typeof e!="string"?e:e.replace(/./,function(i){return i.toUpperCase()})},j3=function(e,i){return Zt(e)===Zt(i)};function Mt(){for(var r={},e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return i.forEach(function(t){!t||bo(t,function(a,s){if(!Cl(a)){r[s]=a;return}Cl(r[s])||(r[s]={}),r[s]=Mt(r[s],a)})}),r}var V3=function(){function r(){this.map_={}}var e=r.prototype;return e.has=function(n){return n in this.map_},e.delete=function(n){var t=this.has(n);return delete this.map_[n],t},e.set=function(n,t){return this.map_[n]=t,this},e.forEach=function(n,t){for(var a in this.map_)n.call(t,this.map_[a],a,this)},r}(),H3=q.Map?q.Map:V3,W3=function(){function r(){this.set_={}}var e=r.prototype;return e.has=function(n){return n in this.set_},e.delete=function(n){var t=this.has(n);return delete this.set_[n],t},e.add=function(n){return this.set_[n]=1,this},e.forEach=function(n,t){for(var a in this.set_)n.call(t,a,a,this)},r}(),mm=q.Set?q.Set:W3,Le=function(){function r(i,n,t){var a=this;if(!i&&this.play?this.player_=i=this:this.player_=i,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Mt({},this.options_),n=this.options_=Mt(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){var s=i&&i.id&&i.id()||"no_player";this.id_=s+"_component_"+ta()}this.name_=n.name||null,n.el?this.el_=n.el:n.createEl!==!1&&(this.el_=this.createEl()),n.className&&this.el_&&n.className.split(" ").forEach(function(o){return a.addClass(o)}),n.evented!==!1&&(hy(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),w1(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new mm,this.setIntervalIds_=new mm,this.rafIds_=new mm,this.namedRafs_=new H3,this.clearingTimersOnDispose_=!1,n.initChildren!==!1&&this.initChildren(),this.ready(t),n.reportTouchActivity!==!1&&this.enableTouchActivity()}var e=r.prototype;return e.dispose=function(n){if(n===void 0&&(n={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(n.restoreEl?this.el_.parentNode.replaceChild(n.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},e.isDisposed=function(){return Boolean(this.isDisposed_)},e.player=function(){return this.player_},e.options=function(n){return n?(this.options_=Mt(this.options_,n),this.options_):this.options_},e.el=function(){return this.el_},e.createEl=function(n,t,a){return _t(n,t,a)},e.localize=function(n,t,a){a===void 0&&(a=n);var s=this.player_.language&&this.player_.language(),o=this.player_.languages&&this.player_.languages(),l=o&&o[s],c=s&&s.split("-")[0],d=o&&o[c],h=a;return l&&l[n]?h=l[n]:d&&d[n]&&(h=d[n]),t&&(h=h.replace(/\{(\d+)\}/g,function(p,y){var S=t[y-1],C=S;return typeof S>"u"&&(C=p),C})),h},e.handleLanguagechange=function(){},e.contentEl=function(){return this.contentEl_||this.el_},e.id=function(){return this.id_},e.name=function(){return this.name_},e.children=function(){return this.children_},e.getChildById=function(n){return this.childIndex_[n]},e.getChild=function(n){if(!!n)return this.childNameIndex_[n]},e.getDescendant=function(){for(var n=arguments.length,t=new Array(n),a=0;a<n;a++)t[a]=arguments[a];t=t.reduce(function(l,c){return l.concat(c)},[]);for(var s=this,o=0;o<t.length;o++)if(s=s.getChild(t[o]),!s||!s.getChild)return;return s},e.addChild=function(n,t,a){t===void 0&&(t={}),a===void 0&&(a=this.children_.length);var s,o;if(typeof n=="string"){o=Zt(n);var l=t.componentClass||o;t.name=o;var c=r.getComponent(l);if(!c)throw new Error("Component "+l+" does not exist");if(typeof c!="function")return null;s=new c(this.player_||this,t)}else s=n;if(s.parentComponent_&&s.parentComponent_.removeChild(s),this.children_.splice(a,0,s),s.parentComponent_=this,typeof s.id=="function"&&(this.childIndex_[s.id()]=s),o=o||s.name&&Zt(s.name()),o&&(this.childNameIndex_[o]=s,this.childNameIndex_[Af(o)]=s),typeof s.el=="function"&&s.el()){var d=null;this.children_[a+1]&&(this.children_[a+1].el_?d=this.children_[a+1].el_:Yo(this.children_[a+1])&&(d=this.children_[a+1])),this.contentEl().insertBefore(s.el(),d)}return s},e.removeChild=function(n){if(typeof n=="string"&&(n=this.getChild(n)),!(!n||!this.children_)){for(var t=!1,a=this.children_.length-1;a>=0;a--)if(this.children_[a]===n){t=!0,this.children_.splice(a,1);break}if(!!t){n.parentComponent_=null,this.childIndex_[n.id()]=null,this.childNameIndex_[Zt(n.name())]=null,this.childNameIndex_[Af(n.name())]=null;var s=n.el();s&&s.parentNode===this.contentEl()&&this.contentEl().removeChild(n.el())}}},e.initChildren=function(){var n=this,t=this.options_.children;if(t){var a=this.options_,s=function(d){var h=d.name,p=d.opts;if(a[h]!==void 0&&(p=a[h]),p!==!1){p===!0&&(p={}),p.playerOptions=n.options_.playerOptions;var y=n.addChild(h,p);y&&(n[h]=y)}},o,l=r.getComponent("Tech");Array.isArray(t)?o=t:o=Object.keys(t),o.concat(Object.keys(this.options_).filter(function(c){return!o.some(function(d){return typeof d=="string"?c===d:c===d.name})})).map(function(c){var d,h;return typeof c=="string"?(d=c,h=t[d]||n.options_[d]||{}):(d=c.name,h=c),{name:d,opts:h}}).filter(function(c){var d=r.getComponent(c.opts.componentClass||Zt(c.name));return d&&!l.isTech(d)}).forEach(s)}},e.buildCSSClass=function(){return""},e.ready=function(n,t){if(t===void 0&&(t=!1),!!n){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(n);return}t?n.call(this):this.setTimeout(n,1)}},e.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var n=this.readyQueue_;this.readyQueue_=[],n&&n.length>0&&n.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)},e.$=function(n,t){return Aa(n,t||this.contentEl())},e.$$=function(n,t){return y1(n,t||this.contentEl())},e.hasClass=function(n){return Ts(this.el_,n)},e.addClass=function(n){Gn(this.el_,n)},e.removeClass=function(n){jl(this.el_,n)},e.toggleClass=function(n,t){c1(this.el_,n,t)},e.show=function(){this.removeClass("vjs-hidden")},e.hide=function(){this.addClass("vjs-hidden")},e.lockShowing=function(){this.addClass("vjs-lock-showing")},e.unlockShowing=function(){this.removeClass("vjs-lock-showing")},e.getAttribute=function(n){return d1(this.el_,n)},e.setAttribute=function(n,t){Fo(this.el_,n,t)},e.removeAttribute=function(n){ih(this.el_,n)},e.width=function(n,t){return this.dimension("width",n,t)},e.height=function(n,t){return this.dimension("height",n,t)},e.dimensions=function(n,t){this.width(n,!0),this.height(t)},e.dimension=function(n,t,a){if(t!==void 0){(t===null||t!==t)&&(t=0),(""+t).indexOf("%")!==-1||(""+t).indexOf("px")!==-1?this.el_.style[n]=t:t==="auto"?this.el_.style[n]="":this.el_.style[n]=t+"px",a||this.trigger("componentresize");return}if(!this.el_)return 0;var s=this.el_.style[n],o=s.indexOf("px");return parseInt(o!==-1?s.slice(0,o):this.el_["offset"+Zt(n)],10)},e.currentDimension=function(n){var t=0;if(n!=="width"&&n!=="height")throw new Error("currentDimension only accepts width or height value");if(t=Rl(this.el_,n),t=parseFloat(t),t===0||isNaN(t)){var a="offset"+Zt(n);t=this.el_[a]}return t},e.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.currentWidth=function(){return this.currentDimension("width")},e.currentHeight=function(){return this.currentDimension("height")},e.focus=function(){this.el_.focus()},e.blur=function(){this.el_.blur()},e.handleKeyDown=function(n){this.player_&&(it.isEventKey(n,"Tab")||n.stopPropagation(),this.player_.handleKeyDown(n))},e.handleKeyPress=function(n){this.handleKeyDown(n)},e.emitTapEvents=function(){var n=0,t=null,a=10,s=200,o;this.on("touchstart",function(c){c.touches.length===1&&(t={pageX:c.touches[0].pageX,pageY:c.touches[0].pageY},n=q.performance.now(),o=!0)}),this.on("touchmove",function(c){if(c.touches.length>1)o=!1;else if(t){var d=c.touches[0].pageX-t.pageX,h=c.touches[0].pageY-t.pageY,p=Math.sqrt(d*d+h*h);p>a&&(o=!1)}});var l=function(){o=!1};this.on("touchleave",l),this.on("touchcancel",l),this.on("touchend",function(c){if(t=null,o===!0){var d=q.performance.now()-n;d<s&&(c.preventDefault(),this.trigger("tap"))}})},e.enableTouchActivity=function(){if(!(!this.player()||!this.player().reportUserActivity)){var n=Nt(this.player(),this.player().reportUserActivity),t;this.on("touchstart",function(){n(),this.clearInterval(t),t=this.setInterval(n,250)});var a=function(o){n(),this.clearInterval(t)};this.on("touchmove",n),this.on("touchend",a),this.on("touchcancel",a)}},e.setTimeout=function(n,t){var a=this,s;return n=Nt(this,n),this.clearTimersOnDispose_(),s=q.setTimeout(function(){a.setTimeoutIds_.has(s)&&a.setTimeoutIds_.delete(s),n()},t),this.setTimeoutIds_.add(s),s},e.clearTimeout=function(n){return this.setTimeoutIds_.has(n)&&(this.setTimeoutIds_.delete(n),q.clearTimeout(n)),n},e.setInterval=function(n,t){n=Nt(this,n),this.clearTimersOnDispose_();var a=q.setInterval(n,t);return this.setIntervalIds_.add(a),a},e.clearInterval=function(n){return this.setIntervalIds_.has(n)&&(this.setIntervalIds_.delete(n),q.clearInterval(n)),n},e.requestAnimationFrame=function(n){var t=this;if(!this.supportsRaf_)return this.setTimeout(n,1e3/60);this.clearTimersOnDispose_();var a;return n=Nt(this,n),a=q.requestAnimationFrame(function(){t.rafIds_.has(a)&&t.rafIds_.delete(a),n()}),this.rafIds_.add(a),a},e.requestNamedAnimationFrame=function(n,t){var a=this;if(!this.namedRafs_.has(n)){this.clearTimersOnDispose_(),t=Nt(this,t);var s=this.requestAnimationFrame(function(){t(),a.namedRafs_.has(n)&&a.namedRafs_.delete(n)});return this.namedRafs_.set(n,s),n}},e.cancelNamedAnimationFrame=function(n){!this.namedRafs_.has(n)||(this.cancelAnimationFrame(this.namedRafs_.get(n)),this.namedRafs_.delete(n))},e.cancelAnimationFrame=function(n){return this.supportsRaf_?(this.rafIds_.has(n)&&(this.rafIds_.delete(n),q.cancelAnimationFrame(n)),n):this.clearTimeout(n)},e.clearTimersOnDispose_=function(){var n=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(t){var a=t[0],s=t[1];n[a].forEach(function(o,l){return n[s](l)})}),n.clearingTimersOnDispose_=!1}))},r.registerComponent=function(n,t){if(typeof n!="string"||!n)throw new Error('Illegal component name, "'+n+'"; must be a non-empty string.');var a=r.getComponent("Tech"),s=a&&a.isTech(t),o=r===t||r.prototype.isPrototypeOf(t.prototype);if(s||!o){var l;throw s?l="techs must be registered using Tech.registerTech()":l="must be a Component subclass",new Error('Illegal component, "'+n+'"; '+l+".")}n=Zt(n),r.components_||(r.components_={});var c=r.getComponent("Player");if(n==="Player"&&c&&c.players){var d=c.players,h=Object.keys(d);if(d&&h.length>0&&h.map(function(p){return d[p]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return r.components_[n]=t,r.components_[Af(n)]=t,t},r.getComponent=function(n){if(!(!n||!r.components_))return r.components_[n]},r}();Le.prototype.supportsRaf_=typeof q.requestAnimationFrame=="function"&&typeof q.cancelAnimationFrame=="function";Le.registerComponent("Component",Le);function $3(r,e,i){if(typeof e!="number"||e<0||e>i)throw new Error("Failed to execute '"+r+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+i+").")}function Ab(r,e,i,n){return $3(r,n,i.length-1),i[n][e]}function gm(r){var e;return r===void 0||r.length===0?e={length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:e={length:r.length,start:Ab.bind(null,"start",0,r),end:Ab.bind(null,"end",1,r)},q.Symbol&&q.Symbol.iterator&&(e[q.Symbol.iterator]=function(){return(r||[]).values()}),e}function bs(r,e){return Array.isArray(r)?gm(r):r===void 0||e===void 0?gm():gm([[r,e]])}function A1(r,e){var i=0,n,t;if(!e)return 0;(!r||!r.length)&&(r=bs(0,0));for(var a=0;a<r.length;a++)n=r.start(a),t=r.end(a),t>e&&(t=e),i+=t-n;return i/e}function Wr(r){if(r instanceof Wr)return r;typeof r=="number"?this.code=r:typeof r=="string"?this.message=r:Xn(r)&&(typeof r.code=="number"&&(this.code=r.code),qt(this,r)),this.message||(this.message=Wr.defaultMessages[this.code]||"")}Wr.prototype.code=0;Wr.prototype.message="";Wr.prototype.status=null;Wr.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];Wr.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var lo=0;lo<Wr.errorTypes.length;lo++)Wr[Wr.errorTypes[lo]]=lo,Wr.prototype[Wr.errorTypes[lo]]=lo;function ll(r){return r!=null&&typeof r.then=="function"}function fn(r){ll(r)&&r.then(null,function(e){})}var Eg=function(e){var i=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(n,t,a){return e[t]&&(n[t]=e[t]),n},{cues:e.cues&&Array.prototype.map.call(e.cues,function(n){return{startTime:n.startTime,endTime:n.endTime,text:n.text,id:n.id}})});return i},G3=function(e){var i=e.$$("track"),n=Array.prototype.map.call(i,function(a){return a.track}),t=Array.prototype.map.call(i,function(a){var s=Eg(a.track);return a.src&&(s.src=a.src),s});return t.concat(Array.prototype.filter.call(e.textTracks(),function(a){return n.indexOf(a)===-1}).map(Eg))},z3=function(e,i){return e.forEach(function(n){var t=i.addRemoteTextTrack(n).track;!n.src&&n.cues&&n.cues.forEach(function(a){return t.addCue(a)})}),i.textTracks()},Pb={textTracksToJson:G3,jsonToTextTracks:z3,trackToJson_:Eg},vm="vjs-modal-dialog",Qo=function(r){Ve(e,r);function e(n,t){var a;return a=r.call(this,n,t)||this,a.handleKeyDown_=function(s){return a.handleKeyDown(s)},a.close_=function(s){return a.close(s)},a.opened_=a.hasBeenOpened_=a.hasBeenFilled_=!1,a.closeable(!a.options_.uncloseable),a.content(a.options_.content),a.contentEl_=_t("div",{className:vm+"-content"},{role:"document"}),a.descEl_=_t("p",{className:vm+"-description vjs-control-text",id:a.el().getAttribute("aria-describedby")}),Os(a.descEl_,a.description()),a.el_.appendChild(a.descEl_),a.el_.appendChild(a.contentEl_),a}var i=e.prototype;return i.createEl=function(){return r.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},i.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,r.prototype.dispose.call(this)},i.buildCSSClass=function(){return vm+" vjs-hidden "+r.prototype.buildCSSClass.call(this)},i.label=function(){return this.localize(this.options_.label||"Modal Window")},i.description=function(){var t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t},i.open=function(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},i.opened=function(t){return typeof t=="boolean"&&this[t?"open":"close"](),this.opened_},i.close=function(){if(!!this.opened_){var t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},i.closeable=function(t){if(typeof t=="boolean"){var a=this.closeable_=!!t,s=this.getChild("closeButton");if(a&&!s){var o=this.contentEl_;this.contentEl_=this.el_,s=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=o,this.on(s,"close",this.close_)}!a&&s&&(this.off(s,"close",this.close_),this.removeChild(s),s.dispose())}return this.closeable_},i.fill=function(){this.fillWith(this.content())},i.fillWith=function(t){var a=this.contentEl(),s=a.parentNode,o=a.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,s.removeChild(a),this.empty(),v1(a,t),this.trigger("modalfill"),o?s.insertBefore(a,o):s.appendChild(a);var l=this.getChild("closeButton");l&&s.appendChild(l.el_)},i.empty=function(){this.trigger("beforemodalempty"),cy(this.contentEl()),this.trigger("modalempty")},i.content=function(t){return typeof t<"u"&&(this.content_=t),this.content_},i.conditionalFocus_=function(){var t=je.activeElement,a=this.player_.el_;this.previouslyActiveEl_=null,(a.contains(t)||a===t)&&(this.previouslyActiveEl_=t,this.focus())},i.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},i.handleKeyDown=function(t){if(t.stopPropagation(),it.isEventKey(t,"Escape")&&this.closeable()){t.preventDefault(),this.close();return}if(!!it.isEventKey(t,"Tab")){for(var a=this.focusableEls_(),s=this.el_.querySelector(":focus"),o,l=0;l<a.length;l++)if(s===a[l]){o=l;break}je.activeElement===this.el_&&(o=0),t.shiftKey&&o===0?(a[a.length-1].focus(),t.preventDefault()):!t.shiftKey&&o===a.length-1&&(a[0].focus(),t.preventDefault())}},i.focusableEls_=function(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,function(a){return(a instanceof q.HTMLAnchorElement||a instanceof q.HTMLAreaElement)&&a.hasAttribute("href")||(a instanceof q.HTMLInputElement||a instanceof q.HTMLSelectElement||a instanceof q.HTMLTextAreaElement||a instanceof q.HTMLButtonElement)&&!a.hasAttribute("disabled")||a instanceof q.HTMLIFrameElement||a instanceof q.HTMLObjectElement||a instanceof q.HTMLEmbedElement||a.hasAttribute("tabindex")&&a.getAttribute("tabindex")!==-1||a.hasAttribute("contenteditable")})},e}(Le);Qo.prototype.options_={pauseOnOpen:!0,temporary:!0};Le.registerComponent("ModalDialog",Qo);var Bo=function(r){Ve(e,r);function e(n){var t;n===void 0&&(n=[]),t=r.call(this)||this,t.tracks_=[],Object.defineProperty(rt(t),"length",{get:function(){return this.tracks_.length}});for(var a=0;a<n.length;a++)t.addTrack(n[a]);return t}var i=e.prototype;return i.addTrack=function(t){var a=this,s=this.tracks_.length;""+s in this||Object.defineProperty(this,s,{get:function(){return this.tracks_[s]}}),this.tracks_.indexOf(t)===-1&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack",target:this})),t.labelchange_=function(){a.trigger({track:t,type:"labelchange",target:a})},zn(t)&&t.addEventListener("labelchange",t.labelchange_)},i.removeTrack=function(t){for(var a,s=0,o=this.length;s<o;s++)if(this[s]===t){a=this[s],a.off&&a.off(),this.tracks_.splice(s,1);break}!a||this.trigger({track:a,type:"removetrack",target:this})},i.getTrackById=function(t){for(var a=null,s=0,o=this.length;s<o;s++){var l=this[s];if(l.id===t){a=l;break}}return a},e}(mr);Bo.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(var q3 in Bo.prototype.allowedEvents_)Bo.prototype["on"+q3]=null;var ym=function(e,i){for(var n=0;n<e.length;n++)!Object.keys(e[n]).length||i.id===e[n].id||(e[n].enabled=!1)},K3=function(r){Ve(e,r);function e(n){var t;n===void 0&&(n=[]);for(var a=n.length-1;a>=0;a--)if(n[a].enabled){ym(n,n[a]);break}return t=r.call(this,n)||this,t.changing_=!1,t}var i=e.prototype;return i.addTrack=function(t){var a=this;t.enabled&&ym(this,t),r.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){a.changing_||(a.changing_=!0,ym(a,t),a.changing_=!1,a.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},i.removeTrack=function(t){r.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},e}(Bo),_m=function(e,i){for(var n=0;n<e.length;n++)!Object.keys(e[n]).length||i.id===e[n].id||(e[n].selected=!1)},Y3=function(r){Ve(e,r);function e(n){var t;n===void 0&&(n=[]);for(var a=n.length-1;a>=0;a--)if(n[a].selected){_m(n,n[a]);break}return t=r.call(this,n)||this,t.changing_=!1,Object.defineProperty(rt(t),"selectedIndex",{get:function(){for(var o=0;o<this.length;o++)if(this[o].selected)return o;return-1},set:function(){}}),t}var i=e.prototype;return i.addTrack=function(t){var a=this;t.selected&&_m(this,t),r.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){a.changing_||(a.changing_=!0,_m(a,t),a.changing_=!1,a.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},i.removeTrack=function(t){r.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},e}(Bo),P1=function(r){Ve(e,r);function e(){return r.apply(this,arguments)||this}var i=e.prototype;return i.addTrack=function(t){var a=this;r.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return a.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return a.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_);var s=["metadata","chapters"];s.indexOf(t.kind)===-1&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},i.removeTrack=function(t){r.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},e}(Bo),X3=function(){function r(i){i===void 0&&(i=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var n=0,t=i.length;n<t;n++)this.addTrackElement_(i[n])}var e=r.prototype;return e.addTrackElement_=function(n){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),this.trackElements_.indexOf(n)===-1&&this.trackElements_.push(n)},e.getTrackElementByTrack_=function(n){for(var t,a=0,s=this.trackElements_.length;a<s;a++)if(n===this.trackElements_[a].track){t=this.trackElements_[a];break}return t},e.removeTrackElement_=function(n){for(var t=0,a=this.trackElements_.length;t<a;t++)if(n===this.trackElements_[t]){this.trackElements_[t].track&&typeof this.trackElements_[t].track.off=="function"&&this.trackElements_[t].track.off(),typeof this.trackElements_[t].off=="function"&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},r}(),Ob=function(){function r(i){r.prototype.setCues_.call(this,i),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var e=r.prototype;return e.setCues_=function(n){var t=this.length||0,a=0,s=n.length;this.cues_=n,this.length_=n.length;var o=function(c){""+c in this||Object.defineProperty(this,""+c,{get:function(){return this.cues_[c]}})};if(t<s)for(a=t;a<s;a++)o.call(this,a)},e.getCueById=function(n){for(var t=null,a=0,s=this.length;a<s;a++){var o=this[a];if(o.id===n){t=o;break}}return t},r}(),Q3={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},J3={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Z3={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Ib={disabled:"disabled",hidden:"hidden",showing:"showing"},py=function(r){Ve(e,r);function e(i){var n;i===void 0&&(i={}),n=r.call(this)||this;var t={id:i.id||"vjs_track_"+ta(),kind:i.kind||"",language:i.language||""},a=i.label||"",s=function(c){Object.defineProperty(rt(n),c,{get:function(){return t[c]},set:function(){}})};for(var o in t)s(o);return Object.defineProperty(rt(n),"label",{get:function(){return a},set:function(c){c!==a&&(a=c,this.trigger("labelchange"))}}),n}return e}(mr),my=function(e){var i=["protocol","hostname","port","pathname","search","hash","host"],n=je.createElement("a");n.href=e;for(var t={},a=0;a<i.length;a++)t[i[a]]=n[i[a]];return t.protocol==="http:"&&(t.host=t.host.replace(/:80$/,"")),t.protocol==="https:"&&(t.host=t.host.replace(/:443$/,"")),t.protocol||(t.protocol=q.location.protocol),t.host||(t.host=q.location.host),t},O1=function(e){if(!e.match(/^https?:\/\//)){var i=je.createElement("a");i.href=e,e=i.href}return e},gy=function(e){if(typeof e=="string"){var i=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/,n=i.exec(e);if(n)return n.pop().toLowerCase()}return""},uh=function(e,i){i===void 0&&(i=q.location);var n=my(e),t=n.protocol===":"?i.protocol:n.protocol,a=t+n.host!==i.protocol+i.host;return a},e4=Object.freeze({__proto__:null,parseUrl:my,getAbsoluteURL:O1,getFileExtension:gy,isCrossOrigin:uh}),Db=function(e,i){var n=new q.WebVTT.Parser(q,q.vttjs,q.WebVTT.StringDecoder()),t=[];n.oncue=function(a){i.addCue(a)},n.onparsingerror=function(a){t.push(a)},n.onflush=function(){i.trigger({type:"loadeddata",target:i})},n.parse(e),t.length>0&&(q.console&&q.console.groupCollapsed&&q.console.groupCollapsed("Text Track parsing errors for "+i.src),t.forEach(function(a){return ft.error(a)}),q.console&&q.console.groupEnd&&q.console.groupEnd()),n.flush()},kb=function(e,i){var n={uri:e},t=uh(e);t&&(n.cors=t);var a=i.tech_.crossOrigin()==="use-credentials";a&&(n.withCredentials=a),qd.exports(n,Nt(this,function(s,o,l){if(s)return ft.error(s,o);i.loaded_=!0,typeof q.WebVTT!="function"?i.tech_&&i.tech_.any(["vttjsloaded","vttjserror"],function(c){if(c.type==="vttjserror"){ft.error("vttjs failed to load, stopping trying to process "+i.src);return}return Db(l,i)}):Db(l,i)}))},Vl=function(r){Ve(e,r);function e(n){var t;if(n===void 0&&(n={}),!n.tech)throw new Error("A tech was not provided.");var a=Mt(n,{kind:Z3[n.kind]||"subtitles",language:n.language||n.srclang||""}),s=Ib[a.mode]||"disabled",o=a.default;(a.kind==="metadata"||a.kind==="chapters")&&(s="hidden"),t=r.call(this,a)||this,t.tech_=a.tech,t.cues_=[],t.activeCues_=[],t.preload_=t.tech_.preloadTextTracks!==!1;var l=new Ob(t.cues_),c=new Ob(t.activeCues_),d=!1;t.timeupdateHandler=Nt(rt(t),function(p){if(p===void 0&&(p={}),!this.tech_.isDisposed()){if(!this.tech_.isReady_){p.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,d&&(this.trigger("cuechange"),d=!1),p.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});var h=function(){t.stopTracking()};return t.tech_.one("dispose",h),s!=="disabled"&&t.startTracking(),Object.defineProperties(rt(t),{default:{get:function(){return o},set:function(){}},mode:{get:function(){return s},set:function(y){!Ib[y]||s!==y&&(s=y,!this.preload_&&s!=="disabled"&&this.cues.length===0&&kb(this.src,this),this.stopTracking(),s!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?l:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(this.cues.length===0)return c;for(var y=this.tech_.currentTime(),S=[],C=0,x=this.cues.length;C<x;C++){var I=this.cues[C];(I.startTime<=y&&I.endTime>=y||I.startTime===I.endTime&&I.startTime<=y&&I.startTime+.5>=y)&&S.push(I)}if(d=!1,S.length!==this.activeCues_.length)d=!0;else for(var H=0;H<S.length;H++)this.activeCues_.indexOf(S[H])===-1&&(d=!0);return this.activeCues_=S,c.setCues_(this.activeCues_),c},set:function(){}}}),a.src?(t.src=a.src,t.preload_||(t.loaded_=!0),(t.preload_||a.kind!=="subtitles"&&a.kind!=="captions")&&kb(t.src,rt(t))):t.loaded_=!0,t}var i=e.prototype;return i.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},i.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},i.addCue=function(t){var a=t;if(q.vttjs&&!(t instanceof q.vttjs.VTTCue)){a=new q.vttjs.VTTCue(t.startTime,t.endTime,t.text);for(var s in t)s in a||(a[s]=t[s]);a.id=t.id,a.originalCue_=t}for(var o=this.tech_.textTracks(),l=0;l<o.length;l++)o[l]!==this&&o[l].removeCue(a);this.cues_.push(a),this.cues.setCues_(this.cues_)},i.removeCue=function(t){for(var a=this.cues_.length;a--;){var s=this.cues_[a];if(s===t||s.originalCue_&&s.originalCue_===t){this.cues_.splice(a,1),this.cues.setCues_(this.cues_);break}}},e}(py);Vl.prototype.allowedEvents_={cuechange:"cuechange"};var I1=function(r){Ve(e,r);function e(i){var n;i===void 0&&(i={});var t=Mt(i,{kind:J3[i.kind]||""});n=r.call(this,t)||this;var a=!1;return Object.defineProperty(rt(n),"enabled",{get:function(){return a},set:function(o){typeof o!="boolean"||o===a||(a=o,this.trigger("enabledchange"))}}),t.enabled&&(n.enabled=t.enabled),n.loaded_=!0,n}return e}(py),D1=function(r){Ve(e,r);function e(i){var n;i===void 0&&(i={});var t=Mt(i,{kind:Q3[i.kind]||""});n=r.call(this,t)||this;var a=!1;return Object.defineProperty(rt(n),"selected",{get:function(){return a},set:function(o){typeof o!="boolean"||o===a||(a=o,this.trigger("selectedchange"))}}),t.selected&&(n.selected=t.selected),n}return e}(py),k1=0,t4=1,L1=2,r4=3,Jo=function(r){Ve(e,r);function e(i){var n;i===void 0&&(i={}),n=r.call(this)||this;var t,a=new Vl(i);return n.kind=a.kind,n.src=a.src,n.srclang=a.language,n.label=a.label,n.default=a.default,Object.defineProperties(rt(n),{readyState:{get:function(){return t}},track:{get:function(){return a}}}),t=k1,a.addEventListener("loadeddata",function(){t=L1,n.trigger({type:"load",target:rt(n)})}),n}return e}(mr);Jo.prototype.allowedEvents_={load:"load"};Jo.NONE=k1;Jo.LOADING=t4;Jo.LOADED=L1;Jo.ERROR=r4;var wi={audio:{ListClass:K3,TrackClass:I1,capitalName:"Audio"},video:{ListClass:Y3,TrackClass:D1,capitalName:"Video"},text:{ListClass:P1,TrackClass:Vl,capitalName:"Text"}};Object.keys(wi).forEach(function(r){wi[r].getterName=r+"Tracks",wi[r].privateName=r+"Tracks_"});var jo={remoteText:{ListClass:P1,TrackClass:Vl,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:X3,TrackClass:Jo,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Br=Ai({},wi,jo);jo.names=Object.keys(jo);wi.names=Object.keys(wi);Br.names=[].concat(jo.names).concat(wi.names);function i4(r,e,i,n,t){t===void 0&&(t={});var a=r.textTracks();t.kind=e,i&&(t.label=i),n&&(t.language=n),t.tech=r;var s=new Br.text.TrackClass(t);return a.addTrack(s),s}var Dt=function(r){Ve(e,r);function e(n,t){var a;return n===void 0&&(n={}),t===void 0&&(t=function(){}),n.reportTouchActivity=!1,a=r.call(this,null,n,t)||this,a.onDurationChange_=function(s){return a.onDurationChange(s)},a.trackProgress_=function(s){return a.trackProgress(s)},a.trackCurrentTime_=function(s){return a.trackCurrentTime(s)},a.stopTrackingCurrentTime_=function(s){return a.stopTrackingCurrentTime(s)},a.disposeSourceHandler_=function(s){return a.disposeSourceHandler(s)},a.queuedHanders_=new Set,a.hasStarted_=!1,a.on("playing",function(){this.hasStarted_=!0}),a.on("loadstart",function(){this.hasStarted_=!1}),Br.names.forEach(function(s){var o=Br[s];n&&n[o.getterName]&&(a[o.privateName]=n[o.getterName])}),a.featuresProgressEvents||a.manualProgressOn(),a.featuresTimeupdateEvents||a.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(s){n["native"+s+"Tracks"]===!1&&(a["featuresNative"+s+"Tracks"]=!1)}),n.nativeCaptions===!1||n.nativeTextTracks===!1?a.featuresNativeTextTracks=!1:(n.nativeCaptions===!0||n.nativeTextTracks===!0)&&(a.featuresNativeTextTracks=!0),a.featuresNativeTextTracks||a.emulateTextTracks(),a.preloadTextTracks=n.preloadTextTracks!==!1,a.autoRemoteTextTracks_=new Br.text.ListClass,a.initTrackListeners(),n.nativeControlsForTouch||a.emitTapEvents(),a.constructor&&(a.name_=a.constructor.name||"Unknown Tech"),a}var i=e.prototype;return i.triggerSourceset=function(t){var a=this;this.isReady_||this.one("ready",function(){return a.setTimeout(function(){return a.triggerSourceset(t)},1)}),this.trigger({src:t,type:"sourceset"})},i.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},i.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},i.trackProgress=function(t){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Nt(this,function(){var a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress"),this.bufferedPercent_=a,a===1&&this.stopTrackingProgress()}),500)},i.onDurationChange=function(t){this.duration_=this.duration()},i.buffered=function(){return bs(0,0)},i.bufferedPercent=function(){return A1(this.buffered(),this.duration_)},i.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},i.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},i.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},i.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},i.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},i.dispose=function(){this.clearTracks(wi.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),r.prototype.dispose.call(this)},i.clearTracks=function(t){var a=this;t=[].concat(t),t.forEach(function(s){for(var o=a[s+"Tracks"]()||[],l=o.length;l--;){var c=o[l];s==="text"&&a.removeRemoteTextTrack(c),o.removeTrack(c)}})},i.cleanupAutoTextTracks=function(){for(var t=this.autoRemoteTextTracks_||[],a=t.length;a--;){var s=t[a];this.removeRemoteTextTrack(s)}},i.reset=function(){},i.crossOrigin=function(){},i.setCrossOrigin=function(){},i.error=function(t){return t!==void 0&&(this.error_=new Wr(t),this.trigger("error")),this.error_},i.played=function(){return this.hasStarted_?bs(0,0):bs()},i.play=function(){},i.setScrubbing=function(){},i.scrubbing=function(){},i.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},i.initTrackListeners=function(){var t=this;wi.names.forEach(function(a){var s=wi[a],o=function(){t.trigger(a+"trackchange")},l=t[s.getterName]();l.addEventListener("removetrack",o),l.addEventListener("addtrack",o),t.on("dispose",function(){l.removeEventListener("removetrack",o),l.removeEventListener("addtrack",o)})})},i.addWebVttScript_=function(){var t=this;if(!q.WebVTT)if(je.body.contains(this.el())){if(!this.options_["vtt.js"]&&Cl(fg.exports)&&Object.keys(fg.exports).length>0){this.trigger("vttjsloaded");return}var a=je.createElement("script");a.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",a.onload=function(){t.trigger("vttjsloaded")},a.onerror=function(){t.trigger("vttjserror")},this.on("dispose",function(){a.onload=null,a.onerror=null}),q.WebVTT=!0,this.el().parentNode.appendChild(a)}else this.ready(this.addWebVttScript_)},i.emulateTextTracks=function(){var t=this,a=this.textTracks(),s=this.remoteTextTracks(),o=function(p){return a.addTrack(p.track)},l=function(p){return a.removeTrack(p.track)};s.on("addtrack",o),s.on("removetrack",l),this.addWebVttScript_();var c=function(){return t.trigger("texttrackchange")},d=function(){c();for(var p=0;p<a.length;p++){var y=a[p];y.removeEventListener("cuechange",c),y.mode==="showing"&&y.addEventListener("cuechange",c)}};d(),a.addEventListener("change",d),a.addEventListener("addtrack",d),a.addEventListener("removetrack",d),this.on("dispose",function(){s.off("addtrack",o),s.off("removetrack",l),a.removeEventListener("change",d),a.removeEventListener("addtrack",d),a.removeEventListener("removetrack",d);for(var h=0;h<a.length;h++){var p=a[h];p.removeEventListener("cuechange",c)}})},i.addTextTrack=function(t,a,s){if(!t)throw new Error("TextTrack kind is required but was not provided");return i4(this,t,a,s)},i.createRemoteTextTrack=function(t){var a=Mt(t,{tech:this});return new jo.remoteTextEl.TrackClass(a)},i.addRemoteTextTrack=function(t,a){var s=this;t===void 0&&(t={});var o=this.createRemoteTextTrack(t);return a!==!0&&a!==!1&&(ft.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),a=!0),this.remoteTextTrackEls().addTrackElement_(o),this.remoteTextTracks().addTrack(o.track),a!==!0&&this.ready(function(){return s.autoRemoteTextTracks_.addTrack(o.track)}),o},i.removeRemoteTextTrack=function(t){var a=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(a),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)},i.getVideoPlaybackQuality=function(){return{}},i.requestPictureInPicture=function(){var t=this.options_.Promise||q.Promise;if(t)return t.reject()},i.disablePictureInPicture=function(){return!0},i.setDisablePictureInPicture=function(){},i.requestVideoFrameCallback=function(t){var a=this,s=ta();return!this.isReady_||this.paused()?(this.queuedHanders_.add(s),this.one("playing",function(){a.queuedHanders_.has(s)&&(a.queuedHanders_.delete(s),t())})):this.requestNamedAnimationFrame(s,t),s},i.cancelVideoFrameCallback=function(t){this.queuedHanders_.has(t)?this.queuedHanders_.delete(t):this.cancelNamedAnimationFrame(t)},i.setPoster=function(){},i.playsinline=function(){},i.setPlaysinline=function(){},i.overrideNativeAudioTracks=function(){},i.overrideNativeVideoTracks=function(){},i.canPlayType=function(){return""},e.canPlayType=function(){return""},e.canPlaySource=function(t,a){return e.canPlayType(t.type)},e.isTech=function(t){return t.prototype instanceof e||t instanceof e||t===e},e.registerTech=function(t,a){if(e.techs_||(e.techs_={}),!e.isTech(a))throw new Error("Tech "+t+" must be a Tech");if(!e.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!e.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=Zt(t),e.techs_[t]=a,e.techs_[Af(t)]=a,t!=="Tech"&&e.defaultTechOrder_.push(t),a},e.getTech=function(t){if(!!t){if(e.techs_&&e.techs_[t])return e.techs_[t];if(t=Zt(t),q&&q.videojs&&q.videojs[t])return ft.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),q.videojs[t]}},e}(Le);Br.names.forEach(function(r){var e=Br[r];Dt.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});Dt.prototype.featuresVolumeControl=!0;Dt.prototype.featuresMuteControl=!0;Dt.prototype.featuresFullscreenResize=!1;Dt.prototype.featuresPlaybackRate=!1;Dt.prototype.featuresProgressEvents=!1;Dt.prototype.featuresSourceset=!1;Dt.prototype.featuresTimeupdateEvents=!1;Dt.prototype.featuresNativeTextTracks=!1;Dt.prototype.featuresVideoFrameCallback=!1;Dt.withSourceHandlers=function(r){r.registerSourceHandler=function(i,n){var t=r.sourceHandlers;t||(t=r.sourceHandlers=[]),n===void 0&&(n=t.length),t.splice(n,0,i)},r.canPlayType=function(i){for(var n=r.sourceHandlers||[],t,a=0;a<n.length;a++)if(t=n[a].canPlayType(i),t)return t;return""},r.selectSourceHandler=function(i,n){for(var t=r.sourceHandlers||[],a,s=0;s<t.length;s++)if(a=t[s].canHandleSource(i,n),a)return t[s];return null},r.canPlaySource=function(i,n){var t=r.selectSourceHandler(i,n);return t?t.canHandleSource(i,n):""};var e=["seekable","seeking","duration"];e.forEach(function(i){var n=this[i];typeof n=="function"&&(this[i]=function(){return this.sourceHandler_&&this.sourceHandler_[i]?this.sourceHandler_[i].apply(this.sourceHandler_,arguments):n.apply(this,arguments)})},r.prototype),r.prototype.setSource=function(i){var n=r.selectSourceHandler(i,this.options_);n||(r.nativeSourceHandler?n=r.nativeSourceHandler:ft.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==r.nativeSourceHandler&&(this.currentSource_=i),this.sourceHandler_=n.handleSource(i,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},r.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};Le.registerComponent("Tech",Dt);Dt.registerTech("Tech",Dt);Dt.defaultTechOrder_=[];var Ss={},Cg={},id={};function n4(r,e){Ss[r]=Ss[r]||[],Ss[r].push(e)}function a4(r,e,i){r.setTimeout(function(){return ss(e,Ss[e.type],i,r)},1)}function s4(r,e){r.forEach(function(i){return i.setTech&&i.setTech(e)})}function o4(r,e,i){return r.reduceRight(vy(i),e[i]())}function u4(r,e,i,n){return e[i](r.reduce(vy(i),n))}function Lb(r,e,i,n){n===void 0&&(n=null);var t="call"+Zt(i),a=r.reduce(vy(t),n),s=a===id,o=s?null:e[i](a);return f4(r,i,o,s),o}var l4={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},c4={setCurrentTime:1,setMuted:1,setVolume:1},Mb={play:1,pause:1};function vy(r){return function(e,i){return e===id?id:i[r]?i[r](e):e}}function f4(r,e,i,n){for(var t=r.length-1;t>=0;t--){var a=r[t];a[e]&&a[e](n,i)}}function d4(r){Cg[r.id()]=null}function h4(r,e){var i=Cg[r.id()],n=null;if(i==null)return n=e(r),Cg[r.id()]=[[e,n]],n;for(var t=0;t<i.length;t++){var a=i[t],s=a[0],o=a[1];s===e&&(n=o)}return n===null&&(n=e(r),i.push([e,n])),n}function ss(r,e,i,n,t,a){r===void 0&&(r={}),e===void 0&&(e=[]),t===void 0&&(t=[]),a===void 0&&(a=!1);var s=e,o=s[0],l=s.slice(1);if(typeof o=="string")ss(r,Ss[o],i,n,t,a);else if(o){var c=h4(n,o);if(!c.setSource)return t.push(c),ss(r,l,i,n,t,a);c.setSource(qt({},r),function(d,h){if(d)return ss(r,l,i,n,t,a);t.push(c),ss(h,r.type===h.type?l:Ss[h.type],i,n,t,a)})}else l.length?ss(r,l,i,n,t,a):a?i(r,t):ss(r,Ss["*"],i,n,t,!0)}var p4={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},nd=function(e){e===void 0&&(e="");var i=gy(e),n=p4[i.toLowerCase()];return n||""},m4=function(e,i){if(!i)return"";if(e.cache_.source.src===i&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter(function(o){return o.src===i});if(n.length)return n[0].type;for(var t=e.$$("source"),a=0;a<t.length;a++){var s=t[a];if(s.type&&s.src&&s.src===i)return s.type}return nd(i)},g4=function r(e){if(Array.isArray(e)){var i=[];e.forEach(function(n){n=r(n),Array.isArray(n)?i=i.concat(n):Xn(n)&&i.push(n)}),e=i}else typeof e=="string"&&e.trim()?e=[Nb({src:e})]:Xn(e)&&typeof e.src=="string"&&e.src&&e.src.trim()?e=[Nb(e)]:e=[];return e};function Nb(r){if(!r.type){var e=nd(r.src);e&&(r.type=e)}return r}var v4=function(r){Ve(e,r);function e(i,n,t){var a,s=Mt({createEl:!1},n);if(a=r.call(this,i,s,t)||this,!n.playerOptions.sources||n.playerOptions.sources.length===0)for(var o=0,l=n.playerOptions.techOrder;o<l.length;o++){var c=Zt(l[o]),d=Dt.getTech(c);if(c||(d=Le.getComponent(c)),d&&d.isSupported()){i.loadTech_(c);break}}else i.src(n.playerOptions.sources);return a}return e}(Le);Le.registerComponent("MediaLoader",v4);var lh=function(r){Ve(e,r);function e(n,t){var a;return a=r.call(this,n,t)||this,a.options_.controlText&&a.controlText(a.options_.controlText),a.handleMouseOver_=function(s){return a.handleMouseOver(s)},a.handleMouseOut_=function(s){return a.handleMouseOut(s)},a.handleClick_=function(s){return a.handleClick(s)},a.handleKeyDown_=function(s){return a.handleKeyDown(s)},a.emitTapEvents(),a.enable(),a}var i=e.prototype;return i.createEl=function(t,a,s){t===void 0&&(t="div"),a===void 0&&(a={}),s===void 0&&(s={}),a=qt({className:this.buildCSSClass(),tabIndex:0},a),t==="button"&&ft.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),s=qt({role:"button"},s),this.tabIndex_=a.tabIndex;var o=_t(t,a,s);return o.appendChild(_t("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},i.dispose=function(){this.controlTextEl_=null,r.prototype.dispose.call(this)},i.createControlTextEl=function(t){return this.controlTextEl_=_t("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_},i.controlText=function(t,a){if(a===void 0&&(a=this.el()),t===void 0)return this.controlText_||"Need Text";var s=this.localize(t);this.controlText_=t,Os(this.controlTextEl_,s),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&a.setAttribute("title",s)},i.buildCSSClass=function(){return"vjs-control vjs-button "+r.prototype.buildCSSClass.call(this)},i.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},i.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},i.handleLanguagechange=function(){this.controlText(this.controlText_)},i.handleClick=function(t){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},i.handleKeyDown=function(t){it.isEventKey(t,"Space")||it.isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):r.prototype.handleKeyDown.call(this,t)},e}(Le);Le.registerComponent("ClickableComponent",lh);var y4=function(r){Ve(e,r);function e(n,t){var a;return a=r.call(this,n,t)||this,a.update(),a.update_=function(s){return a.update(s)},n.on("posterchange",a.update_),a}var i=e.prototype;return i.dispose=function(){this.player().off("posterchange",this.update_),r.prototype.dispose.call(this)},i.createEl=function(){var t=_t("div",{className:"vjs-poster",tabIndex:-1});return t},i.update=function(t){var a=this.player().poster();this.setSrc(a),a?this.show():this.hide()},i.setSrc=function(t){var a="";t&&(a='url("'+t+'")'),this.el_.style.backgroundImage=a},i.handleClick=function(t){if(!!this.player_.controls()){var a=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;this.player_.tech(!0)&&!((Bl||Ul)&&a)&&this.player_.tech(!0).focus(),this.player_.paused()?fn(this.player_.play()):this.player_.pause()}},e}(lh);Le.registerComponent("PosterImage",y4);var Ci="#222",Fb="#ccc",_4={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Tm(r,e){var i;if(r.length===4)i=r[1]+r[1]+r[2]+r[2]+r[3]+r[3];else if(r.length===7)i=r.slice(1);else throw new Error("Invalid color code provided, "+r+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+e+")"}function bm(r,e,i){try{r.style[e]=i}catch{return}}var T4=function(r){Ve(e,r);function e(n,t,a){var s;s=r.call(this,n,t,a)||this;var o=function(c){return s.updateDisplay(c)};return n.on("loadstart",function(l){return s.toggleDisplay(l)}),n.on("texttrackchange",o),n.on("loadedmetadata",function(l){return s.preselectTrack(l)}),n.ready(Nt(rt(s),function(){if(n.tech_&&n.tech_.featuresNativeTextTracks){this.hide();return}n.on("fullscreenchange",o),n.on("playerresize",o),q.addEventListener("orientationchange",o),n.on("dispose",function(){return q.removeEventListener("orientationchange",o)});for(var l=this.options_.playerOptions.tracks||[],c=0;c<l.length;c++)this.player_.addRemoteTextTrack(l[c],!0);this.preselectTrack()})),s}var i=e.prototype;return i.preselectTrack=function(){for(var t={captions:1,subtitles:1},a=this.player_.textTracks(),s=this.player_.cache_.selectedLanguage,o,l,c,d=0;d<a.length;d++){var h=a[d];s&&s.enabled&&s.language&&s.language===h.language&&h.kind in t?h.kind===s.kind?c=h:c||(c=h):s&&!s.enabled?(c=null,o=null,l=null):h.default&&(h.kind==="descriptions"&&!o?o=h:h.kind in t&&!l&&(l=h))}c?c.mode="showing":l?l.mode="showing":o&&(o.mode="showing")},i.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},i.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},i.clearDisplay=function(){typeof q.WebVTT=="function"&&q.WebVTT.processCues(q,[],this.el_)},i.updateDisplay=function(){var t=this.player_.textTracks(),a=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),a){for(var s=[],o=0;o<t.length;++o){var l=t[o];l.mode==="showing"&&s.push(l)}this.updateForTrack(s);return}for(var c=null,d=null,h=t.length;h--;){var p=t[h];p.mode==="showing"&&(p.kind==="descriptions"?c=p:d=p)}d?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(d)):c&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(c))},i.updateDisplayState=function(t){for(var a=this.player_.textTrackSettings.getValues(),s=t.activeCues,o=s.length;o--;){var l=s[o];if(!!l){var c=l.displayState;if(a.color&&(c.firstChild.style.color=a.color),a.textOpacity&&bm(c.firstChild,"color",Tm(a.color||"#fff",a.textOpacity)),a.backgroundColor&&(c.firstChild.style.backgroundColor=a.backgroundColor),a.backgroundOpacity&&bm(c.firstChild,"backgroundColor",Tm(a.backgroundColor||"#000",a.backgroundOpacity)),a.windowColor&&(a.windowOpacity?bm(c,"backgroundColor",Tm(a.windowColor,a.windowOpacity)):c.style.backgroundColor=a.windowColor),a.edgeStyle&&(a.edgeStyle==="dropshadow"?c.firstChild.style.textShadow="2px 2px 3px "+Ci+", 2px 2px 4px "+Ci+", 2px 2px 5px "+Ci:a.edgeStyle==="raised"?c.firstChild.style.textShadow="1px 1px "+Ci+", 2px 2px "+Ci+", 3px 3px "+Ci:a.edgeStyle==="depressed"?c.firstChild.style.textShadow="1px 1px "+Fb+", 0 1px "+Fb+", -1px -1px "+Ci+", 0 -1px "+Ci:a.edgeStyle==="uniform"&&(c.firstChild.style.textShadow="0 0 4px "+Ci+", 0 0 4px "+Ci+", 0 0 4px "+Ci+", 0 0 4px "+Ci)),a.fontPercent&&a.fontPercent!==1){var d=q.parseFloat(c.style.fontSize);c.style.fontSize=d*a.fontPercent+"px",c.style.height="auto",c.style.top="auto"}a.fontFamily&&a.fontFamily!=="default"&&(a.fontFamily==="small-caps"?c.firstChild.style.fontVariant="small-caps":c.firstChild.style.fontFamily=_4[a.fontFamily])}}},i.updateForTrack=function(t){if(Array.isArray(t)||(t=[t]),!(typeof q.WebVTT!="function"||t.every(function(y){return!y.activeCues}))){for(var a=[],s=0;s<t.length;++s)for(var o=t[s],l=0;l<o.activeCues.length;++l)a.push(o.activeCues[l]);q.WebVTT.processCues(q,a,this.el_);for(var c=0;c<t.length;++c){for(var d=t[c],h=0;h<d.activeCues.length;++h){var p=d.activeCues[h].displayState;Gn(p,"vjs-text-track-cue"),Gn(p,"vjs-text-track-cue-"+(d.language?d.language:c)),d.language&&Fo(p,"lang",d.language)}this.player_.textTrackSettings&&this.updateDisplayState(d)}}},e}(Le);Le.registerComponent("TextTrackDisplay",T4);var b4=function(r){Ve(e,r);function e(){return r.apply(this,arguments)||this}var i=e.prototype;return i.createEl=function(){var t=this.player_.isAudio(),a=this.localize(t?"Audio Player":"Video Player"),s=_t("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[a])}),o=r.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return o.appendChild(s),o},e}(Le);Le.registerComponent("LoadingSpinner",b4);var Gi=function(r){Ve(e,r);function e(){return r.apply(this,arguments)||this}var i=e.prototype;return i.createEl=function(t,a,s){a===void 0&&(a={}),s===void 0&&(s={}),t="button",a=qt({className:this.buildCSSClass()},a),s=qt({type:"button"},s);var o=_t(t,a,s);return o.appendChild(_t("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},i.addChild=function(t,a){a===void 0&&(a={});var s=this.constructor.name;return ft.warn("Adding an actionable (user controllable) child to a Button ("+s+") is not supported; use a ClickableComponent instead."),Le.prototype.addChild.call(this,t,a)},i.enable=function(){r.prototype.enable.call(this),this.el_.removeAttribute("disabled")},i.disable=function(){r.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},i.handleKeyDown=function(t){if(it.isEventKey(t,"Space")||it.isEventKey(t,"Enter")){t.stopPropagation();return}r.prototype.handleKeyDown.call(this,t)},e}(lh);Le.registerComponent("Button",Gi);var M1=function(r){Ve(e,r);function e(n,t){var a;return a=r.call(this,n,t)||this,a.mouseused_=!1,a.on("mousedown",function(s){return a.handleMouseDown(s)}),a}var i=e.prototype;return i.buildCSSClass=function(){return"vjs-big-play-button"},i.handleClick=function(t){var a=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY){var s=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;fn(a),this.player_.tech(!0)&&!((Bl||Ul)&&s)&&this.player_.tech(!0).focus();return}var o=this.player_.getChild("controlBar"),l=o&&o.getChild("playToggle");if(!l){this.player_.tech(!0).focus();return}var c=function(){return l.focus()};ll(a)?a.then(c,function(){}):this.setTimeout(c,1)},i.handleKeyDown=function(t){this.mouseused_=!1,r.prototype.handleKeyDown.call(this,t)},i.handleMouseDown=function(t){this.mouseused_=!0},e}(Gi);M1.prototype.controlText_="Play Video";Le.registerComponent("BigPlayButton",M1);var S4=function(r){Ve(e,r);function e(n,t){var a;return a=r.call(this,n,t)||this,a.controlText(t&&t.controlText||a.localize("Close")),a}var i=e.prototype;return i.buildCSSClass=function(){return"vjs-close-button "+r.prototype.buildCSSClass.call(this)},i.handleClick=function(t){this.trigger({type:"close",bubbles:!1})},i.handleKeyDown=function(t){it.isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):r.prototype.handleKeyDown.call(this,t)},e}(Gi);Le.registerComponent("CloseButton",S4);var N1=function(r){Ve(e,r);function e(n,t){var a;return t===void 0&&(t={}),a=r.call(this,n,t)||this,t.replay=t.replay===void 0||t.replay,a.on(n,"play",function(s){return a.handlePlay(s)}),a.on(n,"pause",function(s){return a.handlePause(s)}),t.replay&&a.on(n,"ended",function(s){return a.handleEnded(s)}),a}var i=e.prototype;return i.buildCSSClass=function(){return"vjs-play-control "+r.prototype.buildCSSClass.call(this)},i.handleClick=function(t){this.player_.paused()?fn(this.player_.play()):this.player_.pause()},i.handleSeeked=function(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)},i.handlePlay=function(t){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},i.handlePause=function(t){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},i.handleEnded=function(t){var a=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(s){return a.handleSeeked(s)})},e}(Gi);N1.prototype.controlText_="Play";Le.registerComponent("PlayToggle",N1);var F1=function(e,i){e=e<0?0:e;var n=Math.floor(e%60),t=Math.floor(e/60%60),a=Math.floor(e/3600),s=Math.floor(i/60%60),o=Math.floor(i/3600);return(isNaN(e)||e===1/0)&&(a=t=n="-"),a=a>0||o>0?a+":":"",t=((a||s>=10)&&t<10?"0"+t:t)+":",n=n<10?"0"+n:n,a+t+n},yy=F1;function x4(r){yy=r}function E4(){yy=F1}function Vo(r,e){return e===void 0&&(e=r),yy(r,e)}var Zo=function(r){Ve(e,r);function e(n,t){var a;return a=r.call(this,n,t)||this,a.on(n,["timeupdate","ended"],function(s){return a.updateContent(s)}),a.updateTextNode_(),a}var i=e.prototype;return i.createEl=function(){var t=this.buildCSSClass(),a=r.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control"}),s=_t("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"\xA0"},{role:"presentation"});return a.appendChild(s),this.contentEl_=_t("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"}),a.appendChild(this.contentEl_),a},i.dispose=function(){this.contentEl_=null,this.textNode_=null,r.prototype.dispose.call(this)},i.updateTextNode_=function(t){var a=this;t===void 0&&(t=0),t=Vo(t),this.formattedTime_!==t&&(this.formattedTime_=t,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(!!a.contentEl_){var s=a.textNode_;s&&a.contentEl_.firstChild!==s&&(s=null,ft.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),a.textNode_=je.createTextNode(a.formattedTime_),a.textNode_&&(s?a.contentEl_.replaceChild(a.textNode_,s):a.contentEl_.appendChild(a.textNode_))}}))},i.updateContent=function(t){},e}(Le);Zo.prototype.labelText_="Time";Zo.prototype.controlText_="Time";Le.registerComponent("TimeDisplay",Zo);var _y=function(r){Ve(e,r);function e(){return r.apply(this,arguments)||this}var i=e.prototype;return i.buildCSSClass=function(){return"vjs-current-time"},i.updateContent=function(t){var a;this.player_.ended()?a=this.player_.duration():a=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(a)},e}(Zo);_y.prototype.labelText_="Current Time";_y.prototype.controlText_="Current Time";Le.registerComponent("CurrentTimeDisplay",_y);var Ty=function(r){Ve(e,r);function e(n,t){var a;a=r.call(this,n,t)||this;var s=function(l){return a.updateContent(l)};return a.on(n,"durationchange",s),a.on(n,"loadstart",s),a.on(n,"loadedmetadata",s),a}var i=e.prototype;return i.buildCSSClass=function(){return"vjs-duration"},i.updateContent=function(t){var a=this.player_.duration();this.updateTextNode_(a)},e}(Zo);Ty.prototype.labelText_="Duration";Ty.prototype.controlText_="Duration";Le.registerComponent("DurationDisplay",Ty);var C4=function(r){Ve(e,r);function e(){return r.apply(this,arguments)||this}var i=e.prototype;return i.createEl=function(){var t=r.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),a=r.prototype.createEl.call(this,"div"),s=r.prototype.createEl.call(this,"span",{textContent:"/"});return a.appendChild(s),t.appendChild(a),t},e}(Le);Le.registerComponent("TimeDivider",C4);var by=function(r){Ve(e,r);function e(n,t){var a;return a=r.call(this,n,t)||this,a.on(n,"durationchange",function(s){return a.updateContent(s)}),a}var i=e.prototype;return i.buildCSSClass=function(){return"vjs-remaining-time"},i.createEl=function(){var t=r.prototype.createEl.call(this);return this.options_.displayNegative!==!1&&t.insertBefore(_t("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t},i.updateContent=function(t){if(typeof this.player_.duration()=="number"){var a;this.player_.ended()?a=0:this.player_.remainingTimeDisplay?a=this.player_.remainingTimeDisplay():a=this.player_.remainingTime(),this.updateTextNode_(a)}},e}(Zo);by.prototype.labelText_="Remaining Time";by.prototype.controlText_="Remaining Time";Le.registerComponent("RemainingTimeDisplay",by);var R4=function(r){Ve(e,r);function e(n,t){var a;return a=r.call(this,n,t)||this,a.updateShowing(),a.on(a.player(),"durationchange",function(s){return a.updateShowing(s)}),a}var i=e.prototype;return i.createEl=function(){var t=r.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=_t("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(_t("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"\xA0"})),this.contentEl_.appendChild(je.createTextNode(this.localize("LIVE"))),t.appendChild(this.contentEl_),t},i.dispose=function(){this.contentEl_=null,r.prototype.dispose.call(this)},i.updateShowing=function(t){this.player().duration()===1/0?this.show():this.hide()},e}(Le);Le.registerComponent("LiveDisplay",R4);var U1=function(r){Ve(e,r);function e(n,t){var a;return a=r.call(this,n,t)||this,a.updateLiveEdgeStatus(),a.player_.liveTracker&&(a.updateLiveEdgeStatusHandler_=function(s){return a.updateLiveEdgeStatus(s)},a.on(a.player_.liveTracker,"liveedgechange",a.updateLiveEdgeStatusHandler_)),a}var i=e.prototype;return i.createEl=function(){var t=r.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=_t("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},i.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},i.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},i.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,r.prototype.dispose.call(this)},e}(Gi);U1.prototype.controlText_="Seek to live, currently playing live";Le.registerComponent("SeekToLive",U1);var ch=function(e,i,n){return e=Number(e),Math.min(n,Math.max(i,isNaN(e)?i:e))},Sy=function(r){Ve(e,r);function e(n,t){var a;return a=r.call(this,n,t)||this,a.handleMouseDown_=function(s){return a.handleMouseDown(s)},a.handleMouseUp_=function(s){return a.handleMouseUp(s)},a.handleKeyDown_=function(s){return a.handleKeyDown(s)},a.handleClick_=function(s){return a.handleClick(s)},a.handleMouseMove_=function(s){return a.handleMouseMove(s)},a.update_=function(s){return a.update(s)},a.bar=a.getChild(a.options_.barName),a.vertical(!!a.options_.vertical),a.enable(),a}var i=e.prototype;return i.enabled=function(){return this.enabled_},i.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},i.disable=function(){if(!!this.enabled()){var t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},i.createEl=function(t,a,s){return a===void 0&&(a={}),s===void 0&&(s={}),a.className=a.className+" vjs-slider",a=qt({tabIndex:0},a),s=qt({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},s),r.prototype.createEl.call(this,t,a,s)},i.handleMouseDown=function(t){var a=this.bar.el_.ownerDocument;t.type==="mousedown"&&t.preventDefault(),t.type==="touchstart"&&!ea&&t.preventDefault(),h1(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(a,"mousemove",this.handleMouseMove_),this.on(a,"mouseup",this.handleMouseUp_),this.on(a,"touchmove",this.handleMouseMove_),this.on(a,"touchend",this.handleMouseUp_),this.handleMouseMove(t,!0)},i.handleMouseMove=function(t){},i.handleMouseUp=function(){var t=this.bar.el_.ownerDocument;p1(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()},i.update=function(){var t=this;if(!(!this.el_||!this.bar)){var a=this.getProgress();return a===this.progress_||(this.progress_=a,this.requestNamedAnimationFrame("Slider#update",function(){var s=t.vertical()?"height":"width";t.bar.el().style[s]=(a*100).toFixed(2)+"%"})),a}},i.getProgress=function(){return Number(ch(this.getPercent(),0,1).toFixed(4))},i.calculateDistance=function(t){var a=nh(this.el_,t);return this.vertical()?a.y:a.x},i.handleKeyDown=function(t){it.isEventKey(t,"Left")||it.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):it.isEventKey(t,"Right")||it.isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):r.prototype.handleKeyDown.call(this,t)},i.handleClick=function(t){t.stopPropagation(),t.preventDefault()},i.vertical=function(t){if(t===void 0)return this.vertical_||!1;this.vertical_=!!t,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},e}(Le);Le.registerComponent("Slider",Sy);var Sm=function(e,i){return ch(e/i*100,0,100).toFixed(2)+"%"},w4=function(r){Ve(e,r);function e(n,t){var a;return a=r.call(this,n,t)||this,a.partEls_=[],a.on(n,"progress",function(s){return a.update(s)}),a}var i=e.prototype;return i.createEl=function(){var t=r.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),a=_t("span",{className:"vjs-control-text"}),s=_t("span",{textContent:this.localize("Loaded")}),o=je.createTextNode(": ");return this.percentageEl_=_t("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(a),a.appendChild(s),a.appendChild(o),a.appendChild(this.percentageEl_),t},i.dispose=function(){this.partEls_=null,this.percentageEl_=null,r.prototype.dispose.call(this)},i.update=function(t){var a=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var s=a.player_.liveTracker,o=a.player_.buffered(),l=s&&s.isLive()?s.seekableEnd():a.player_.duration(),c=a.player_.bufferedEnd(),d=a.partEls_,h=Sm(c,l);a.percent_!==h&&(a.el_.style.width=h,Os(a.percentageEl_,h),a.percent_=h);for(var p=0;p<o.length;p++){var y=o.start(p),S=o.end(p),C=d[p];C||(C=a.el_.appendChild(_t()),d[p]=C),!(C.dataset.start===y&&C.dataset.end===S)&&(C.dataset.start=y,C.dataset.end=S,C.style.left=Sm(y,c),C.style.width=Sm(S-y,c))}for(var x=d.length;x>o.length;x--)a.el_.removeChild(d[x-1]);d.length=o.length})},e}(Le);Le.registerComponent("LoadProgressBar",w4);var A4=function(r){Ve(e,r);function e(n,t){var a;return a=r.call(this,n,t)||this,a.update=Qn(Nt(rt(a),a.update),qi),a}var i=e.prototype;return i.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},i.update=function(t,a,s){var o=wl(this.el_),l=Uo(this.player_.el()),c=t.width*a;if(!(!l||!o)){var d=t.left-l.left+c,h=t.width-c+(l.right-t.right),p=o.width/2;d<p?p+=p-d:h<p&&(p=h),p<0?p=0:p>o.width&&(p=o.width),p=Math.round(p),this.el_.style.right="-"+p+"px",this.write(s)}},i.write=function(t){Os(this.el_,t)},i.updateTime=function(t,a,s,o){var l=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var c,d=l.player_.duration();if(l.player_.liveTracker&&l.player_.liveTracker.isLive()){var h=l.player_.liveTracker.liveWindow(),p=h-a*h;c=(p<1?"":"-")+Vo(p,h)}else c=Vo(s,d);l.update(t,a,c),o&&o()})},e}(Le);Le.registerComponent("TimeTooltip",A4);var xy=function(r){Ve(e,r);function e(n,t){var a;return a=r.call(this,n,t)||this,a.update=Qn(Nt(rt(a),a.update),qi),a}var i=e.prototype;return i.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},i.update=function(t,a){var s=this.getChild("timeTooltip");if(!!s){var o=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();s.updateTime(t,a,o)}},e}(Le);xy.prototype.options_={children:[]};!zr&&!Zn&&xy.prototype.options_.children.push("timeTooltip");Le.registerComponent("PlayProgressBar",xy);var B1=function(r){Ve(e,r);function e(n,t){var a;return a=r.call(this,n,t)||this,a.update=Qn(Nt(rt(a),a.update),qi),a}var i=e.prototype;return i.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},i.update=function(t,a){var s=this,o=a*this.player_.duration();this.getChild("timeTooltip").updateTime(t,a,o,function(){s.el_.style.left=t.width*a+"px"})},e}(Le);B1.prototype.options_={children:["timeTooltip"]};Le.registerComponent("MouseTimeDisplay",B1);var hf=5,Ub=12,Ey=function(r){Ve(e,r);function e(n,t){var a;return a=r.call(this,n,t)||this,a.setEventHandlers_(),a}var i=e.prototype;return i.setEventHandlers_=function(){var t=this;this.update_=Nt(this,this.update),this.update=Qn(this.update_,qi),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(a){return t.enableInterval_(a)},this.disableIntervalHandler_=function(a){return t.disableInterval_(a)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in je&&"visibilityState"in je&&this.on(je,"visibilitychange",this.toggleVisibility_)},i.toggleVisibility_=function(t){je.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(t)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())},i.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,qi))},i.disableInterval_=function(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&t&&t.type!=="ended"||!this.updateInterval||(this.clearInterval(this.updateInterval),this.updateInterval=null)},i.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},i.update=function(t){var a=this;if(je.visibilityState!=="hidden"){var s=r.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var o=a.player_.ended()?a.player_.duration():a.getCurrentTime_(),l=a.player_.liveTracker,c=a.player_.duration();l&&l.isLive()&&(c=a.player_.liveTracker.liveCurrentTime()),a.percent_!==s&&(a.el_.setAttribute("aria-valuenow",(s*100).toFixed(2)),a.percent_=s),(a.currentTime_!==o||a.duration_!==c)&&(a.el_.setAttribute("aria-valuetext",a.localize("progress bar timing: currentTime={1} duration={2}",[Vo(o,c),Vo(c,c)],"{1} of {2}")),a.currentTime_=o,a.duration_=c),a.bar&&a.bar.update(Uo(a.el()),a.getProgress())}),s}},i.userSeek_=function(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(t)},i.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},i.getPercent=function(){var t=this.getCurrentTime_(),a,s=this.player_.liveTracker;return s&&s.isLive()?(a=(t-s.seekableStart())/s.liveWindow(),s.atLiveEdge()&&(a=1)):a=t/this.player_.duration(),a},i.handleMouseDown=function(t){!Al(t)||(t.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),r.prototype.handleMouseDown.call(this,t))},i.handleMouseMove=function(t,a){if(a===void 0&&(a=!1),!!Al(t)){!a&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);var s,o=this.calculateDistance(t),l=this.player_.liveTracker;if(!l||!l.isLive())s=o*this.player_.duration(),s===this.player_.duration()&&(s=s-.1);else{if(o>=.99){l.seekToLiveEdge();return}var c=l.seekableStart(),d=l.liveCurrentTime();if(s=c+o*l.liveWindow(),s>=d&&(s=d),s<=c&&(s=c+.1),s===1/0)return}this.userSeek_(s)}},i.enable=function(){r.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");!t||t.show()},i.disable=function(){r.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");!t||t.hide()},i.handleMouseUp=function(t){r.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?fn(this.player_.play()):this.update_()},i.stepForward=function(){this.userSeek_(this.player_.currentTime()+hf)},i.stepBack=function(){this.userSeek_(this.player_.currentTime()-hf)},i.handleAction=function(t){this.player_.paused()?this.player_.play():this.player_.pause()},i.handleKeyDown=function(t){var a=this.player_.liveTracker;if(it.isEventKey(t,"Space")||it.isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(it.isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.userSeek_(0);else if(it.isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),a&&a.isLive()?this.userSeek_(a.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(it(t))){t.preventDefault(),t.stopPropagation();var s=(it.codes[it(t)]-it.codes[0])*10/100;a&&a.isLive()?this.userSeek_(a.seekableStart()+a.liveWindow()*s):this.userSeek_(this.player_.duration()*s)}else it.isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-hf*Ub)):it.isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+hf*Ub)):r.prototype.handleKeyDown.call(this,t)},i.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in je&&"visibilityState"in je&&this.off(je,"visibilitychange",this.toggleVisibility_),r.prototype.dispose.call(this)},e}(Sy);Ey.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!zr&&!Zn&&Ey.prototype.options_.children.splice(1,0,"mouseTimeDisplay");Le.registerComponent("SeekBar",Ey);var j1=function(r){Ve(e,r);function e(n,t){var a;return a=r.call(this,n,t)||this,a.handleMouseMove=Qn(Nt(rt(a),a.handleMouseMove),qi),a.throttledHandleMouseSeek=Qn(Nt(rt(a),a.handleMouseSeek),qi),a.handleMouseUpHandler_=function(s){return a.handleMouseUp(s)},a.handleMouseDownHandler_=function(s){return a.handleMouseDown(s)},a.enable(),a}var i=e.prototype;return i.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},i.handleMouseMove=function(t){var a=this.getChild("seekBar");if(!!a){var s=a.getChild("playProgressBar"),o=a.getChild("mouseTimeDisplay");if(!(!s&&!o)){var l=a.el(),c=wl(l),d=nh(l,t).x;d=ch(d,0,1),o&&o.update(c,d),s&&s.update(c,a.getProgress())}}},i.handleMouseSeek=function(t){var a=this.getChild("seekBar");a&&a.handleMouseMove(t)},i.enabled=function(){return this.enabled_},i.disable=function(){if(this.children().forEach(function(a){return a.disable&&a.disable()}),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var t=this.getChild("seekBar");this.player_.scrubbing(!1),t.videoWasPlaying&&fn(this.player_.play())}},i.enable=function(){this.children().forEach(function(t){return t.enable&&t.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},i.removeListenersAddedOnMousedownAndTouchstart=function(){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)},i.handleMouseDown=function(t){var a=this.el_.ownerDocument,s=this.getChild("seekBar");s&&s.handleMouseDown(t),this.on(a,"mousemove",this.throttledHandleMouseSeek),this.on(a,"touchmove",this.throttledHandleMouseSeek),this.on(a,"mouseup",this.handleMouseUpHandler_),this.on(a,"touchend",this.handleMouseUpHandler_)},i.handleMouseUp=function(t){var a=this.getChild("seekBar");a&&a.handleMouseUp(t),this.removeListenersAddedOnMousedownAndTouchstart()},e}(Le);j1.prototype.options_={children:["seekBar"]};Le.registerComponent("ProgressControl",j1);var V1=function(r){Ve(e,r);function e(n,t){var a;return a=r.call(this,n,t)||this,a.on(n,["enterpictureinpicture","leavepictureinpicture"],function(s){return a.handlePictureInPictureChange(s)}),a.on(n,["disablepictureinpicturechanged","loadedmetadata"],function(s){return a.handlePictureInPictureEnabledChange(s)}),a.on(n,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){var s=n.currentType().substring(0,5)==="audio";s||n.audioPosterMode()||n.audioOnlyMode()?(n.isInPictureInPicture()&&n.exitPictureInPicture(),a.hide()):a.show()}),a.disable(),a}var i=e.prototype;return i.buildCSSClass=function(){return"vjs-picture-in-picture-control "+r.prototype.buildCSSClass.call(this)},i.handlePictureInPictureEnabledChange=function(){je.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1?this.enable():this.disable()},i.handlePictureInPictureChange=function(t){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},i.handleClick=function(t){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},e}(Gi);V1.prototype.controlText_="Picture-in-Picture";Le.registerComponent("PictureInPictureToggle",V1);var H1=function(r){Ve(e,r);function e(n,t){var a;return a=r.call(this,n,t)||this,a.on(n,"fullscreenchange",function(s){return a.handleFullscreenChange(s)}),je[n.fsApi_.fullscreenEnabled]===!1&&a.disable(),a}var i=e.prototype;return i.buildCSSClass=function(){return"vjs-fullscreen-control "+r.prototype.buildCSSClass.call(this)},i.handleFullscreenChange=function(t){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},i.handleClick=function(t){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e}(Gi);H1.prototype.controlText_="Fullscreen";Le.registerComponent("FullscreenToggle",H1);var P4=function(e,i){i.tech_&&!i.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(i,"loadstart",function(){i.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},O4=function(r){Ve(e,r);function e(){return r.apply(this,arguments)||this}var i=e.prototype;return i.createEl=function(){var t=r.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return t.appendChild(r.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),t},e}(Le);Le.registerComponent("VolumeLevel",O4);var I4=function(r){Ve(e,r);function e(n,t){var a;return a=r.call(this,n,t)||this,a.update=Qn(Nt(rt(a),a.update),qi),a}var i=e.prototype;return i.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},i.update=function(t,a,s,o){if(!s){var l=Uo(this.el_),c=Uo(this.player_.el()),d=t.width*a;if(!c||!l)return;var h=t.left-c.left+d,p=t.width-d+(c.right-t.right),y=l.width/2;h<y?y+=y-h:p<y&&(y=p),y<0?y=0:y>l.width&&(y=l.width),this.el_.style.right="-"+y+"px"}this.write(o+"%")},i.write=function(t){Os(this.el_,t)},i.updateVolume=function(t,a,s,o,l){var c=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){c.update(t,a,s,o.toFixed(0)),l&&l()})},e}(Le);Le.registerComponent("VolumeLevelTooltip",I4);var W1=function(r){Ve(e,r);function e(n,t){var a;return a=r.call(this,n,t)||this,a.update=Qn(Nt(rt(a),a.update),qi),a}var i=e.prototype;return i.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},i.update=function(t,a,s){var o=this,l=100*a;this.getChild("volumeLevelTooltip").updateVolume(t,a,s,l,function(){s?o.el_.style.bottom=t.height*a+"px":o.el_.style.left=t.width*a+"px"})},e}(Le);W1.prototype.options_={children:["volumeLevelTooltip"]};Le.registerComponent("MouseVolumeLevelDisplay",W1);var fh=function(r){Ve(e,r);function e(n,t){var a;return a=r.call(this,n,t)||this,a.on("slideractive",function(s){return a.updateLastVolume_(s)}),a.on(n,"volumechange",function(s){return a.updateARIAAttributes(s)}),n.ready(function(){return a.updateARIAAttributes()}),a}var i=e.prototype;return i.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},i.handleMouseDown=function(t){!Al(t)||r.prototype.handleMouseDown.call(this,t)},i.handleMouseMove=function(t){var a=this.getChild("mouseVolumeLevelDisplay");if(a){var s=this.el(),o=Uo(s),l=this.vertical(),c=nh(s,t);c=l?c.y:c.x,c=ch(c,0,1),a.update(o,c,l)}!Al(t)||(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))},i.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},i.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},i.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},i.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},i.updateARIAAttributes=function(t){var a=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",a),this.el_.setAttribute("aria-valuetext",a+"%")},i.volumeAsPercentage_=function(){return Math.round(this.player_.volume()*100)},i.updateLastVolume_=function(){var t=this,a=this.player_.volume();this.one("sliderinactive",function(){t.player_.volume()===0&&t.player_.lastVolume_(a)})},e}(Sy);fh.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!zr&&!Zn&&fh.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");fh.prototype.playerEvent="volumechange";Le.registerComponent("VolumeBar",fh);var $1=function(r){Ve(e,r);function e(n,t){var a;return t===void 0&&(t={}),t.vertical=t.vertical||!1,(typeof t.volumeBar>"u"||Cl(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),a=r.call(this,n,t)||this,P4(rt(a),n),a.throttledHandleMouseMove=Qn(Nt(rt(a),a.handleMouseMove),qi),a.handleMouseUpHandler_=function(s){return a.handleMouseUp(s)},a.on("mousedown",function(s){return a.handleMouseDown(s)}),a.on("touchstart",function(s){return a.handleMouseDown(s)}),a.on("mousemove",function(s){return a.handleMouseMove(s)}),a.on(a.volumeBar,["focus","slideractive"],function(){a.volumeBar.addClass("vjs-slider-active"),a.addClass("vjs-slider-active"),a.trigger("slideractive")}),a.on(a.volumeBar,["blur","sliderinactive"],function(){a.volumeBar.removeClass("vjs-slider-active"),a.removeClass("vjs-slider-active"),a.trigger("sliderinactive")}),a}var i=e.prototype;return i.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),r.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},i.handleMouseDown=function(t){var a=this.el_.ownerDocument;this.on(a,"mousemove",this.throttledHandleMouseMove),this.on(a,"touchmove",this.throttledHandleMouseMove),this.on(a,"mouseup",this.handleMouseUpHandler_),this.on(a,"touchend",this.handleMouseUpHandler_)},i.handleMouseUp=function(t){var a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseMove),this.off(a,"touchmove",this.throttledHandleMouseMove),this.off(a,"mouseup",this.handleMouseUpHandler_),this.off(a,"touchend",this.handleMouseUpHandler_)},i.handleMouseMove=function(t){this.volumeBar.handleMouseMove(t)},e}(Le);$1.prototype.options_={children:["volumeBar"]};Le.registerComponent("VolumeControl",$1);var D4=function(e,i){i.tech_&&!i.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(i,"loadstart",function(){i.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},G1=function(r){Ve(e,r);function e(n,t){var a;return a=r.call(this,n,t)||this,D4(rt(a),n),a.on(n,["loadstart","volumechange"],function(s){return a.update(s)}),a}var i=e.prototype;return i.buildCSSClass=function(){return"vjs-mute-control "+r.prototype.buildCSSClass.call(this)},i.handleClick=function(t){var a=this.player_.volume(),s=this.player_.lastVolume_();if(a===0){var o=s<.1?.1:s;this.player_.volume(o),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},i.update=function(t){this.updateIcon_(),this.updateControlText_()},i.updateIcon_=function(){var t=this.player_.volume(),a=3;zr&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),t===0||this.player_.muted()?a=0:t<.33?a=1:t<.67&&(a=2);for(var s=0;s<4;s++)jl(this.el_,"vjs-vol-"+s);Gn(this.el_,"vjs-vol-"+a)},i.updateControlText_=function(){var t=this.player_.muted()||this.player_.volume()===0,a=t?"Unmute":"Mute";this.controlText()!==a&&this.controlText(a)},e}(Gi);G1.prototype.controlText_="Mute";Le.registerComponent("MuteToggle",G1);var z1=function(r){Ve(e,r);function e(n,t){var a;return t===void 0&&(t={}),typeof t.inline<"u"?t.inline=t.inline:t.inline=!0,(typeof t.volumeControl>"u"||Cl(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),a=r.call(this,n,t)||this,a.handleKeyPressHandler_=function(s){return a.handleKeyPress(s)},a.on(n,["loadstart"],function(s){return a.volumePanelState_(s)}),a.on(a.muteToggle,"keyup",function(s){return a.handleKeyPress(s)}),a.on(a.volumeControl,"keyup",function(s){return a.handleVolumeControlKeyUp(s)}),a.on("keydown",function(s){return a.handleKeyPress(s)}),a.on("mouseover",function(s){return a.handleMouseOver(s)}),a.on("mouseout",function(s){return a.handleMouseOut(s)}),a.on(a.volumeControl,["slideractive"],a.sliderActive_),a.on(a.volumeControl,["sliderinactive"],a.sliderInactive_),a}var i=e.prototype;return i.sliderActive_=function(){this.addClass("vjs-slider-active")},i.sliderInactive_=function(){this.removeClass("vjs-slider-active")},i.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},i.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),r.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},i.dispose=function(){this.handleMouseOut(),r.prototype.dispose.call(this)},i.handleVolumeControlKeyUp=function(t){it.isEventKey(t,"Esc")&&this.muteToggle.focus()},i.handleMouseOver=function(t){this.addClass("vjs-hover"),vi(je,"keyup",this.handleKeyPressHandler_)},i.handleMouseOut=function(t){this.removeClass("vjs-hover"),Pr(je,"keyup",this.handleKeyPressHandler_)},i.handleKeyPress=function(t){it.isEventKey(t,"Esc")&&this.handleMouseOut()},e}(Le);z1.prototype.options_={children:["muteToggle","volumeControl"]};Le.registerComponent("VolumePanel",z1);var q1=function(r){Ve(e,r);function e(n,t){var a;return a=r.call(this,n,t)||this,t&&(a.menuButton_=t.menuButton),a.focusedChild_=-1,a.on("keydown",function(s){return a.handleKeyDown(s)}),a.boundHandleBlur_=function(s){return a.handleBlur(s)},a.boundHandleTapClick_=function(s){return a.handleTapClick(s)},a}var i=e.prototype;return i.addEventListenerForItem=function(t){t instanceof Le&&(this.on(t,"blur",this.boundHandleBlur_),this.on(t,["tap","click"],this.boundHandleTapClick_))},i.removeEventListenerForItem=function(t){t instanceof Le&&(this.off(t,"blur",this.boundHandleBlur_),this.off(t,["tap","click"],this.boundHandleTapClick_))},i.removeChild=function(t){typeof t=="string"&&(t=this.getChild(t)),this.removeEventListenerForItem(t),r.prototype.removeChild.call(this,t)},i.addItem=function(t){var a=this.addChild(t);a&&this.addEventListenerForItem(a)},i.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=_t(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var a=r.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return a.appendChild(this.contentEl_),vi(a,"click",function(s){s.preventDefault(),s.stopImmediatePropagation()}),a},i.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,r.prototype.dispose.call(this)},i.handleBlur=function(t){var a=t.relatedTarget||je.activeElement;if(!this.children().some(function(o){return o.el()===a})){var s=this.menuButton_;s&&s.buttonPressed_&&a!==s.el().firstChild&&s.unpressButton()}},i.handleTapClick=function(t){if(this.menuButton_){this.menuButton_.unpressButton();var a=this.children();if(!Array.isArray(a))return;var s=a.filter(function(o){return o.el()===t.target})[0];if(!s)return;s.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}},i.handleKeyDown=function(t){it.isEventKey(t,"Left")||it.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):(it.isEventKey(t,"Right")||it.isEventKey(t,"Up"))&&(t.preventDefault(),t.stopPropagation(),this.stepBack())},i.stepForward=function(){var t=0;this.focusedChild_!==void 0&&(t=this.focusedChild_+1),this.focus(t)},i.stepBack=function(){var t=0;this.focusedChild_!==void 0&&(t=this.focusedChild_-1),this.focus(t)},i.focus=function(t){t===void 0&&(t=0);var a=this.children().slice(),s=a.length&&a[0].hasClass("vjs-menu-title");s&&a.shift(),a.length>0&&(t<0?t=0:t>=a.length&&(t=a.length-1),this.focusedChild_=t,a[t].el_.focus())},e}(Le);Le.registerComponent("Menu",q1);var Cy=function(r){Ve(e,r);function e(n,t){var a;t===void 0&&(t={}),a=r.call(this,n,t)||this,a.menuButton_=new Gi(n,t),a.menuButton_.controlText(a.controlText_),a.menuButton_.el_.setAttribute("aria-haspopup","true");var s=Gi.prototype.buildCSSClass();a.menuButton_.el_.className=a.buildCSSClass()+" "+s,a.menuButton_.removeClass("vjs-control"),a.addChild(a.menuButton_),a.update(),a.enabled_=!0;var o=function(c){return a.handleClick(c)};return a.handleMenuKeyUp_=function(l){return a.handleMenuKeyUp(l)},a.on(a.menuButton_,"tap",o),a.on(a.menuButton_,"click",o),a.on(a.menuButton_,"keydown",function(l){return a.handleKeyDown(l)}),a.on(a.menuButton_,"mouseenter",function(){a.addClass("vjs-hover"),a.menu.show(),vi(je,"keyup",a.handleMenuKeyUp_)}),a.on("mouseleave",function(l){return a.handleMouseLeave(l)}),a.on("keydown",function(l){return a.handleSubmenuKeyDown(l)}),a}var i=e.prototype;return i.update=function(){var t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},i.createMenu=function(){var t=new q1(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var a=_t("li",{className:"vjs-menu-title",textContent:Zt(this.options_.title),tabIndex:-1}),s=new Le(this.player_,{el:a});t.addItem(s)}if(this.items=this.createItems(),this.items)for(var o=0;o<this.items.length;o++)t.addItem(this.items[o]);return t},i.createItems=function(){},i.createEl=function(){return r.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},i.buildWrapperCSSClass=function(){var t="vjs-menu-button";this.options_.inline===!0?t+="-inline":t+="-popup";var a=Gi.prototype.buildCSSClass();return"vjs-menu-button "+t+" "+a+" "+r.prototype.buildCSSClass.call(this)},i.buildCSSClass=function(){var t="vjs-menu-button";return this.options_.inline===!0?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+r.prototype.buildCSSClass.call(this)},i.controlText=function(t,a){return a===void 0&&(a=this.menuButton_.el()),this.menuButton_.controlText(t,a)},i.dispose=function(){this.handleMouseLeave(),r.prototype.dispose.call(this)},i.handleClick=function(t){this.buttonPressed_?this.unpressButton():this.pressButton()},i.handleMouseLeave=function(t){this.removeClass("vjs-hover"),Pr(je,"keyup",this.handleMenuKeyUp_)},i.focus=function(){this.menuButton_.focus()},i.blur=function(){this.menuButton_.blur()},i.handleKeyDown=function(t){it.isEventKey(t,"Esc")||it.isEventKey(t,"Tab")?(this.buttonPressed_&&this.unpressButton(),it.isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus())):(it.isEventKey(t,"Up")||it.isEventKey(t,"Down"))&&(this.buttonPressed_||(t.preventDefault(),this.pressButton()))},i.handleMenuKeyUp=function(t){(it.isEventKey(t,"Esc")||it.isEventKey(t,"Tab"))&&this.removeClass("vjs-hover")},i.handleSubmenuKeyPress=function(t){this.handleSubmenuKeyDown(t)},i.handleSubmenuKeyDown=function(t){(it.isEventKey(t,"Esc")||it.isEventKey(t,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),it.isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus()))},i.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),zr&&u1())return;this.menu.focus()}},i.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},i.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},i.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e}(Le);Le.registerComponent("MenuButton",Cy);var Ry=function(r){Ve(e,r);function e(i,n){var t,a=n.tracks;if(t=r.call(this,i,n)||this,t.items.length<=1&&t.hide(),!a)return rt(t);var s=Nt(rt(t),t.update);return a.addEventListener("removetrack",s),a.addEventListener("addtrack",s),a.addEventListener("labelchange",s),t.player_.on("ready",s),t.player_.on("dispose",function(){a.removeEventListener("removetrack",s),a.removeEventListener("addtrack",s),a.removeEventListener("labelchange",s)}),t}return e}(Cy);Le.registerComponent("TrackButton",Ry);var k4=["Tab","Esc","Up","Down","Right","Left"],Hl=function(r){Ve(e,r);function e(n,t){var a;return a=r.call(this,n,t)||this,a.selectable=t.selectable,a.isSelected_=t.selected||!1,a.multiSelectable=t.multiSelectable,a.selected(a.isSelected_),a.selectable?a.multiSelectable?a.el_.setAttribute("role","menuitemcheckbox"):a.el_.setAttribute("role","menuitemradio"):a.el_.setAttribute("role","menuitem"),a}var i=e.prototype;return i.createEl=function(t,a,s){this.nonIconControl=!0;var o=r.prototype.createEl.call(this,"li",qt({className:"vjs-menu-item",tabIndex:-1},a),s);return o.replaceChild(_t("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),o.querySelector(".vjs-icon-placeholder")),o},i.handleKeyDown=function(t){k4.some(function(a){return it.isEventKey(t,a)})||r.prototype.handleKeyDown.call(this,t)},i.handleClick=function(t){this.selected(!0)},i.selected=function(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e}(lh);Le.registerComponent("MenuItem",Hl);var Wl=function(r){Ve(e,r);function e(n,t){var a,s=t.track,o=n.textTracks();t.label=s.label||s.language||"Unknown",t.selected=s.mode==="showing",a=r.call(this,n,t)||this,a.track=s,a.kinds=(t.kinds||[t.kind||a.track.kind]).filter(Boolean);var l=function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];a.handleTracksChange.apply(rt(a),y)},c=function(){for(var p=arguments.length,y=new Array(p),S=0;S<p;S++)y[S]=arguments[S];a.handleSelectedLanguageChange.apply(rt(a),y)};if(n.on(["loadstart","texttrackchange"],l),o.addEventListener("change",l),o.addEventListener("selectedlanguagechange",c),a.on("dispose",function(){n.off(["loadstart","texttrackchange"],l),o.removeEventListener("change",l),o.removeEventListener("selectedlanguagechange",c)}),o.onchange===void 0){var d;a.on(["tap","click"],function(){if(typeof q.Event!="object")try{d=new q.Event("change")}catch{}d||(d=je.createEvent("Event"),d.initEvent("change",!0,!0)),o.dispatchEvent(d)})}return a.handleTracksChange(),a}var i=e.prototype;return i.handleClick=function(t){var a=this.track,s=this.player_.textTracks();if(r.prototype.handleClick.call(this,t),!!s)for(var o=0;o<s.length;o++){var l=s[o];this.kinds.indexOf(l.kind)!==-1&&(l===a?l.mode!=="showing"&&(l.mode="showing"):l.mode!=="disabled"&&(l.mode="disabled"))}},i.handleTracksChange=function(t){var a=this.track.mode==="showing";a!==this.isSelected_&&this.selected(a)},i.handleSelectedLanguageChange=function(t){if(this.track.mode==="showing"){var a=this.player_.cache_.selectedLanguage;if(a&&a.enabled&&a.language===this.track.language&&a.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},i.dispose=function(){this.track=null,r.prototype.dispose.call(this)},e}(Hl);Le.registerComponent("TextTrackMenuItem",Wl);var K1=function(r){Ve(e,r);function e(n,t){return t.track={player:n,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,r.call(this,n,t)||this}var i=e.prototype;return i.handleTracksChange=function(t){for(var a=this.player().textTracks(),s=!0,o=0,l=a.length;o<l;o++){var c=a[o];if(this.options_.kinds.indexOf(c.kind)>-1&&c.mode==="showing"){s=!1;break}}s!==this.isSelected_&&this.selected(s)},i.handleSelectedLanguageChange=function(t){for(var a=this.player().textTracks(),s=!0,o=0,l=a.length;o<l;o++){var c=a[o];if(["captions","descriptions","subtitles"].indexOf(c.kind)>-1&&c.mode==="showing"){s=!1;break}}s&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(Wl);Le.registerComponent("OffTextTrackMenuItem",K1);var eu=function(r){Ve(e,r);function e(n,t){return t===void 0&&(t={}),t.tracks=n.textTracks(),r.call(this,n,t)||this}var i=e.prototype;return i.createItems=function(t,a){t===void 0&&(t=[]),a===void 0&&(a=Wl);var s;this.label_&&(s=this.label_+" off"),t.push(new K1(this.player_,{kinds:this.kinds_,kind:this.kind_,label:s})),this.hideThreshold_+=1;var o=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var l=0;l<o.length;l++){var c=o[l];if(this.kinds_.indexOf(c.kind)>-1){var d=new a(this.player_,{track:c,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});d.addClass("vjs-"+c.kind+"-menu-item"),t.push(d)}}return t},e}(Ry);Le.registerComponent("TextTrackButton",eu);var Y1=function(r){Ve(e,r);function e(n,t){var a,s=t.track,o=t.cue,l=n.currentTime();return t.selectable=!0,t.multiSelectable=!1,t.label=o.text,t.selected=o.startTime<=l&&l<o.endTime,a=r.call(this,n,t)||this,a.track=s,a.cue=o,a}var i=e.prototype;return i.handleClick=function(t){r.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},e}(Hl);Le.registerComponent("ChaptersTrackMenuItem",Y1);var wy=function(r){Ve(e,r);function e(n,t,a){var s;return s=r.call(this,n,t,a)||this,s.selectCurrentItem_=function(){s.items.forEach(function(o){o.selected(s.track_.activeCues[0]===o.cue)})},s}var i=e.prototype;return i.buildCSSClass=function(){return"vjs-chapters-button "+r.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-chapters-button "+r.prototype.buildWrapperCSSClass.call(this)},i.update=function(t){if(!(t&&t.track&&t.track.kind!=="chapters")){var a=this.findChaptersTrack();a!==this.track_?(this.setTrack(a),r.prototype.update.call(this)):(!this.items||a&&a.cues&&a.cues.length!==this.items.length)&&r.prototype.update.call(this)}},i.setTrack=function(t){if(this.track_!==t){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);a&&a.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=t,this.track_){this.track_.mode="hidden";var s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},i.findChaptersTrack=function(){for(var t=this.player_.textTracks()||[],a=t.length-1;a>=0;a--){var s=t[a];if(s.kind===this.kind_)return s}},i.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Zt(this.kind_))},i.createMenu=function(){return this.options_.title=this.getMenuCaption(),r.prototype.createMenu.call(this)},i.createItems=function(){var t=[];if(!this.track_)return t;var a=this.track_.cues;if(!a)return t;for(var s=0,o=a.length;s<o;s++){var l=a[s],c=new Y1(this.player_,{track:this.track_,cue:l});t.push(c)}return t},e}(eu);wy.prototype.kind_="chapters";wy.prototype.controlText_="Chapters";Le.registerComponent("ChaptersButton",wy);var Ay=function(r){Ve(e,r);function e(n,t,a){var s;s=r.call(this,n,t,a)||this;var o=n.textTracks(),l=Nt(rt(s),s.handleTracksChange);return o.addEventListener("change",l),s.on("dispose",function(){o.removeEventListener("change",l)}),s}var i=e.prototype;return i.handleTracksChange=function(t){for(var a=this.player().textTracks(),s=!1,o=0,l=a.length;o<l;o++){var c=a[o];if(c.kind!==this.kind_&&c.mode==="showing"){s=!0;break}}s?this.disable():this.enable()},i.buildCSSClass=function(){return"vjs-descriptions-button "+r.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+r.prototype.buildWrapperCSSClass.call(this)},e}(eu);Ay.prototype.kind_="descriptions";Ay.prototype.controlText_="Descriptions";Le.registerComponent("DescriptionsButton",Ay);var Py=function(r){Ve(e,r);function e(n,t,a){return r.call(this,n,t,a)||this}var i=e.prototype;return i.buildCSSClass=function(){return"vjs-subtitles-button "+r.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+r.prototype.buildWrapperCSSClass.call(this)},e}(eu);Py.prototype.kind_="subtitles";Py.prototype.controlText_="Subtitles";Le.registerComponent("SubtitlesButton",Py);var Oy=function(r){Ve(e,r);function e(n,t){var a;return t.track={player:n,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",a=r.call(this,n,t)||this,a.addClass("vjs-texttrack-settings"),a.controlText(", opens "+t.kind+" settings dialog"),a}var i=e.prototype;return i.handleClick=function(t){this.player().getChild("textTrackSettings").open()},e}(Wl);Le.registerComponent("CaptionSettingsMenuItem",Oy);var Iy=function(r){Ve(e,r);function e(n,t,a){return r.call(this,n,t,a)||this}var i=e.prototype;return i.buildCSSClass=function(){return"vjs-captions-button "+r.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-captions-button "+r.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){var t=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(t.push(new Oy(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),r.prototype.createItems.call(this,t)},e}(eu);Iy.prototype.kind_="captions";Iy.prototype.controlText_="Captions";Le.registerComponent("CaptionsButton",Iy);var X1=function(r){Ve(e,r);function e(){return r.apply(this,arguments)||this}var i=e.prototype;return i.createEl=function(t,a,s){var o=r.prototype.createEl.call(this,t,a,s),l=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(l.appendChild(_t("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),l.appendChild(_t("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),o},e}(Wl);Le.registerComponent("SubsCapsMenuItem",X1);var Dy=function(r){Ve(e,r);function e(n,t){var a;return t===void 0&&(t={}),a=r.call(this,n,t)||this,a.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(a.player_.language_)>-1&&(a.label_="captions"),a.menuButton_.controlText(Zt(a.label_)),a}var i=e.prototype;return i.buildCSSClass=function(){return"vjs-subs-caps-button "+r.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+r.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){var t=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(t.push(new Oy(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=r.prototype.createItems.call(this,t,X1),t},e}(eu);Dy.prototype.kinds_=["captions","subtitles"];Dy.prototype.controlText_="Subtitles";Le.registerComponent("SubsCapsButton",Dy);var Q1=function(r){Ve(e,r);function e(n,t){var a,s=t.track,o=n.audioTracks();t.label=s.label||s.language||"Unknown",t.selected=s.enabled,a=r.call(this,n,t)||this,a.track=s,a.addClass("vjs-"+s.kind+"-menu-item");var l=function(){for(var d=arguments.length,h=new Array(d),p=0;p<d;p++)h[p]=arguments[p];a.handleTracksChange.apply(rt(a),h)};return o.addEventListener("change",l),a.on("dispose",function(){o.removeEventListener("change",l)}),a}var i=e.prototype;return i.createEl=function(t,a,s){var o=r.prototype.createEl.call(this,t,a,s),l=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="main-desc"&&(l.appendChild(_t("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),l.appendChild(_t("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),o},i.handleClick=function(t){if(r.prototype.handleClick.call(this,t),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var a=this.player_.audioTracks(),s=0;s<a.length;s++){var o=a[s];o!==this.track&&(o.enabled=o===this.track)}},i.handleTracksChange=function(t){this.selected(this.track.enabled)},e}(Hl);Le.registerComponent("AudioTrackMenuItem",Q1);var J1=function(r){Ve(e,r);function e(n,t){return t===void 0&&(t={}),t.tracks=n.audioTracks(),r.call(this,n,t)||this}var i=e.prototype;return i.buildCSSClass=function(){return"vjs-audio-button "+r.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-audio-button "+r.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(t){t===void 0&&(t=[]),this.hideThreshold_=1;for(var a=this.player_.audioTracks(),s=0;s<a.length;s++){var o=a[s];t.push(new Q1(this.player_,{track:o,selectable:!0,multiSelectable:!1}))}return t},e}(Ry);J1.prototype.controlText_="Audio Track";Le.registerComponent("AudioTrackButton",J1);var ky=function(r){Ve(e,r);function e(n,t){var a,s=t.rate,o=parseFloat(s,10);return t.label=s,t.selected=o===n.playbackRate(),t.selectable=!0,t.multiSelectable=!1,a=r.call(this,n,t)||this,a.label=s,a.rate=o,a.on(n,"ratechange",function(l){return a.update(l)}),a}var i=e.prototype;return i.handleClick=function(t){r.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},i.update=function(t){this.selected(this.player().playbackRate()===this.rate)},e}(Hl);ky.prototype.contentElType="button";Le.registerComponent("PlaybackRateMenuItem",ky);var Z1=function(r){Ve(e,r);function e(n,t){var a;return a=r.call(this,n,t)||this,a.menuButton_.el_.setAttribute("aria-describedby",a.labelElId_),a.updateVisibility(),a.updateLabel(),a.on(n,"loadstart",function(s){return a.updateVisibility(s)}),a.on(n,"ratechange",function(s){return a.updateLabel(s)}),a.on(n,"playbackrateschange",function(s){return a.handlePlaybackRateschange(s)}),a}var i=e.prototype;return i.createEl=function(){var t=r.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=_t("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),t.appendChild(this.labelEl_),t},i.dispose=function(){this.labelEl_=null,r.prototype.dispose.call(this)},i.buildCSSClass=function(){return"vjs-playback-rate "+r.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-playback-rate "+r.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){for(var t=this.playbackRates(),a=[],s=t.length-1;s>=0;s--)a.push(new ky(this.player(),{rate:t[s]+"x"}));return a},i.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},i.handleClick=function(t){var a=this.player().playbackRate(),s=this.playbackRates(),o=s.indexOf(a),l=(o+1)%s.length;this.player().playbackRate(s[l])},i.handlePlaybackRateschange=function(t){this.update()},i.playbackRates=function(){var t=this.player();return t.playbackRates&&t.playbackRates()||[]},i.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},i.updateVisibility=function(t){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},i.updateLabel=function(t){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},e}(Cy);Z1.prototype.controlText_="Playback Rate";Le.registerComponent("PlaybackRateMenuButton",Z1);var eR=function(r){Ve(e,r);function e(){return r.apply(this,arguments)||this}var i=e.prototype;return i.buildCSSClass=function(){return"vjs-spacer "+r.prototype.buildCSSClass.call(this)},i.createEl=function(t,a,s){return t===void 0&&(t="div"),a===void 0&&(a={}),s===void 0&&(s={}),a.className||(a.className=this.buildCSSClass()),r.prototype.createEl.call(this,t,a,s)},e}(Le);Le.registerComponent("Spacer",eR);var L4=function(r){Ve(e,r);function e(){return r.apply(this,arguments)||this}var i=e.prototype;return i.buildCSSClass=function(){return"vjs-custom-control-spacer "+r.prototype.buildCSSClass.call(this)},i.createEl=function(){return r.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"\xA0"})},e}(eR);Le.registerComponent("CustomControlSpacer",L4);var ad=function(r){Ve(e,r);function e(){return r.apply(this,arguments)||this}var i=e.prototype;return i.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},e}(Le);ad.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};"exitPictureInPicture"in je&&ad.prototype.options_.children.splice(ad.prototype.options_.children.length-1,0,"pictureInPictureToggle");Le.registerComponent("ControlBar",ad);var tR=function(r){Ve(e,r);function e(n,t){var a;return a=r.call(this,n,t)||this,a.on(n,"error",function(s){return a.open(s)}),a}var i=e.prototype;return i.buildCSSClass=function(){return"vjs-error-display "+r.prototype.buildCSSClass.call(this)},i.content=function(){var t=this.player().error();return t?this.localize(t.message):""},e}(Qo);tR.prototype.options_=Ai({},Qo.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});Le.registerComponent("ErrorDisplay",tR);var xm="vjs-text-track-settings",Bb=["#000","Black"],jb=["#00F","Blue"],Vb=["#0FF","Cyan"],Hb=["#0F0","Green"],Wb=["#F0F","Magenta"],$b=["#F00","Red"],Gb=["#FFF","White"],zb=["#FF0","Yellow"],Em=["1","Opaque"],Cm=["0.5","Semi-Transparent"],qb=["0","Transparent"],fs={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Bb,Gb,$b,Hb,jb,zb,Wb,Vb]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Em,Cm,qb]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Gb,Bb,$b,Hb,jb,zb,Wb,Vb]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return e==="1.00"?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Em,Cm]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[qb,Cm,Em]}};fs.windowColor.options=fs.backgroundColor.options;function rR(r,e){if(e&&(r=e(r)),r&&r!=="none")return r}function M4(r,e){var i=r.options[r.options.selectedIndex].value;return rR(i,e)}function N4(r,e,i){if(!!e){for(var n=0;n<r.options.length;n++)if(rR(r.options[n].value,i)===e){r.selectedIndex=n;break}}}var F4=function(r){Ve(e,r);function e(n,t){var a;return t.temporary=!1,a=r.call(this,n,t)||this,a.updateDisplay=a.updateDisplay.bind(rt(a)),a.fill(),a.hasBeenOpened_=a.hasBeenFilled_=!0,a.endDialog=_t("p",{className:"vjs-control-text",textContent:a.localize("End of dialog window.")}),a.el().appendChild(a.endDialog),a.setDefaults(),t.persistTextTrackSettings===void 0&&(a.options_.persistTextTrackSettings=a.options_.playerOptions.persistTextTrackSettings),a.on(a.$(".vjs-done-button"),"click",function(){a.saveSettings(),a.close()}),a.on(a.$(".vjs-default-button"),"click",function(){a.setDefaults(),a.updateDisplay()}),bo(fs,function(s){a.on(a.$(s.selector),"change",a.updateDisplay)}),a.options_.persistTextTrackSettings&&a.restoreSettings(),a}var i=e.prototype;return i.dispose=function(){this.endDialog=null,r.prototype.dispose.call(this)},i.createElSelect_=function(t,a,s){var o=this;a===void 0&&(a=""),s===void 0&&(s="label");var l=fs[t],c=l.id.replace("%s",this.id_),d=[a,c].join(" ").trim();return["<"+s+' id="'+c+'" class="'+(s==="label"?"vjs-label":"")+'">',this.localize(l.label),"</"+s+">",'<select aria-labelledby="'+d+'">'].concat(l.options.map(function(h){var p=c+"-"+h[1].replace(/\W+/g,"");return['<option id="'+p+'" value="'+h[0]+'" ','aria-labelledby="'+d+" "+p+'">',o.localize(h[1]),"</option>"].join("")})).concat("</select>").join("")},i.createElFgColor_=function(){var t="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",t),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")},i.createElBgColor_=function(){var t="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",t),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")},i.createElWinColor_=function(){var t="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",t),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")},i.createElColors_=function(){return _t("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},i.createElFont_=function(){return _t("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},i.createElControls_=function(){var t=this.localize("restore all settings to the default values");return _t("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+t+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+t+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},i.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},i.label=function(){return this.localize("Caption Settings Dialog")},i.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},i.buildCSSClass=function(){return r.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},i.getValues=function(){var t=this;return C3(fs,function(a,s,o){var l=M4(t.$(s.selector),s.parser);return l!==void 0&&(a[o]=l),a},{})},i.setValues=function(t){var a=this;bo(fs,function(s,o){N4(a.$(s.selector),t[o],s.parser)})},i.setDefaults=function(){var t=this;bo(fs,function(a){var s=a.hasOwnProperty("default")?a.default:0;t.$(a.selector).selectedIndex=s})},i.restoreSettings=function(){var t;try{t=JSON.parse(q.localStorage.getItem(xm))}catch(a){ft.warn(a)}t&&this.setValues(t)},i.saveSettings=function(){if(!!this.options_.persistTextTrackSettings){var t=this.getValues();try{Object.keys(t).length?q.localStorage.setItem(xm,JSON.stringify(t)):q.localStorage.removeItem(xm)}catch(a){ft.warn(a)}}},i.updateDisplay=function(){var t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()},i.conditionalBlur_=function(){this.previouslyActiveEl_=null;var t=this.player_.controlBar,a=t&&t.subsCapsButton,s=t&&t.captionsButton;a?a.focus():s&&s.focus()},e}(Qo);Le.registerComponent("TextTrackSettings",F4);var U4=function(r){Ve(e,r);function e(n,t){var a,s=t.ResizeObserver||q.ResizeObserver;t.ResizeObserver===null&&(s=!1);var o=Mt({createEl:!s,reportTouchActivity:!1},t);return a=r.call(this,n,o)||this,a.ResizeObserver=t.ResizeObserver||q.ResizeObserver,a.loadListener_=null,a.resizeObserver_=null,a.debouncedHandler_=N3(function(){a.resizeHandler()},100,!1,rt(a)),s?(a.resizeObserver_=new a.ResizeObserver(a.debouncedHandler_),a.resizeObserver_.observe(n.el())):(a.loadListener_=function(){if(!(!a.el_||!a.el_.contentWindow)){var l=a.debouncedHandler_,c=a.unloadListener_=function(){Pr(this,"resize",l),Pr(this,"unload",c),c=null};vi(a.el_.contentWindow,"unload",c),vi(a.el_.contentWindow,"resize",l)}},a.one("load",a.loadListener_)),a}var i=e.prototype;return i.createEl=function(){return r.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},i.resizeHandler=function(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")},i.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,r.prototype.dispose.call(this)},e}(Le);Le.registerComponent("ResizeManager",U4);var B4={trackingThreshold:20,liveTolerance:15},j4=function(r){Ve(e,r);function e(n,t){var a,s=Mt(B4,t,{createEl:!1});return a=r.call(this,n,s)||this,a.handleVisibilityChange_=function(o){return a.handleVisibilityChange(o)},a.trackLiveHandler_=function(){return a.trackLive_()},a.handlePlay_=function(o){return a.handlePlay(o)},a.handleFirstTimeupdate_=function(o){return a.handleFirstTimeupdate(o)},a.handleSeeked_=function(o){return a.handleSeeked(o)},a.seekToLiveEdge_=function(o){return a.seekToLiveEdge(o)},a.reset_(),a.on(a.player_,"durationchange",function(o){return a.handleDurationchange(o)}),a.on(a.player_,"canplay",function(){return a.toggleTracking()}),Bl&&"hidden"in je&&"visibilityState"in je&&a.on(je,"visibilitychange",a.handleVisibilityChange_),a}var i=e.prototype;return i.handleVisibilityChange=function(){this.player_.duration()===1/0&&(je.hidden?this.stopTracking():this.startTracking())},i.trackLive_=function(){var t=this.player_.seekable();if(!(!t||!t.length)){var a=Number(q.performance.now().toFixed(4)),s=this.lastTime_===-1?0:(a-this.lastTime_)/1e3;this.lastTime_=a,this.pastSeekEnd_=this.pastSeekEnd()+s;var o=this.liveCurrentTime(),l=this.player_.currentTime(),c=this.player_.paused()||this.seekedBehindLive_||Math.abs(o-l)>this.options_.liveTolerance;(!this.timeupdateSeen_||o===1/0)&&(c=!1),c!==this.behindLiveEdge_&&(this.behindLiveEdge_=c,this.trigger("liveedgechange"))}},i.handleDurationchange=function(){this.toggleTracking()},i.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},i.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,qi),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},i.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},i.handleSeeked=function(){var t=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&t>2,this.nextSeekedFromUser_=!1,this.trackLive_()},i.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},i.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},i.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},i.stopTracking=function(){!this.isTracking()||(this.reset_(),this.trigger("liveedgechange"))},i.seekableEnd=function(){for(var t=this.player_.seekable(),a=[],s=t?t.length:0;s--;)a.push(t.end(s));return a.length?a.sort()[a.length-1]:1/0},i.seekableStart=function(){for(var t=this.player_.seekable(),a=[],s=t?t.length:0;s--;)a.push(t.start(s));return a.length?a.sort()[0]:0},i.liveWindow=function(){var t=this.liveCurrentTime();return t===1/0?0:t-this.seekableStart()},i.isLive=function(){return this.isTracking()},i.atLiveEdge=function(){return!this.behindLiveEdge()},i.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},i.pastSeekEnd=function(){var t=this.seekableEnd();return this.lastSeekEnd_!==-1&&t!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=t,this.pastSeekEnd_},i.behindLiveEdge=function(){return this.behindLiveEdge_},i.isTracking=function(){return typeof this.trackingInterval_=="number"},i.seekToLiveEdge=function(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},i.dispose=function(){this.off(je,"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),r.prototype.dispose.call(this)},e}(Le);Le.registerComponent("LiveTracker",j4);var Rg=function(e){var i=e.el();if(i.hasAttribute("src"))return e.triggerSourceset(i.src),!0;var n=e.$$("source"),t=[],a="";if(!n.length)return!1;for(var s=0;s<n.length;s++){var o=n[s].src;o&&t.indexOf(o)===-1&&t.push(o)}return t.length?(t.length===1&&(a=t[0]),e.triggerSourceset(a),!0):!1},V4=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var i=je.createElement(this.nodeName.toLowerCase());i.innerHTML=e;for(var n=je.createDocumentFragment();i.childNodes.length;)n.appendChild(i.childNodes[0]);return this.innerText="",q.Element.prototype.appendChild.call(this,n),this.innerHTML}}),iR=function(e,i){for(var n={},t=0;t<e.length&&(n=Object.getOwnPropertyDescriptor(e[t],i),!(n&&n.set&&n.get));t++);return n.enumerable=!0,n.configurable=!0,n},H4=function(e){return iR([e.el(),q.HTMLMediaElement.prototype,q.Element.prototype,V4],"innerHTML")},Kb=function(e){var i=e.el();if(!i.resetSourceWatch_){var n={},t=H4(e),a=function(o){return function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var h=o.apply(i,c);return Rg(e),h}};["append","appendChild","insertAdjacentHTML"].forEach(function(s){!i[s]||(n[s]=i[s],i[s]=a(n[s]))}),Object.defineProperty(i,"innerHTML",Mt(t,{set:a(t.set)})),i.resetSourceWatch_=function(){i.resetSourceWatch_=null,Object.keys(n).forEach(function(s){i[s]=n[s]}),Object.defineProperty(i,"innerHTML",t)},e.one("sourceset",i.resetSourceWatch_)}},W4=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?O1(q.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return q.Element.prototype.setAttribute.call(this,"src",e),e}}),$4=function(e){return iR([e.el(),q.HTMLMediaElement.prototype,W4],"src")},G4=function(e){if(!!e.featuresSourceset){var i=e.el();if(!i.resetSourceset_){var n=$4(e),t=i.setAttribute,a=i.load;Object.defineProperty(i,"src",Mt(n,{set:function(o){var l=n.set.call(i,o);return e.triggerSourceset(i.src),l}})),i.setAttribute=function(s,o){var l=t.call(i,s,o);return/src/i.test(s)&&e.triggerSourceset(i.src),l},i.load=function(){var s=a.call(i);return Rg(e)||(e.triggerSourceset(""),Kb(e)),s},i.currentSrc?e.triggerSourceset(i.currentSrc):Rg(e)||Kb(e),i.resetSourceset_=function(){i.resetSourceset_=null,i.load=a,i.setAttribute=t,Object.defineProperty(i,"src",n),i.resetSourceWatch_&&i.resetSourceWatch_()}}}},Ly=function(e,i,n,t){t===void 0&&(t=!0);var a=function(l){return Object.defineProperty(e,i,{value:l,enumerable:!0,writable:!0})},s={configurable:!0,enumerable:!0,get:function(){var l=n();return a(l),l}};return t&&(s.set=a),Object.defineProperty(e,i,s)},We=function(r){Ve(e,r);function e(n,t){var a;a=r.call(this,n,t)||this;var s=n.source,o=!1;if(a.featuresVideoFrameCallback=a.featuresVideoFrameCallback&&a.el_.tagName==="VIDEO",s&&(a.el_.currentSrc!==s.src||n.tag&&n.tag.initNetworkState_===3)?a.setSource(s):a.handleLateInit_(a.el_),n.enableSourceset&&a.setupSourcesetHandling_(),a.isScrubbing_=!1,a.el_.hasChildNodes()){for(var l=a.el_.childNodes,c=l.length,d=[];c--;){var h=l[c],p=h.nodeName.toLowerCase();p==="track"&&(a.featuresNativeTextTracks?(a.remoteTextTrackEls().addTrackElement_(h),a.remoteTextTracks().addTrack(h.track),a.textTracks().addTrack(h.track),!o&&!a.el_.hasAttribute("crossorigin")&&uh(h.src)&&(o=!0)):d.push(h))}for(var y=0;y<d.length;y++)a.el_.removeChild(d[y])}return a.proxyNativeTracks_(),a.featuresNativeTextTracks&&o&&ft.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),a.restoreMetadataTracksInIOSNativePlayer_(),(No||ly||i1)&&n.nativeControlsForTouch===!0&&a.setControls(!0),a.proxyWebkitFullscreen_(),a.triggerReady(),a}var i=e.prototype;return i.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),e.disposeMediaElement(this.el_),this.options_=null,r.prototype.dispose.call(this)},i.setupSourcesetHandling_=function(){G4(this)},i.restoreMetadataTracksInIOSNativePlayer_=function(){var t=this.textTracks(),a,s=function(){a=[];for(var c=0;c<t.length;c++){var d=t[c];d.kind==="metadata"&&a.push({track:d,storedMode:d.mode})}};s(),t.addEventListener("change",s),this.on("dispose",function(){return t.removeEventListener("change",s)});var o=function l(){for(var c=0;c<a.length;c++){var d=a[c];d.track.mode==="disabled"&&d.track.mode!==d.storedMode&&(d.track.mode=d.storedMode)}t.removeEventListener("change",l)};this.on("webkitbeginfullscreen",function(){t.removeEventListener("change",s),t.removeEventListener("change",o),t.addEventListener("change",o)}),this.on("webkitendfullscreen",function(){t.removeEventListener("change",s),t.addEventListener("change",s),t.removeEventListener("change",o)})},i.overrideNative_=function(t,a){var s=this;if(a===this["featuresNative"+t+"Tracks"]){var o=t.toLowerCase();this[o+"TracksListeners_"]&&Object.keys(this[o+"TracksListeners_"]).forEach(function(l){var c=s.el()[o+"Tracks"];c.removeEventListener(l,s[o+"TracksListeners_"][l])}),this["featuresNative"+t+"Tracks"]=!a,this[o+"TracksListeners_"]=null,this.proxyNativeTracksForType_(o)}},i.overrideNativeAudioTracks=function(t){this.overrideNative_("Audio",t)},i.overrideNativeVideoTracks=function(t){this.overrideNative_("Video",t)},i.proxyNativeTracksForType_=function(t){var a=this,s=wi[t],o=this.el()[s.getterName],l=this[s.getterName]();if(!(!this["featuresNative"+s.capitalName+"Tracks"]||!o||!o.addEventListener)){var c={change:function(p){var y={type:"change",target:l,currentTarget:l,srcElement:l};l.trigger(y),t==="text"&&a[jo.remoteText.getterName]().trigger(y)},addtrack:function(p){l.addTrack(p.track)},removetrack:function(p){l.removeTrack(p.track)}},d=function(){for(var p=[],y=0;y<l.length;y++){for(var S=!1,C=0;C<o.length;C++)if(o[C]===l[y]){S=!0;break}S||p.push(l[y])}for(;p.length;)l.removeTrack(p.shift())};this[s.getterName+"Listeners_"]=c,Object.keys(c).forEach(function(h){var p=c[h];o.addEventListener(h,p),a.on("dispose",function(y){return o.removeEventListener(h,p)})}),this.on("loadstart",d),this.on("dispose",function(h){return a.off("loadstart",d)})}},i.proxyNativeTracks_=function(){var t=this;wi.names.forEach(function(a){t.proxyNativeTracksForType_(a)})},i.createEl=function(){var t=this.options_.tag;if(!t||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(t){var a=t.cloneNode(!0);t.parentNode&&t.parentNode.insertBefore(a,t),e.disposeMediaElement(t),t=a}else{t=je.createElement("video");var s=this.options_.tag&&jn(this.options_.tag),o=Mt({},s);(!No||this.options_.nativeControlsForTouch!==!0)&&delete o.controls,f1(t,qt(o,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&Fo(t,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(t.disablePictureInPicture=this.options_.disablePictureInPicture);for(var l=["loop","muted","playsinline","autoplay"],c=0;c<l.length;c++){var d=l[c],h=this.options_[d];typeof h<"u"&&(h?Fo(t,d,d):ih(t,d),t[d]=h)}return t},i.handleLateInit_=function(t){if(!(t.networkState===0||t.networkState===3)){if(t.readyState===0){var a=!1,s=function(){a=!0};this.on("loadstart",s);var o=function(){a||this.trigger("loadstart")};this.on("loadedmetadata",o),this.ready(function(){this.off("loadstart",s),this.off("loadedmetadata",o),a||this.trigger("loadstart")});return}var l=["loadstart"];l.push("loadedmetadata"),t.readyState>=2&&l.push("loadeddata"),t.readyState>=3&&l.push("canplay"),t.readyState>=4&&l.push("canplaythrough"),this.ready(function(){l.forEach(function(c){this.trigger(c)},this)})}},i.setScrubbing=function(t){this.isScrubbing_=t},i.scrubbing=function(){return this.isScrubbing_},i.setCurrentTime=function(t){try{this.isScrubbing_&&this.el_.fastSeek&&rh?this.el_.fastSeek(t):this.el_.currentTime=t}catch(a){ft(a,"Video is not ready. (Video.js)")}},i.duration=function(){var t=this;if(this.el_.duration===1/0&&Zn&&ea&&this.el_.currentTime===0){var a=function s(){t.el_.currentTime>0&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",s))};return this.on("timeupdate",a),NaN}return this.el_.duration||NaN},i.width=function(){return this.el_.offsetWidth},i.height=function(){return this.el_.offsetHeight},i.proxyWebkitFullscreen_=function(){var t=this;if("webkitDisplayingFullscreen"in this.el_){var a=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},s=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",a),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",s),this.on("dispose",function(){t.off("webkitbeginfullscreen",s),t.off("webkitendfullscreen",a)})}},i.supportsFullScreen=function(){if(typeof this.el_.webkitEnterFullScreen=="function"){var t=q.navigator&&q.navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1},i.enterFullScreen=function(){var t=this.el_;if(t.paused&&t.networkState<=t.HAVE_METADATA)fn(this.el_.play()),this.setTimeout(function(){t.pause();try{t.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},0);else try{t.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},i.exitFullScreen=function(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()},i.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},i.requestVideoFrameCallback=function(t){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(t):r.prototype.requestVideoFrameCallback.call(this,t)},i.cancelVideoFrameCallback=function(t){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(t):r.prototype.cancelVideoFrameCallback.call(this,t)},i.src=function(t){if(t===void 0)return this.el_.src;this.setSrc(t)},i.reset=function(){e.resetMediaElement(this.el_)},i.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},i.setControls=function(t){this.el_.controls=!!t},i.addTextTrack=function(t,a,s){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,a,s):r.prototype.addTextTrack.call(this,t,a,s)},i.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return r.prototype.createRemoteTextTrack.call(this,t);var a=je.createElement("track");return t.kind&&(a.kind=t.kind),t.label&&(a.label=t.label),(t.language||t.srclang)&&(a.srclang=t.language||t.srclang),t.default&&(a.default=t.default),t.id&&(a.id=t.id),t.src&&(a.src=t.src),a},i.addRemoteTextTrack=function(t,a){var s=r.prototype.addRemoteTextTrack.call(this,t,a);return this.featuresNativeTextTracks&&this.el().appendChild(s),s},i.removeRemoteTextTrack=function(t){if(r.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var a=this.$$("track"),s=a.length;s--;)(t===a[s]||t===a[s].track)&&this.el().removeChild(a[s])},i.getVideoPlaybackQuality=function(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();var t={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),q.performance&&typeof q.performance.now=="function"?t.creationTime=q.performance.now():q.performance&&q.performance.timing&&typeof q.performance.timing.navigationStart=="number"&&(t.creationTime=q.Date.now()-q.performance.timing.navigationStart),t},e}(Dt);Ly(We,"TEST_VID",function(){if(!!Ko()){var r=je.createElement("video"),e=je.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",r.appendChild(e),r}});We.isSupported=function(){try{We.TEST_VID.volume=.5}catch{return!1}return!!(We.TEST_VID&&We.TEST_VID.canPlayType)};We.canPlayType=function(r){return We.TEST_VID.canPlayType(r)};We.canPlaySource=function(r,e){return We.canPlayType(r.type)};We.canControlVolume=function(){try{var r=We.TEST_VID.volume;We.TEST_VID.volume=r/2+.1;var e=r!==We.TEST_VID.volume;return e&&zr?(q.setTimeout(function(){We&&We.prototype&&(We.prototype.featuresVolumeControl=r!==We.TEST_VID.volume)}),!1):e}catch{return!1}};We.canMuteVolume=function(){try{var r=We.TEST_VID.muted;return We.TEST_VID.muted=!r,We.TEST_VID.muted?Fo(We.TEST_VID,"muted","muted"):ih(We.TEST_VID,"muted","muted"),r!==We.TEST_VID.muted}catch{return!1}};We.canControlPlaybackRate=function(){if(Zn&&ea&&a1<58)return!1;try{var r=We.TEST_VID.playbackRate;return We.TEST_VID.playbackRate=r/2+.1,r!==We.TEST_VID.playbackRate}catch{return!1}};We.canOverrideAttributes=function(){try{var r=function(){};Object.defineProperty(je.createElement("video"),"src",{get:r,set:r}),Object.defineProperty(je.createElement("audio"),"src",{get:r,set:r}),Object.defineProperty(je.createElement("video"),"innerHTML",{get:r,set:r}),Object.defineProperty(je.createElement("audio"),"innerHTML",{get:r,set:r})}catch{return!1}return!0};We.supportsNativeTextTracks=function(){return rh||zr&&ea};We.supportsNativeVideoTracks=function(){return!!(We.TEST_VID&&We.TEST_VID.videoTracks)};We.supportsNativeAudioTracks=function(){return!!(We.TEST_VID&&We.TEST_VID.audioTracks)};We.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(r){var e=r[0],i=r[1];Ly(We.prototype,e,function(){return We[i]()},!0)});We.prototype.featuresVolumeControl=We.canControlVolume();We.prototype.movingMediaElementInDOM=!zr;We.prototype.featuresFullscreenResize=!0;We.prototype.featuresProgressEvents=!0;We.prototype.featuresTimeupdateEvents=!0;We.prototype.featuresVideoFrameCallback=!!(We.TEST_VID&&We.TEST_VID.requestVideoFrameCallback);var sd;We.patchCanPlayType=function(){sy>=4&&!n1&&!ea&&(sd=We.TEST_VID&&We.TEST_VID.constructor.prototype.canPlayType,We.TEST_VID.constructor.prototype.canPlayType=function(r){var e=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return r&&e.test(r)?"maybe":sd.call(this,r)})};We.unpatchCanPlayType=function(){var r=We.TEST_VID.constructor.prototype.canPlayType;return sd&&(We.TEST_VID.constructor.prototype.canPlayType=sd),r};We.patchCanPlayType();We.disposeMediaElement=function(r){if(!!r){for(r.parentNode&&r.parentNode.removeChild(r);r.hasChildNodes();)r.removeChild(r.firstChild);r.removeAttribute("src"),typeof r.load=="function"&&function(){try{r.load()}catch{}}()}};We.resetMediaElement=function(r){if(!!r){for(var e=r.querySelectorAll("source"),i=e.length;i--;)r.removeChild(e[i]);r.removeAttribute("src"),typeof r.load=="function"&&function(){try{r.load()}catch{}}()}};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(r){We.prototype[r]=function(){return this.el_[r]||this.el_.hasAttribute(r)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(r){We.prototype["set"+Zt(r)]=function(e){this.el_[r]=e,e?this.el_.setAttribute(r,r):this.el_.removeAttribute(r)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(r){We.prototype[r]=function(){return this.el_[r]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(r){We.prototype["set"+Zt(r)]=function(e){this.el_[r]=e}});["pause","load","play"].forEach(function(r){We.prototype[r]=function(){return this.el_[r]()}});Dt.withSourceHandlers(We);We.nativeSourceHandler={};We.nativeSourceHandler.canPlayType=function(r){try{return We.TEST_VID.canPlayType(r)}catch{return""}};We.nativeSourceHandler.canHandleSource=function(r,e){if(r.type)return We.nativeSourceHandler.canPlayType(r.type);if(r.src){var i=gy(r.src);return We.nativeSourceHandler.canPlayType("video/"+i)}return""};We.nativeSourceHandler.handleSource=function(r,e,i){e.setSrc(r.src)};We.nativeSourceHandler.dispose=function(){};We.registerSourceHandler(We.nativeSourceHandler);Dt.registerTech("Html5",We);var nR=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Rm={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},wg=["tiny","xsmall","small","medium","large","xlarge","huge"],Pf={};wg.forEach(function(r){var e=r.charAt(0)==="x"?"x-"+r.substring(1):r;Pf[r]="vjs-layout-"+e});var z4={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},tr=function(r){Ve(e,r);function e(n,t,a){var s;if(n.id=n.id||t.id||"vjs_video_"+ta(),t=qt(e.getTagSettings(n),t),t.initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language)if(typeof n.closest=="function"){var o=n.closest("[lang]");o&&o.getAttribute&&(t.language=o.getAttribute("lang"))}else for(var l=n;l&&l.nodeType===1;){if(jn(l).hasOwnProperty("lang")){t.language=l.getAttribute("lang");break}l=l.parentNode}if(s=r.call(this,null,t,a)||this,s.boundDocumentFullscreenChange_=function(p){return s.documentFullscreenChange_(p)},s.boundFullWindowOnEscKey_=function(p){return s.fullWindowOnEscKey(p)},s.boundUpdateStyleEl_=function(p){return s.updateStyleEl_(p)},s.boundApplyInitTime_=function(p){return s.applyInitTime_(p)},s.boundUpdateCurrentBreakpoint_=function(p){return s.updateCurrentBreakpoint_(p)},s.boundHandleTechClick_=function(p){return s.handleTechClick_(p)},s.boundHandleTechDoubleClick_=function(p){return s.handleTechDoubleClick_(p)},s.boundHandleTechTouchStart_=function(p){return s.handleTechTouchStart_(p)},s.boundHandleTechTouchMove_=function(p){return s.handleTechTouchMove_(p)},s.boundHandleTechTouchEnd_=function(p){return s.handleTechTouchEnd_(p)},s.boundHandleTechTap_=function(p){return s.handleTechTap_(p)},s.isFullscreen_=!1,s.log=e1(s.id_),s.fsApi_=td,s.isPosterFromTech_=!1,s.queuedCallbacks_=[],s.isReady_=!1,s.hasStarted_=!1,s.userActive_=!1,s.debugEnabled_=!1,s.audioOnlyMode_=!1,s.audioPosterMode_=!1,s.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!s.options_||!s.options_.techOrder||!s.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(s.tag=n,s.tagAttributes=n&&jn(n),s.language(s.options_.language),t.languages){var c={};Object.getOwnPropertyNames(t.languages).forEach(function(p){c[p.toLowerCase()]=t.languages[p]}),s.languages_=c}else s.languages_=e.prototype.options_.languages;s.resetCache_(),s.poster_=t.poster||"",s.controls_=!!t.controls,n.controls=!1,n.removeAttribute("controls"),s.changingSrc_=!1,s.playCallbacks_=[],s.playTerminatedQueue_=[],n.hasAttribute("autoplay")?s.autoplay(!0):s.autoplay(s.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(function(p){if(typeof s[p]!="function")throw new Error('plugin "'+p+'" does not exist')}),s.scrubbing_=!1,s.el_=s.createEl(),hy(rt(s),{eventBusKey:"el_"}),s.fsApi_.requestFullscreen&&(vi(je,s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_),s.on(s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_)),s.fluid_&&s.on(["playerreset","resize"],s.boundUpdateStyleEl_);var d=Mt(s.options_);t.plugins&&Object.keys(t.plugins).forEach(function(p){s[p](t.plugins[p])}),t.debug&&s.debug(!0),s.options_.playerOptions=d,s.middleware_=[],s.playbackRates(t.playbackRates),s.initChildren(),s.isAudio(n.nodeName.toLowerCase()==="audio"),s.controls()?s.addClass("vjs-controls-enabled"):s.addClass("vjs-controls-disabled"),s.el_.setAttribute("role","region"),s.isAudio()?s.el_.setAttribute("aria-label",s.localize("Audio Player")):s.el_.setAttribute("aria-label",s.localize("Video Player")),s.isAudio()&&s.addClass("vjs-audio"),s.flexNotSupported_()&&s.addClass("vjs-no-flex"),No&&s.addClass("vjs-touch-enabled"),zr||s.addClass("vjs-workinghover"),e.players[s.id_]=rt(s);var h=QC.split(".")[0];return s.addClass("vjs-v"+h),s.userActive(!0),s.reportUserActivity(),s.one("play",function(p){return s.listenForUserActivity_(p)}),s.on("stageclick",function(p){return s.handleStageClick_(p)}),s.on("keydown",function(p){return s.handleKeyDown(p)}),s.on("languagechange",function(p){return s.handleLanguagechange(p)}),s.breakpoints(s.options_.breakpoints),s.responsive(s.options_.responsive),s.on("ready",function(){s.audioPosterMode(s.options_.audioPosterMode),s.audioOnlyMode(s.options_.audioOnlyMode)}),s}var i=e.prototype;return i.dispose=function(){var t=this;this.trigger("dispose"),this.off("dispose"),Pr(je,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Pr(je,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),e.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),d4(this),Br.names.forEach(function(a){var s=Br[a],o=t[s.getterName]();o&&o.off&&o.off()}),r.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},i.createEl=function(){var t=this.tag,a,s=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player"),o=this.tag.tagName.toLowerCase()==="video-js";s?a=this.el_=t.parentNode:o||(a=this.el_=r.prototype.createEl.call(this,"div"));var l=jn(t);if(o){for(a=this.el_=t,t=this.tag=je.createElement("video");a.children.length;)t.appendChild(a.firstChild);Ts(a,"video-js")||Gn(a,"video-js"),a.appendChild(t),s=this.playerElIngest_=a,Object.keys(a).forEach(function(S){try{t[S]=a[S]}catch{}})}if(t.setAttribute("tabindex","-1"),l.tabindex="-1",(Bl||ea&&s1)&&(t.setAttribute("role","application"),l.role="application"),t.removeAttribute("width"),t.removeAttribute("height"),"width"in l&&delete l.width,"height"in l&&delete l.height,Object.getOwnPropertyNames(l).forEach(function(S){o&&S==="class"||a.setAttribute(S,l[S]),o&&t.setAttribute(S,l[S])}),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",t.player=a.player=this,this.addClass("vjs-paused"),q.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=b1("vjs-styles-dimensions");var c=Aa(".vjs-styles-defaults"),d=Aa("head");d.insertBefore(this.styleEl_,c?c.nextSibling:d.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var h=t.getElementsByTagName("a"),p=0;p<h.length;p++){var y=h.item(p);Gn(y,"vjs-hidden"),y.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!s&&t.parentNode.insertBefore(a,t),_g(t,a),this.children_.unshift(t),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=a,a},i.crossOrigin=function(t){if(!t)return this.techGet_("crossOrigin");if(t!=="anonymous"&&t!=="use-credentials"){ft.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+t+'"');return}this.techCall_("setCrossOrigin",t)},i.width=function(t){return this.dimension("width",t)},i.height=function(t){return this.dimension("height",t)},i.dimension=function(t,a){var s=t+"_";if(a===void 0)return this[s]||0;if(a===""||a==="auto"){this[s]=void 0,this.updateStyleEl_();return}var o=parseFloat(a);if(isNaN(o)){ft.error('Improper value "'+a+'" supplied for for '+t);return}this[s]=o,this.updateStyleEl_()},i.fluid=function(t){var a=this;if(t===void 0)return!!this.fluid_;this.fluid_=!!t,zn(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),t?(this.addClass("vjs-fluid"),this.fill(!1),F3(this,function(){a.on(["playerreset","resize"],a.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},i.fill=function(t){if(t===void 0)return!!this.fill_;this.fill_=!!t,t?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},i.aspectRatio=function(t){if(t===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()},i.updateStyleEl_=function(){if(q.VIDEOJS_NO_DYNAMIC_STYLE===!0){var t=typeof this.width_=="number"?this.width_:this.options_.width,a=typeof this.height_=="number"?this.height_:this.options_.height,s=this.tech_&&this.tech_.el();s&&(t>=0&&(s.width=t),a>=0&&(s.height=a));return}var o,l,c,d;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?c=this.aspectRatio_:this.videoWidth()>0?c=this.videoWidth()+":"+this.videoHeight():c="16:9";var h=c.split(":"),p=h[1]/h[0];this.width_!==void 0?o=this.width_:this.height_!==void 0?o=this.height_/p:o=this.videoWidth()||300,this.height_!==void 0?l=this.height_:l=o*p,/^[^a-zA-Z]/.test(this.id())?d="dimensions-"+this.id():d=this.id()+"-dimensions",this.addClass(d),S1(this.styleEl_,`
      .`+d+` {
        width: `+o+`px;
        height: `+l+`px;
      }

      .`+d+`.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: `+p*100+`%;
      }
    `)},i.loadTech_=function(t,a){var s=this;this.tech_&&this.unloadTech_();var o=Zt(t),l=t.charAt(0).toLowerCase()+t.slice(1);o!=="Html5"&&this.tag&&(Dt.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=o,this.isReady_=!1;var c=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(c=!1);var d={source:a,autoplay:c,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+l+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Br.names.forEach(function(p){var y=Br[p];d[y.getterName]=s[y.privateName]}),qt(d,this.options_[o]),qt(d,this.options_[l]),qt(d,this.options_[t.toLowerCase()]),this.tag&&(d.tag=this.tag),a&&a.src===this.cache_.src&&this.cache_.currentTime>0&&(d.startTime=this.cache_.currentTime);var h=Dt.getTech(t);if(!h)throw new Error("No Tech named '"+o+"' exists! '"+o+"' should be registered using videojs.registerTech()'");this.tech_=new h(d),this.tech_.ready(Nt(this,this.handleTechReady_),!0),Pb.jsonToTextTracks(this.textTracksJson_||[],this.tech_),nR.forEach(function(p){s.on(s.tech_,p,function(y){return s["handleTech"+Zt(p)+"_"](y)})}),Object.keys(Rm).forEach(function(p){s.on(s.tech_,p,function(y){if(s.tech_.playbackRate()===0&&s.tech_.seeking()){s.queuedCallbacks_.push({callback:s["handleTech"+Rm[p]+"_"].bind(s),event:y});return}s["handleTech"+Rm[p]+"_"](y)})}),this.on(this.tech_,"loadstart",function(p){return s.handleTechLoadStart_(p)}),this.on(this.tech_,"sourceset",function(p){return s.handleTechSourceset_(p)}),this.on(this.tech_,"waiting",function(p){return s.handleTechWaiting_(p)}),this.on(this.tech_,"ended",function(p){return s.handleTechEnded_(p)}),this.on(this.tech_,"seeking",function(p){return s.handleTechSeeking_(p)}),this.on(this.tech_,"play",function(p){return s.handleTechPlay_(p)}),this.on(this.tech_,"firstplay",function(p){return s.handleTechFirstPlay_(p)}),this.on(this.tech_,"pause",function(p){return s.handleTechPause_(p)}),this.on(this.tech_,"durationchange",function(p){return s.handleTechDurationChange_(p)}),this.on(this.tech_,"fullscreenchange",function(p,y){return s.handleTechFullscreenChange_(p,y)}),this.on(this.tech_,"fullscreenerror",function(p,y){return s.handleTechFullscreenError_(p,y)}),this.on(this.tech_,"enterpictureinpicture",function(p){return s.handleTechEnterPictureInPicture_(p)}),this.on(this.tech_,"leavepictureinpicture",function(p){return s.handleTechLeavePictureInPicture_(p)}),this.on(this.tech_,"error",function(p){return s.handleTechError_(p)}),this.on(this.tech_,"posterchange",function(p){return s.handleTechPosterChange_(p)}),this.on(this.tech_,"textdata",function(p){return s.handleTechTextData_(p)}),this.on(this.tech_,"ratechange",function(p){return s.handleTechRateChange_(p)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(o!=="Html5"||!this.tag)&&_g(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},i.unloadTech_=function(){var t=this;Br.names.forEach(function(a){var s=Br[a];t[s.privateName]=t[s.getterName]()}),this.textTracksJson_=Pb.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},i.tech=function(t){return t===void 0&&ft.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_},i.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},i.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},i.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},i.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())},i.manualAutoplay_=function(t){var a=this;if(!(!this.tech_||typeof t!="string")){var s=function(){var c=a.muted();a.muted(!0);var d=function(){a.muted(c)};a.playTerminatedQueue_.push(d);var h=a.play();if(!!ll(h))return h.catch(function(p){throw d(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(p||""))})},o;if(t==="any"&&!this.muted()?(o=this.play(),ll(o)&&(o=o.catch(s))):t==="muted"&&!this.muted()?o=s():o=this.play(),!!ll(o))return o.then(function(){a.trigger({type:"autoplay-success",autoplay:t})}).catch(function(){a.trigger({type:"autoplay-failure",autoplay:t})})}},i.updateSourceCaches_=function(t){t===void 0&&(t="");var a=t,s="";typeof a!="string"&&(a=t.src,s=t.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],a&&!s&&(s=m4(this,a)),this.cache_.source=Mt({},t,{src:a,type:s});for(var o=this.cache_.sources.filter(function(y){return y.src&&y.src===a}),l=[],c=this.$$("source"),d=[],h=0;h<c.length;h++){var p=jn(c[h]);l.push(p),p.src&&p.src===a&&d.push(p.src)}d.length&&!o.length?this.cache_.sources=l:o.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=a},i.handleTechSourceset_=function(t){var a=this;if(!this.changingSrc_){var s=function(d){return a.updateSourceCaches_(d)},o=this.currentSource().src,l=t.src;o&&!/^blob:/.test(o)&&/^blob:/.test(l)&&(!this.lastSource_||this.lastSource_.tech!==l&&this.lastSource_.player!==o)&&(s=function(){}),s(l),t.src||this.tech_.any(["sourceset","loadstart"],function(c){if(c.type!=="sourceset"){var d=a.techGet("currentSrc");a.lastSource_.tech=d,a.updateSourceCaches_(d)}})}this.lastSource_={player:this.currentSource().src,tech:t.src},this.trigger({src:t.src,type:"sourceset"})},i.hasStarted=function(t){if(t===void 0)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},i.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},i.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(function(t){return t.callback(t.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},i.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting");var a=this.currentTime(),s=function o(){a!==t.currentTime()&&(t.removeClass("vjs-waiting"),t.off("timeupdate",o))};this.on("timeupdate",s)},i.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},i.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},i.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},i.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},i.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},i.handleTechFirstPlay_=function(){this.options_.starttime&&(ft.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},i.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},i.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},i.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},i.handleTechClick_=function(t){!this.controls_||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,t):this.paused()?fn(this.play()):this.pause())},i.handleTechDoubleClick_=function(t){if(!!this.controls_){var a=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(s){return s.contains(t.target)});a||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,t):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}},i.handleTechTap_=function(){this.userActive(!this.userActive())},i.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},i.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},i.handleTechTouchEnd_=function(t){t.cancelable&&t.preventDefault()},i.handleStageClick_=function(){this.reportUserActivity()},i.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},i.documentFullscreenChange_=function(t){var a=t.target.player;if(!(a&&a!==this)){var s=this.el(),o=je[this.fsApi_.fullscreenElement]===s;!o&&s.matches?o=s.matches(":"+this.fsApi_.fullscreen):!o&&s.msMatchesSelector&&(o=s.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(o)}},i.handleTechFullscreenChange_=function(t,a){var s=this;a&&(a.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){s.removeClass("vjs-ios-native-fs")})),this.isFullscreen(a.isFullscreen))},i.handleTechFullscreenError_=function(t,a){this.trigger("fullscreenerror",a)},i.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},i.handleTechEnterPictureInPicture_=function(t){this.isInPictureInPicture(!0)},i.handleTechLeavePictureInPicture_=function(t){this.isInPictureInPicture(!1)},i.handleTechError_=function(){var t=this.tech_.error();this.error(t)},i.handleTechTextData_=function(){var t=null;arguments.length>1&&(t=arguments[1]),this.trigger("textdata",t)},i.getCache=function(){return this.cache_},i.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},i.techCall_=function(t,a){this.ready(function(){if(t in c4)return u4(this.middleware_,this.tech_,t,a);if(t in Mb)return Lb(this.middleware_,this.tech_,t,a);try{this.tech_&&this.tech_[t](a)}catch(s){throw ft(s),s}},!0)},i.techGet_=function(t){if(!(!this.tech_||!this.tech_.isReady_)){if(t in l4)return o4(this.middleware_,this.tech_,t);if(t in Mb)return Lb(this.middleware_,this.tech_,t);try{return this.tech_[t]()}catch(a){throw this.tech_[t]===void 0?(ft("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",a),a):a.name==="TypeError"?(ft("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",a),this.tech_.isReady_=!1,a):(ft(a),a)}}},i.play=function(){var t=this,a=this.options_.Promise||q.Promise;return a?new a(function(s){t.play_(s)}):this.play_()},i.play_=function(t){var a=this;t===void 0&&(t=fn),this.playCallbacks_.push(t);var s=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!s){this.waitToPlay_=function(l){a.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!s&&(rh||zr)&&this.load();return}var o=this.techGet_("play");o===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(o)},i.runPlayTerminatedQueue_=function(){var t=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],t.forEach(function(a){a()})},i.runPlayCallbacks_=function(t){var a=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],a.forEach(function(s){s(t)})},i.pause=function(){this.techCall_("pause")},i.paused=function(){return this.techGet_("paused")!==!1},i.played=function(){return this.techGet_("played")||bs(0,0)},i.scrubbing=function(t){if(typeof t>"u")return this.scrubbing_;this.scrubbing_=!!t,this.techCall_("setScrubbing",this.scrubbing_),t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},i.currentTime=function(t){if(typeof t<"u"){if(t<0&&(t=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=t,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",t),this.cache_.initTime=0;return}return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime},i.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},i.duration=function(t){if(t===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;t=parseFloat(t),t<0&&(t=1/0),t!==this.cache_.duration&&(this.cache_.duration=t,t===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(t)||this.trigger("durationchange"))},i.remainingTime=function(){return this.duration()-this.currentTime()},i.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},i.buffered=function(){var t=this.techGet_("buffered");return(!t||!t.length)&&(t=bs(0,0)),t},i.bufferedPercent=function(){return A1(this.buffered(),this.duration())},i.bufferedEnd=function(){var t=this.buffered(),a=this.duration(),s=t.end(t.length-1);return s>a&&(s=a),s},i.volume=function(t){var a;if(t!==void 0){a=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=a,this.techCall_("setVolume",a),a>0&&this.lastVolume_(a);return}return a=parseFloat(this.techGet_("volume")),isNaN(a)?1:a},i.muted=function(t){if(t!==void 0){this.techCall_("setMuted",t);return}return this.techGet_("muted")||!1},i.defaultMuted=function(t){return t!==void 0?this.techCall_("setDefaultMuted",t):this.techGet_("defaultMuted")||!1},i.lastVolume_=function(t){if(t!==void 0&&t!==0){this.cache_.lastVolume=t;return}return this.cache_.lastVolume},i.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},i.isFullscreen=function(t){if(t!==void 0){var a=this.isFullscreen_;this.isFullscreen_=Boolean(t),this.isFullscreen_!==a&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_},i.requestFullscreen=function(t){var a=this.options_.Promise||q.Promise;if(a){var s=this;return new a(function(o,l){function c(){s.off("fullscreenerror",h),s.off("fullscreenchange",d)}function d(){c(),o()}function h(y,S){c(),l(S)}s.one("fullscreenchange",d),s.one("fullscreenerror",h);var p=s.requestFullscreenHelper_(t);p&&(p.then(c,c),p.then(o,l))})}return this.requestFullscreenHelper_()},i.requestFullscreenHelper_=function(t){var a=this,s;if(this.fsApi_.prefixed||(s=this.options_.fullscreen&&this.options_.fullscreen.options||{},t!==void 0&&(s=t)),this.fsApi_.requestFullscreen){var o=this.el_[this.fsApi_.requestFullscreen](s);return o&&o.then(function(){return a.isFullscreen(!0)},function(){return a.isFullscreen(!1)}),o}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},i.exitFullscreen=function(){var t=this.options_.Promise||q.Promise;if(t){var a=this;return new t(function(s,o){function l(){a.off("fullscreenerror",d),a.off("fullscreenchange",c)}function c(){l(),s()}function d(p,y){l(),o(y)}a.one("fullscreenchange",c),a.one("fullscreenerror",d);var h=a.exitFullscreenHelper_();h&&(h.then(l,l),h.then(s,o))})}return this.exitFullscreenHelper_()},i.exitFullscreenHelper_=function(){var t=this;if(this.fsApi_.requestFullscreen){var a=je[this.fsApi_.exitFullscreen]();return a&&fn(a.then(function(){return t.isFullscreen(!1)})),a}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},i.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=je.documentElement.style.overflow,vi(je,"keydown",this.boundFullWindowOnEscKey_),je.documentElement.style.overflow="hidden",Gn(je.body,"vjs-full-window"),this.trigger("enterFullWindow")},i.fullWindowOnEscKey=function(t){it.isEventKey(t,"Esc")&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},i.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,Pr(je,"keydown",this.boundFullWindowOnEscKey_),je.documentElement.style.overflow=this.docOrigOverflow,jl(je.body,"vjs-full-window"),this.trigger("exitFullWindow")},i.disablePictureInPicture=function(t){if(t===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",t),this.options_.disablePictureInPicture=t,this.trigger("disablepictureinpicturechanged")},i.isInPictureInPicture=function(t){if(t!==void 0){this.isInPictureInPicture_=!!t,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_},i.requestPictureInPicture=function(){if("pictureInPictureEnabled"in je&&this.disablePictureInPicture()===!1)return this.techGet_("requestPictureInPicture")},i.exitPictureInPicture=function(){if("pictureInPictureEnabled"in je)return je.exitPictureInPicture()},i.handleKeyDown=function(t){var a=this.options_.userActions;if(!(!a||!a.hotkeys)){var s=function(l){var c=l.tagName.toLowerCase();if(l.isContentEditable)return!0;var d=["button","checkbox","hidden","radio","reset","submit"];if(c==="input")return d.indexOf(l.type)===-1;var h=["textarea"];return h.indexOf(c)!==-1};s(this.el_.ownerDocument.activeElement)||(typeof a.hotkeys=="function"?a.hotkeys.call(this,t):this.handleHotkeys(t))}},i.handleHotkeys=function(t){var a=this.options_.userActions?this.options_.userActions.hotkeys:{},s=a.fullscreenKey,o=s===void 0?function(C){return it.isEventKey(C,"f")}:s,l=a.muteKey,c=l===void 0?function(C){return it.isEventKey(C,"m")}:l,d=a.playPauseKey,h=d===void 0?function(C){return it.isEventKey(C,"k")||it.isEventKey(C,"Space")}:d;if(o.call(this,t)){t.preventDefault(),t.stopPropagation();var p=Le.getComponent("FullscreenToggle");je[this.fsApi_.fullscreenEnabled]!==!1&&p.prototype.handleClick.call(this,t)}else if(c.call(this,t)){t.preventDefault(),t.stopPropagation();var y=Le.getComponent("MuteToggle");y.prototype.handleClick.call(this,t)}else if(h.call(this,t)){t.preventDefault(),t.stopPropagation();var S=Le.getComponent("PlayToggle");S.prototype.handleClick.call(this,t)}},i.canPlayType=function(t){for(var a,s=0,o=this.options_.techOrder;s<o.length;s++){var l=o[s],c=Dt.getTech(l);if(c||(c=Le.getComponent(l)),!c){ft.error('The "'+l+'" tech is undefined. Skipped browser support check for that tech.');continue}if(c.isSupported()&&(a=c.canPlayType(t),a))return a}return""},i.selectSource=function(t){var a=this,s=this.options_.techOrder.map(function(h){return[h,Dt.getTech(h)]}).filter(function(h){var p=h[0],y=h[1];return y?y.isSupported():(ft.error('The "'+p+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),o=function(p,y,S){var C;return p.some(function(x){return y.some(function(I){if(C=S(x,I),C)return!0})}),C},l,c=function(p){return function(y,S){return p(S,y)}},d=function(p,y){var S=p[0],C=p[1];if(C.canPlaySource(y,a.options_[S.toLowerCase()]))return{source:y,tech:S}};return this.options_.sourceOrder?l=o(t,s,c(d)):l=o(s,t,d),l||!1},i.handleSrc_=function(t,a){var s=this;if(typeof t>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var o=g4(t);if(!o.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,a||(this.cache_.sources=o),this.updateSourceCaches_(o[0]),a4(this,o[0],function(d,h){s.middleware_=h,a||(s.cache_.sources=o),s.updateSourceCaches_(d);var p=s.src_(d);if(p){if(o.length>1)return s.handleSrc_(o.slice(1));s.changingSrc_=!1,s.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),s.triggerReady();return}s4(h,s.tech_)}),this.options_.retryOnError&&o.length>1){var l=function(){s.error(null),s.handleSrc_(o.slice(1),!0)},c=function(){s.off("error",l)};this.one("error",l),this.one("playing",c),this.resetRetryOnError_=function(){s.off("error",l),s.off("playing",c)}}},i.src=function(t){return this.handleSrc_(t,!1)},i.src_=function(t){var a=this,s=this.selectSource([t]);return s?j3(s.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(s.tech,s.source),this.tech_.ready(function(){a.changingSrc_=!1}),!1):!0},i.load=function(){this.techCall_("load")},i.reset=function(){var t=this,a=this.options_.Promise||q.Promise;if(this.paused()||!a)this.doReset_();else{var s=this.play();fn(s.then(function(){return t.doReset_()}))}},i.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),zn(this)&&this.trigger("playerreset")},i.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},i.resetProgressBar_=function(){this.currentTime(0);var t=this.controlBar||{},a=t.durationDisplay,s=t.remainingTimeDisplay;a&&a.updateContent(),s&&s.updateContent()},i.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},i.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},i.currentSources=function(){var t=this.currentSource(),a=[];return Object.keys(t).length!==0&&a.push(t),this.cache_.sources||a},i.currentSource=function(){return this.cache_.source||{}},i.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},i.currentType=function(){return this.currentSource()&&this.currentSource().type||""},i.preload=function(t){if(t!==void 0){this.techCall_("setPreload",t),this.options_.preload=t;return}return this.techGet_("preload")},i.autoplay=function(t){if(t===void 0)return this.options_.autoplay||!1;var a;typeof t=="string"&&/(any|play|muted)/.test(t)||t===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=t,this.manualAutoplay_(typeof t=="string"?t:"play"),a=!1):t?this.options_.autoplay=!0:this.options_.autoplay=!1,a=typeof a>"u"?this.options_.autoplay:a,this.tech_&&this.techCall_("setAutoplay",a)},i.playsinline=function(t){return t!==void 0?(this.techCall_("setPlaysinline",t),this.options_.playsinline=t,this):this.techGet_("playsinline")},i.loop=function(t){if(t!==void 0){this.techCall_("setLoop",t),this.options_.loop=t;return}return this.techGet_("loop")},i.poster=function(t){if(t===void 0)return this.poster_;t||(t=""),t!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))},i.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var t=this.tech_.poster()||"";t!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},i.controls=function(t){if(t===void 0)return!!this.controls_;t=!!t,this.controls_!==t&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},i.usingNativeControls=function(t){if(t===void 0)return!!this.usingNativeControls_;t=!!t,this.usingNativeControls_!==t&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},i.error=function(t){var a=this;if(t===void 0)return this.error_||null;if(wa("beforeerror").forEach(function(o){var l=o(a,t);if(!(Xn(l)&&!Array.isArray(l)||typeof l=="string"||typeof l=="number"||l===null)){a.log.error("please return a value that MediaError expects in beforeerror hooks");return}t=l}),this.options_.suppressNotSupportedError&&t&&t.code===4){var s=function(){this.error(t)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],s),this.one("loadstart",function(){this.off(["click","touchstart"],s)});return}if(t===null){this.error_=t,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new Wr(t),this.addClass("vjs-error"),ft.error("(CODE:"+this.error_.code+" "+Wr.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),wa("error").forEach(function(o){return o(a,a.error_)})},i.reportUserActivity=function(t){this.userActivity_=!0},i.userActive=function(t){if(t===void 0)return this.userActive_;if(t=!!t,t!==this.userActive_){if(this.userActive_=t,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(a){a.stopPropagation(),a.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},i.listenForUserActivity_=function(){var t,a,s,o=Nt(this,this.reportUserActivity),l=function(S){(S.screenX!==a||S.screenY!==s)&&(a=S.screenX,s=S.screenY,o())},c=function(){o(),this.clearInterval(t),t=this.setInterval(o,250)},d=function(S){o(),this.clearInterval(t)};this.on("mousedown",c),this.on("mousemove",l),this.on("mouseup",d),this.on("mouseleave",d);var h=this.getChild("controlBar");h&&!zr&&!Zn&&(h.on("mouseenter",function(y){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),h.on("mouseleave",function(y){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",o),this.on("keyup",o);var p;this.setInterval(function(){if(!!this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(p);var y=this.options_.inactivityTimeout;y<=0||(p=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},y))}},250)},i.playbackRate=function(t){if(t!==void 0){this.techCall_("setPlaybackRate",t);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1},i.defaultPlaybackRate=function(t){return t!==void 0?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},i.isAudio=function(t){if(t!==void 0){this.isAudio_=!!t;return}return!!this.isAudio_},i.enableAudioOnlyUI_=function(){var t=this;this.addClass("vjs-audio-only-mode");var a=this.children(),s=this.getChild("ControlBar"),o=s&&s.currentHeight();a.forEach(function(l){l!==s&&l.el_&&!l.hasClass("vjs-hidden")&&(l.hide(),t.audioOnlyCache_.hiddenChildren.push(l))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(o),this.trigger("audioonlymodechange")},i.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(t){return t.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},i.audioOnlyMode=function(t){var a=this;if(typeof t!="boolean"||t===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=t;var s=this.options_.Promise||q.Promise;if(s){if(t){var o=[];return this.isInPictureInPicture()&&o.push(this.exitPictureInPicture()),this.isFullscreen()&&o.push(this.exitFullscreen()),this.audioPosterMode()&&o.push(this.audioPosterMode(!1)),s.all(o).then(function(){return a.enableAudioOnlyUI_()})}return s.resolve().then(function(){return a.disableAudioOnlyUI_()})}t?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},i.enablePosterModeUI_=function(){var t=this.tech_&&this.tech_;t.hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},i.disablePosterModeUI_=function(){var t=this.tech_&&this.tech_;t.show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},i.audioPosterMode=function(t){var a=this;if(typeof t!="boolean"||t===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=t;var s=this.options_.Promise||q.Promise;if(s){if(t){if(this.audioOnlyMode()){var o=this.audioOnlyMode(!1);return o.then(function(){a.enablePosterModeUI_()})}return s.resolve().then(function(){a.enablePosterModeUI_()})}return s.resolve().then(function(){a.disablePosterModeUI_()})}if(t){this.audioOnlyMode()&&this.audioOnlyMode(!1),this.enablePosterModeUI_();return}this.disablePosterModeUI_()},i.addTextTrack=function(t,a,s){if(this.tech_)return this.tech_.addTextTrack(t,a,s)},i.addRemoteTextTrack=function(t,a){if(this.tech_)return this.tech_.addRemoteTextTrack(t,a)},i.removeRemoteTextTrack=function(t){t===void 0&&(t={});var a=t,s=a.track;if(s||(s=t),this.tech_)return this.tech_.removeRemoteTextTrack(s)},i.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},i.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},i.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},i.language=function(t){if(t===void 0)return this.language_;this.language_!==String(t).toLowerCase()&&(this.language_=String(t).toLowerCase(),zn(this)&&this.trigger("languagechange"))},i.languages=function(){return Mt(e.prototype.options_.languages,this.languages_)},i.toJSON=function(){var t=Mt(this.options_),a=t.tracks;t.tracks=[];for(var s=0;s<a.length;s++){var o=a[s];o=Mt(o),o.player=void 0,t.tracks[s]=o}return t},i.createModal=function(t,a){var s=this;a=a||{},a.content=t||"";var o=new Qo(this,a);return this.addChild(o),o.on("dispose",function(){s.removeChild(o)}),o.open(),o},i.updateCurrentBreakpoint_=function(){if(!!this.responsive())for(var t=this.currentBreakpoint(),a=this.currentWidth(),s=0;s<wg.length;s++){var o=wg[s],l=this.breakpoints_[o];if(a<=l){if(t===o)return;t&&this.removeClass(Pf[t]),this.addClass(Pf[o]),this.breakpoint_=o;break}}},i.removeCurrentBreakpoint_=function(){var t=this.currentBreakpointClass();this.breakpoint_="",t&&this.removeClass(t)},i.breakpoints=function(t){return t===void 0?qt(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=qt({},z4,t),this.updateCurrentBreakpoint_(),qt(this.breakpoints_))},i.responsive=function(t){if(t===void 0)return this.responsive_;t=Boolean(t);var a=this.responsive_;if(t!==a)return this.responsive_=t,t?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),t},i.currentBreakpoint=function(){return this.breakpoint_},i.currentBreakpointClass=function(){return Pf[this.breakpoint_]||""},i.loadMedia=function(t,a){var s=this;if(!(!t||typeof t!="object")){this.reset(),this.cache_.media=Mt(t);var o=this.cache_.media,l=o.artwork,c=o.poster,d=o.src,h=o.textTracks;!l&&c&&(this.cache_.media.artwork=[{src:c,type:nd(c)}]),d&&this.src(d),c&&this.poster(c),Array.isArray(h)&&h.forEach(function(p){return s.addRemoteTextTrack(p,!1)}),this.ready(a)}},i.getMedia=function(){if(!this.cache_.media){var t=this.poster(),a=this.currentSources(),s=Array.prototype.map.call(this.remoteTextTracks(),function(l){return{kind:l.kind,label:l.label,language:l.language,src:l.src}}),o={src:a,textTracks:s};return t&&(o.poster=t,o.artwork=[{src:o.poster,type:nd(o.poster)}]),o}return Mt(this.cache_.media)},e.getTagSettings=function(t){var a={sources:[],tracks:[]},s=jn(t),o=s["data-setup"];if(Ts(t,"vjs-fill")&&(s.fill=!0),Ts(t,"vjs-fluid")&&(s.fluid=!0),o!==null){var l=kB(o||"{}"),c=l[0],d=l[1];c&&ft.error(c),qt(s,d)}if(qt(a,s),t.hasChildNodes())for(var h=t.childNodes,p=0,y=h.length;p<y;p++){var S=h[p],C=S.nodeName.toLowerCase();C==="source"?a.sources.push(jn(S)):C==="track"&&a.tracks.push(jn(S))}return a},i.flexNotSupported_=function(){var t=je.createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)},i.debug=function(t){if(t===void 0)return this.debugEnabled_;t?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},i.playbackRates=function(t){if(t===void 0)return this.cache_.playbackRates;!Array.isArray(t)||!t.every(function(a){return typeof a=="number"})||(this.cache_.playbackRates=t,this.trigger("playbackrateschange"))},e}(Le);Br.names.forEach(function(r){var e=Br[r];tr.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});tr.prototype.crossorigin=tr.prototype.crossOrigin;tr.players={};var Ku=q.navigator;tr.prototype.options_={techOrder:Dt.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Ku&&(Ku.languages&&Ku.languages[0]||Ku.userLanguage||Ku.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1};["ended","seeking","seekable","networkState","readyState"].forEach(function(r){tr.prototype[r]=function(){return this.techGet_(r)}});nR.forEach(function(r){tr.prototype["handleTech"+Zt(r)+"_"]=function(){return this.trigger(r)}});Le.registerComponent("Player",tr);var od="plugin",So="activePlugins_",ho={},ud=function(e){return ho.hasOwnProperty(e)},Of=function(e){return ud(e)?ho[e]:void 0},aR=function(e,i){e[So]=e[So]||{},e[So][i]=!0},ld=function(e,i,n){var t=(n?"before":"")+"pluginsetup";e.trigger(t,i),e.trigger(t+":"+i.name,i)},q4=function(e,i){var n=function(){ld(this,{name:e,plugin:i,instance:null},!0);var a=i.apply(this,arguments);return aR(this,e),ld(this,{name:e,plugin:i,instance:a}),a};return Object.keys(i).forEach(function(t){n[t]=i[t]}),n},Yb=function(e,i){return i.prototype.name=e,function(){ld(this,{name:e,plugin:i,instance:null},!0);for(var n=arguments.length,t=new Array(n),a=0;a<n;a++)t[a]=arguments[a];var s=Cf(i,[this].concat(t));return this[e]=function(){return s},ld(this,s.getEventHash()),s}},mn=function(){function r(i){if(this.constructor===r)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=i,this.log||(this.log=this.player.log.createLogger(this.name)),hy(this),delete this.trigger,w1(this,this.constructor.defaultState),aR(i,this.name),this.dispose=this.dispose.bind(this),i.on("dispose",this.dispose)}var e=r.prototype;return e.version=function(){return this.constructor.VERSION},e.getEventHash=function(n){return n===void 0&&(n={}),n.name=this.name,n.plugin=this.constructor,n.instance=this,n},e.trigger=function(n,t){return t===void 0&&(t={}),Xo(this.eventBusEl_,n,this.getEventHash(t))},e.handleStateChanged=function(n){},e.dispose=function(){var n=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[So][n]=!1,this.player=this.state=null,t[n]=Yb(n,ho[n])},r.isBasic=function(n){var t=typeof n=="string"?Of(n):n;return typeof t=="function"&&!r.prototype.isPrototypeOf(t.prototype)},r.registerPlugin=function(n,t){if(typeof n!="string")throw new Error('Illegal plugin name, "'+n+'", must be a string, was '+typeof n+".");if(ud(n))ft.warn('A plugin named "'+n+'" already exists. You may want to avoid re-registering plugins!');else if(tr.prototype.hasOwnProperty(n))throw new Error('Illegal plugin name, "'+n+'", cannot share a name with an existing player method!');if(typeof t!="function")throw new Error('Illegal plugin for "'+n+'", must be a function, was '+typeof t+".");return ho[n]=t,n!==od&&(r.isBasic(t)?tr.prototype[n]=q4(n,t):tr.prototype[n]=Yb(n,t)),t},r.deregisterPlugin=function(n){if(n===od)throw new Error("Cannot de-register base plugin.");ud(n)&&(delete ho[n],delete tr.prototype[n])},r.getPlugins=function(n){n===void 0&&(n=Object.keys(ho));var t;return n.forEach(function(a){var s=Of(a);s&&(t=t||{},t[a]=s)}),t},r.getPluginVersion=function(n){var t=Of(n);return t&&t.VERSION||""},r}();mn.getPlugin=Of;mn.BASE_PLUGIN_NAME=od;mn.registerPlugin(od,mn);tr.prototype.usingPlugin=function(r){return!!this[So]&&this[So][r]===!0};tr.prototype.hasPlugin=function(r){return!!ud(r)};var K4=function(e,i){i===void 0&&(i={});var n=function(){e.apply(this,arguments)},t={};typeof i=="object"?(i.constructor!==Object.prototype.constructor&&(n=i.constructor),t=i):typeof i=="function"&&(n=i),b2(n,e),e&&(n.super_=e);for(var a in t)t.hasOwnProperty(a)&&(n.prototype[a]=t[a]);return n},sR=function(e){return e.indexOf("#")===0?e.slice(1):e};function ce(r,e,i){var n=ce.getPlayer(r);if(n)return e&&ft.warn('Player "'+r+'" is already initialised. Options will not be applied.'),i&&n.ready(i),n;var t=typeof r=="string"?Aa("#"+sR(r)):r;if(!Yo(t))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!t.ownerDocument.defaultView||!t.ownerDocument.body.contains(t))&&ft.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(t.parentNode&&t.parentNode.hasAttribute("data-vjs-player")?t.parentNode:t).cloneNode(!0)),wa("beforesetup").forEach(function(s){var o=s(t,Mt(e));if(!Xn(o)||Array.isArray(o)){ft.error("please return an object in beforesetup hooks");return}e=Mt(e,o)});var a=Le.getComponent("Player");return n=new a(t,e,i),wa("setup").forEach(function(s){return s(n)}),n}ce.hooks_=Vn;ce.hooks=wa;ce.hook=b3;ce.hookOnce=S3;ce.removeHook=JC;if(q.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&Ko()){var pf=Aa(".vjs-styles-defaults");if(!pf){pf=b1("vjs-styles-defaults");var wm=Aa("head");wm&&wm.insertBefore(pf,wm.firstChild),S1(pf,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}bg(1,ce);ce.VERSION=QC;ce.options=tr.prototype.options_;ce.getPlayers=function(){return tr.players};ce.getPlayer=function(r){var e=tr.players,i;if(typeof r=="string"){var n=sR(r),t=e[n];if(t)return t;i=Aa("#"+n)}else i=r;if(Yo(i)){var a=i,s=a.player,o=a.playerId;if(s||e[o])return s||e[o]}};ce.getAllPlayers=function(){return Object.keys(tr.players).map(function(r){return tr.players[r]}).filter(Boolean)};ce.players=tr.players;ce.getComponent=Le.getComponent;ce.registerComponent=function(r,e){Dt.isTech(e)&&ft.warn("The "+r+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Le.registerComponent.call(Le,r,e)};ce.getTech=Dt.getTech;ce.registerTech=Dt.registerTech;ce.use=n4;Object.defineProperty(ce,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(ce.middleware,"TERMINATOR",{value:id,writeable:!1,enumerable:!0});ce.browser=A3;ce.TOUCH_ENABLED=No;ce.extend=K4;ce.mergeOptions=Mt;ce.bind=Nt;ce.registerPlugin=mn.registerPlugin;ce.deregisterPlugin=mn.deregisterPlugin;ce.plugin=function(r,e){return ft.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),mn.registerPlugin(r,e)};ce.getPlugins=mn.getPlugins;ce.getPlugin=mn.getPlugin;ce.getPluginVersion=mn.getPluginVersion;ce.addLanguage=function(r,e){var i;return r=(""+r).toLowerCase(),ce.options.languages=Mt(ce.options.languages,(i={},i[r]=e,i)),ce.options.languages[r]};ce.log=ft;ce.createLogger=e1;ce.createTimeRange=ce.createTimeRanges=bs;ce.formatTime=Vo;ce.setFormatTime=x4;ce.resetFormatTime=E4;ce.parseUrl=my;ce.isCrossOrigin=uh;ce.EventTarget=mr;ce.on=vi;ce.one=sh;ce.off=Pr;ce.trigger=Xo;ce.xhr=qd.exports;ce.TextTrack=Vl;ce.AudioTrack=I1;ce.VideoTrack=D1;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(r){ce[r]=function(){return ft.warn("videojs."+r+"() is deprecated; use videojs.dom."+r+"() instead"),_1[r].apply(null,arguments)}});ce.computedStyle=Rl;ce.dom=_1;ce.url=e4;ce.defineLazyProperty=Ly;ce.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});/*! @name @videojs/http-streaming @version 2.14.3 @license Apache-2.0 */var Bi=Yd,cd=function(e,i,n){return e&&n&&n.responseURL&&i!==n.responseURL?n.responseURL:i},Yi=function(e){return ce.log.debug?ce.log.debug.bind(ce,"VHS:",e+" >"):function(){}},Pa=1/30,dn=Pa*3,oR=function(e,i){var n=[],t;if(e&&e.length)for(t=0;t<e.length;t++)i(e.start(t),e.end(t))&&n.push([e.start(t),e.end(t)]);return ce.createTimeRanges(n)},po=function(e,i){return oR(e,function(n,t){return n-dn<=i&&t+dn>=i})},mf=function(e,i){return oR(e,function(n){return n-Pa>=i})},Y4=function(e){if(e.length<2)return ce.createTimeRanges();for(var i=[],n=1;n<e.length;n++){var t=e.end(n-1),a=e.start(n);i.push([t,a])}return ce.createTimeRanges(i)},X4=function(e,i){var n=null,t=null,a=0,s=[],o=[];if(!e||!e.length||!i||!i.length)return ce.createTimeRange();for(var l=e.length;l--;)s.push({time:e.start(l),type:"start"}),s.push({time:e.end(l),type:"end"});for(l=i.length;l--;)s.push({time:i.start(l),type:"start"}),s.push({time:i.end(l),type:"end"});for(s.sort(function(c,d){return c.time-d.time}),l=0;l<s.length;l++)s[l].type==="start"?(a++,a===2&&(n=s[l].time)):s[l].type==="end"&&(a--,a===1&&(t=s[l].time)),n!==null&&t!==null&&(o.push([n,t]),n=null,t=null);return ce.createTimeRanges(o)},uR=function(e){var i=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)i.push(e.start(n)+" => "+e.end(n));return i.join(", ")},Q4=function(e,i,n){n===void 0&&(n=1);var t=e.length?e.end(e.length-1):0;return(t-i)/n},hs=function(e){for(var i=[],n=0;n<e.length;n++)i.push({start:e.start(n),end:e.end(n)});return i},J4=function(e,i){if(e===i)return!1;if(!e&&i||!i&&e||e.length!==i.length)return!0;for(var n=0;n<e.length;n++)if(e.start(n)!==i.start(n)||e.end(n)!==i.end(n))return!0;return!1},Xb=function(e){if(!(!e||!e.length||!e.end))return e.end(e.length-1)},My=function(e,i){var n=0;if(!e||!e.length)return n;for(var t=0;t<e.length;t++){var a=e.start(t),s=e.end(t);if(!(i>s)){if(i>a&&i<=s){n+=s-i;continue}n+=s-a}}return n},Qb=ce.createTimeRange,Ny=function(e,i){if(!i.preload)return i.duration;var n=0;return(i.parts||[]).forEach(function(t){n+=t.duration}),(i.preloadHints||[]).forEach(function(t){t.type==="PART"&&(n+=e.partTargetDuration)}),n},Ag=function(e){return(e.segments||[]).reduce(function(i,n,t){return n.parts?n.parts.forEach(function(a,s){i.push({duration:a.duration,segmentIndex:t,partIndex:s,part:a,segment:n})}):i.push({duration:n.duration,segmentIndex:t,partIndex:null,segment:n,part:null}),i},[])},lR=function(e){var i=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return i&&i.parts||[]},cR=function(e){var i=e.preloadSegment;if(!!i){var n=i.parts,t=i.preloadHints,a=(t||[]).reduce(function(s,o){return s+(o.type==="PART"?1:0)},0);return a+=n&&n.length?n.length:0,a}},fR=function(e,i){if(i.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;var n=lR(i).length>0;return n&&i.serverControl&&i.serverControl.partHoldBack?i.serverControl.partHoldBack:n&&i.partTargetDuration?i.partTargetDuration*3:i.serverControl&&i.serverControl.holdBack?i.serverControl.holdBack:i.targetDuration?i.targetDuration*3:0},Z4=function(e,i){var n=0,t=i-e.mediaSequence,a=e.segments[t];if(a){if(typeof a.start<"u")return{result:a.start,precise:!0};if(typeof a.end<"u")return{result:a.end-a.duration,precise:!0}}for(;t--;){if(a=e.segments[t],typeof a.end<"u")return{result:n+a.end,precise:!0};if(n+=Ny(e,a),typeof a.start<"u")return{result:n+a.start,precise:!0}}return{result:n,precise:!1}},eV=function(e,i){for(var n=0,t,a=i-e.mediaSequence;a<e.segments.length;a++){if(t=e.segments[a],typeof t.start<"u")return{result:t.start-n,precise:!0};if(n+=Ny(e,t),typeof t.end<"u")return{result:t.end-n,precise:!0}}return{result:-1,precise:!1}},dR=function(e,i,n){if(typeof i>"u"&&(i=e.mediaSequence+e.segments.length),i<e.mediaSequence)return 0;var t=Z4(e,i);if(t.precise)return t.result;var a=eV(e,i);return a.precise?a.result:t.result+n},hR=function(e,i,n){if(!e)return 0;if(typeof n!="number"&&(n=0),typeof i>"u"){if(e.totalDuration)return e.totalDuration;if(!e.endList)return q.Infinity}return dR(e,i,n)},cl=function(e){var i=e.defaultDuration,n=e.durationList,t=e.startIndex,a=e.endIndex,s=0;if(t>a){var o=[a,t];t=o[0],a=o[1]}if(t<0){for(var l=t;l<Math.min(0,a);l++)s+=i;t=0}for(var c=t;c<a;c++)s+=n[c].duration;return s},pR=function(e,i,n,t){if(!e||!e.segments)return null;if(e.endList)return hR(e);if(i===null)return null;i=i||0;var a=dR(e,e.mediaSequence+e.segments.length,i);return n&&(t=typeof t=="number"?t:fR(null,e),a-=t),Math.max(0,a)},tV=function(e,i,n){var t=!0,a=i||0,s=pR(e,i,t,n);return s===null?Qb():Qb(a,s)},rV=function(e){for(var i=e.playlist,n=e.currentTime,t=e.startingSegmentIndex,a=e.startingPartIndex,s=e.startTime,o=e.experimentalExactManifestTimings,l=n-s,c=Ag(i),d=0,h=0;h<c.length;h++){var p=c[h];if(t===p.segmentIndex&&!(typeof a=="number"&&typeof p.partIndex=="number"&&a!==p.partIndex)){d=h;break}}if(l<0){if(d>0)for(var y=d-1;y>=0;y--){var S=c[y];if(l+=S.duration,o){if(l<0)continue}else if(l+Pa<=0)continue;return{partIndex:S.partIndex,segmentIndex:S.segmentIndex,startTime:s-cl({defaultDuration:i.targetDuration,durationList:c,startIndex:d,endIndex:y})}}return{partIndex:c[0]&&c[0].partIndex||null,segmentIndex:c[0]&&c[0].segmentIndex||0,startTime:n}}if(d<0){for(var C=d;C<0;C++)if(l-=i.targetDuration,l<0)return{partIndex:c[0]&&c[0].partIndex||null,segmentIndex:c[0]&&c[0].segmentIndex||0,startTime:n};d=0}for(var x=d;x<c.length;x++){var I=c[x];if(l-=I.duration,o){if(l>0)continue}else if(l-Pa>=0)continue;return{partIndex:I.partIndex,segmentIndex:I.segmentIndex,startTime:s+cl({defaultDuration:i.targetDuration,durationList:c,startIndex:d,endIndex:x})}}return{segmentIndex:c[c.length-1].segmentIndex,partIndex:c[c.length-1].partIndex,startTime:n}},mR=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},Fy=function(e){return e.excludeUntil&&e.excludeUntil===1/0},dh=function(e){var i=mR(e);return!e.disabled&&!i},iV=function(e){return e.disabled},nV=function(e){for(var i=0;i<e.segments.length;i++)if(e.segments[i].key)return!0;return!1},gR=function(e,i){return i.attributes&&i.attributes[e]},aV=function(e,i,n,t){if(t===void 0&&(t=0),!gR("BANDWIDTH",n))return NaN;var a=e*n.attributes.BANDWIDTH;return(a-t*8)/i},Pg=function(e,i){if(e.playlists.length===1)return!0;var n=i.attributes.BANDWIDTH||Number.MAX_VALUE;return e.playlists.filter(function(t){return dh(t)?(t.attributes.BANDWIDTH||0)<n:!1}).length===0},Uy=function(e,i){return!e&&!i||!e&&i||e&&!i?!1:!!(e===i||e.id&&i.id&&e.id===i.id||e.resolvedUri&&i.resolvedUri&&e.resolvedUri===i.resolvedUri||e.uri&&i.uri&&e.uri===i.uri)},Jb=function(e,i){var n=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},t=!1;for(var a in n){for(var s in n[a])if(t=i(n[a][s]),t)break;if(t)break}return!!t},$l=function(e){if(!e||!e.playlists||!e.playlists.length){var i=Jb(e,function(s){return s.playlists&&s.playlists.length||s.uri});return i}for(var n=function(o){var l=e.playlists[o],c=l.attributes&&l.attributes.CODECS;if(c&&c.split(",").every(function(h){return cC(h)}))return"continue";var d=Jb(e,function(h){return Uy(l,h)});return d?"continue":{v:!1}},t=0;t<e.playlists.length;t++){var a=n(t);if(a!=="continue"&&typeof a=="object")return a.v}return!0},ri={liveEdgeDelay:fR,duration:hR,seekable:tV,getMediaInfoForTime:rV,isEnabled:dh,isDisabled:iV,isBlacklisted:mR,isIncompatible:Fy,playlistEnd:pR,isAes:nV,hasAttribute:gR,estimateSegmentRequestTime:aV,isLowestEnabledRendition:Pg,isAudioOnly:$l,playlistMatch:Uy,segmentDurationWithParts:Ny},vR=ce.log,By=function(e,i){return e+"-"+i},sV=function(e){var i=e.onwarn,n=e.oninfo,t=e.manifestString,a=e.customTagParsers,s=a===void 0?[]:a,o=e.customTagMappers,l=o===void 0?[]:o,c=e.experimentalLLHLS,d=new A2;i&&d.on("warn",i),n&&d.on("info",n),s.forEach(function(C){return d.addParser(C)}),l.forEach(function(C){return d.addTagMapper(C)}),d.push(t),d.end();var h=d.manifest;if(c||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(C){h.hasOwnProperty(C)&&delete h[C]}),h.segments&&h.segments.forEach(function(C){["parts","preloadHints"].forEach(function(x){C.hasOwnProperty(x)&&delete C[x]})})),!h.targetDuration){var p=10;h.segments&&h.segments.length&&(p=h.segments.reduce(function(C,x){return Math.max(C,x.duration)},0)),i&&i("manifest has no targetDuration defaulting to "+p),h.targetDuration=p}var y=lR(h);if(y.length&&!h.partTargetDuration){var S=y.reduce(function(C,x){return Math.max(C,x.duration)},0);i&&(i("manifest has no partTargetDuration defaulting to "+S),vR.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),h.partTargetDuration=S}return h},Gl=function(e,i){!e.mediaGroups||["AUDIO","SUBTITLES"].forEach(function(n){if(!!e.mediaGroups[n])for(var t in e.mediaGroups[n])for(var a in e.mediaGroups[n][t]){var s=e.mediaGroups[n][t][a];i(s,n,t,a)}})},yR=function(e){var i=e.playlist,n=e.uri,t=e.id;i.id=t,i.playlistErrors_=0,n&&(i.uri=n),i.attributes=i.attributes||{}},oV=function(e){for(var i=e.playlists.length;i--;){var n=e.playlists[i];yR({playlist:n,id:By(i,n.uri)}),n.resolvedUri=Bi(e.uri,n.uri),e.playlists[n.id]=n,e.playlists[n.uri]=n,n.attributes.BANDWIDTH||vR.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},uV=function(e){Gl(e,function(i){i.uri&&(i.resolvedUri=Bi(e.uri,i.uri))})},lV=function(e,i){var n=By(0,i),t={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:q.location.href,resolvedUri:q.location.href,playlists:[{uri:i,id:n,resolvedUri:i,attributes:{}}]};return t.playlists[n]=t.playlists[0],t.playlists[i]=t.playlists[0],t},_R=function(e,i){e.uri=i;for(var n=0;n<e.playlists.length;n++)if(!e.playlists[n].uri){var t="placeholder-uri-"+n;e.playlists[n].uri=t}var a=$l(e);Gl(e,function(s,o,l,c){var d="placeholder-uri-"+o+"-"+l+"-"+c;if(!s.playlists||!s.playlists.length){if(a&&o==="AUDIO"&&!s.uri)for(var h=0;h<e.playlists.length;h++){var p=e.playlists[h];if(p.attributes&&p.attributes.AUDIO&&p.attributes.AUDIO===l)return}s.playlists=[Ai({},s)]}s.playlists.forEach(function(y,S){var C=By(S,d);y.uri?y.resolvedUri=y.resolvedUri||Bi(e.uri,y.uri):(y.uri=S===0?d:C,y.resolvedUri=y.uri),y.id=y.id||C,y.attributes=y.attributes||{},e.playlists[y.id]=y,e.playlists[y.uri]=y})}),oV(e),uV(e)},fd=ce.mergeOptions,cV=ce.EventTarget,fV=function(e,i){if(i.endList||!i.serverControl)return e;var n={};if(i.serverControl.canBlockReload){var t=i.preloadSegment,a=i.mediaSequence+i.segments.length;if(t){var s=t.parts||[],o=cR(i)-1;o>-1&&o!==s.length-1&&(n._HLS_part=o),(o>-1||s.length)&&a--}n._HLS_msn=a}if(i.serverControl&&i.serverControl.canSkipUntil&&(n._HLS_skip=i.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){var l=new q.URL(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(c){!n.hasOwnProperty(c)||l.searchParams.set(c,n[c])}),e=l.toString()}return e},dV=function(e,i){if(!e)return i;var n=fd(e,i);if(e.preloadHints&&!i.preloadHints&&delete n.preloadHints,e.parts&&!i.parts)delete n.parts;else if(e.parts&&i.parts)for(var t=0;t<i.parts.length;t++)e.parts&&e.parts[t]&&(n.parts[t]=fd(e.parts[t],i.parts[t]));return!e.skipped&&i.skipped&&(n.skipped=!1),e.preload&&!i.preload&&(n.preload=!1),n},hV=function(e,i,n){var t=e.slice(),a=i.slice();n=n||0;for(var s=[],o,l=0;l<a.length;l++){var c=t[l+n],d=a[l];c?(o=c.map||o,s.push(dV(c,d))):(o&&!d.map&&(d.map=o),s.push(d))}return s},TR=function(e,i){!e.resolvedUri&&e.uri&&(e.resolvedUri=Bi(i,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=Bi(i,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=Bi(i,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=Bi(i,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach(function(n){n.resolvedUri||(n.resolvedUri=Bi(i,n.uri))}),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach(function(n){n.resolvedUri||(n.resolvedUri=Bi(i,n.uri))})},bR=function(e){var i=e.segments||[],n=e.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints){for(var t=0;t<n.preloadHints.length;t++)if(n.preloadHints[t].type==="MAP")return i}n.duration=e.targetDuration,n.preload=!0,i.push(n)}return i},SR=function(e,i){return e===i||e.segments&&i.segments&&e.segments.length===i.segments.length&&e.endList===i.endList&&e.mediaSequence===i.mediaSequence&&e.preloadSegment===i.preloadSegment},Og=function(e,i,n){n===void 0&&(n=SR);var t=fd(e,{}),a=t.playlists[i.id];if(!a||n(a,i))return null;i.segments=bR(i);var s=fd(a,i);if(s.preloadSegment&&!i.preloadSegment&&delete s.preloadSegment,a.segments){if(i.skip){i.segments=i.segments||[];for(var o=0;o<i.skip.skippedSegments;o++)i.segments.unshift({skipped:!0})}s.segments=hV(a.segments,i.segments,i.mediaSequence-a.mediaSequence)}s.segments.forEach(function(c){TR(c,s.resolvedUri)});for(var l=0;l<t.playlists.length;l++)t.playlists[l].id===i.id&&(t.playlists[l]=s);return t.playlists[i.id]=s,t.playlists[i.uri]=s,Gl(e,function(c,d,h,p){if(!!c.playlists)for(var y=0;y<c.playlists.length;y++)i.id===c.playlists[y].id&&(c.playlists[y]=s)}),t},Ig=function(e,i){var n=e.segments||[],t=n[n.length-1],a=t&&t.parts&&t.parts[t.parts.length-1],s=a&&a.duration||t&&t.duration;return i&&s?s*1e3:(e.partTargetDuration||e.targetDuration||10)*500},mo=function(r){Ve(e,r);function e(n,t,a){var s;if(a===void 0&&(a={}),s=r.call(this)||this,!n)throw new Error("A non-empty playlist URL or object is required");s.logger_=Yi("PlaylistLoader");var o=a,l=o.withCredentials,c=l===void 0?!1:l,d=o.handleManifestRedirects,h=d===void 0?!1:d;s.src=n,s.vhs_=t,s.withCredentials=c,s.handleManifestRedirects=h;var p=t.options_;return s.customTagParsers=p&&p.customTagParsers||[],s.customTagMappers=p&&p.customTagMappers||[],s.experimentalLLHLS=p&&p.experimentalLLHLS||!1,ce.browser.IE_VERSION&&(s.experimentalLLHLS=!1),s.state="HAVE_NOTHING",s.handleMediaupdatetimeout_=s.handleMediaupdatetimeout_.bind(rt(s)),s.on("mediaupdatetimeout",s.handleMediaupdatetimeout_),s}var i=e.prototype;return i.handleMediaupdatetimeout_=function(){var t=this;if(this.state==="HAVE_METADATA"){var a=this.media(),s=Bi(this.master.uri,a.uri);this.experimentalLLHLS&&(s=fV(s,a)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:s,withCredentials:this.withCredentials},function(o,l){if(!!t.request){if(o)return t.playlistRequestError(t.request,t.media(),"HAVE_METADATA");t.haveMetadata({playlistString:t.request.responseText,url:t.media().uri,id:t.media().id})}})}},i.playlistRequestError=function(t,a,s){var o=a.uri,l=a.id;this.request=null,s&&(this.state=s),this.error={playlist:this.master.playlists[l],status:t.status,message:"HLS playlist request error at URL: "+o+".",responseText:t.responseText,code:t.status>=500?4:2},this.trigger("error")},i.parseManifest_=function(t){var a=this,s=t.url,o=t.manifestString;return sV({onwarn:function(c){var d=c.message;return a.logger_("m3u8-parser warn for "+s+": "+d)},oninfo:function(c){var d=c.message;return a.logger_("m3u8-parser info for "+s+": "+d)},manifestString:o,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},i.haveMetadata=function(t){var a=t.playlistString,s=t.playlistObject,o=t.url,l=t.id;this.request=null,this.state="HAVE_METADATA";var c=s||this.parseManifest_({url:o,manifestString:a});c.lastRequest=Date.now(),yR({playlist:c,uri:o,id:l});var d=Og(this.master,c);this.targetDuration=c.partTargetDuration||c.targetDuration,this.pendingMedia_=null,d?(this.master=d,this.media_=this.master.playlists[l]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Ig(this.media(),!!d)),this.trigger("loadedplaylist")},i.dispose=function(){this.trigger("dispose"),this.stopRequest(),q.clearTimeout(this.mediaUpdateTimeout),q.clearTimeout(this.finalRenditionTimeout),this.off()},i.stopRequest=function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}},i.media=function(t,a){var s=this;if(!t)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof t=="string"){if(!this.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.master.playlists[t]}if(q.clearTimeout(this.finalRenditionTimeout),a){var o=(t.partTargetDuration||t.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=q.setTimeout(this.media.bind(this,t,!1),o);return}var l=this.state,c=!this.media_||t.id!==this.media_.id,d=this.master.playlists[t.id];if(d&&d.endList||t.endList&&t.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=t,c&&(this.trigger("mediachanging"),l==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(Ig(t,!0)),!!c){if(this.state="SWITCHING_MEDIA",this.request){if(t.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=t,this.request=this.vhs_.xhr({uri:t.resolvedUri,withCredentials:this.withCredentials},function(h,p){if(!!s.request){if(t.lastRequest=Date.now(),t.resolvedUri=cd(s.handleManifestRedirects,t.resolvedUri,p),h)return s.playlistRequestError(s.request,t,l);s.haveMetadata({playlistString:p.responseText,url:t.uri,id:t.id}),l==="HAVE_MASTER"?s.trigger("loadedmetadata"):s.trigger("mediachange")}})}},i.pause=function(){this.mediaUpdateTimeout&&(q.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")},i.load=function(t){var a=this;this.mediaUpdateTimeout&&(q.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var s=this.media();if(t){var o=s?(s.partTargetDuration||s.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=q.setTimeout(function(){a.mediaUpdateTimeout=null,a.load()},o);return}if(!this.started){this.start();return}s&&!s.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")},i.updateMediaUpdateTimeout_=function(t){var a=this;this.mediaUpdateTimeout&&(q.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=q.setTimeout(function(){a.mediaUpdateTimeout=null,a.trigger("mediaupdatetimeout"),a.updateMediaUpdateTimeout_(t)},t))},i.start=function(){var t=this;if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=q.location.href),this.src.resolvedUri=this.src.uri,setTimeout(function(){t.setupInitialPlaylist(t.src)},0);return}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(a,s){if(!!t.request){if(t.request=null,a)return t.error={status:s.status,message:"HLS playlist request error at URL: "+t.src+".",responseText:s.responseText,code:2},t.state==="HAVE_NOTHING"&&(t.started=!1),t.trigger("error");t.src=cd(t.handleManifestRedirects,t.src,s);var o=t.parseManifest_({manifestString:s.responseText,url:t.src});t.setupInitialPlaylist(o)}})},i.srcUri=function(){return typeof this.src=="string"?this.src:this.src.uri},i.setupInitialPlaylist=function(t){if(this.state="HAVE_MASTER",t.playlists){this.master=t,_R(this.master,this.srcUri()),t.playlists.forEach(function(s){s.segments=bR(s),s.segments.forEach(function(o){TR(o,s.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.master.playlists[0]);return}var a=this.srcUri()||q.location.href;this.master=lV(t,a),this.haveMetadata({playlistObject:t,url:a,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},e}(cV),pV=ce.xhr,mV=ce.mergeOptions,Dg=function(e,i,n,t){var a=e.responseType==="arraybuffer"?e.response:e.responseText;!i&&a&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=a.byteLength||a.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),n.headers&&(e.responseHeaders=n.headers),i&&i.code==="ETIMEDOUT"&&(e.timedout=!0),!i&&!e.aborted&&n.statusCode!==200&&n.statusCode!==206&&n.statusCode!==0&&(i=new Error("XHR Failed with a response of: "+(e&&(a||e.responseText)))),t(i,e)},xR=function(){var e=function i(n,t){n=mV({timeout:45e3},n);var a=i.beforeRequest||ce.Vhs.xhr.beforeRequest;if(a&&typeof a=="function"){var s=a(n);s&&(n=s)}var o=ce.Vhs.xhr.original===!0?pV:ce.Vhs.xhr,l=o(n,function(d,h){return Dg(l,d,h,t)}),c=l.abort;return l.abort=function(){return l.aborted=!0,c.apply(l,arguments)},l.uri=n.uri,l.requestTime=Date.now(),l};return e.original=!0,e},gV=function(e){var i,n=e.offset;return typeof e.offset=="bigint"||typeof e.length=="bigint"?i=q.BigInt(e.offset)+q.BigInt(e.length)-q.BigInt(1):i=e.offset+e.length-1,"bytes="+n+"-"+i},kg=function(e){var i={};return e.byterange&&(i.Range=gV(e.byterange)),i},vV=function(e,i){return e.start(i)+"-"+e.end(i)},yV=function(e,i){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(i%2?" ":"")},_V=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},ER=function(e){var i={};return Object.keys(e).forEach(function(n){var t=e[n];dC(t)?i[n]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:i[n]=t}),i},dd=function(e){var i=e.byterange||{length:1/0,offset:0};return[i.length,i.offset,e.resolvedUri].join(",")},CR=function(e){return e.resolvedUri},RR=function(e){for(var i=Array.prototype.slice.call(e),n=16,t="",a,s,o=0;o<i.length/n;o++)a=i.slice(o*n,o*n+n).map(yV).join(""),s=i.slice(o*n,o*n+n).map(_V).join(""),t+=a+" "+s+`
`;return t},TV=function(e){var i=e.bytes;return RR(i)},bV=function(e){var i="",n;for(n=0;n<e.length;n++)i+=vV(e,n)+" ";return i},SV=Object.freeze({__proto__:null,createTransferableMessage:ER,initSegmentId:dd,segmentKeyId:CR,hexDump:RR,tagDump:TV,textRanges:bV}),wR=.25,xV=function(e,i){if(!i.dateTimeObject)return null;var n=i.videoTimingInfo.transmuxerPrependedSeconds,t=i.videoTimingInfo.transmuxedPresentationStart,a=t+n,s=e-a;return new Date(i.dateTimeObject.getTime()+s*1e3)},EV=function(e){return e.transmuxedPresentationEnd-e.transmuxedPresentationStart-e.transmuxerPrependedSeconds},CV=function(e,i){var n;try{n=new Date(e)}catch{return null}if(!i||!i.segments||i.segments.length===0)return null;var t=i.segments[0];if(n<t.dateTimeObject)return null;for(var a=0;a<i.segments.length-1;a++){t=i.segments[a];var s=i.segments[a+1].dateTimeObject;if(n<s)break}var o=i.segments[i.segments.length-1],l=o.dateTimeObject,c=o.videoTimingInfo?EV(o.videoTimingInfo):o.duration+o.duration*wR,d=new Date(l.getTime()+c*1e3);return n>d?null:(n>l&&(t=o),{segment:t,estimatedStart:t.videoTimingInfo?t.videoTimingInfo.transmuxedPresentationStart:ri.duration(i,i.mediaSequence+i.segments.indexOf(t)),type:t.videoTimingInfo?"accurate":"estimate"})},RV=function(e,i){if(!i||!i.segments||i.segments.length===0)return null;for(var n=0,t,a=0;a<i.segments.length&&(t=i.segments[a],n=t.videoTimingInfo?t.videoTimingInfo.transmuxedPresentationEnd:n+t.duration,!(e<=n));a++);var s=i.segments[i.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>n){if(e>n+s.duration*wR)return null;t=s}return{segment:t,estimatedStart:t.videoTimingInfo?t.videoTimingInfo.transmuxedPresentationStart:n-t.duration,type:t.videoTimingInfo?"accurate":"estimate"}},wV=function(e,i){var n,t;try{n=new Date(e),t=new Date(i)}catch{}var a=n.getTime(),s=t.getTime();return(s-a)/1e3},AV=function(e){if(!e.segments||e.segments.length===0)return!1;for(var i=0;i<e.segments.length;i++){var n=e.segments[i];if(!n.dateTimeObject)return!1}return!0},PV=function(e){var i=e.playlist,n=e.time,t=n===void 0?void 0:n,a=e.callback;if(!a)throw new Error("getProgramTime: callback must be provided");if(!i||t===void 0)return a({message:"getProgramTime: playlist and time must be provided"});var s=RV(t,i);if(!s)return a({message:"valid programTime was not found"});if(s.type==="estimate")return a({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:s.estimatedStart});var o={mediaSeconds:t},l=xV(t,s.segment);return l&&(o.programDateTime=l.toISOString()),a(null,o)},OV=function r(e){var i=e.programTime,n=e.playlist,t=e.retryCount,a=t===void 0?2:t,s=e.seekTo,o=e.pauseAfterSeek,l=o===void 0?!0:o,c=e.tech,d=e.callback;if(!d)throw new Error("seekToProgramTime: callback must be provided");if(typeof i>"u"||!n||!s)return d({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!n.endList&&!c.hasStarted_)return d({message:"player must be playing a live stream to start buffering"});if(!AV(n))return d({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri});var h=CV(i,n);if(!h)return d({message:i+" was not found in the stream"});var p=h.segment,y=wV(p.dateTimeObject,i);if(h.type==="estimate"){if(a===0)return d({message:i+" is not buffered yet. Try again"});s(h.estimatedStart+y),c.one("seeked",function(){r({programTime:i,playlist:n,retryCount:a-1,seekTo:s,pauseAfterSeek:l,tech:c,callback:d})});return}var S=p.start+y,C=function(){return d(null,c.currentTime())};c.one("seeked",C),l&&c.pause(),s(S)},Am=function(e,i){if(e.readyState===4)return i()},IV=function(e,i,n){var t=[],a,s=!1,o=function(p,y,S,C){return y.abort(),s=!0,n(p,y,S,C)},l=function(p,y){if(!s){if(p)return o(p,y,"",t);var S=y.responseText.substring(t&&t.byteLength||0,y.responseText.length);if(t=j2(t,hC(S,!0)),a=a||tl(t),t.length<10||a&&t.length<a+2)return Am(y,function(){return o(p,y,"",t)});var C=ty(t);return C==="ts"&&t.length<188?Am(y,function(){return o(p,y,"",t)}):!C&&t.length<376?Am(y,function(){return o(p,y,"",t)}):o(null,y,C,t)}},c={uri:e,beforeSend:function(p){p.overrideMimeType("text/plain; charset=x-user-defined"),p.addEventListener("progress",function(y){return y.total,y.loaded,Dg(p,null,{statusCode:p.status},l)})}},d=i(c,function(h,p){return Dg(d,h,p,l)});return d},DV=ce.EventTarget,AR=ce.mergeOptions,Zb=function(e,i){if(!SR(e,i)||e.sidx&&i.sidx&&(e.sidx.offset!==i.sidx.offset||e.sidx.length!==i.sidx.length))return!1;if(!e.sidx&&i.sidx||e.sidx&&!i.sidx||e.segments&&!i.segments||!e.segments&&i.segments)return!1;if(!e.segments&&!i.segments)return!0;for(var n=0;n<e.segments.length;n++){var t=e.segments[n],a=i.segments[n];if(t.uri!==a.uri)return!1;if(!(!t.byterange&&!a.byterange)){var s=t.byterange,o=a.byterange;if(s&&!o||!s&&o||s.offset!==o.offset||s.length!==o.length)return!1}}return!0},kV=function(e){var i=e.masterXml,n=e.srcUrl,t=e.clientOffset,a=e.sidxMapping,s=e.previousManifest,o=e3(i,{manifestUri:n,clientOffset:t,sidxMapping:a,previousManifest:s});return _R(o,n),o},LV=function(e,i,n){for(var t=!0,a=AR(e,{duration:i.duration,minimumUpdatePeriod:i.minimumUpdatePeriod,timelineStarts:i.timelineStarts}),s=0;s<i.playlists.length;s++){var o=i.playlists[s];if(o.sidx){var l=Zd(o.sidx);n&&n[l]&&n[l].sidx&&Qv(o,n[l].sidx,o.sidx.resolvedUri)}var c=Og(a,o,Zb);c&&(a=c,t=!1)}return Gl(i,function(d,h,p,y){if(d.playlists&&d.playlists.length){var S=d.playlists[0].id,C=Og(a,d.playlists[0],Zb);C&&(a=C,a.mediaGroups[h][p][y].playlists[0]=a.playlists[S],t=!1)}}),i.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(t=!1),t?null:a},MV=function(e,i){var n=Boolean(!e.map&&!i.map),t=n||Boolean(e.map&&i.map&&e.map.byterange.offset===i.map.byterange.offset&&e.map.byterange.length===i.map.byterange.length);return t&&e.uri===i.uri&&e.byterange.offset===i.byterange.offset&&e.byterange.length===i.byterange.length},eS=function(e,i){var n={};for(var t in e){var a=e[t],s=a.sidx;if(s){var o=Zd(s);if(!i[o])break;var l=i[o].sidxInfo;MV(l,s)&&(n[o]=i[o])}}return n},NV=function(e,i){var n=eS(e.playlists,i),t=n;return Gl(e,function(a,s,o,l){if(a.playlists&&a.playlists.length){var c=a.playlists;t=AR(t,eS(c,i))}}),t},Lg=function(r){Ve(e,r);function e(n,t,a,s){var o;a===void 0&&(a={}),o=r.call(this)||this,o.masterPlaylistLoader_=s||rt(o),s||(o.isMaster_=!0);var l=a,c=l.withCredentials,d=c===void 0?!1:c,h=l.handleManifestRedirects,p=h===void 0?!1:h;if(o.vhs_=t,o.withCredentials=d,o.handleManifestRedirects=p,!n)throw new Error("A non-empty playlist URL or object is required");return o.on("minimumUpdatePeriod",function(){o.refreshXml_()}),o.on("mediaupdatetimeout",function(){o.refreshMedia_(o.media().id)}),o.state="HAVE_NOTHING",o.loadedPlaylists_={},o.logger_=Yi("DashPlaylistLoader"),o.isMaster_?(o.masterPlaylistLoader_.srcUrl=n,o.masterPlaylistLoader_.sidxMapping_={}):o.childPlaylist_=n,o}var i=e.prototype;return i.requestErrored_=function(t,a,s){if(!this.request)return!0;if(this.request=null,t)return this.error=typeof t=="object"&&!(t instanceof Error)?t:{status:a.status,message:"DASH request error at URL: "+a.uri,response:a.response,code:2},s&&(this.state=s),this.trigger("error"),!0},i.addSidxSegments_=function(t,a,s){var o=this,l=t.sidx&&Zd(t.sidx);if(!t.sidx||!l||this.masterPlaylistLoader_.sidxMapping_[l]){this.mediaRequest_=q.setTimeout(function(){return s(!1)},0);return}var c=cd(this.handleManifestRedirects,t.sidx.resolvedUri),d=function(p,y){if(!o.requestErrored_(p,y,a)){var S=o.masterPlaylistLoader_.sidxMapping_,C;try{C=a3(Qe(y.response).subarray(8))}catch(x){o.requestErrored_(x,y,a);return}return S[l]={sidxInfo:t.sidx,sidx:C},Qv(t,C,t.sidx.resolvedUri),s(!0)}};this.request=IV(c,this.vhs_.xhr,function(h,p,y,S){if(h)return d(h,p);if(!y||y!=="mp4")return d({status:p.status,message:"Unsupported "+(y||"unknown")+" container type for sidx segment at URL: "+c,response:"",playlist:t,internal:!0,blacklistDuration:1/0,code:2},p);var C=t.sidx.byterange,x=C.offset,I=C.length;if(S.length>=I+x)return d(h,{response:S.subarray(x,x+I),status:p.status,uri:p.uri});o.request=o.vhs_.xhr({uri:c,responseType:"arraybuffer",headers:kg({byterange:t.sidx.byterange})},d)})},i.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},q.clearTimeout(this.minimumUpdatePeriodTimeout_),q.clearTimeout(this.mediaRequest_),q.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},i.hasPendingRequest=function(){return this.request||this.mediaRequest_},i.stopRequest=function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}},i.media=function(t){var a=this;if(!t)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);var s=this.state;if(typeof t=="string"){if(!this.masterPlaylistLoader_.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.masterPlaylistLoader_.master.playlists[t]}var o=!this.media_||t.id!==this.media_.id;if(o&&this.loadedPlaylists_[t.id]&&this.loadedPlaylists_[t.id].endList){this.state="HAVE_METADATA",this.media_=t,o&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}!o||(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(t,s,function(l){a.haveMetadata({startingState:s,playlist:t})}))},i.haveMetadata=function(t){var a=t.startingState,s=t.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[s.id]=s,this.mediaRequest_=null,this.refreshMedia_(s.id),a==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange")},i.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),q.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(q.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)},i.load=function(t){var a=this;q.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var s=this.media();if(t){var o=s?s.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=q.setTimeout(function(){return a.load()},o);return}if(!this.started){this.start();return}s&&!s.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")},i.start=function(){var t=this;if(this.started=!0,!this.isMaster_){this.mediaRequest_=q.setTimeout(function(){return t.haveMaster_()},0);return}this.requestMaster_(function(a,s){t.haveMaster_(),!t.hasPendingRequest()&&!t.media_&&t.media(t.masterPlaylistLoader_.master.playlists[0])})},i.requestMaster_=function(t){var a=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(s,o){if(a.requestErrored_(s,o)){a.state==="HAVE_NOTHING"&&(a.started=!1);return}var l=o.responseText!==a.masterPlaylistLoader_.masterXml_;if(a.masterPlaylistLoader_.masterXml_=o.responseText,o.responseHeaders&&o.responseHeaders.date?a.masterLoaded_=Date.parse(o.responseHeaders.date):a.masterLoaded_=Date.now(),a.masterPlaylistLoader_.srcUrl=cd(a.handleManifestRedirects,a.masterPlaylistLoader_.srcUrl,o),l){a.handleMaster_(),a.syncClientServerClock_(function(){return t(o,l)});return}return t(o,l)})},i.syncClientServerClock_=function(t){var a=this,s=t3(this.masterPlaylistLoader_.masterXml_);if(s===null)return this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),t();if(s.method==="DIRECT")return this.masterPlaylistLoader_.clientOffset_=s.value-Date.now(),t();this.request=this.vhs_.xhr({uri:Bi(this.masterPlaylistLoader_.srcUrl,s.value),method:s.method,withCredentials:this.withCredentials},function(o,l){if(!!a.request){if(o)return a.masterPlaylistLoader_.clientOffset_=a.masterLoaded_-Date.now(),t();var c;s.method==="HEAD"?!l.responseHeaders||!l.responseHeaders.date?c=a.masterLoaded_:c=Date.parse(l.responseHeaders.date):c=Date.parse(l.responseText),a.masterPlaylistLoader_.clientOffset_=c-Date.now(),t()}})},i.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},i.handleMaster_=function(){this.mediaRequest_=null;var t=this.masterPlaylistLoader_.master,a=kV({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:t});t&&(a=LV(t,a,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=a||t;var s=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return s&&s!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=s),(!t||a&&a.minimumUpdatePeriod!==t.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(a)},i.updateMinimumUpdatePeriodTimeout_=function(){var t=this.masterPlaylistLoader_;t.createMupOnMedia_&&(t.off("loadedmetadata",t.createMupOnMedia_),t.createMupOnMedia_=null),t.minimumUpdatePeriodTimeout_&&(q.clearTimeout(t.minimumUpdatePeriodTimeout_),t.minimumUpdatePeriodTimeout_=null);var a=t.master&&t.master.minimumUpdatePeriod;if(a===0&&(t.media()?a=t.media().targetDuration*1e3:(t.createMupOnMedia_=t.updateMinimumUpdatePeriodTimeout_,t.one("loadedmetadata",t.createMupOnMedia_))),typeof a!="number"||a<=0){a<0&&this.logger_("found invalid minimumUpdatePeriod of "+a+", not setting a timeout");return}this.createMUPTimeout_(a)},i.createMUPTimeout_=function(t){var a=this.masterPlaylistLoader_;a.minimumUpdatePeriodTimeout_=q.setTimeout(function(){a.minimumUpdatePeriodTimeout_=null,a.trigger("minimumUpdatePeriod"),a.createMUPTimeout_(t)},t)},i.refreshXml_=function(){var t=this;this.requestMaster_(function(a,s){!s||(t.media_&&(t.media_=t.masterPlaylistLoader_.master.playlists[t.media_.id]),t.masterPlaylistLoader_.sidxMapping_=NV(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.sidxMapping_),t.addSidxSegments_(t.media(),t.state,function(o){t.refreshMedia_(t.media().id)}))})},i.refreshMedia_=function(t){var a=this;if(!t)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var s=this.masterPlaylistLoader_.master.playlists,o=!this.media_||this.media_!==s[t];if(o?this.media_=s[t]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){var l=function c(){a.media().endList||(a.mediaUpdateTimeout=q.setTimeout(function(){a.trigger("mediaupdatetimeout"),c()},Ig(a.media(),Boolean(o))))};l()}this.trigger("loadedplaylist")},e}(DV),fr={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},FV=function(e){for(var i=new Uint8Array(new ArrayBuffer(e.length)),n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i.buffer},PR=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},UV=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch{var i=new BlobBuilder;return i.append(e),URL.createObjectURL(i.getBlob())}},OR=function(e){return function(){var i=UV(e),n=PR(new Worker(i));n.objURL=i;var t=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(i),t.call(this)},n}},IR=function(e){return"var browserWorkerPolyFill = "+PR.toString()+`;
browserWorkerPolyFill(self);
`+e},DR=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},BV=IR(DR(function(){var r=function(){this.init=function(){var g={};this.on=function(_,v){g[_]||(g[_]=[]),g[_]=g[_].concat(v)},this.off=function(_,v){var T;return g[_]?(T=g[_].indexOf(v),g[_]=g[_].slice(),g[_].splice(T,1),T>-1):!1},this.trigger=function(_){var v,T,E,R;if(v=g[_],!!v)if(arguments.length===2)for(E=v.length,T=0;T<E;++T)v[T].call(this,arguments[1]);else{for(R=[],T=arguments.length,T=1;T<arguments.length;++T)R.push(arguments[T]);for(E=v.length,T=0;T<E;++T)v[T].apply(this,R)}},this.dispose=function(){g={}}}};r.prototype.pipe=function(O){return this.on("data",function(g){O.push(g)}),this.on("done",function(g){O.flush(g)}),this.on("partialdone",function(g){O.partialFlush(g)}),this.on("endedtimeline",function(g){O.endTimeline(g)}),this.on("reset",function(g){O.reset(g)}),O},r.prototype.push=function(O){this.trigger("data",O)},r.prototype.flush=function(O){this.trigger("done",O)},r.prototype.partialFlush=function(O){this.trigger("partialdone",O)},r.prototype.endTimeline=function(O){this.trigger("endedtimeline",O)},r.prototype.reset=function(O){this.trigger("reset",O)};var e=r,i=Math.pow(2,32),n=function(g){var _=new DataView(g.buffer,g.byteOffset,g.byteLength),v;return _.getBigUint64?(v=_.getBigUint64(0),v<Number.MAX_SAFE_INTEGER?Number(v):v):_.getUint32(0)*i+_.getUint32(4)},t={getUint64:n,MAX_UINT32:i},a=t.MAX_UINT32,s,o,l,c,d,h,p,y,S,C,x,I,H,Z,W,j,le,fe,Y,oe,V,pe,de,Se,Ae,ke,De,Fe,ge,Ye,K,w,te,ye,xe,re;(function(){var O;if(de={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(O in de)de.hasOwnProperty(O)&&(de[O]=[O.charCodeAt(0),O.charCodeAt(1),O.charCodeAt(2),O.charCodeAt(3)]);Se=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),ke=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),Ae=new Uint8Array([0,0,0,1]),De=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Fe=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),ge={video:De,audio:Fe},w=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),K=new Uint8Array([0,0,0,0,0,0,0,0]),te=new Uint8Array([0,0,0,0,0,0,0,0]),ye=te,xe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),re=te,Ye=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),s=function(g){var _=[],v=0,T,E,R;for(T=1;T<arguments.length;T++)_.push(arguments[T]);for(T=_.length;T--;)v+=_[T].byteLength;for(E=new Uint8Array(v+8),R=new DataView(E.buffer,E.byteOffset,E.byteLength),R.setUint32(0,E.byteLength),E.set(g,4),T=0,v=8;T<_.length;T++)E.set(_[T],v),v+=_[T].byteLength;return E},o=function(){return s(de.dinf,s(de.dref,w))},l=function(g){return s(de.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,g.audioobjecttype<<3|g.samplingfrequencyindex>>>1,g.samplingfrequencyindex<<7|g.channelcount<<3,6,1,2]))},c=function(){return s(de.ftyp,Se,Ae,Se,ke)},j=function(g){return s(de.hdlr,ge[g])},d=function(g){return s(de.mdat,g)},W=function(g){var _=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,g.duration>>>24&255,g.duration>>>16&255,g.duration>>>8&255,g.duration&255,85,196,0,0]);return g.samplerate&&(_[12]=g.samplerate>>>24&255,_[13]=g.samplerate>>>16&255,_[14]=g.samplerate>>>8&255,_[15]=g.samplerate&255),s(de.mdhd,_)},Z=function(g){return s(de.mdia,W(g),j(g.type),p(g))},h=function(g){return s(de.mfhd,new Uint8Array([0,0,0,0,(g&4278190080)>>24,(g&16711680)>>16,(g&65280)>>8,g&255]))},p=function(g){return s(de.minf,g.type==="video"?s(de.vmhd,Ye):s(de.smhd,K),o(),fe(g))},y=function(g,_){for(var v=[],T=_.length;T--;)v[T]=oe(_[T]);return s.apply(null,[de.moof,h(g)].concat(v))},S=function(g){for(var _=g.length,v=[];_--;)v[_]=I(g[_]);return s.apply(null,[de.moov,x(4294967295)].concat(v).concat(C(g)))},C=function(g){for(var _=g.length,v=[];_--;)v[_]=V(g[_]);return s.apply(null,[de.mvex].concat(v))},x=function(g){var _=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(g&4278190080)>>24,(g&16711680)>>16,(g&65280)>>8,g&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return s(de.mvhd,_)},le=function(g){var _=g.samples||[],v=new Uint8Array(4+_.length),T,E;for(E=0;E<_.length;E++)T=_[E].flags,v[E+4]=T.dependsOn<<4|T.isDependedOn<<2|T.hasRedundancy;return s(de.sdtp,v)},fe=function(g){return s(de.stbl,Y(g),s(de.stts,re),s(de.stsc,ye),s(de.stsz,xe),s(de.stco,te))},function(){var O,g;Y=function(v){return s(de.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),v.type==="video"?O(v):g(v))},O=function(v){var T=v.sps||[],E=v.pps||[],R=[],F=[],A,L;for(A=0;A<T.length;A++)R.push((T[A].byteLength&65280)>>>8),R.push(T[A].byteLength&255),R=R.concat(Array.prototype.slice.call(T[A]));for(A=0;A<E.length;A++)F.push((E[A].byteLength&65280)>>>8),F.push(E[A].byteLength&255),F=F.concat(Array.prototype.slice.call(E[A]));if(L=[de.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(v.width&65280)>>8,v.width&255,(v.height&65280)>>8,v.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s(de.avcC,new Uint8Array([1,v.profileIdc,v.profileCompatibility,v.levelIdc,255].concat([T.length],R,[E.length],F))),s(de.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],v.sarRatio){var D=v.sarRatio[0],z=v.sarRatio[1];L.push(s(de.pasp,new Uint8Array([(D&4278190080)>>24,(D&16711680)>>16,(D&65280)>>8,D&255,(z&4278190080)>>24,(z&16711680)>>16,(z&65280)>>8,z&255])))}return s.apply(null,L)},g=function(v){return s(de.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(v.channelcount&65280)>>8,v.channelcount&255,(v.samplesize&65280)>>8,v.samplesize&255,0,0,0,0,(v.samplerate&65280)>>8,v.samplerate&255,0,0]),l(v))}}(),H=function(g){var _=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(g.id&4278190080)>>24,(g.id&16711680)>>16,(g.id&65280)>>8,g.id&255,0,0,0,0,(g.duration&4278190080)>>24,(g.duration&16711680)>>16,(g.duration&65280)>>8,g.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(g.width&65280)>>8,g.width&255,0,0,(g.height&65280)>>8,g.height&255,0,0]);return s(de.tkhd,_)},oe=function(g){var _,v,T,E,R,F,A;return _=s(de.tfhd,new Uint8Array([0,0,0,58,(g.id&4278190080)>>24,(g.id&16711680)>>16,(g.id&65280)>>8,g.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),F=Math.floor(g.baseMediaDecodeTime/a),A=Math.floor(g.baseMediaDecodeTime%a),v=s(de.tfdt,new Uint8Array([1,0,0,0,F>>>24&255,F>>>16&255,F>>>8&255,F&255,A>>>24&255,A>>>16&255,A>>>8&255,A&255])),R=32+20+8+16+8+8,g.type==="audio"?(T=pe(g,R),s(de.traf,_,v,T)):(E=le(g),T=pe(g,E.length+R),s(de.traf,_,v,T,E))},I=function(g){return g.duration=g.duration||4294967295,s(de.trak,H(g),Z(g))},V=function(g){var _=new Uint8Array([0,0,0,0,(g.id&4278190080)>>24,(g.id&16711680)>>16,(g.id&65280)>>8,g.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return g.type!=="video"&&(_[_.length-1]=0),s(de.trex,_)},function(){var O,g,_;_=function(T,E){var R=0,F=0,A=0,L=0;return T.length&&(T[0].duration!==void 0&&(R=1),T[0].size!==void 0&&(F=2),T[0].flags!==void 0&&(A=4),T[0].compositionTimeOffset!==void 0&&(L=8)),[0,0,R|F|A|L,1,(T.length&4278190080)>>>24,(T.length&16711680)>>>16,(T.length&65280)>>>8,T.length&255,(E&4278190080)>>>24,(E&16711680)>>>16,(E&65280)>>>8,E&255]},g=function(T,E){var R,F,A,L,D,z;for(L=T.samples||[],E+=8+12+16*L.length,A=_(L,E),F=new Uint8Array(A.length+L.length*16),F.set(A),R=A.length,z=0;z<L.length;z++)D=L[z],F[R++]=(D.duration&4278190080)>>>24,F[R++]=(D.duration&16711680)>>>16,F[R++]=(D.duration&65280)>>>8,F[R++]=D.duration&255,F[R++]=(D.size&4278190080)>>>24,F[R++]=(D.size&16711680)>>>16,F[R++]=(D.size&65280)>>>8,F[R++]=D.size&255,F[R++]=D.flags.isLeading<<2|D.flags.dependsOn,F[R++]=D.flags.isDependedOn<<6|D.flags.hasRedundancy<<4|D.flags.paddingValue<<1|D.flags.isNonSyncSample,F[R++]=D.flags.degradationPriority&240<<8,F[R++]=D.flags.degradationPriority&15,F[R++]=(D.compositionTimeOffset&4278190080)>>>24,F[R++]=(D.compositionTimeOffset&16711680)>>>16,F[R++]=(D.compositionTimeOffset&65280)>>>8,F[R++]=D.compositionTimeOffset&255;return s(de.trun,F)},O=function(T,E){var R,F,A,L,D,z;for(L=T.samples||[],E+=8+12+8*L.length,A=_(L,E),R=new Uint8Array(A.length+L.length*8),R.set(A),F=A.length,z=0;z<L.length;z++)D=L[z],R[F++]=(D.duration&4278190080)>>>24,R[F++]=(D.duration&16711680)>>>16,R[F++]=(D.duration&65280)>>>8,R[F++]=D.duration&255,R[F++]=(D.size&4278190080)>>>24,R[F++]=(D.size&16711680)>>>16,R[F++]=(D.size&65280)>>>8,R[F++]=D.size&255;return s(de.trun,R)},pe=function(T,E){return T.type==="audio"?O(T,E):g(T,E)}}();var se={ftyp:c,mdat:d,moof:y,moov:S,initSegment:function(g){var _=c(),v=S(g),T;return T=new Uint8Array(_.byteLength+v.byteLength),T.set(_),T.set(v,_.byteLength),T}},J=function(g){var _,v,T=[],E=[];for(E.byteLength=0,E.nalCount=0,E.duration=0,T.byteLength=0,_=0;_<g.length;_++)v=g[_],v.nalUnitType==="access_unit_delimiter_rbsp"?(T.length&&(T.duration=v.dts-T.dts,E.byteLength+=T.byteLength,E.nalCount+=T.length,E.duration+=T.duration,E.push(T)),T=[v],T.byteLength=v.data.byteLength,T.pts=v.pts,T.dts=v.dts):(v.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(T.keyFrame=!0),T.duration=v.dts-T.dts,T.byteLength+=v.data.byteLength,T.push(v));return E.length&&(!T.duration||T.duration<=0)&&(T.duration=E[E.length-1].duration),E.byteLength+=T.byteLength,E.nalCount+=T.length,E.duration+=T.duration,E.push(T),E},ie=function(g){var _,v,T=[],E=[];for(T.byteLength=0,T.nalCount=0,T.duration=0,T.pts=g[0].pts,T.dts=g[0].dts,E.byteLength=0,E.nalCount=0,E.duration=0,E.pts=g[0].pts,E.dts=g[0].dts,_=0;_<g.length;_++)v=g[_],v.keyFrame?(T.length&&(E.push(T),E.byteLength+=T.byteLength,E.nalCount+=T.nalCount,E.duration+=T.duration),T=[v],T.nalCount=v.length,T.byteLength=v.byteLength,T.pts=v.pts,T.dts=v.dts,T.duration=v.duration):(T.duration+=v.duration,T.nalCount+=v.length,T.byteLength+=v.byteLength,T.push(v));return E.length&&T.duration<=0&&(T.duration=E[E.length-1].duration),E.byteLength+=T.byteLength,E.nalCount+=T.nalCount,E.duration+=T.duration,E.push(T),E},B=function(g){var _;return!g[0][0].keyFrame&&g.length>1&&(_=g.shift(),g.byteLength-=_.byteLength,g.nalCount-=_.nalCount,g[0][0].dts=_.dts,g[0][0].pts=_.pts,g[0][0].duration+=_.duration),g},ee=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Ee=function(g,_){var v=ee();return v.dataOffset=_,v.compositionTimeOffset=g.pts-g.dts,v.duration=g.duration,v.size=4*g.length,v.size+=g.byteLength,g.keyFrame&&(v.flags.dependsOn=2,v.flags.isNonSyncSample=0),v},Ce=function(g,_){var v,T,E,R,F,A=_||0,L=[];for(v=0;v<g.length;v++)for(R=g[v],T=0;T<R.length;T++)F=R[T],E=Ee(F,A),A+=E.size,L.push(E);return L},M=function(g){var _,v,T,E,R,F,A=0,L=g.byteLength,D=g.nalCount,z=L+4*D,me=new Uint8Array(z),Pe=new DataView(me.buffer);for(_=0;_<g.length;_++)for(E=g[_],v=0;v<E.length;v++)for(R=E[v],T=0;T<R.length;T++)F=R[T],Pe.setUint32(A,F.data.byteLength),A+=4,me.set(F.data,A),A+=F.data.byteLength;return me},U=function(g,_){var v,T=_||0,E=[];return v=Ee(g,T),E.push(v),E},ae=function(g){var _,v,T=0,E=g.byteLength,R=g.length,F=E+4*R,A=new Uint8Array(F),L=new DataView(A.buffer);for(_=0;_<g.length;_++)v=g[_],L.setUint32(T,v.data.byteLength),T+=4,A.set(v.data,T),T+=v.data.byteLength;return A},be={groupNalsIntoFrames:J,groupFramesIntoGops:ie,extendFirstKeyFrame:B,generateSampleTable:Ce,concatenateNalData:M,generateSampleTableForFrame:U,concatenateNalDataForFrame:ae},G=[33,16,5,32,164,27],ve=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Te=function(g){for(var _=[];g--;)_.push(0);return _},X=function(g){return Object.keys(g).reduce(function(_,v){return _[v]=new Uint8Array(g[v].reduce(function(T,E){return T.concat(E)},[])),_},{})},ue,_e=function(){if(!ue){var g={96e3:[G,[227,64],Te(154),[56]],88200:[G,[231],Te(170),[56]],64e3:[G,[248,192],Te(240),[56]],48e3:[G,[255,192],Te(268),[55,148,128],Te(54),[112]],44100:[G,[255,192],Te(268),[55,163,128],Te(84),[112]],32e3:[G,[255,192],Te(268),[55,234],Te(226),[112]],24e3:[G,[255,192],Te(268),[55,255,128],Te(268),[111,112],Te(126),[224]],16e3:[G,[255,192],Te(268),[55,255,128],Te(268),[111,255],Te(269),[223,108],Te(195),[1,192]],12e3:[ve,Te(268),[3,127,248],Te(268),[6,255,240],Te(268),[13,255,224],Te(268),[27,253,128],Te(259),[56]],11025:[ve,Te(268),[3,127,248],Te(268),[6,255,240],Te(268),[13,255,224],Te(268),[27,255,192],Te(268),[55,175,128],Te(108),[112]],8e3:[ve,Te(268),[3,121,16],Te(47),[7]]};ue=X(g)}return ue},Re=9e4,Ue,Ne,$e,Ge,tt,Xe,ut;Ue=function(g){return g*Re},Ne=function(g,_){return g*_},$e=function(g){return g/Re},Ge=function(g,_){return g/_},tt=function(g,_){return Ue(Ge(g,_))},Xe=function(g,_){return Ne($e(g),_)},ut=function(g,_,v){return $e(v?g:g-_)};var qe={ONE_SECOND_IN_TS:Re,secondsToVideoTs:Ue,secondsToAudioTs:Ne,videoTsToSeconds:$e,audioTsToSeconds:Ge,audioTsToVideoTs:tt,videoTsToAudioTs:Xe,metadataTsToSeconds:ut},Pt=function(g){var _,v,T=0;for(_=0;_<g.length;_++)v=g[_],T+=v.data.byteLength;return T},gr=function(g,_,v,T){var E,R=0,F=0,A=0,L=0,D,z,me;if(!!_.length&&(E=qe.audioTsToVideoTs(g.baseMediaDecodeTime,g.samplerate),R=Math.ceil(qe.ONE_SECOND_IN_TS/(g.samplerate/1024)),v&&T&&(F=E-Math.max(v,T),A=Math.floor(F/R),L=A*R),!(A<1||L>qe.ONE_SECOND_IN_TS/2))){for(D=_e()[g.samplerate],D||(D=_[0].data),z=0;z<A;z++)me=_[0],_.splice(0,0,{data:D,dts:me.dts-R,pts:me.pts-R});return g.baseMediaDecodeTime-=Math.floor(qe.videoTsToAudioTs(L,g.samplerate)),L}},$t=function(g,_,v){return _.minSegmentDts>=v?g:(_.minSegmentDts=1/0,g.filter(function(T){return T.dts>=v?(_.minSegmentDts=Math.min(_.minSegmentDts,T.dts),_.minSegmentPts=_.minSegmentDts,!0):!1}))},ur=function(g){var _,v,T=[];for(_=0;_<g.length;_++)v=g[_],T.push({size:v.data.byteLength,duration:1024});return T},Tt=function(g){var _,v,T=0,E=new Uint8Array(Pt(g));for(_=0;_<g.length;_++)v=g[_],E.set(v.data,T),T+=v.data.byteLength;return E},Ot={prefixWithSilence:gr,trimAdtsFramesByEarliestDts:$t,generateSampleTable:ur,concatenateFrameData:Tt},Xi=qe.ONE_SECOND_IN_TS,Ia=function(g,_){typeof _.pts=="number"&&(g.timelineStartInfo.pts===void 0&&(g.timelineStartInfo.pts=_.pts),g.minSegmentPts===void 0?g.minSegmentPts=_.pts:g.minSegmentPts=Math.min(g.minSegmentPts,_.pts),g.maxSegmentPts===void 0?g.maxSegmentPts=_.pts:g.maxSegmentPts=Math.max(g.maxSegmentPts,_.pts)),typeof _.dts=="number"&&(g.timelineStartInfo.dts===void 0&&(g.timelineStartInfo.dts=_.dts),g.minSegmentDts===void 0?g.minSegmentDts=_.dts:g.minSegmentDts=Math.min(g.minSegmentDts,_.dts),g.maxSegmentDts===void 0?g.maxSegmentDts=_.dts:g.maxSegmentDts=Math.max(g.maxSegmentDts,_.dts))},ru=function(g){delete g.minSegmentDts,delete g.maxSegmentDts,delete g.minSegmentPts,delete g.maxSegmentPts},gn=function(g,_){var v,T,E=g.minSegmentDts;return _||(E-=g.timelineStartInfo.dts),v=g.timelineStartInfo.baseMediaDecodeTime,v+=E,v=Math.max(0,v),g.type==="audio"&&(T=g.samplerate/Xi,v*=T,v=Math.floor(v)),v},ir={clearDtsInfo:ru,calculateTrackBaseMediaDecodeTime:gn,collectDtsInfo:Ia},vn=4,iu=128,Da=function(g){for(var _=0,v={payloadType:-1,payloadSize:0},T=0,E=0;_<g.byteLength&&g[_]!==iu;){for(;g[_]===255;)T+=255,_++;for(T+=g[_++];g[_]===255;)E+=255,_++;if(E+=g[_++],!v.payload&&T===vn){var R=String.fromCharCode(g[_+3],g[_+4],g[_+5],g[_+6]);if(R==="GA94"){v.payloadType=T,v.payloadSize=E,v.payload=g.subarray(_,_+E);break}else v.payload=void 0}_+=E,T=0,E=0}return v},er=function(g){return g.payload[0]!==181||(g.payload[1]<<8|g.payload[2])!==49||String.fromCharCode(g.payload[3],g.payload[4],g.payload[5],g.payload[6])!=="GA94"||g.payload[7]!==3?null:g.payload.subarray(8,g.payload.length-1)},Is=function(g,_){var v=[],T,E,R,F;if(!(_[0]&64))return v;for(E=_[0]&31,T=0;T<E;T++)R=T*3,F={type:_[R+2]&3,pts:g},_[R+2]&4&&(F.ccData=_[R+3]<<8|_[R+4],v.push(F));return v},Ds=function(g){for(var _=g.byteLength,v=[],T=1,E,R;T<_-2;)g[T]===0&&g[T+1]===0&&g[T+2]===3?(v.push(T+2),T+=2):T++;if(v.length===0)return g;E=_-v.length,R=new Uint8Array(E);var F=0;for(T=0;T<E;F++,T++)F===v[0]&&(F++,v.shift()),R[T]=g[F];return R},yn={parseSei:Da,parseUserData:er,parseCaptionPackets:Is,discardEmulationPreventionBytes:Ds,USER_DATA_REGISTERED_ITU_T_T35:vn},nr=function O(g){g=g||{},O.prototype.init.call(this),this.parse708captions_=typeof g.parse708captions=="boolean"?g.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new kt(0,0),new kt(0,1),new kt(1,0),new kt(1,1)],this.parse708captions_&&(this.cc708Stream_=new dt({captionServices:g.captionServices})),this.reset(),this.ccStreams_.forEach(function(_){_.on("data",this.trigger.bind(this,"data")),_.on("partialdone",this.trigger.bind(this,"partialdone")),_.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};nr.prototype=new e,nr.prototype.push=function(O){var g,_,v;if(O.nalUnitType==="sei_rbsp"&&(g=yn.parseSei(O.escapedRBSP),!!g.payload&&g.payloadType===yn.USER_DATA_REGISTERED_ITU_T_T35&&(_=yn.parseUserData(g),!!_))){if(O.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(O.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}v=yn.parseCaptionPackets(O.pts,_),this.captionPackets_=this.captionPackets_.concat(v),this.latestDts_!==O.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=O.dts}},nr.prototype.flushCCStreams=function(O){this.ccStreams_.forEach(function(g){return O==="flush"?g.flush():g.partialFlush()},this)},nr.prototype.flushStream=function(O){if(!this.captionPackets_.length){this.flushCCStreams(O);return}this.captionPackets_.forEach(function(g,_){g.presortIndex=_}),this.captionPackets_.sort(function(g,_){return g.pts===_.pts?g.presortIndex-_.presortIndex:g.pts-_.pts}),this.captionPackets_.forEach(function(g){g.type<2?this.dispatchCea608Packet(g):this.dispatchCea708Packet(g)},this),this.captionPackets_.length=0,this.flushCCStreams(O)},nr.prototype.flush=function(){return this.flushStream("flush")},nr.prototype.partialFlush=function(){return this.flushStream("partialFlush")},nr.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(O){O.reset()})},nr.prototype.dispatchCea608Packet=function(O){this.setsTextOrXDSActive(O)?this.activeCea608Channel_[O.type]=null:this.setsChannel1Active(O)?this.activeCea608Channel_[O.type]=0:this.setsChannel2Active(O)&&(this.activeCea608Channel_[O.type]=1),this.activeCea608Channel_[O.type]!==null&&this.ccStreams_[(O.type<<1)+this.activeCea608Channel_[O.type]].push(O)},nr.prototype.setsChannel1Active=function(O){return(O.ccData&30720)===4096},nr.prototype.setsChannel2Active=function(O){return(O.ccData&30720)===6144},nr.prototype.setsTextOrXDSActive=function(O){return(O.ccData&28928)===256||(O.ccData&30974)===4138||(O.ccData&30974)===6186},nr.prototype.dispatchCea708Packet=function(O){this.parse708captions_&&this.cc708Stream_.push(O)};var Ft={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},qr=function(g){var _=Ft[g]||g;return g&4096&&g===_?"":String.fromCharCode(_)},Kt=function(g){return 32<=g&&g<=127||160<=g&&g<=255},Ut=function(g){this.windowNum=g,this.reset()};Ut.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Ut.prototype.getText=function(){return this.rows.join(`
`)},Ut.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Ut.prototype.newLine=function(O){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(O),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Ut.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},Ut.prototype.addText=function(O){this.rows[this.rowIdx]+=O},Ut.prototype.backspace=function(){if(!this.isEmpty()){var O=this.rows[this.rowIdx];this.rows[this.rowIdx]=O.substr(0,O.length-1)}};var Gt=function(g,_,v){this.serviceNum=g,this.text="",this.currentWindow=new Ut(-1),this.windows=[],this.stream=v,typeof _=="string"&&this.createTextDecoder(_)};Gt.prototype.init=function(O,g){this.startPts=O;for(var _=0;_<8;_++)this.windows[_]=new Ut(_),typeof g=="function"&&(this.windows[_].beforeRowOverflow=g)},Gt.prototype.setCurrentWindow=function(O){this.currentWindow=this.windows[O]},Gt.prototype.createTextDecoder=function(O){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(O)}catch(g){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+O+" encoding. "+g})}};var dt=function O(g){g=g||{},O.prototype.init.call(this);var _=this,v=g.captionServices||{},T={},E;Object.keys(v).forEach(function(R){E=v[R],/^SERVICE/.test(R)&&(T[R]=E.encoding)}),this.serviceEncodings=T,this.current708Packet=null,this.services={},this.push=function(R){R.type===3?(_.new708Packet(),_.add708Bytes(R)):(_.current708Packet===null&&_.new708Packet(),_.add708Bytes(R))}};dt.prototype=new e,dt.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},dt.prototype.add708Bytes=function(O){var g=O.ccData,_=g>>>8,v=g&255;this.current708Packet.ptsVals.push(O.pts),this.current708Packet.data.push(_),this.current708Packet.data.push(v)},dt.prototype.push708Packet=function(){var O=this.current708Packet,g=O.data,_=null,v=null,T=0,E=g[T++];for(O.seq=E>>6,O.sizeCode=E&63;T<g.length;T++)E=g[T++],_=E>>5,v=E&31,_===7&&v>0&&(E=g[T++],_=E),this.pushServiceBlock(_,T,v),v>0&&(T+=v-1)},dt.prototype.pushServiceBlock=function(O,g,_){var v,T=g,E=this.current708Packet.data,R=this.services[O];for(R||(R=this.initService(O,T));T<g+_&&T<E.length;T++)v=E[T],Kt(v)?T=this.handleText(T,R):v===24?T=this.multiByteCharacter(T,R):v===16?T=this.extendedCommands(T,R):128<=v&&v<=135?T=this.setCurrentWindow(T,R):152<=v&&v<=159?T=this.defineWindow(T,R):v===136?T=this.clearWindows(T,R):v===140?T=this.deleteWindows(T,R):v===137?T=this.displayWindows(T,R):v===138?T=this.hideWindows(T,R):v===139?T=this.toggleWindows(T,R):v===151?T=this.setWindowAttributes(T,R):v===144?T=this.setPenAttributes(T,R):v===145?T=this.setPenColor(T,R):v===146?T=this.setPenLocation(T,R):v===143?R=this.reset(T,R):v===8?R.currentWindow.backspace():v===12?R.currentWindow.clearText():v===13?R.currentWindow.pendingNewLine=!0:v===14?R.currentWindow.clearText():v===141&&T++},dt.prototype.extendedCommands=function(O,g){var _=this.current708Packet.data,v=_[++O];return Kt(v)&&(O=this.handleText(O,g,{isExtended:!0})),O},dt.prototype.getPts=function(O){return this.current708Packet.ptsVals[Math.floor(O/2)]},dt.prototype.initService=function(O,g){var v="SERVICE"+O,_=this,v,T;return v in this.serviceEncodings&&(T=this.serviceEncodings[v]),this.services[O]=new Gt(O,T,_),this.services[O].init(this.getPts(g),function(E){_.flushDisplayed(E,_.services[O])}),this.services[O]},dt.prototype.handleText=function(O,g,_){var v=_&&_.isExtended,T=_&&_.isMultiByte,E=this.current708Packet.data,R=v?4096:0,F=E[O],A=E[O+1],L=g.currentWindow,D,z;return g.textDecoder_&&!v?(T?(z=[F,A],O++):z=[F],D=g.textDecoder_.decode(new Uint8Array(z))):D=qr(R|F),L.pendingNewLine&&!L.isEmpty()&&L.newLine(this.getPts(O)),L.pendingNewLine=!1,L.addText(D),O},dt.prototype.multiByteCharacter=function(O,g){var _=this.current708Packet.data,v=_[O+1],T=_[O+2];return Kt(v)&&Kt(T)&&(O=this.handleText(++O,g,{isMultiByte:!0})),O},dt.prototype.setCurrentWindow=function(O,g){var _=this.current708Packet.data,v=_[O],T=v&7;return g.setCurrentWindow(T),O},dt.prototype.defineWindow=function(O,g){var _=this.current708Packet.data,v=_[O],T=v&7;g.setCurrentWindow(T);var E=g.currentWindow;return v=_[++O],E.visible=(v&32)>>5,E.rowLock=(v&16)>>4,E.columnLock=(v&8)>>3,E.priority=v&7,v=_[++O],E.relativePositioning=(v&128)>>7,E.anchorVertical=v&127,v=_[++O],E.anchorHorizontal=v,v=_[++O],E.anchorPoint=(v&240)>>4,E.rowCount=v&15,v=_[++O],E.columnCount=v&63,v=_[++O],E.windowStyle=(v&56)>>3,E.penStyle=v&7,E.virtualRowCount=E.rowCount+1,O},dt.prototype.setWindowAttributes=function(O,g){var _=this.current708Packet.data,v=_[O],T=g.currentWindow.winAttr;return v=_[++O],T.fillOpacity=(v&192)>>6,T.fillRed=(v&48)>>4,T.fillGreen=(v&12)>>2,T.fillBlue=v&3,v=_[++O],T.borderType=(v&192)>>6,T.borderRed=(v&48)>>4,T.borderGreen=(v&12)>>2,T.borderBlue=v&3,v=_[++O],T.borderType+=(v&128)>>5,T.wordWrap=(v&64)>>6,T.printDirection=(v&48)>>4,T.scrollDirection=(v&12)>>2,T.justify=v&3,v=_[++O],T.effectSpeed=(v&240)>>4,T.effectDirection=(v&12)>>2,T.displayEffect=v&3,O},dt.prototype.flushDisplayed=function(O,g){for(var _=[],v=0;v<8;v++)g.windows[v].visible&&!g.windows[v].isEmpty()&&_.push(g.windows[v].getText());g.endPts=O,g.text=_.join(`

`),this.pushCaption(g),g.startPts=O},dt.prototype.pushCaption=function(O){O.text!==""&&(this.trigger("data",{startPts:O.startPts,endPts:O.endPts,text:O.text,stream:"cc708_"+O.serviceNum}),O.text="",O.startPts=O.endPts)},dt.prototype.displayWindows=function(O,g){var _=this.current708Packet.data,v=_[++O],T=this.getPts(O);this.flushDisplayed(T,g);for(var E=0;E<8;E++)v&1<<E&&(g.windows[E].visible=1);return O},dt.prototype.hideWindows=function(O,g){var _=this.current708Packet.data,v=_[++O],T=this.getPts(O);this.flushDisplayed(T,g);for(var E=0;E<8;E++)v&1<<E&&(g.windows[E].visible=0);return O},dt.prototype.toggleWindows=function(O,g){var _=this.current708Packet.data,v=_[++O],T=this.getPts(O);this.flushDisplayed(T,g);for(var E=0;E<8;E++)v&1<<E&&(g.windows[E].visible^=1);return O},dt.prototype.clearWindows=function(O,g){var _=this.current708Packet.data,v=_[++O],T=this.getPts(O);this.flushDisplayed(T,g);for(var E=0;E<8;E++)v&1<<E&&g.windows[E].clearText();return O},dt.prototype.deleteWindows=function(O,g){var _=this.current708Packet.data,v=_[++O],T=this.getPts(O);this.flushDisplayed(T,g);for(var E=0;E<8;E++)v&1<<E&&g.windows[E].reset();return O},dt.prototype.setPenAttributes=function(O,g){var _=this.current708Packet.data,v=_[O],T=g.currentWindow.penAttr;return v=_[++O],T.textTag=(v&240)>>4,T.offset=(v&12)>>2,T.penSize=v&3,v=_[++O],T.italics=(v&128)>>7,T.underline=(v&64)>>6,T.edgeType=(v&56)>>3,T.fontStyle=v&7,O},dt.prototype.setPenColor=function(O,g){var _=this.current708Packet.data,v=_[O],T=g.currentWindow.penColor;return v=_[++O],T.fgOpacity=(v&192)>>6,T.fgRed=(v&48)>>4,T.fgGreen=(v&12)>>2,T.fgBlue=v&3,v=_[++O],T.bgOpacity=(v&192)>>6,T.bgRed=(v&48)>>4,T.bgGreen=(v&12)>>2,T.bgBlue=v&3,v=_[++O],T.edgeRed=(v&48)>>4,T.edgeGreen=(v&12)>>2,T.edgeBlue=v&3,O},dt.prototype.setPenLocation=function(O,g){var _=this.current708Packet.data,v=_[O],T=g.currentWindow.penLoc;return g.currentWindow.pendingNewLine=!0,v=_[++O],T.row=v&15,v=_[++O],T.column=v&63,O},dt.prototype.reset=function(O,g){var _=this.getPts(O);return this.flushDisplayed(_,g),this.initService(g.serviceNum,O)};var Pi={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Qi=function(g){return g===null?"":(g=Pi[g]||g,String.fromCharCode(g))},_n=14,nu=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Oi=function(){for(var g=[],_=_n+1;_--;)g.push("");return g},kt=function O(g,_){O.prototype.init.call(this),this.field_=g||0,this.dataChannel_=_||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(v){var T,E,R,F,A;if(T=v.ccData&32639,T===this.lastControlCode_){this.lastControlCode_=null;return}if((T&61440)===4096?this.lastControlCode_=T:T!==this.PADDING_&&(this.lastControlCode_=null),R=T>>>8,F=T&255,T!==this.PADDING_)if(T===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(T===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(v.pts),this.flushDisplayed(v.pts),E=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=E,this.startPts_=v.pts;else if(T===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(v.pts);else if(T===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(v.pts);else if(T===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(v.pts);else if(T===this.CARRIAGE_RETURN_)this.clearFormatting(v.pts),this.flushDisplayed(v.pts),this.shiftRowsUp_(),this.startPts_=v.pts;else if(T===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(T===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(v.pts),this.displayed_=Oi();else if(T===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Oi();else if(T===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(v.pts),this.displayed_=Oi()),this.mode_="paintOn",this.startPts_=v.pts;else if(this.isSpecialCharacter(R,F))R=(R&3)<<8,A=Qi(R|F),this[this.mode_](v.pts,A),this.column_++;else if(this.isExtCharacter(R,F))this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),R=(R&3)<<8,A=Qi(R|F),this[this.mode_](v.pts,A),this.column_++;else if(this.isMidRowCode(R,F))this.clearFormatting(v.pts),this[this.mode_](v.pts," "),this.column_++,(F&14)===14&&this.addFormatting(v.pts,["i"]),(F&1)===1&&this.addFormatting(v.pts,["u"]);else if(this.isOffsetControlCode(R,F))this.column_+=F&3;else if(this.isPAC(R,F)){var L=nu.indexOf(T&7968);this.mode_==="rollUp"&&(L-this.rollUpRows_+1<0&&(L=this.rollUpRows_-1),this.setRollUp(v.pts,L)),L!==this.row_&&(this.clearFormatting(v.pts),this.row_=L),F&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(v.pts,["u"]),(T&16)===16&&(this.column_=((T&14)>>1)*4),this.isColorPAC(F)&&(F&14)===14&&this.addFormatting(v.pts,["i"])}else this.isNormalChar(R)&&(F===0&&(F=null),A=Qi(R),A+=Qi(F),this[this.mode_](v.pts,A),this.column_+=A.length)}};kt.prototype=new e,kt.prototype.flushDisplayed=function(O){var g=this.displayed_.map(function(_,v){try{return _.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+v+"."}),""}},this).join(`
`).replace(/^\n+|\n+$/g,"");g.length&&this.trigger("data",{startPts:this.startPts_,endPts:O,text:g,stream:this.name_})},kt.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Oi(),this.nonDisplayed_=Oi(),this.lastControlCode_=null,this.column_=0,this.row_=_n,this.rollUpRows_=2,this.formatting_=[]},kt.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},kt.prototype.isSpecialCharacter=function(O,g){return O===this.EXT_&&g>=48&&g<=63},kt.prototype.isExtCharacter=function(O,g){return(O===this.EXT_+1||O===this.EXT_+2)&&g>=32&&g<=63},kt.prototype.isMidRowCode=function(O,g){return O===this.EXT_&&g>=32&&g<=47},kt.prototype.isOffsetControlCode=function(O,g){return O===this.OFFSET_&&g>=33&&g<=35},kt.prototype.isPAC=function(O,g){return O>=this.BASE_&&O<this.BASE_+8&&g>=64&&g<=127},kt.prototype.isColorPAC=function(O){return O>=64&&O<=79||O>=96&&O<=127},kt.prototype.isNormalChar=function(O){return O>=32&&O<=127},kt.prototype.setRollUp=function(O,g){if(this.mode_!=="rollUp"&&(this.row_=_n,this.mode_="rollUp",this.flushDisplayed(O),this.nonDisplayed_=Oi(),this.displayed_=Oi()),g!==void 0&&g!==this.row_)for(var _=0;_<this.rollUpRows_;_++)this.displayed_[g-_]=this.displayed_[this.row_-_],this.displayed_[this.row_-_]="";g===void 0&&(g=this.row_),this.topRow_=g-this.rollUpRows_+1},kt.prototype.addFormatting=function(O,g){this.formatting_=this.formatting_.concat(g);var _=g.reduce(function(v,T){return v+"<"+T+">"},"");this[this.mode_](O,_)},kt.prototype.clearFormatting=function(O){if(!!this.formatting_.length){var g=this.formatting_.reverse().reduce(function(_,v){return _+"</"+v+">"},"");this.formatting_=[],this[this.mode_](O,g)}},kt.prototype.popOn=function(O,g){var _=this.nonDisplayed_[this.row_];_+=g,this.nonDisplayed_[this.row_]=_},kt.prototype.rollUp=function(O,g){var _=this.displayed_[this.row_];_+=g,this.displayed_[this.row_]=_},kt.prototype.shiftRowsUp_=function(){var O;for(O=0;O<this.topRow_;O++)this.displayed_[O]="";for(O=this.row_+1;O<_n+1;O++)this.displayed_[O]="";for(O=this.topRow_;O<this.row_;O++)this.displayed_[O]=this.displayed_[O+1];this.displayed_[this.row_]=""},kt.prototype.paintOn=function(O,g){var _=this.displayed_[this.row_];_+=g,this.displayed_[this.row_]=_};var ks={CaptionStream:nr,Cea608Stream:kt,Cea708Stream:dt},ar={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},ph=8589934592,mh=4294967296,zl="shared",au=function(g,_){var v=1;for(g>_&&(v=-1);Math.abs(_-g)>mh;)g+=v*ph;return g},ka=function O(g){var _,v;O.prototype.init.call(this),this.type_=g||zl,this.push=function(T){this.type_!==zl&&T.type!==this.type_||(v===void 0&&(v=T.dts),T.dts=au(T.dts,v),T.pts=au(T.pts,v),_=T.dts,this.trigger("data",T))},this.flush=function(){v=_,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){v=void 0,_=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};ka.prototype=new e;var ql={TimestampRolloverStream:ka,handleRollover:au},La=function(g,_,v){var T,E="";for(T=_;T<v;T++)E+="%"+("00"+g[T].toString(16)).slice(-2);return E},Ls=function(g,_,v){return decodeURIComponent(La(g,_,v))},gh=function(g,_,v){return unescape(La(g,_,v))},Ms=function(g){return g[0]<<21|g[1]<<14|g[2]<<7|g[3]},su={TXXX:function(g){var _;if(g.data[0]===3){for(_=1;_<g.data.length;_++)if(g.data[_]===0){g.description=Ls(g.data,1,_),g.value=Ls(g.data,_+1,g.data.length).replace(/\0*$/,"");break}g.data=g.value}},WXXX:function(g){var _;if(g.data[0]===3){for(_=1;_<g.data.length;_++)if(g.data[_]===0){g.description=Ls(g.data,1,_),g.url=Ls(g.data,_+1,g.data.length);break}}},PRIV:function(g){var _;for(_=0;_<g.data.length;_++)if(g.data[_]===0){g.owner=gh(g.data,0,_);break}g.privateData=g.data.subarray(_+1),g.data=g.privateData}},Ma;Ma=function(g){var _={descriptor:g&&g.descriptor},v=0,T=[],E=0,R;if(Ma.prototype.init.call(this),this.dispatchType=ar.METADATA_STREAM_TYPE.toString(16),_.descriptor)for(R=0;R<_.descriptor.length;R++)this.dispatchType+=("00"+_.descriptor[R].toString(16)).slice(-2);this.push=function(F){var A,L,D,z,me,Pe;if(F.type==="timed-metadata"){if(F.dataAlignmentIndicator&&(E=0,T.length=0),T.length===0&&(F.data.length<10||F.data[0]!=="I".charCodeAt(0)||F.data[1]!=="D".charCodeAt(0)||F.data[2]!=="3".charCodeAt(0))){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(T.push(F),E+=F.data.byteLength,T.length===1&&(v=Ms(F.data.subarray(6,10)),v+=10),!(E<v)){for(A={data:new Uint8Array(v),frames:[],pts:T[0].pts,dts:T[0].dts},me=0;me<v;)A.data.set(T[0].data.subarray(0,v-me),me),me+=T[0].data.byteLength,E-=T[0].data.byteLength,T.shift();L=10,A.data[5]&64&&(L+=4,L+=Ms(A.data.subarray(10,14)),v-=Ms(A.data.subarray(16,20)));do{if(D=Ms(A.data.subarray(L+4,L+8)),D<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});return}if(Pe=String.fromCharCode(A.data[L],A.data[L+1],A.data[L+2],A.data[L+3]),z={id:Pe,data:A.data.subarray(L+10,L+D+10)},z.key=z.id,su[z.id]&&(su[z.id](z),z.owner==="com.apple.streaming.transportStreamTimestamp")){var Be=z.data,we=(Be[3]&1)<<30|Be[4]<<22|Be[5]<<14|Be[6]<<6|Be[7]>>>2;we*=4,we+=Be[7]&3,z.timeStamp=we,A.pts===void 0&&A.dts===void 0&&(A.pts=z.timeStamp,A.dts=z.timeStamp),this.trigger("timestamp",z)}A.frames.push(z),L+=10,L+=D}while(L<v);this.trigger("data",A)}}}},Ma.prototype=new e;var Kl=Ma,vh=ql.TimestampRolloverStream,Ns,Na,Fs,Tn=188,Us=71;Ns=function(){var g=new Uint8Array(Tn),_=0;Ns.prototype.init.call(this),this.push=function(v){var T=0,E=Tn,R;for(_?(R=new Uint8Array(v.byteLength+_),R.set(g.subarray(0,_)),R.set(v,_),_=0):R=v;E<R.byteLength;){if(R[T]===Us&&R[E]===Us){this.trigger("data",R.subarray(T,E)),T+=Tn,E+=Tn;continue}T++,E++}T<R.byteLength&&(g.set(R.subarray(T),0),_=R.byteLength-T)},this.flush=function(){_===Tn&&g[0]===Us&&(this.trigger("data",g),_=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){_=0,this.trigger("reset")}},Ns.prototype=new e,Na=function(){var g,_,v,T;Na.prototype.init.call(this),T=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,g=function(R,F){var A=0;F.payloadUnitStartIndicator&&(A+=R[A]+1),F.type==="pat"?_(R.subarray(A),F):v(R.subarray(A),F)},_=function(R,F){F.section_number=R[7],F.last_section_number=R[8],T.pmtPid=(R[10]&31)<<8|R[11],F.pmtPid=T.pmtPid},v=function(R,F){var A,L,D,z;if(!!(R[5]&1)){for(T.programMapTable={video:null,audio:null,"timed-metadata":{}},A=(R[1]&15)<<8|R[2],L=3+A-4,D=(R[10]&15)<<8|R[11],z=12+D;z<L;){var me=R[z],Pe=(R[z+1]&31)<<8|R[z+2];me===ar.H264_STREAM_TYPE&&T.programMapTable.video===null?T.programMapTable.video=Pe:me===ar.ADTS_STREAM_TYPE&&T.programMapTable.audio===null?T.programMapTable.audio=Pe:me===ar.METADATA_STREAM_TYPE&&(T.programMapTable["timed-metadata"][Pe]=me),z+=((R[z+3]&15)<<8|R[z+4])+5}F.programMapTable=T.programMapTable}},this.push=function(E){var R={},F=4;if(R.payloadUnitStartIndicator=!!(E[1]&64),R.pid=E[1]&31,R.pid<<=8,R.pid|=E[2],(E[3]&48)>>>4>1&&(F+=E[F]+1),R.pid===0)R.type="pat",g(E.subarray(F),R),this.trigger("data",R);else if(R.pid===this.pmtPid)for(R.type="pmt",g(E.subarray(F),R),this.trigger("data",R);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([E,F,R]):this.processPes_(E,F,R)},this.processPes_=function(E,R,F){F.pid===this.programMapTable.video?F.streamType=ar.H264_STREAM_TYPE:F.pid===this.programMapTable.audio?F.streamType=ar.ADTS_STREAM_TYPE:F.streamType=this.programMapTable["timed-metadata"][F.pid],F.type="pes",F.data=E.subarray(R),this.trigger("data",F)}},Na.prototype=new e,Na.STREAM_TYPES={h264:27,adts:15},Fs=function(){var g=this,_=!1,v={data:[],size:0},T={data:[],size:0},E={data:[],size:0},R,F=function(D,z){var me,Pe=D[0]<<16|D[1]<<8|D[2];z.data=new Uint8Array,Pe===1&&(z.packetLength=6+(D[4]<<8|D[5]),z.dataAlignmentIndicator=(D[6]&4)!==0,me=D[7],me&192&&(z.pts=(D[9]&14)<<27|(D[10]&255)<<20|(D[11]&254)<<12|(D[12]&255)<<5|(D[13]&254)>>>3,z.pts*=4,z.pts+=(D[13]&6)>>>1,z.dts=z.pts,me&64&&(z.dts=(D[14]&14)<<27|(D[15]&255)<<20|(D[16]&254)<<12|(D[17]&255)<<5|(D[18]&254)>>>3,z.dts*=4,z.dts+=(D[18]&6)>>>1)),z.data=D.subarray(9+D[8]))},A=function(D,z,me){var Pe=new Uint8Array(D.size),Be={type:z},we=0,Ke=0,Yt=!1,At;if(!(!D.data.length||D.size<9)){for(Be.trackId=D.data[0].pid,we=0;we<D.data.length;we++)At=D.data[we],Pe.set(At.data,Ke),Ke+=At.data.byteLength;F(Pe,Be),Yt=z==="video"||Be.packetLength<=D.size,(me||Yt)&&(D.size=0,D.data.length=0),Yt&&g.trigger("data",Be)}};Fs.prototype.init.call(this),this.push=function(L){({pat:function(){},pes:function(){var z,me;switch(L.streamType){case ar.H264_STREAM_TYPE:z=v,me="video";break;case ar.ADTS_STREAM_TYPE:z=T,me="audio";break;case ar.METADATA_STREAM_TYPE:z=E,me="timed-metadata";break;default:return}L.payloadUnitStartIndicator&&A(z,me,!0),z.data.push(L),z.size+=L.data.byteLength},pmt:function(){var z={type:"metadata",tracks:[]};R=L.programMapTable,R.video!==null&&z.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+R.video,codec:"avc",type:"video"}),R.audio!==null&&z.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+R.audio,codec:"adts",type:"audio"}),_=!0,g.trigger("data",z)}})[L.type]()},this.reset=function(){v.size=0,v.data.length=0,T.size=0,T.data.length=0,this.trigger("reset")},this.flushStreams_=function(){A(v,"video"),A(T,"audio"),A(E,"timed-metadata")},this.flush=function(){if(!_&&R){var L={type:"metadata",tracks:[]};R.video!==null&&L.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+R.video,codec:"avc",type:"video"}),R.audio!==null&&L.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+R.audio,codec:"adts",type:"audio"}),g.trigger("data",L)}_=!1,this.flushStreams_(),this.trigger("done")}},Fs.prototype=new e;var ou={PAT_PID:0,MP2T_PACKET_LENGTH:Tn,TransportPacketStream:Ns,TransportParseStream:Na,ElementaryStream:Fs,TimestampRolloverStream:vh,CaptionStream:ks.CaptionStream,Cea608Stream:ks.Cea608Stream,Cea708Stream:ks.Cea708Stream,MetadataStream:Kl};for(var Fa in ar)ar.hasOwnProperty(Fa)&&(ou[Fa]=ar[Fa]);var Ii=ou,Yl=qe.ONE_SECOND_IN_TS,bn,uu=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];bn=function(g){var _,v=0;bn.prototype.init.call(this),this.skipWarn_=function(T,E){this.trigger("log",{level:"warn",message:"adts skiping bytes "+T+" to "+E+" in frame "+v+" outside syncword"})},this.push=function(T){var E=0,R,F,A,L,D;if(g||(v=0),T.type==="audio"){_&&_.length?(A=_,_=new Uint8Array(A.byteLength+T.data.byteLength),_.set(A),_.set(T.data,A.byteLength)):_=T.data;for(var z;E+7<_.length;){if(_[E]!==255||(_[E+1]&246)!==240){typeof z!="number"&&(z=E),E++;continue}if(typeof z=="number"&&(this.skipWarn_(z,E),z=null),F=(~_[E+1]&1)*2,R=(_[E+3]&3)<<11|_[E+4]<<3|(_[E+5]&224)>>5,L=((_[E+6]&3)+1)*1024,D=L*Yl/uu[(_[E+2]&60)>>>2],_.byteLength-E<R)break;this.trigger("data",{pts:T.pts+v*D,dts:T.dts+v*D,sampleCount:L,audioobjecttype:(_[E+2]>>>6&3)+1,channelcount:(_[E+2]&1)<<2|(_[E+3]&192)>>>6,samplerate:uu[(_[E+2]&60)>>>2],samplingfrequencyindex:(_[E+2]&60)>>>2,samplesize:16,data:_.subarray(E+7+F,E+R)}),v++,E+=R}typeof z=="number"&&(this.skipWarn_(z,E),z=null),_=_.subarray(E)}},this.flush=function(){v=0,this.trigger("done")},this.reset=function(){_=void 0,this.trigger("reset")},this.endTimeline=function(){_=void 0,this.trigger("endedtimeline")}},bn.prototype=new e;var Xl=bn,lu;lu=function(g){var _=g.byteLength,v=0,T=0;this.length=function(){return 8*_},this.bitsAvailable=function(){return 8*_+T},this.loadWord=function(){var E=g.byteLength-_,R=new Uint8Array(4),F=Math.min(4,_);if(F===0)throw new Error("no bytes available");R.set(g.subarray(E,E+F)),v=new DataView(R.buffer).getUint32(0),T=F*8,_-=F},this.skipBits=function(E){var R;T>E?(v<<=E,T-=E):(E-=T,R=Math.floor(E/8),E-=R*8,_-=R,this.loadWord(),v<<=E,T-=E)},this.readBits=function(E){var R=Math.min(T,E),F=v>>>32-R;return T-=R,T>0?v<<=R:_>0&&this.loadWord(),R=E-R,R>0?F<<R|this.readBits(R):F},this.skipLeadingZeros=function(){var E;for(E=0;E<T;++E)if((v&2147483648>>>E)!==0)return v<<=E,T-=E,E;return this.loadWord(),E+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var E=this.skipLeadingZeros();return this.readBits(E+1)-1},this.readExpGolomb=function(){var E=this.readUnsignedExpGolomb();return 1&E?1+E>>>1:-1*(E>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var Ql=lu,ra,Ua,cu;Ua=function(){var g=0,_,v;Ua.prototype.init.call(this),this.push=function(T){var E;v?(E=new Uint8Array(v.byteLength+T.data.byteLength),E.set(v),E.set(T.data,v.byteLength),v=E):v=T.data;for(var R=v.byteLength;g<R-3;g++)if(v[g+2]===1){_=g+5;break}for(;_<R;)switch(v[_]){case 0:if(v[_-1]!==0){_+=2;break}else if(v[_-2]!==0){_++;break}g+3!==_-2&&this.trigger("data",v.subarray(g+3,_-2));do _++;while(v[_]!==1&&_<R);g=_-2,_+=3;break;case 1:if(v[_-1]!==0||v[_-2]!==0){_+=3;break}this.trigger("data",v.subarray(g+3,_-2)),g=_-2,_+=3;break;default:_+=3;break}v=v.subarray(g),_-=g,g=0},this.reset=function(){v=null,g=0,this.trigger("reset")},this.flush=function(){v&&v.byteLength>3&&this.trigger("data",v.subarray(g+3)),v=null,g=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Ua.prototype=new e,cu={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},ra=function(){var g=new Ua,_,v,T,E,R,F,A;ra.prototype.init.call(this),_=this,this.push=function(L){L.type==="video"&&(v=L.trackId,T=L.pts,E=L.dts,g.push(L))},g.on("data",function(L){var D={trackId:v,pts:T,dts:E,data:L,nalUnitTypeCode:L[0]&31};switch(D.nalUnitTypeCode){case 5:D.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:D.nalUnitType="sei_rbsp",D.escapedRBSP=R(L.subarray(1));break;case 7:D.nalUnitType="seq_parameter_set_rbsp",D.escapedRBSP=R(L.subarray(1)),D.config=F(D.escapedRBSP);break;case 8:D.nalUnitType="pic_parameter_set_rbsp";break;case 9:D.nalUnitType="access_unit_delimiter_rbsp";break}_.trigger("data",D)}),g.on("done",function(){_.trigger("done")}),g.on("partialdone",function(){_.trigger("partialdone")}),g.on("reset",function(){_.trigger("reset")}),g.on("endedtimeline",function(){_.trigger("endedtimeline")}),this.flush=function(){g.flush()},this.partialFlush=function(){g.partialFlush()},this.reset=function(){g.reset()},this.endTimeline=function(){g.endTimeline()},A=function(D,z){var me=8,Pe=8,Be,we;for(Be=0;Be<D;Be++)Pe!==0&&(we=z.readExpGolomb(),Pe=(me+we+256)%256),me=Pe===0?me:Pe},R=function(D){for(var z=D.byteLength,me=[],Pe=1,Be,we;Pe<z-2;)D[Pe]===0&&D[Pe+1]===0&&D[Pe+2]===3?(me.push(Pe+2),Pe+=2):Pe++;if(me.length===0)return D;Be=z-me.length,we=new Uint8Array(Be);var Ke=0;for(Pe=0;Pe<Be;Ke++,Pe++)Ke===me[0]&&(Ke++,me.shift()),we[Pe]=D[Ke];return we},F=function(D){var z=0,me=0,Pe=0,Be=0,we,Ke,Yt,At,yi,Cu,wn,$a,Ga,bt,Tc,Bt=[1,1],za,An;if(we=new Ql(D),Ke=we.readUnsignedByte(),At=we.readUnsignedByte(),Yt=we.readUnsignedByte(),we.skipUnsignedExpGolomb(),cu[Ke]&&(yi=we.readUnsignedExpGolomb(),yi===3&&we.skipBits(1),we.skipUnsignedExpGolomb(),we.skipUnsignedExpGolomb(),we.skipBits(1),we.readBoolean()))for(Tc=yi!==3?8:12,An=0;An<Tc;An++)we.readBoolean()&&(An<6?A(16,we):A(64,we));if(we.skipUnsignedExpGolomb(),Cu=we.readUnsignedExpGolomb(),Cu===0)we.readUnsignedExpGolomb();else if(Cu===1)for(we.skipBits(1),we.skipExpGolomb(),we.skipExpGolomb(),wn=we.readUnsignedExpGolomb(),An=0;An<wn;An++)we.skipExpGolomb();if(we.skipUnsignedExpGolomb(),we.skipBits(1),$a=we.readUnsignedExpGolomb(),Ga=we.readUnsignedExpGolomb(),bt=we.readBits(1),bt===0&&we.skipBits(1),we.skipBits(1),we.readBoolean()&&(z=we.readUnsignedExpGolomb(),me=we.readUnsignedExpGolomb(),Pe=we.readUnsignedExpGolomb(),Be=we.readUnsignedExpGolomb()),we.readBoolean()&&we.readBoolean()){switch(za=we.readUnsignedByte(),za){case 1:Bt=[1,1];break;case 2:Bt=[12,11];break;case 3:Bt=[10,11];break;case 4:Bt=[16,11];break;case 5:Bt=[40,33];break;case 6:Bt=[24,11];break;case 7:Bt=[20,11];break;case 8:Bt=[32,11];break;case 9:Bt=[80,33];break;case 10:Bt=[18,11];break;case 11:Bt=[15,11];break;case 12:Bt=[64,33];break;case 13:Bt=[160,99];break;case 14:Bt=[4,3];break;case 15:Bt=[3,2];break;case 16:Bt=[2,1];break;case 255:{Bt=[we.readUnsignedByte()<<8|we.readUnsignedByte(),we.readUnsignedByte()<<8|we.readUnsignedByte()];break}}Bt&&Bt[0]/Bt[1]}return{profileIdc:Ke,levelIdc:Yt,profileCompatibility:At,width:($a+1)*16-z*2-me*2,height:(2-bt)*(Ga+1)*16-Pe*2-Be*2,sarRatio:Bt}}},ra.prototype=new e;var fu={H264Stream:ra,NalByteStream:Ua},du=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Sn=function(g,_){var v=g[_+6]<<21|g[_+7]<<14|g[_+8]<<7|g[_+9],T=g[_+5],E=(T&16)>>4;return v=v>=0?v:0,E?v+20:v+10},Jl=function O(g,_){return g.length-_<10||g[_]!=="I".charCodeAt(0)||g[_+1]!=="D".charCodeAt(0)||g[_+2]!=="3".charCodeAt(0)?_:(_+=Sn(g,_),O(g,_))},Zl=function(g){var _=Jl(g,0);return g.length>=_+2&&(g[_]&255)===255&&(g[_+1]&240)===240&&(g[_+1]&22)===16},ec=function(g){return g[0]<<21|g[1]<<14|g[2]<<7|g[3]},tc=function(g,_,v){var T,E="";for(T=_;T<v;T++)E+="%"+("00"+g[T].toString(16)).slice(-2);return E},rc=function(g,_,v){return unescape(tc(g,_,v))},ic=function(g,_){var v=(g[_+5]&224)>>5,T=g[_+4]<<3,E=g[_+3]&3<<11;return E|T|v},nc=function(g,_){return g[_]==="I".charCodeAt(0)&&g[_+1]==="D".charCodeAt(0)&&g[_+2]==="3".charCodeAt(0)?"timed-metadata":g[_]&!0&&(g[_+1]&240)===240?"audio":null},yh=function(g){for(var _=0;_+5<g.length;){if(g[_]!==255||(g[_+1]&246)!==240){_++;continue}return du[(g[_+2]&60)>>>2]}return null},_h=function(g){var _,v,T,E;_=10,g[5]&64&&(_+=4,_+=ec(g.subarray(10,14)));do{if(v=ec(g.subarray(_+4,_+8)),v<1)return null;if(E=String.fromCharCode(g[_],g[_+1],g[_+2],g[_+3]),E==="PRIV"){T=g.subarray(_+10,_+v+10);for(var R=0;R<T.byteLength;R++)if(T[R]===0){var F=rc(T,0,R);if(F==="com.apple.streaming.transportStreamTimestamp"){var A=T.subarray(R+1),L=(A[3]&1)<<30|A[4]<<22|A[5]<<14|A[6]<<6|A[7]>>>2;return L*=4,L+=A[7]&3,L}break}}_+=10,_+=v}while(_<g.byteLength);return null},Bs={isLikelyAacData:Zl,parseId3TagSize:Sn,parseAdtsSize:ic,parseType:nc,parseSampleRate:yh,parseAacTimestamp:_h},Ba;Ba=function(){var g=new Uint8Array,_=0;Ba.prototype.init.call(this),this.setTimestamp=function(v){_=v},this.push=function(v){var T=0,E=0,R,F,A,L;for(g.length?(L=g.length,g=new Uint8Array(v.byteLength+L),g.set(g.subarray(0,L)),g.set(v,L)):g=v;g.length-E>=3;){if(g[E]==="I".charCodeAt(0)&&g[E+1]==="D".charCodeAt(0)&&g[E+2]==="3".charCodeAt(0)){if(g.length-E<10||(T=Bs.parseId3TagSize(g,E),E+T>g.length))break;F={type:"timed-metadata",data:g.subarray(E,E+T)},this.trigger("data",F),E+=T;continue}else if((g[E]&255)===255&&(g[E+1]&240)===240){if(g.length-E<7||(T=Bs.parseAdtsSize(g,E),E+T>g.length))break;A={type:"audio",data:g.subarray(E,E+T),pts:_,dts:_},this.trigger("data",A),E+=T;continue}E++}R=g.length-E,R>0?g=g.subarray(E):g=new Uint8Array},this.reset=function(){g=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){g=new Uint8Array,this.trigger("endedtimeline")}},Ba.prototype=new e;var Th=Ba,bh=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],hu=bh,Sh=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],ja=Sh,xh=fu.H264Stream,Eh=Bs.isLikelyAacData,Ch=qe.ONE_SECOND_IN_TS,Va,ia,Et,vt,Rh=function(g,_){_.stream=g,this.trigger("log",_)},ac=function(g,_){for(var v=Object.keys(_),T=0;T<v.length;T++){var E=v[T];E==="headOfPipeline"||!_[E].on||_[E].on("log",Rh.bind(g,E))}},sc=function(g,_){var v;if(g.length!==_.length)return!1;for(v=0;v<g.length;v++)if(g[v]!==_[v])return!1;return!0},pu=function(g,_,v,T,E,R){var F=v-_,A=T-_,L=E-v;return{start:{dts:g,pts:g+F},end:{dts:g+A,pts:g+L},prependedContentDuration:R,baseMediaDecodeTime:g}};ia=function(g,_){var v=[],T,E=0,R=0,F=1/0;_=_||{},T=_.firstSequenceNumber||0,ia.prototype.init.call(this),this.push=function(A){ir.collectDtsInfo(g,A),g&&hu.forEach(function(L){g[L]=A[L]}),v.push(A)},this.setEarliestDts=function(A){E=A},this.setVideoBaseMediaDecodeTime=function(A){F=A},this.setAudioAppendStart=function(A){R=A},this.flush=function(){var A,L,D,z,me,Pe,Be;if(v.length===0){this.trigger("done","AudioSegmentStream");return}A=Ot.trimAdtsFramesByEarliestDts(v,g,E),g.baseMediaDecodeTime=ir.calculateTrackBaseMediaDecodeTime(g,_.keepOriginalTimestamps),Be=Ot.prefixWithSilence(g,A,R,F),g.samples=Ot.generateSampleTable(A),D=se.mdat(Ot.concatenateFrameData(A)),v=[],L=se.moof(T,[g]),z=new Uint8Array(L.byteLength+D.byteLength),T++,z.set(L),z.set(D,L.byteLength),ir.clearDtsInfo(g),me=Math.ceil(Ch*1024/g.samplerate),A.length&&(Pe=A.length*me,this.trigger("segmentTimingInfo",pu(qe.audioTsToVideoTs(g.baseMediaDecodeTime,g.samplerate),A[0].dts,A[0].pts,A[0].dts+Pe,A[0].pts+Pe,Be||0)),this.trigger("timingInfo",{start:A[0].pts,end:A[0].pts+Pe})),this.trigger("data",{track:g,boxes:z}),this.trigger("done","AudioSegmentStream")},this.reset=function(){ir.clearDtsInfo(g),v=[],this.trigger("reset")}},ia.prototype=new e,Va=function(g,_){var v,T=[],E=[],R,F;_=_||{},v=_.firstSequenceNumber||0,Va.prototype.init.call(this),delete g.minPTS,this.gopCache_=[],this.push=function(A){ir.collectDtsInfo(g,A),A.nalUnitType==="seq_parameter_set_rbsp"&&!R&&(R=A.config,g.sps=[A.data],ja.forEach(function(L){g[L]=R[L]},this)),A.nalUnitType==="pic_parameter_set_rbsp"&&!F&&(F=A.data,g.pps=[A.data]),T.push(A)},this.flush=function(){for(var A,L,D,z,me,Pe,Be=0,we,Ke;T.length&&T[0].nalUnitType!=="access_unit_delimiter_rbsp";)T.shift();if(T.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(A=be.groupNalsIntoFrames(T),D=be.groupFramesIntoGops(A),D[0][0].keyFrame||(L=this.getGopForFusion_(T[0],g),L?(Be=L.duration,D.unshift(L),D.byteLength+=L.byteLength,D.nalCount+=L.nalCount,D.pts=L.pts,D.dts=L.dts,D.duration+=L.duration):D=be.extendFirstKeyFrame(D)),E.length){var Yt;if(_.alignGopsAtEnd?Yt=this.alignGopsAtEnd_(D):Yt=this.alignGopsAtStart_(D),!Yt){this.gopCache_.unshift({gop:D.pop(),pps:g.pps,sps:g.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),T=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}ir.clearDtsInfo(g),D=Yt}ir.collectDtsInfo(g,D),g.samples=be.generateSampleTable(D),me=se.mdat(be.concatenateNalData(D)),g.baseMediaDecodeTime=ir.calculateTrackBaseMediaDecodeTime(g,_.keepOriginalTimestamps),this.trigger("processedGopsInfo",D.map(function(At){return{pts:At.pts,dts:At.dts,byteLength:At.byteLength}})),we=D[0],Ke=D[D.length-1],this.trigger("segmentTimingInfo",pu(g.baseMediaDecodeTime,we.dts,we.pts,Ke.dts+Ke.duration,Ke.pts+Ke.duration,Be)),this.trigger("timingInfo",{start:D[0].pts,end:D[D.length-1].pts+D[D.length-1].duration}),this.gopCache_.unshift({gop:D.pop(),pps:g.pps,sps:g.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),T=[],this.trigger("baseMediaDecodeTime",g.baseMediaDecodeTime),this.trigger("timelineStartInfo",g.timelineStartInfo),z=se.moof(v,[g]),Pe=new Uint8Array(z.byteLength+me.byteLength),v++,Pe.set(z),Pe.set(me,z.byteLength),this.trigger("data",{track:g,boxes:Pe}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),T=[],this.gopCache_.length=0,E.length=0,this.trigger("reset")},this.resetStream_=function(){ir.clearDtsInfo(g),R=void 0,F=void 0},this.getGopForFusion_=function(A){var L=45e3,D=1e4,z=1/0,me,Pe,Be,we,Ke;for(Ke=0;Ke<this.gopCache_.length;Ke++)we=this.gopCache_[Ke],Be=we.gop,!(!(g.pps&&sc(g.pps[0],we.pps[0]))||!(g.sps&&sc(g.sps[0],we.sps[0])))&&(Be.dts<g.timelineStartInfo.dts||(me=A.dts-Be.dts-Be.duration,me>=-D&&me<=L&&(!Pe||z>me)&&(Pe=we,z=me)));return Pe?Pe.gop:null},this.alignGopsAtStart_=function(A){var L,D,z,me,Pe,Be,we,Ke;for(Pe=A.byteLength,Be=A.nalCount,we=A.duration,L=D=0;L<E.length&&D<A.length&&(z=E[L],me=A[D],z.pts!==me.pts);){if(me.pts>z.pts){L++;continue}D++,Pe-=me.byteLength,Be-=me.nalCount,we-=me.duration}return D===0?A:D===A.length?null:(Ke=A.slice(D),Ke.byteLength=Pe,Ke.duration=we,Ke.nalCount=Be,Ke.pts=Ke[0].pts,Ke.dts=Ke[0].dts,Ke)},this.alignGopsAtEnd_=function(A){var L,D,z,me,Pe,Be;for(L=E.length-1,D=A.length-1,Pe=null,Be=!1;L>=0&&D>=0;){if(z=E[L],me=A[D],z.pts===me.pts){Be=!0;break}if(z.pts>me.pts){L--;continue}L===E.length-1&&(Pe=D),D--}if(!Be&&Pe===null)return null;var we;if(Be?we=D:we=Pe,we===0)return A;var Ke=A.slice(we),Yt=Ke.reduce(function(At,yi){return At.byteLength+=yi.byteLength,At.duration+=yi.duration,At.nalCount+=yi.nalCount,At},{byteLength:0,duration:0,nalCount:0});return Ke.byteLength=Yt.byteLength,Ke.duration=Yt.duration,Ke.nalCount=Yt.nalCount,Ke.pts=Ke[0].pts,Ke.dts=Ke[0].dts,Ke},this.alignGopsWith=function(A){E=A}},Va.prototype=new e,vt=function(g,_){this.numberOfTracks=0,this.metadataStream=_,g=g||{},typeof g.remux<"u"?this.remuxTracks=!!g.remux:this.remuxTracks=!0,typeof g.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=g.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,vt.prototype.init.call(this),this.push=function(v){if(v.text)return this.pendingCaptions.push(v);if(v.frames)return this.pendingMetadata.push(v);this.pendingTracks.push(v.track),this.pendingBytes+=v.boxes.byteLength,v.track.type==="video"&&(this.videoTrack=v.track,this.pendingBoxes.push(v.boxes)),v.track.type==="audio"&&(this.audioTrack=v.track,this.pendingBoxes.unshift(v.boxes))}},vt.prototype=new e,vt.prototype.flush=function(O){var g=0,_={captions:[],captionStreams:{},metadata:[],info:{}},v,T,E,R=0,F;if(this.pendingTracks.length<this.numberOfTracks){if(O!=="VideoSegmentStream"&&O!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(R=this.videoTrack.timelineStartInfo.pts,ja.forEach(function(A){_.info[A]=this.videoTrack[A]},this)):this.audioTrack&&(R=this.audioTrack.timelineStartInfo.pts,hu.forEach(function(A){_.info[A]=this.audioTrack[A]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?_.type=this.pendingTracks[0].type:_.type="combined",this.emittedTracks+=this.pendingTracks.length,E=se.initSegment(this.pendingTracks),_.initSegment=new Uint8Array(E.byteLength),_.initSegment.set(E),_.data=new Uint8Array(this.pendingBytes),F=0;F<this.pendingBoxes.length;F++)_.data.set(this.pendingBoxes[F],g),g+=this.pendingBoxes[F].byteLength;for(F=0;F<this.pendingCaptions.length;F++)v=this.pendingCaptions[F],v.startTime=qe.metadataTsToSeconds(v.startPts,R,this.keepOriginalTimestamps),v.endTime=qe.metadataTsToSeconds(v.endPts,R,this.keepOriginalTimestamps),_.captionStreams[v.stream]=!0,_.captions.push(v);for(F=0;F<this.pendingMetadata.length;F++)T=this.pendingMetadata[F],T.cueTime=qe.metadataTsToSeconds(T.pts,R,this.keepOriginalTimestamps),_.metadata.push(T);for(_.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",_),F=0;F<_.captions.length;F++)v=_.captions[F],this.trigger("caption",v);for(F=0;F<_.metadata.length;F++)T=_.metadata[F],this.trigger("id3Frame",T)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},vt.prototype.setRemux=function(O){this.remuxTracks=O},Et=function(g){var _=this,v=!0,T,E;Et.prototype.init.call(this),g=g||{},this.baseMediaDecodeTime=g.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var R={};this.transmuxPipeline_=R,R.type="aac",R.metadataStream=new Ii.MetadataStream,R.aacStream=new Th,R.audioTimestampRolloverStream=new Ii.TimestampRolloverStream("audio"),R.timedMetadataTimestampRolloverStream=new Ii.TimestampRolloverStream("timed-metadata"),R.adtsStream=new Xl,R.coalesceStream=new vt(g,R.metadataStream),R.headOfPipeline=R.aacStream,R.aacStream.pipe(R.audioTimestampRolloverStream).pipe(R.adtsStream),R.aacStream.pipe(R.timedMetadataTimestampRolloverStream).pipe(R.metadataStream).pipe(R.coalesceStream),R.metadataStream.on("timestamp",function(F){R.aacStream.setTimestamp(F.timeStamp)}),R.aacStream.on("data",function(F){F.type!=="timed-metadata"&&F.type!=="audio"||R.audioSegmentStream||(E=E||{timelineStartInfo:{baseMediaDecodeTime:_.baseMediaDecodeTime},codec:"adts",type:"audio"},R.coalesceStream.numberOfTracks++,R.audioSegmentStream=new ia(E,g),R.audioSegmentStream.on("log",_.getLogTrigger_("audioSegmentStream")),R.audioSegmentStream.on("timingInfo",_.trigger.bind(_,"audioTimingInfo")),R.adtsStream.pipe(R.audioSegmentStream).pipe(R.coalesceStream),_.trigger("trackinfo",{hasAudio:!!E,hasVideo:!!T}))}),R.coalesceStream.on("data",this.trigger.bind(this,"data")),R.coalesceStream.on("done",this.trigger.bind(this,"done")),ac(this,R)},this.setupTsPipeline=function(){var R={};this.transmuxPipeline_=R,R.type="ts",R.metadataStream=new Ii.MetadataStream,R.packetStream=new Ii.TransportPacketStream,R.parseStream=new Ii.TransportParseStream,R.elementaryStream=new Ii.ElementaryStream,R.timestampRolloverStream=new Ii.TimestampRolloverStream,R.adtsStream=new Xl,R.h264Stream=new xh,R.captionStream=new Ii.CaptionStream(g),R.coalesceStream=new vt(g,R.metadataStream),R.headOfPipeline=R.packetStream,R.packetStream.pipe(R.parseStream).pipe(R.elementaryStream).pipe(R.timestampRolloverStream),R.timestampRolloverStream.pipe(R.h264Stream),R.timestampRolloverStream.pipe(R.adtsStream),R.timestampRolloverStream.pipe(R.metadataStream).pipe(R.coalesceStream),R.h264Stream.pipe(R.captionStream).pipe(R.coalesceStream),R.elementaryStream.on("data",function(F){var A;if(F.type==="metadata"){for(A=F.tracks.length;A--;)!T&&F.tracks[A].type==="video"?(T=F.tracks[A],T.timelineStartInfo.baseMediaDecodeTime=_.baseMediaDecodeTime):!E&&F.tracks[A].type==="audio"&&(E=F.tracks[A],E.timelineStartInfo.baseMediaDecodeTime=_.baseMediaDecodeTime);T&&!R.videoSegmentStream&&(R.coalesceStream.numberOfTracks++,R.videoSegmentStream=new Va(T,g),R.videoSegmentStream.on("log",_.getLogTrigger_("videoSegmentStream")),R.videoSegmentStream.on("timelineStartInfo",function(L){E&&!g.keepOriginalTimestamps&&(E.timelineStartInfo=L,R.audioSegmentStream.setEarliestDts(L.dts-_.baseMediaDecodeTime))}),R.videoSegmentStream.on("processedGopsInfo",_.trigger.bind(_,"gopInfo")),R.videoSegmentStream.on("segmentTimingInfo",_.trigger.bind(_,"videoSegmentTimingInfo")),R.videoSegmentStream.on("baseMediaDecodeTime",function(L){E&&R.audioSegmentStream.setVideoBaseMediaDecodeTime(L)}),R.videoSegmentStream.on("timingInfo",_.trigger.bind(_,"videoTimingInfo")),R.h264Stream.pipe(R.videoSegmentStream).pipe(R.coalesceStream)),E&&!R.audioSegmentStream&&(R.coalesceStream.numberOfTracks++,R.audioSegmentStream=new ia(E,g),R.audioSegmentStream.on("log",_.getLogTrigger_("audioSegmentStream")),R.audioSegmentStream.on("timingInfo",_.trigger.bind(_,"audioTimingInfo")),R.audioSegmentStream.on("segmentTimingInfo",_.trigger.bind(_,"audioSegmentTimingInfo")),R.adtsStream.pipe(R.audioSegmentStream).pipe(R.coalesceStream)),_.trigger("trackinfo",{hasAudio:!!E,hasVideo:!!T})}}),R.coalesceStream.on("data",this.trigger.bind(this,"data")),R.coalesceStream.on("id3Frame",function(F){F.dispatchType=R.metadataStream.dispatchType,_.trigger("id3Frame",F)}),R.coalesceStream.on("caption",this.trigger.bind(this,"caption")),R.coalesceStream.on("done",this.trigger.bind(this,"done")),ac(this,R)},this.setBaseMediaDecodeTime=function(R){var F=this.transmuxPipeline_;g.keepOriginalTimestamps||(this.baseMediaDecodeTime=R),E&&(E.timelineStartInfo.dts=void 0,E.timelineStartInfo.pts=void 0,ir.clearDtsInfo(E),F.audioTimestampRolloverStream&&F.audioTimestampRolloverStream.discontinuity()),T&&(F.videoSegmentStream&&(F.videoSegmentStream.gopCache_=[]),T.timelineStartInfo.dts=void 0,T.timelineStartInfo.pts=void 0,ir.clearDtsInfo(T),F.captionStream.reset()),F.timestampRolloverStream&&F.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(R){E&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(R)},this.setRemux=function(R){var F=this.transmuxPipeline_;g.remux=R,F&&F.coalesceStream&&F.coalesceStream.setRemux(R)},this.alignGopsWith=function(R){T&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(R)},this.getLogTrigger_=function(R){var F=this;return function(A){A.stream=R,F.trigger("log",A)}},this.push=function(R){if(v){var F=Eh(R);F&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!F&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),v=!1}this.transmuxPipeline_.headOfPipeline.push(R)},this.flush=function(){v=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Et.prototype=new e;var wh={Transmuxer:Et,VideoSegmentStream:Va,AudioSegmentStream:ia,AUDIO_PROPERTIES:hu,VIDEO_PROPERTIES:ja,generateSegmentTimingInfo:pu},Ah=function(g){return g>>>0},oc=function(g){return("00"+g.toString(16)).slice(-2)},js={toUnsigned:Ah,toHexString:oc},sr=function(g){var _="";return _+=String.fromCharCode(g[0]),_+=String.fromCharCode(g[1]),_+=String.fromCharCode(g[2]),_+=String.fromCharCode(g[3]),_},Di=sr,xn=js.toUnsigned,uc=function O(g,_){var v=[],T,E,R,F,A;if(!_.length)return null;for(T=0;T<g.byteLength;)E=xn(g[T]<<24|g[T+1]<<16|g[T+2]<<8|g[T+3]),R=Di(g.subarray(T+4,T+8)),F=E>1?T+E:g.byteLength,R===_[0]&&(_.length===1?v.push(g.subarray(T+8,F)):(A=O(g.subarray(T+8,F),_.slice(1)),A.length&&(v=v.concat(A)))),T=F;return v},Rt=uc,Kr=js.toUnsigned,lc=t.getUint64,cc=function(g){var _={version:g[0],flags:new Uint8Array(g.subarray(1,4))};return _.version===1?_.baseMediaDecodeTime=lc(g.subarray(4)):_.baseMediaDecodeTime=Kr(g[4]<<24|g[5]<<16|g[6]<<8|g[7]),_},mu=cc,fc=function(g){return{isLeading:(g[0]&12)>>>2,dependsOn:g[0]&3,isDependedOn:(g[1]&192)>>>6,hasRedundancy:(g[1]&48)>>>4,paddingValue:(g[1]&14)>>>1,isNonSyncSample:g[1]&1,degradationPriority:g[2]<<8|g[3]}},gu=fc,dc=function(g){var _={version:g[0],flags:new Uint8Array(g.subarray(1,4)),samples:[]},v=new DataView(g.buffer,g.byteOffset,g.byteLength),T=_.flags[2]&1,E=_.flags[2]&4,R=_.flags[1]&1,F=_.flags[1]&2,A=_.flags[1]&4,L=_.flags[1]&8,D=v.getUint32(4),z=8,me;for(T&&(_.dataOffset=v.getInt32(z),z+=4),E&&D&&(me={flags:gu(g.subarray(z,z+4))},z+=4,R&&(me.duration=v.getUint32(z),z+=4),F&&(me.size=v.getUint32(z),z+=4),L&&(_.version===1?me.compositionTimeOffset=v.getInt32(z):me.compositionTimeOffset=v.getUint32(z),z+=4),_.samples.push(me),D--);D--;)me={},R&&(me.duration=v.getUint32(z),z+=4),F&&(me.size=v.getUint32(z),z+=4),A&&(me.flags=gu(g.subarray(z,z+4)),z+=4),L&&(_.version===1?me.compositionTimeOffset=v.getInt32(z):me.compositionTimeOffset=v.getUint32(z),z+=4),_.samples.push(me);return _},Er=dc,Ph=function(g){var _=new DataView(g.buffer,g.byteOffset,g.byteLength),v={version:g[0],flags:new Uint8Array(g.subarray(1,4)),trackId:_.getUint32(4)},T=v.flags[2]&1,E=v.flags[2]&2,R=v.flags[2]&8,F=v.flags[2]&16,A=v.flags[2]&32,L=v.flags[0]&65536,D=v.flags[0]&131072,z;return z=8,T&&(z+=4,v.baseDataOffset=_.getUint32(12),z+=4),E&&(v.sampleDescriptionIndex=_.getUint32(z),z+=4),R&&(v.defaultSampleDuration=_.getUint32(z),z+=4),F&&(v.defaultSampleSize=_.getUint32(z),z+=4),A&&(v.defaultSampleFlags=_.getUint32(z)),L&&(v.durationIsEmpty=!0),!T&&D&&(v.baseDataOffsetIsMoof=!0),v},Dr=Ph,hc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},na;typeof window<"u"?na=window:typeof hc<"u"?na=hc:typeof self<"u"?na=self:na={};var Yr=na,Vs=yn.discardEmulationPreventionBytes,vu=ks.CaptionStream,Lt=function(g,_){for(var v=g,T=0;T<_.length;T++){var E=_[T];if(v<E.size)return E;v-=E.size}return null},Ji=function(g,_,v){var T=new DataView(g.buffer,g.byteOffset,g.byteLength),E={logs:[],seiNals:[]},R,F,A,L;for(F=0;F+4<g.length;F+=A)if(A=T.getUint32(F),F+=4,!(A<=0))switch(g[F]&31){case 6:var D=g.subarray(F+1,F+1+A),z=Lt(F,_);if(R={nalUnitType:"sei_rbsp",size:A,data:D,escapedRBSP:Vs(D),trackId:v},z)R.pts=z.pts,R.dts=z.dts,L=z;else if(L)R.pts=L.pts,R.dts=L.dts;else{E.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+F+" for trackId "+v+". See mux.js#223."});break}E.seiNals.push(R);break}return E},yu=function(g,_,v){var T=_,E=v.defaultSampleDuration||0,R=v.defaultSampleSize||0,F=v.trackId,A=[];return g.forEach(function(L){var D=Er(L),z=D.samples;z.forEach(function(me){me.duration===void 0&&(me.duration=E),me.size===void 0&&(me.size=R),me.trackId=F,me.dts=T,me.compositionTimeOffset===void 0&&(me.compositionTimeOffset=0),typeof T=="bigint"?(me.pts=T+Yr.BigInt(me.compositionTimeOffset),T+=Yr.BigInt(me.duration)):(me.pts=T+me.compositionTimeOffset,T+=me.duration)}),A=A.concat(z)}),A},Oh=function(g,_){var v=Rt(g,["moof","traf"]),T=Rt(g,["mdat"]),E={},R=[];return T.forEach(function(F,A){var L=v[A];R.push({mdat:F,traf:L})}),R.forEach(function(F){var A=F.mdat,L=F.traf,D=Rt(L,["tfhd"]),z=Dr(D[0]),me=z.trackId,Pe=Rt(L,["tfdt"]),Be=Pe.length>0?mu(Pe[0]).baseMediaDecodeTime:0,we=Rt(L,["trun"]),Ke,Yt;_===me&&we.length>0&&(Ke=yu(we,Be,z),Yt=Ji(A,Ke,me),E[me]||(E[me]={seiNals:[],logs:[]}),E[me].seiNals=E[me].seiNals.concat(Yt.seiNals),E[me].logs=E[me].logs.concat(Yt.logs))}),E},_u=function(g,_,v){var T;if(_===null)return null;T=Oh(g,_);var E=T[_]||{};return{seiNals:E.seiNals,logs:E.logs,timescale:v}},Ih=function(){var g=!1,_,v,T,E,R,F;this.isInitialized=function(){return g},this.init=function(A){_=new vu,g=!0,F=A?A.isPartial:!1,_.on("data",function(L){L.startTime=L.startPts/E,L.endTime=L.endPts/E,R.captions.push(L),R.captionStreams[L.stream]=!0}),_.on("log",function(L){R.logs.push(L)})},this.isNewInit=function(A,L){return A&&A.length===0||L&&typeof L=="object"&&Object.keys(L).length===0?!1:T!==A[0]||E!==L[T]},this.parse=function(A,L,D){var z;if(this.isInitialized()){if(!L||!D)return null;if(this.isNewInit(L,D))T=L[0],E=D[T];else if(T===null||!E)return v.push(A),null}else return null;for(;v.length>0;){var me=v.shift();this.parse(me,L,D)}return z=_u(A,T,E),z&&z.logs&&(R.logs=R.logs.concat(z.logs)),z===null||!z.seiNals?R.logs.length?{logs:R.logs,captions:[],captionStreams:[]}:null:(this.pushNals(z.seiNals),this.flushStream(),R)},this.pushNals=function(A){if(!this.isInitialized()||!A||A.length===0)return null;A.forEach(function(L){_.push(L)})},this.flushStream=function(){if(!this.isInitialized())return null;F?_.partialFlush():_.flush()},this.clearParsedCaptions=function(){R.captions=[],R.captionStreams={},R.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;_.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){v=[],T=null,E=null,R?this.clearParsedCaptions():R={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Dh=Ih,Hs=js.toUnsigned,aa=js.toHexString,Ws=t.getUint64,En,pc,Tu,bu,$s,Ha;En=function(g){var _={},v=Rt(g,["moov","trak"]);return v.reduce(function(T,E){var R,F,A,L,D;return R=Rt(E,["tkhd"])[0],!R||(F=R[0],A=F===0?12:20,L=Hs(R[A]<<24|R[A+1]<<16|R[A+2]<<8|R[A+3]),D=Rt(E,["mdia","mdhd"])[0],!D)?null:(F=D[0],A=F===0?12:20,T[L]=Hs(D[A]<<24|D[A+1]<<16|D[A+2]<<8|D[A+3]),T)},_)},pc=function(g,_){var v;v=Rt(_,["moof","traf"]);var T=v.reduce(function(E,R){var F=Rt(R,["tfhd"])[0],A=Hs(F[4]<<24|F[5]<<16|F[6]<<8|F[7]),L=g[A]||9e4,D=Rt(R,["tfdt"])[0],z=new DataView(D.buffer,D.byteOffset,D.byteLength),me;D[0]===1?me=Ws(D.subarray(4,12)):me=z.getUint32(4);var Pe;return typeof me=="bigint"?Pe=me/Yr.BigInt(L):typeof me=="number"&&!isNaN(me)&&(Pe=me/L),Pe<Number.MAX_SAFE_INTEGER&&(Pe=Number(Pe)),Pe<E&&(E=Pe),E},1/0);return typeof T=="bigint"||isFinite(T)?T:0},Tu=function(g,_){var v=Rt(_,["moof","traf"]),T=0,E=0,R;if(v&&v.length){var F=Rt(v[0],["tfhd"])[0],A=Rt(v[0],["trun"])[0],L=Rt(v[0],["tfdt"])[0];if(F){var D=Dr(F);R=D.trackId}if(L){var z=mu(L);T=z.baseMediaDecodeTime}if(A){var me=Er(A);me.samples&&me.samples.length&&(E=me.samples[0].compositionTimeOffset||0)}}var Pe=g[R]||9e4;typeof T=="bigint"&&(E=Yr.BigInt(E),Pe=Yr.BigInt(Pe));var Be=(T+E)/Pe;return typeof Be=="bigint"&&Be<Number.MAX_SAFE_INTEGER&&(Be=Number(Be)),Be},bu=function(g){var _=Rt(g,["moov","trak"]),v=[];return _.forEach(function(T){var E=Rt(T,["mdia","hdlr"]),R=Rt(T,["tkhd"]);E.forEach(function(F,A){var L=Di(F.subarray(8,12)),D=R[A],z,me,Pe;L==="vide"&&(z=new DataView(D.buffer,D.byteOffset,D.byteLength),me=z.getUint8(0),Pe=me===0?z.getUint32(12):z.getUint32(20),v.push(Pe))})}),v},Ha=function(g){var _=g[0],v=_===0?12:20;return Hs(g[v]<<24|g[v+1]<<16|g[v+2]<<8|g[v+3])},$s=function(g){var _=Rt(g,["moov","trak"]),v=[];return _.forEach(function(T){var E={},R=Rt(T,["tkhd"])[0],F,A;R&&(F=new DataView(R.buffer,R.byteOffset,R.byteLength),A=F.getUint8(0),E.id=A===0?F.getUint32(12):F.getUint32(20));var L=Rt(T,["mdia","hdlr"])[0];if(L){var D=Di(L.subarray(8,12));D==="vide"?E.type="video":D==="soun"?E.type="audio":E.type=D}var z=Rt(T,["mdia","minf","stbl","stsd"])[0];if(z){var me=z.subarray(8);E.codec=Di(me.subarray(4,8));var Pe=Rt(me,[E.codec])[0],Be,we;Pe&&(/^[asm]vc[1-9]$/i.test(E.codec)?(Be=Pe.subarray(78),we=Di(Be.subarray(4,8)),we==="avcC"&&Be.length>11?(E.codec+=".",E.codec+=aa(Be[9]),E.codec+=aa(Be[10]),E.codec+=aa(Be[11])):E.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(E.codec)?(Be=Pe.subarray(28),we=Di(Be.subarray(4,8)),we==="esds"&&Be.length>20&&Be[19]!==0?(E.codec+="."+aa(Be[19]),E.codec+="."+aa(Be[20]>>>2&63).replace(/^0/,"")):E.codec="mp4a.40.2"):E.codec=E.codec.toLowerCase())}var Ke=Rt(T,["mdia","mdhd"])[0];Ke&&(E.timescale=Ha(Ke)),v.push(E)}),v};var Su={findBox:Rt,parseType:Di,timescale:En,startTime:pc,compositionStartTime:Tu,videoTrackIds:bu,tracks:$s,getTimescaleFromMediaHeader:Ha},mc=function(g){var _=g[1]&31;return _<<=8,_|=g[2],_},sa=function(g){return!!(g[1]&64)},oa=function(g){var _=0;return(g[3]&48)>>>4>1&&(_+=g[4]+1),_},kh=function(g,_){var v=mc(g);return v===0?"pat":v===_?"pmt":_?"pes":null},gc=function(g){var _=sa(g),v=4+oa(g);return _&&(v+=g[v]+1),(g[v+10]&31)<<8|g[v+11]},kr=function(g){var _={},v=sa(g),T=4+oa(g);if(v&&(T+=g[T]+1),!!(g[T+5]&1)){var E,R,F;E=(g[T+1]&15)<<8|g[T+2],R=3+E-4,F=(g[T+10]&15)<<8|g[T+11];for(var A=12+F;A<R;){var L=T+A;_[(g[L+1]&31)<<8|g[L+2]]=g[L],A+=((g[L+3]&15)<<8|g[L+4])+5}return _}},xu=function(g,_){var v=mc(g),T=_[v];switch(T){case ar.H264_STREAM_TYPE:return"video";case ar.ADTS_STREAM_TYPE:return"audio";case ar.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},Wa=function(g){var _=sa(g);if(!_)return null;var v=4+oa(g);if(v>=g.byteLength)return null;var T=null,E;return E=g[v+7],E&192&&(T={},T.pts=(g[v+9]&14)<<27|(g[v+10]&255)<<20|(g[v+11]&254)<<12|(g[v+12]&255)<<5|(g[v+13]&254)>>>3,T.pts*=4,T.pts+=(g[v+13]&6)>>>1,T.dts=T.pts,E&64&&(T.dts=(g[v+14]&14)<<27|(g[v+15]&255)<<20|(g[v+16]&254)<<12|(g[v+17]&255)<<5|(g[v+18]&254)>>>3,T.dts*=4,T.dts+=(g[v+18]&6)>>>1)),T},Gs=function(g){switch(g){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},vc=function(g){for(var _=4+oa(g),v=g.subarray(_),T=0,E=0,R=!1,F;E<v.byteLength-3;E++)if(v[E+2]===1){T=E+5;break}for(;T<v.byteLength;)switch(v[T]){case 0:if(v[T-1]!==0){T+=2;break}else if(v[T-2]!==0){T++;break}E+3!==T-2&&(F=Gs(v[E+3]&31),F==="slice_layer_without_partitioning_rbsp_idr"&&(R=!0));do T++;while(v[T]!==1&&T<v.length);E=T-2,T+=3;break;case 1:if(v[T-1]!==0||v[T-2]!==0){T+=3;break}F=Gs(v[E+3]&31),F==="slice_layer_without_partitioning_rbsp_idr"&&(R=!0),E=T-2,T+=3;break;default:T+=3;break}return v=v.subarray(E),T-=E,E=0,v&&v.byteLength>3&&(F=Gs(v[E+3]&31),F==="slice_layer_without_partitioning_rbsp_idr"&&(R=!0)),R},Lh={parseType:kh,parsePat:gc,parsePmt:kr,parsePayloadUnitStartIndicator:sa,parsePesType:xu,parsePesTime:Wa,videoPacketContainsKeyFrame:vc},ua=ql.handleRollover,xt={};xt.ts=Lh,xt.aac=Bs;var Cn=qe.ONE_SECOND_IN_TS,vr=188,yr=71,Mh=function(g,_){for(var v=0,T=vr,E,R;T<g.byteLength;){if(g[v]===yr&&g[T]===yr){switch(E=g.subarray(v,T),R=xt.ts.parseType(E,_.pid),R){case"pat":_.pid=xt.ts.parsePat(E);break;case"pmt":var F=xt.ts.parsePmt(E);_.table=_.table||{},Object.keys(F).forEach(function(A){_.table[A]=F[A]});break}v+=vr,T+=vr;continue}v++,T++}},yc=function(g,_,v){for(var T=0,E=vr,R,F,A,L,D,z=!1;E<=g.byteLength;){if(g[T]===yr&&(g[E]===yr||E===g.byteLength)){switch(R=g.subarray(T,E),F=xt.ts.parseType(R,_.pid),F){case"pes":A=xt.ts.parsePesType(R,_.table),L=xt.ts.parsePayloadUnitStartIndicator(R),A==="audio"&&L&&(D=xt.ts.parsePesTime(R),D&&(D.type="audio",v.audio.push(D),z=!0));break}if(z)break;T+=vr,E+=vr;continue}T++,E++}for(E=g.byteLength,T=E-vr,z=!1;T>=0;){if(g[T]===yr&&(g[E]===yr||E===g.byteLength)){switch(R=g.subarray(T,E),F=xt.ts.parseType(R,_.pid),F){case"pes":A=xt.ts.parsePesType(R,_.table),L=xt.ts.parsePayloadUnitStartIndicator(R),A==="audio"&&L&&(D=xt.ts.parsePesTime(R),D&&(D.type="audio",v.audio.push(D),z=!0));break}if(z)break;T-=vr,E-=vr;continue}T--,E--}},Eu=function(g,_,v){for(var T=0,E=vr,R,F,A,L,D,z,me,Pe,Be=!1,we={data:[],size:0};E<g.byteLength;){if(g[T]===yr&&g[E]===yr){switch(R=g.subarray(T,E),F=xt.ts.parseType(R,_.pid),F){case"pes":if(A=xt.ts.parsePesType(R,_.table),L=xt.ts.parsePayloadUnitStartIndicator(R),A==="video"&&(L&&!Be&&(D=xt.ts.parsePesTime(R),D&&(D.type="video",v.video.push(D),Be=!0)),!v.firstKeyFrame)){if(L&&we.size!==0){for(z=new Uint8Array(we.size),me=0;we.data.length;)Pe=we.data.shift(),z.set(Pe,me),me+=Pe.byteLength;if(xt.ts.videoPacketContainsKeyFrame(z)){var Ke=xt.ts.parsePesTime(z);Ke?(v.firstKeyFrame=Ke,v.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}we.size=0}we.data.push(R),we.size+=R.byteLength}break}if(Be&&v.firstKeyFrame)break;T+=vr,E+=vr;continue}T++,E++}for(E=g.byteLength,T=E-vr,Be=!1;T>=0;){if(g[T]===yr&&g[E]===yr){switch(R=g.subarray(T,E),F=xt.ts.parseType(R,_.pid),F){case"pes":A=xt.ts.parsePesType(R,_.table),L=xt.ts.parsePayloadUnitStartIndicator(R),A==="video"&&L&&(D=xt.ts.parsePesTime(R),D&&(D.type="video",v.video.push(D),Be=!0));break}if(Be)break;T-=vr,E-=vr;continue}T--,E--}},_c=function(g,_){if(g.audio&&g.audio.length){var v=_;(typeof v>"u"||isNaN(v))&&(v=g.audio[0].dts),g.audio.forEach(function(R){R.dts=ua(R.dts,v),R.pts=ua(R.pts,v),R.dtsTime=R.dts/Cn,R.ptsTime=R.pts/Cn})}if(g.video&&g.video.length){var T=_;if((typeof T>"u"||isNaN(T))&&(T=g.video[0].dts),g.video.forEach(function(R){R.dts=ua(R.dts,T),R.pts=ua(R.pts,T),R.dtsTime=R.dts/Cn,R.ptsTime=R.pts/Cn}),g.firstKeyFrame){var E=g.firstKeyFrame;E.dts=ua(E.dts,T),E.pts=ua(E.pts,T),E.dtsTime=E.dts/Cn,E.ptsTime=E.pts/Cn}}},Zi=function(g){for(var _=!1,v=0,T=null,E=null,R=0,F=0,A;g.length-F>=3;){var L=xt.aac.parseType(g,F);switch(L){case"timed-metadata":if(g.length-F<10){_=!0;break}if(R=xt.aac.parseId3TagSize(g,F),R>g.length){_=!0;break}E===null&&(A=g.subarray(F,F+R),E=xt.aac.parseAacTimestamp(A)),F+=R;break;case"audio":if(g.length-F<7){_=!0;break}if(R=xt.aac.parseAdtsSize(g,F),R>g.length){_=!0;break}T===null&&(A=g.subarray(F,F+R),T=xt.aac.parseSampleRate(A)),v++,F+=R;break;default:F++;break}if(_)return null}if(T===null||E===null)return null;var D=Cn/T,z={audio:[{type:"audio",dts:E,pts:E},{type:"audio",dts:E+v*1024*D,pts:E+v*1024*D}]};return z},zs=function(g){var _={pid:null,table:null},v={};Mh(g,_);for(var T in _.table)if(_.table.hasOwnProperty(T)){var E=_.table[T];switch(E){case ar.H264_STREAM_TYPE:v.video=[],Eu(g,_,v),v.video.length===0&&delete v.video;break;case ar.ADTS_STREAM_TYPE:v.audio=[],yc(g,_,v),v.audio.length===0&&delete v.audio;break}}return v},Nh=function(g,_){var v=xt.aac.isLikelyAacData(g),T;return v?T=Zi(g):T=zs(g),!T||!T.audio&&!T.video?null:(_c(T,_),T)},Fh={inspect:Nh,parseAudioPes_:yc},Uh=function(g,_){_.on("data",function(v){var T=v.initSegment;v.initSegment={data:T.buffer,byteOffset:T.byteOffset,byteLength:T.byteLength};var E=v.data;v.data=E.buffer,g.postMessage({action:"data",segment:v,byteOffset:E.byteOffset,byteLength:E.byteLength},[v.data])}),_.on("done",function(v){g.postMessage({action:"done"})}),_.on("gopInfo",function(v){g.postMessage({action:"gopInfo",gopInfo:v})}),_.on("videoSegmentTimingInfo",function(v){var T={start:{decode:qe.videoTsToSeconds(v.start.dts),presentation:qe.videoTsToSeconds(v.start.pts)},end:{decode:qe.videoTsToSeconds(v.end.dts),presentation:qe.videoTsToSeconds(v.end.pts)},baseMediaDecodeTime:qe.videoTsToSeconds(v.baseMediaDecodeTime)};v.prependedContentDuration&&(T.prependedContentDuration=qe.videoTsToSeconds(v.prependedContentDuration)),g.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:T})}),_.on("audioSegmentTimingInfo",function(v){var T={start:{decode:qe.videoTsToSeconds(v.start.dts),presentation:qe.videoTsToSeconds(v.start.pts)},end:{decode:qe.videoTsToSeconds(v.end.dts),presentation:qe.videoTsToSeconds(v.end.pts)},baseMediaDecodeTime:qe.videoTsToSeconds(v.baseMediaDecodeTime)};v.prependedContentDuration&&(T.prependedContentDuration=qe.videoTsToSeconds(v.prependedContentDuration)),g.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:T})}),_.on("id3Frame",function(v){g.postMessage({action:"id3Frame",id3Frame:v})}),_.on("caption",function(v){g.postMessage({action:"caption",caption:v})}),_.on("trackinfo",function(v){g.postMessage({action:"trackinfo",trackInfo:v})}),_.on("audioTimingInfo",function(v){g.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:qe.videoTsToSeconds(v.start),end:qe.videoTsToSeconds(v.end)}})}),_.on("videoTimingInfo",function(v){g.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:qe.videoTsToSeconds(v.start),end:qe.videoTsToSeconds(v.end)}})}),_.on("log",function(v){g.postMessage({action:"log",log:v})})},Rn=function(){function O(_,v){this.options=v||{},this.self=_,this.init()}var g=O.prototype;return g.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new wh.Transmuxer(this.options),Uh(this.self,this.transmuxer)},g.pushMp4Captions=function(v){this.captionParser||(this.captionParser=new Dh,this.captionParser.init());var T=new Uint8Array(v.data,v.byteOffset,v.byteLength),E=this.captionParser.parse(T,v.trackIds,v.timescales);this.self.postMessage({action:"mp4Captions",captions:E&&E.captions||[],logs:E&&E.logs||[],data:T.buffer},[T.buffer])},g.probeMp4StartTime=function(v){var T=v.timescales,E=v.data,R=Su.startTime(T,E);this.self.postMessage({action:"probeMp4StartTime",startTime:R,data:E},[E.buffer])},g.probeMp4Tracks=function(v){var T=v.data,E=Su.tracks(T);this.self.postMessage({action:"probeMp4Tracks",tracks:E,data:T},[T.buffer])},g.probeTs=function(v){var T=v.data,E=v.baseStartTime,R=typeof E=="number"&&!isNaN(E)?E*qe.ONE_SECOND_IN_TS:void 0,F=Fh.inspect(T,R),A=null;F&&(A={hasVideo:F.video&&F.video.length===2||!1,hasAudio:F.audio&&F.audio.length===2||!1},A.hasVideo&&(A.videoStart=F.video[0].ptsTime),A.hasAudio&&(A.audioStart=F.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:A,data:T},[T.buffer])},g.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},g.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},g.push=function(v){var T=new Uint8Array(v.data,v.byteOffset,v.byteLength);this.transmuxer.push(T)},g.reset=function(){this.transmuxer.reset()},g.setTimestampOffset=function(v){var T=v.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(qe.secondsToVideoTs(T)))},g.setAudioAppendStart=function(v){this.transmuxer.setAudioAppendStart(Math.ceil(qe.secondsToVideoTs(v.appendStart)))},g.setRemux=function(v){this.transmuxer.setRemux(v.remux)},g.flush=function(v){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},g.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},g.alignGopsWith=function(v){this.transmuxer.alignGopsWith(v.gopsToAlignWith.slice())},O}();self.onmessage=function(O){if(O.data.action==="init"&&O.data.options){this.messageHandlers=new Rn(self,O.data.options);return}this.messageHandlers||(this.messageHandlers=new Rn(self)),O.data&&O.data.action&&O.data.action!=="init"&&this.messageHandlers[O.data.action]&&this.messageHandlers[O.data.action](O.data)}})),jV=OR(BV),VV=function(e,i,n){var t=e.data.segment,a=t.type,s=t.initSegment,o=t.captions,l=t.captionStreams,c=t.metadata,d=t.videoFrameDtsTime,h=t.videoFramePtsTime;i.buffer.push({captions:o,captionStreams:l,metadata:c});var p=e.data.segment.boxes||{data:e.data.segment.data},y={type:a,data:new Uint8Array(p.data,p.data.byteOffset,p.data.byteLength),initSegment:new Uint8Array(s.data,s.byteOffset,s.byteLength)};typeof d<"u"&&(y.videoFrameDtsTime=d),typeof h<"u"&&(y.videoFramePtsTime=h),n(y)},HV=function(e){var i=e.transmuxedData,n=e.callback;i.buffer=[],n(i)},WV=function(e,i){i.gopInfo=e.data.gopInfo},kR=function(e){var i=e.transmuxer,n=e.bytes,t=e.audioAppendStart,a=e.gopsToAlignWith,s=e.remux,o=e.onData,l=e.onTrackInfo,c=e.onAudioTimingInfo,d=e.onVideoTimingInfo,h=e.onVideoSegmentTimingInfo,p=e.onAudioSegmentTimingInfo,y=e.onId3,S=e.onCaptions,C=e.onDone,x=e.onEndedTimeline,I=e.onTransmuxerLog,H=e.isEndOfTimeline,Z={buffer:[]},W=H,j=function(oe){i.currentTransmux===e&&(oe.data.action==="data"&&VV(oe,Z,o),oe.data.action==="trackinfo"&&l(oe.data.trackInfo),oe.data.action==="gopInfo"&&WV(oe,Z),oe.data.action==="audioTimingInfo"&&c(oe.data.audioTimingInfo),oe.data.action==="videoTimingInfo"&&d(oe.data.videoTimingInfo),oe.data.action==="videoSegmentTimingInfo"&&h(oe.data.videoSegmentTimingInfo),oe.data.action==="audioSegmentTimingInfo"&&p(oe.data.audioSegmentTimingInfo),oe.data.action==="id3Frame"&&y([oe.data.id3Frame],oe.data.id3Frame.dispatchType),oe.data.action==="caption"&&S(oe.data.caption),oe.data.action==="endedtimeline"&&(W=!1,x()),oe.data.action==="log"&&I(oe.data.log),oe.data.type==="transmuxed"&&(W||(i.onmessage=null,HV({transmuxedData:Z,callback:C}),LR(i))))};if(i.onmessage=j,t&&i.postMessage({action:"setAudioAppendStart",appendStart:t}),Array.isArray(a)&&i.postMessage({action:"alignGopsWith",gopsToAlignWith:a}),typeof s<"u"&&i.postMessage({action:"setRemux",remux:s}),n.byteLength){var le=n instanceof ArrayBuffer?n:n.buffer,fe=n instanceof ArrayBuffer?0:n.byteOffset;i.postMessage({action:"push",data:le,byteOffset:fe,byteLength:n.byteLength},[le])}H&&i.postMessage({action:"endTimeline"}),i.postMessage({action:"flush"})},LR=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),typeof e.currentTransmux=="function"?e.currentTransmux():kR(e.currentTransmux))},tS=function(e,i){e.postMessage({action:i}),LR(e)},MR=function(e,i){if(!i.currentTransmux){i.currentTransmux=e,tS(i,e);return}i.transmuxQueue.push(tS.bind(null,i,e))},$V=function(e){MR("reset",e)},GV=function(e){MR("endTimeline",e)},NR=function(e){if(!e.transmuxer.currentTransmux){e.transmuxer.currentTransmux=e,kR(e);return}e.transmuxer.transmuxQueue.push(e)},zV=function(e){var i=new jV;i.currentTransmux=null,i.transmuxQueue=[];var n=i.terminate;return i.terminate=function(){return i.currentTransmux=null,i.transmuxQueue.length=0,n.call(i)},i.postMessage({action:"init",options:e}),i},Pm={reset:$V,endTimeline:GV,transmux:NR,createTransmuxer:zV},hd=function(e){var i=e.transmuxer,n=e.endAction||e.action,t=e.callback,a=Ai({},e,{endAction:null,transmuxer:null,callback:null}),s=function c(d){d.data.action===n&&(i.removeEventListener("message",c),d.data.data&&(d.data.data=new Uint8Array(d.data.data,e.byteOffset||0,e.byteLength||d.data.data.byteLength),e.data&&(e.data=d.data.data)),t(d.data))};if(i.addEventListener("message",s),e.data){var o=e.data instanceof ArrayBuffer;a.byteOffset=o?0:e.data.byteOffset,a.byteLength=e.data.byteLength;var l=[o?e.data:e.data.buffer];i.postMessage(a,l)}else i.postMessage(a)},hn={FAILURE:2,TIMEOUT:-101,ABORTED:-102},Mg=function(e){e.forEach(function(i){i.abort()})},qV=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}},KV=function(e){var i=e.target,n=Date.now()-i.requestTime,t={bandwidth:1/0,bytesReceived:0,roundTripTime:n||0};return t.bytesReceived=e.loaded,t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3),t},jy=function(e,i){return i.timedout?{status:i.status,message:"HLS request timed-out at URL: "+i.uri,code:hn.TIMEOUT,xhr:i}:i.aborted?{status:i.status,message:"HLS request aborted at URL: "+i.uri,code:hn.ABORTED,xhr:i}:e?{status:i.status,message:"HLS request errored at URL: "+i.uri,code:hn.FAILURE,xhr:i}:i.responseType==="arraybuffer"&&i.response.byteLength===0?{status:i.status,message:"Empty HLS response at URL: "+i.uri,code:hn.FAILURE,xhr:i}:null},rS=function(e,i,n){return function(t,a){var s=a.response,o=jy(t,a);if(o)return n(o,e);if(s.byteLength!==16)return n({status:a.status,message:"Invalid HLS key at URL: "+a.uri,code:hn.FAILURE,xhr:a},e);for(var l=new DataView(s),c=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]),d=0;d<i.length;d++)i[d].bytes=c;return n(null,e)}},FR=function(e,i){var n=ty(e.map.bytes);if(n!=="mp4"){var t=e.map.resolvedUri||e.map.uri;return i({internal:!0,message:"Found unsupported "+(n||"unknown")+" container for initialization segment at URL: "+t,code:hn.FAILURE})}hd({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(s){var o=s.tracks,l=s.data;return e.map.bytes=l,o.forEach(function(c){e.map.tracks=e.map.tracks||{},!e.map.tracks[c.type]&&(e.map.tracks[c.type]=c,typeof c.id=="number"&&c.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[c.id]=c.timescale))}),i(null)}})},YV=function(e){var i=e.segment,n=e.finishProcessingFn;return function(t,a){var s=jy(t,a);if(s)return n(s,i);var o=new Uint8Array(a.response);if(i.map.key)return i.map.encryptedBytes=o,n(null,i);i.map.bytes=o,FR(i,function(l){if(l)return l.xhr=a,l.status=a.status,n(l,i);n(null,i)})}},XV=function(e){var i=e.segment,n=e.finishProcessingFn,t=e.responseType;return function(a,s){var o=jy(a,s);if(o)return n(o,i);var l=t==="arraybuffer"||!s.responseText?s.response:FV(s.responseText.substring(i.lastReachedChar||0));return i.stats=qV(s),i.key?i.encryptedBytes=new Uint8Array(l):i.bytes=new Uint8Array(l),n(null,i)}},QV=function(e){var i=e.segment,n=e.bytes,t=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,c=e.captionsFn,d=e.isEndOfTimeline,h=e.endedTimelineFn,p=e.dataFn,y=e.doneFn,S=e.onTransmuxerLog,C=i.map&&i.map.tracks||{},x=Boolean(C.audio&&C.video),I=a.bind(null,i,"audio","start"),H=a.bind(null,i,"audio","end"),Z=a.bind(null,i,"video","start"),W=a.bind(null,i,"video","end"),j=function(){return NR({bytes:n,transmuxer:i.transmuxer,audioAppendStart:i.audioAppendStart,gopsToAlignWith:i.gopsToAlignWith,remux:x,onData:function(Y){Y.type=Y.type==="combined"?"video":Y.type,p(i,Y)},onTrackInfo:function(Y){t&&(x&&(Y.isMuxed=!0),t(i,Y))},onAudioTimingInfo:function(Y){I&&typeof Y.start<"u"&&(I(Y.start),I=null),H&&typeof Y.end<"u"&&H(Y.end)},onVideoTimingInfo:function(Y){Z&&typeof Y.start<"u"&&(Z(Y.start),Z=null),W&&typeof Y.end<"u"&&W(Y.end)},onVideoSegmentTimingInfo:function(Y){s(Y)},onAudioSegmentTimingInfo:function(Y){o(Y)},onId3:function(Y,oe){l(i,Y,oe)},onCaptions:function(Y){c(i,[Y])},isEndOfTimeline:d,onEndedTimeline:function(){h()},onTransmuxerLog:S,onDone:function(Y){!y||(Y.type=Y.type==="combined"?"video":Y.type,y(null,i,Y))}})};hd({action:"probeTs",transmuxer:i.transmuxer,data:n,baseStartTime:i.baseStartTime,callback:function(fe){i.bytes=n=fe.data;var Y=fe.result;Y&&(t(i,{hasAudio:Y.hasAudio,hasVideo:Y.hasVideo,isMuxed:x}),t=null,Y.hasAudio&&!x&&I(Y.audioStart),Y.hasVideo&&Z(Y.videoStart),I=null,Z=null),j()}})},UR=function(e){var i=e.segment,n=e.bytes,t=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,c=e.captionsFn,d=e.isEndOfTimeline,h=e.endedTimelineFn,p=e.dataFn,y=e.doneFn,S=e.onTransmuxerLog,C=new Uint8Array(n);if(T3(C)){i.isFmp4=!0;var x=i.map.tracks,I={isFmp4:!0,hasVideo:!!x.video,hasAudio:!!x.audio};x.audio&&x.audio.codec&&x.audio.codec!=="enca"&&(I.audioCodec=x.audio.codec),x.video&&x.video.codec&&x.video.codec!=="encv"&&(I.videoCodec=x.video.codec),x.video&&x.audio&&(I.isMuxed=!0),t(i,I);var H=function(W){p(i,{data:C,type:I.hasAudio&&!I.isMuxed?"audio":"video"}),W&&W.length&&c(i,W),y(null,i,{})};hd({action:"probeMp4StartTime",timescales:i.map.timescales,data:C,transmuxer:i.transmuxer,callback:function(W){var j=W.data,le=W.startTime;if(n=j.buffer,i.bytes=C=j,I.hasAudio&&!I.isMuxed&&a(i,"audio","start",le),I.hasVideo&&a(i,"video","start",le),!x.video||!j.byteLength||!i.transmuxer){H();return}hd({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:i.transmuxer,data:C,timescales:i.map.timescales,trackIds:[x.video.id],callback:function(Y){n=Y.data.buffer,i.bytes=C=Y.data,Y.logs.forEach(function(oe){S(ce.mergeOptions(oe,{stream:"mp4CaptionParser"}))}),H(Y.captions)}})}});return}if(!i.transmuxer){y(null,i,{});return}if(typeof i.container>"u"&&(i.container=ty(C)),i.container!=="ts"&&i.container!=="aac"){t(i,{hasAudio:!1,hasVideo:!1}),y(null,i,{});return}QV({segment:i,bytes:n,trackInfoFn:t,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:c,isEndOfTimeline:d,endedTimelineFn:h,dataFn:p,doneFn:y,onTransmuxerLog:S})},BR=function(e,i){var n=e.id,t=e.key,a=e.encryptedBytes,s=e.decryptionWorker,o=function c(d){if(d.data.source===n){s.removeEventListener("message",c);var h=d.data.decrypted;i(new Uint8Array(h.bytes,h.byteOffset,h.byteLength))}};s.addEventListener("message",o);var l;t.bytes.slice?l=t.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(t.bytes)),s.postMessage(ER({source:n,encrypted:a,key:l,iv:t.iv}),[a.buffer,l.buffer])},JV=function(e){var i=e.decryptionWorker,n=e.segment,t=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,c=e.captionsFn,d=e.isEndOfTimeline,h=e.endedTimelineFn,p=e.dataFn,y=e.doneFn,S=e.onTransmuxerLog;BR({id:n.requestId,key:n.key,encryptedBytes:n.encryptedBytes,decryptionWorker:i},function(C){n.bytes=C,UR({segment:n,bytes:n.bytes,trackInfoFn:t,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:c,isEndOfTimeline:d,endedTimelineFn:h,dataFn:p,doneFn:y,onTransmuxerLog:S})})},ZV=function(e){var i=e.activeXhrs,n=e.decryptionWorker,t=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,c=e.captionsFn,d=e.isEndOfTimeline,h=e.endedTimelineFn,p=e.dataFn,y=e.doneFn,S=e.onTransmuxerLog,C=0,x=!1;return function(I,H){if(!x){if(I)return x=!0,Mg(i),y(I,H);if(C+=1,C===i.length){var Z=function(){if(H.encryptedBytes)return JV({decryptionWorker:n,segment:H,trackInfoFn:t,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:c,isEndOfTimeline:d,endedTimelineFn:h,dataFn:p,doneFn:y,onTransmuxerLog:S});UR({segment:H,bytes:H.bytes,trackInfoFn:t,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:c,isEndOfTimeline:d,endedTimelineFn:h,dataFn:p,doneFn:y,onTransmuxerLog:S})};if(H.endOfAllRequests=Date.now(),H.map&&H.map.encryptedBytes&&!H.map.bytes)return BR({decryptionWorker:n,id:H.requestId+"-init",encryptedBytes:H.map.encryptedBytes,key:H.map.key},function(W){H.map.bytes=W,FR(H,function(j){if(j)return Mg(i),y(j,H);Z()})});Z()}}}},eH=function(e){var i=e.loadendState,n=e.abortFn;return function(t){var a=t.target;a.aborted&&n&&!i.calledAbortFn&&(n(),i.calledAbortFn=!0)}},tH=function(e){var i=e.segment,n=e.progressFn;return e.trackInfoFn,e.timingInfoFn,e.videoSegmentTimingInfoFn,e.audioSegmentTimingInfoFn,e.id3Fn,e.captionsFn,e.isEndOfTimeline,e.endedTimelineFn,e.dataFn,function(t){var a=t.target;if(!a.aborted)return i.stats=ce.mergeOptions(i.stats,KV(t)),!i.stats.firstBytesReceivedAt&&i.stats.bytesReceived&&(i.stats.firstBytesReceivedAt=Date.now()),n(t,i)}},rH=function(e){var i=e.xhr,n=e.xhrOptions,t=e.decryptionWorker,a=e.segment,s=e.abortFn,o=e.progressFn,l=e.trackInfoFn,c=e.timingInfoFn,d=e.videoSegmentTimingInfoFn,h=e.audioSegmentTimingInfoFn,p=e.id3Fn,y=e.captionsFn,S=e.isEndOfTimeline,C=e.endedTimelineFn,x=e.dataFn,I=e.doneFn,H=e.onTransmuxerLog,Z=[],W=ZV({activeXhrs:Z,decryptionWorker:t,trackInfoFn:l,timingInfoFn:c,videoSegmentTimingInfoFn:d,audioSegmentTimingInfoFn:h,id3Fn:p,captionsFn:y,isEndOfTimeline:S,endedTimelineFn:C,dataFn:x,doneFn:I,onTransmuxerLog:H});if(a.key&&!a.key.bytes){var j=[a.key];a.map&&!a.map.bytes&&a.map.key&&a.map.key.resolvedUri===a.key.resolvedUri&&j.push(a.map.key);var le=ce.mergeOptions(n,{uri:a.key.resolvedUri,responseType:"arraybuffer"}),fe=rS(a,j,W),Y=i(le,fe);Z.push(Y)}if(a.map&&!a.map.bytes){var oe=a.map.key&&(!a.key||a.key.resolvedUri!==a.map.key.resolvedUri);if(oe){var V=ce.mergeOptions(n,{uri:a.map.key.resolvedUri,responseType:"arraybuffer"}),pe=rS(a,[a.map.key],W),de=i(V,pe);Z.push(de)}var Se=ce.mergeOptions(n,{uri:a.map.resolvedUri,responseType:"arraybuffer",headers:kg(a.map)}),Ae=YV({segment:a,finishProcessingFn:W}),ke=i(Se,Ae);Z.push(ke)}var De=ce.mergeOptions(n,{uri:a.part&&a.part.resolvedUri||a.resolvedUri,responseType:"arraybuffer",headers:kg(a)}),Fe=XV({segment:a,finishProcessingFn:W,responseType:De.responseType}),ge=i(De,Fe);ge.addEventListener("progress",tH({segment:a,progressFn:o,trackInfoFn:l,timingInfoFn:c,videoSegmentTimingInfoFn:d,audioSegmentTimingInfoFn:h,id3Fn:p,captionsFn:y,isEndOfTimeline:S,endedTimelineFn:C,dataFn:x})),Z.push(ge);var Ye={};return Z.forEach(function(K){K.addEventListener("loadend",eH({loadendState:Ye,abortFn:s}))}),function(){return Mg(Z)}},iH=Yi("CodecUtils"),nH=function(e){var i=e.attributes||{};if(i.CODECS)return on(i.CODECS)},jR=function(e,i){var n=i.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&n.AUDIO&&e.mediaGroups.AUDIO[n.AUDIO]},aH=function(e,i){if(!jR(e,i))return!0;var n=i.attributes||{},t=e.mediaGroups.AUDIO[n.AUDIO];for(var a in t)if(!t[a].uri&&!t[a].playlists)return!0;return!1},pd=function(e){var i={};return e.forEach(function(n){var t=n.mediaType,a=n.type,s=n.details;i[t]=i[t]||[],i[t].push(lC(""+a+s))}),Object.keys(i).forEach(function(n){if(i[n].length>1){iH("multiple "+n+" codecs found as attributes: "+i[n].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),i[n]=null;return}i[n]=i[n][0]}),i},iS=function(e){var i=0;return e.audio&&i++,e.video&&i++,i},fl=function(e,i){var n=i.attributes||{},t=pd(nH(i)||[]);if(jR(e,i)&&!t.audio&&!aH(e,i)){var a=pd(O2(e,n.AUDIO)||[]);a.audio&&(t.audio=a.audio)}return t},gf=Yi("PlaylistSelector"),nS=function(e){if(!(!e||!e.playlist)){var i=e.playlist;return JSON.stringify({id:i.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:i.attributes&&i.attributes.CODECS||""})}},md=function(e,i){if(!e)return"";var n=q.getComputedStyle(e);return n?n[i]:""},xo=function(e,i){var n=e.slice();e.sort(function(t,a){var s=i(t,a);return s===0?n.indexOf(t)-n.indexOf(a):s})},Vy=function(e,i){var n,t;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||q.Number.MAX_VALUE,i.attributes.BANDWIDTH&&(t=i.attributes.BANDWIDTH),t=t||q.Number.MAX_VALUE,n-t},sH=function(e,i){var n,t;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||q.Number.MAX_VALUE,i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&(t=i.attributes.RESOLUTION.width),t=t||q.Number.MAX_VALUE,n===t&&e.attributes.BANDWIDTH&&i.attributes.BANDWIDTH?e.attributes.BANDWIDTH-i.attributes.BANDWIDTH:n-t},VR=function(e,i,n,t,a,s){if(!!e){var o={bandwidth:i,width:n,height:t,limitRenditionByPlayerDimensions:a},l=e.playlists;ri.isAudioOnly(e)&&(l=s.getAudioTrackPlaylists_(),o.audioOnly=!0);var c=l.map(function(V){var pe,de=V.attributes&&V.attributes.RESOLUTION&&V.attributes.RESOLUTION.width,Se=V.attributes&&V.attributes.RESOLUTION&&V.attributes.RESOLUTION.height;return pe=V.attributes&&V.attributes.BANDWIDTH,pe=pe||q.Number.MAX_VALUE,{bandwidth:pe,width:de,height:Se,playlist:V}});xo(c,function(V,pe){return V.bandwidth-pe.bandwidth}),c=c.filter(function(V){return!ri.isIncompatible(V.playlist)});var d=c.filter(function(V){return ri.isEnabled(V.playlist)});d.length||(d=c.filter(function(V){return!ri.isDisabled(V.playlist)}));var h=d.filter(function(V){return V.bandwidth*fr.BANDWIDTH_VARIANCE<i}),p=h[h.length-1],y=h.filter(function(V){return V.bandwidth===p.bandwidth})[0];if(a===!1){var S=y||d[0]||c[0];if(S&&S.playlist){var C="sortedPlaylistReps";return y&&(C="bandwidthBestRep"),d[0]&&(C="enabledPlaylistReps"),gf("choosing "+nS(S)+" using "+C+" with options",o),S.playlist}return gf("could not choose a playlist with options",o),null}var x=h.filter(function(V){return V.width&&V.height});xo(x,function(V,pe){return V.width-pe.width});var I=x.filter(function(V){return V.width===n&&V.height===t});p=I[I.length-1];var H=I.filter(function(V){return V.bandwidth===p.bandwidth})[0],Z,W,j;H||(Z=x.filter(function(V){return V.width>n||V.height>t}),W=Z.filter(function(V){return V.width===Z[0].width&&V.height===Z[0].height}),p=W[W.length-1],j=W.filter(function(V){return V.bandwidth===p.bandwidth})[0]);var le;if(s.experimentalLeastPixelDiffSelector){var fe=x.map(function(V){return V.pixelDiff=Math.abs(V.width-n)+Math.abs(V.height-t),V});xo(fe,function(V,pe){return V.pixelDiff===pe.pixelDiff?pe.bandwidth-V.bandwidth:V.pixelDiff-pe.pixelDiff}),le=fe[0]}var Y=le||j||H||y||d[0]||c[0];if(Y&&Y.playlist){var oe="sortedPlaylistReps";return le?oe="leastPixelDiffRep":j?oe="resolutionPlusOneRep":H?oe="resolutionBestRep":y?oe="bandwidthBestRep":d[0]&&(oe="enabledPlaylistReps"),gf("choosing "+nS(Y)+" using "+oe+" with options",o),Y.playlist}return gf("could not choose a playlist with options",o),null}},aS=function(){var e=this.useDevicePixelRatio&&q.devicePixelRatio||1;return VR(this.playlists.master,this.systemBandwidth,parseInt(md(this.tech_.el(),"width"),10)*e,parseInt(md(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},oH=function(e){var i=-1,n=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var t=this.useDevicePixelRatio&&q.devicePixelRatio||1;return i<0&&(i=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(i=e*this.systemBandwidth+(1-e)*i,n=this.systemBandwidth),VR(this.playlists.master,i,parseInt(md(this.tech_.el(),"width"),10)*t,parseInt(md(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},uH=function(e){var i=e.master,n=e.currentTime,t=e.bandwidth,a=e.duration,s=e.segmentDuration,o=e.timeUntilRebuffer,l=e.currentTimeline,c=e.syncController,d=i.playlists.filter(function(C){return!ri.isIncompatible(C)}),h=d.filter(ri.isEnabled);h.length||(h=d.filter(function(C){return!ri.isDisabled(C)}));var p=h.filter(ri.hasAttribute.bind(null,"BANDWIDTH")),y=p.map(function(C){var x=c.getSyncPoint(C,a,l,n),I=x?1:2,H=ri.estimateSegmentRequestTime(s,t,C),Z=H*I-o;return{playlist:C,rebufferingImpact:Z}}),S=y.filter(function(C){return C.rebufferingImpact<=0});return xo(S,function(C,x){return Vy(x.playlist,C.playlist)}),S.length?S[0]:(xo(y,function(C,x){return C.rebufferingImpact-x.rebufferingImpact}),y[0]||null)},lH=function(){var e=this,i=this.playlists.master.playlists.filter(ri.isEnabled);xo(i,function(t,a){return Vy(t,a)});var n=i.filter(function(t){return!!fl(e.playlists.master,t).video});return n[0]||null},cH=function(e){var i=0,n;return e.bytes&&(n=new Uint8Array(e.bytes),e.segments.forEach(function(t){n.set(t,i),i+=t.byteLength})),n},fH=function(e,i,n){if(!e[n]){i.trigger({type:"usage",name:"vhs-608"}),i.trigger({type:"usage",name:"hls-608"});var t=n;/^cc708_/.test(n)&&(t="SERVICE"+n.split("_")[1]);var a=i.textTracks().getTrackById(t);if(a)e[n]=a;else{var s=i.options_.vhs&&i.options_.vhs.captionServices||{},o=n,l=n,c=!1,d=s[t];d&&(o=d.label,l=d.language,c=d.default),e[n]=i.addRemoteTextTrack({kind:"captions",id:t,default:c,label:o,language:l},!1).track}}},dH=function(e){var i=e.inbandTextTracks,n=e.captionArray,t=e.timestampOffset;if(!!n){var a=q.WebKitDataCue||q.VTTCue;n.forEach(function(s){var o=s.stream;i[o].addCue(new a(s.startTime+t,s.endTime+t,s.text))})}},hH=function(e){Object.defineProperties(e.frame,{id:{get:function(){return ce.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return ce.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return ce.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},pH=function(e){var i=e.inbandTextTracks,n=e.metadataArray,t=e.timestampOffset,a=e.videoDuration;if(!!n){var s=q.WebKitDataCue||q.VTTCue,o=i.metadataTrack_;if(!!o&&(n.forEach(function(y){var S=y.cueTime+t;typeof S!="number"||q.isNaN(S)||S<0||!(S<1/0)||y.frames.forEach(function(C){var x=new s(S,S,C.value||C.url||C.data||"");x.frame=C,x.value=C,hH(x),o.addCue(x)})}),!(!o.cues||!o.cues.length))){for(var l=o.cues,c=[],d=0;d<l.length;d++)l[d]&&c.push(l[d]);var h=c.reduce(function(y,S){var C=y[S.startTime]||[];return C.push(S),y[S.startTime]=C,y},{}),p=Object.keys(h).sort(function(y,S){return Number(y)-Number(S)});p.forEach(function(y,S){var C=h[y],x=Number(p[S+1])||a;C.forEach(function(I){I.endTime=x})})}}},mH=function(e,i,n){e.metadataTrack_||(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=i)},il=function(e,i,n){var t,a;if(!!n&&!!n.cues)for(t=n.cues.length;t--;)a=n.cues[t],a.startTime>=e&&a.endTime<=i&&n.removeCue(a)},gH=function(e){var i=e.cues;if(!!i)for(var n=0;n<i.length;n++){for(var t=[],a=0,s=0;s<i.length;s++)i[n].startTime===i[s].startTime&&i[n].endTime===i[s].endTime&&i[n].text===i[s].text&&(a++,a>1&&t.push(i[s]));t.length&&t.forEach(function(o){return e.removeCue(o)})}},vH=function(e,i,n){if(typeof i>"u"||i===null||!e.length)return[];var t=Math.ceil((i-n+3)*ed.ONE_SECOND_IN_TS),a;for(a=0;a<e.length&&!(e[a].pts>t);a++);return e.slice(a)},yH=function(e,i,n){if(!i.length)return e;if(n)return i.slice();var t=i[0].pts,a=0;for(a;a<e.length&&!(e[a].pts>=t);a++);return e.slice(0,a).concat(i)},_H=function(e,i,n,t){for(var a=Math.ceil((i-t)*ed.ONE_SECOND_IN_TS),s=Math.ceil((n-t)*ed.ONE_SECOND_IN_TS),o=e.slice(),l=e.length;l--&&!(e[l].pts<=s););if(l===-1)return o;for(var c=l+1;c--&&!(e[c].pts<=a););return c=Math.max(c,0),o.splice(c,l-c+1),o},TH=function(e,i){if(!e&&!i||!e&&i||e&&!i)return!1;if(e===i)return!0;var n=Object.keys(e).sort(),t=Object.keys(i).sort();if(n.length!==t.length)return!1;for(var a=0;a<n.length;a++){var s=n[a];if(s!==t[a]||e[s]!==i[s])return!1}return!0},HR=22,bH=function(e,i,n){i=i||[];for(var t=[],a=0,s=0;s<i.length;s++){var o=i[s];if(e===o.timeline&&(t.push(s),a+=o.duration,a>n))return s}return t.length===0?0:t[t.length-1]},Yu=1,SH=500,sS=function(e){return typeof e=="number"&&isFinite(e)},vf=1/60,xH=function(e,i,n){return e!=="main"||!i||!n?null:!n.hasAudio&&!n.hasVideo?"Neither audio nor video found in segment.":i.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!i.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null},EH=function(e,i,n){var t=i-fr.BACK_BUFFER_LENGTH;e.length&&(t=Math.max(t,e.start(0)));var a=i-n;return Math.min(a,t)},co=function(e){var i=e.startOfSegment,n=e.duration,t=e.segment,a=e.part,s=e.playlist,o=s.mediaSequence,l=s.id,c=s.segments,d=c===void 0?[]:c,h=e.mediaIndex,p=e.partIndex,y=e.timeline,S=d.length-1,C="mediaIndex/partIndex increment";e.getMediaInfoForTime?C="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(C="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(C+=" with independent "+e.independent);var x=typeof p=="number",I=e.segment.uri?"segment":"pre-segment",H=x?cR({preloadSegment:t})-1:0;return I+" ["+(o+h)+"/"+(o+S)+"]"+(x?" part ["+p+"/"+H+"]":"")+(" segment start/end ["+t.start+" => "+t.end+"]")+(x?" part start/end ["+a.start+" => "+a.end+"]":"")+(" startOfSegment ["+i+"]")+(" duration ["+n+"]")+(" timeline ["+y+"]")+(" selected by ["+C+"]")+(" playlist ["+l+"]")},oS=function(e){return e+"TimingInfo"},CH=function(e){var i=e.segmentTimeline,n=e.currentTimeline,t=e.startOfSegment,a=e.buffered,s=e.overrideCheck;return!s&&i===n?null:i<n?t:a.length?a.end(a.length-1):t},uS=function(e){var i=e.timelineChangeController,n=e.currentTimeline,t=e.segmentTimeline,a=e.loaderType,s=e.audioDisabled;if(n===t)return!1;if(a==="audio"){var o=i.lastTimelineChange({type:"main"});return!o||o.to!==t}if(a==="main"&&s){var l=i.pendingTimelineChange({type:"audio"});return!(l&&l.to===t)}return!1},RH=function(e){var i=0;return["video","audio"].forEach(function(n){var t=e[n+"TimingInfo"];if(!!t){var a=t.start,s=t.end,o;typeof a=="bigint"||typeof s=="bigint"?o=q.BigInt(s)-q.BigInt(a):typeof a=="number"&&typeof s=="number"&&(o=s-a),typeof o<"u"&&o>i&&(i=o)}}),typeof i=="bigint"&&i<Number.MAX_SAFE_INTEGER&&(i=Number(i)),i},lS=function(e){var i=e.segmentDuration,n=e.maxDuration;return i?Math.round(i)>n+Pa:!1},wH=function(e,i){if(i!=="hls")return null;var n=RH({audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo});if(!n)return null;var t=e.playlist.targetDuration,a=lS({segmentDuration:n,maxDuration:t*2}),s=lS({segmentDuration:n,maxDuration:t}),o="Segment with index "+e.mediaIndex+" "+("from playlist "+e.playlist.id+" ")+("has a duration of "+n+" ")+("when the reported duration is "+e.duration+" ")+("and the target duration is "+t+". ")+"For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return a||s?{severity:a?"warn":"info",message:o}:null},Ng=function(r){Ve(e,r);function e(n,t){var a;if(a=r.call(this)||this,!n)throw new TypeError("Initialization settings are required");if(typeof n.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!n.mediaSource)throw new TypeError("No MediaSource specified");return a.bandwidth=n.bandwidth,a.throughput={rate:0,count:0},a.roundTrip=NaN,a.resetStats_(),a.mediaIndex=null,a.partIndex=null,a.hasPlayed_=n.hasPlayed,a.currentTime_=n.currentTime,a.seekable_=n.seekable,a.seeking_=n.seeking,a.duration_=n.duration,a.mediaSource_=n.mediaSource,a.vhs_=n.vhs,a.loaderType_=n.loaderType,a.currentMediaInfo_=void 0,a.startingMediaInfo_=void 0,a.segmentMetadataTrack_=n.segmentMetadataTrack,a.goalBufferLength_=n.goalBufferLength,a.sourceType_=n.sourceType,a.sourceUpdater_=n.sourceUpdater,a.inbandTextTracks_=n.inbandTextTracks,a.state_="INIT",a.timelineChangeController_=n.timelineChangeController,a.shouldSaveSegmentTimingInfo_=!0,a.parse708captions_=n.parse708captions,a.useDtsForTimestampOffset_=n.useDtsForTimestampOffset,a.captionServices_=n.captionServices,a.experimentalExactManifestTimings=n.experimentalExactManifestTimings,a.checkBufferTimeout_=null,a.error_=void 0,a.currentTimeline_=-1,a.pendingSegment_=null,a.xhrOptions_=null,a.pendingSegments_=[],a.audioDisabled_=!1,a.isPendingTimestampOffset_=!1,a.gopBuffer_=[],a.timeMapping_=0,a.safeAppend_=ce.browser.IE_VERSION>=11,a.appendInitSegment_={audio:!0,video:!0},a.playlistOfLastInitSegment_={audio:null,video:null},a.callQueue_=[],a.loadQueue_=[],a.metadataQueue_={id3:[],caption:[]},a.waitingOnRemove_=!1,a.quotaExceededErrorRetryTimeout_=null,a.activeInitSegmentId_=null,a.initSegments_={},a.cacheEncryptionKeys_=n.cacheEncryptionKeys,a.keyCache_={},a.decrypter_=n.decrypter,a.syncController_=n.syncController,a.syncPoint_={segmentIndex:0,time:0},a.transmuxer_=a.createTransmuxer_(),a.triggerSyncInfoUpdate_=function(){return a.trigger("syncinfoupdate")},a.syncController_.on("syncinfoupdate",a.triggerSyncInfoUpdate_),a.mediaSource_.addEventListener("sourceopen",function(){a.isEndOfStream_()||(a.ended_=!1)}),a.fetchAtBuffer_=!1,a.logger_=Yi("SegmentLoader["+a.loaderType_+"]"),Object.defineProperty(rt(a),"state",{get:function(){return this.state_},set:function(o){o!==this.state_&&(this.logger_(this.state_+" -> "+o),this.state_=o,this.trigger("statechange"))}}),a.sourceUpdater_.on("ready",function(){a.hasEnoughInfoToAppend_()&&a.processCallQueue_()}),a.loaderType_==="main"&&a.timelineChangeController_.on("pendingtimelinechange",function(){a.hasEnoughInfoToAppend_()&&a.processCallQueue_()}),a.loaderType_==="audio"&&a.timelineChangeController_.on("timelinechange",function(){a.hasEnoughInfoToLoad_()&&a.processLoadQueue_(),a.hasEnoughInfoToAppend_()&&a.processCallQueue_()}),a}var i=e.prototype;return i.createTransmuxer_=function(){return Pm.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},i.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},i.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&q.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},i.setAudio=function(t){this.audioDisabled_=!t,t?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},i.abort=function(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()},i.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,q.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},i.checkForAbort_=function(t){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==t},i.error=function(t){return typeof t<"u"&&(this.logger_("error occurred:",t),this.error_=t),this.pendingSegment_=null,this.error_},i.endOfStream=function(){this.ended_=!0,this.transmuxer_&&Pm.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},i.buffered_=function(){var t=this.getMediaInfo_();if(!this.sourceUpdater_||!t)return ce.createTimeRanges();if(this.loaderType_==="main"){var a=t.hasAudio,s=t.hasVideo,o=t.isMuxed;if(s&&a&&!this.audioDisabled_&&!o)return this.sourceUpdater_.buffered();if(s)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},i.initSegmentForMap=function(t,a){if(a===void 0&&(a=!1),!t)return null;var s=dd(t),o=this.initSegments_[s];return a&&!o&&t.bytes&&(this.initSegments_[s]=o={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,tracks:t.tracks,timescales:t.timescales}),o||t},i.segmentKey=function(t,a){if(a===void 0&&(a=!1),!t)return null;var s=CR(t),o=this.keyCache_[s];this.cacheEncryptionKeys_&&a&&!o&&t.bytes&&(this.keyCache_[s]=o={resolvedUri:t.resolvedUri,bytes:t.bytes});var l={resolvedUri:(o||t).resolvedUri};return o&&(l.bytes=o.bytes),l},i.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},i.load=function(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}},i.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},i.playlist=function(t,a){if(a===void 0&&(a={}),!!t){var s=this.playlist_,o=this.pendingSegment_;this.playlist_=t,this.xhrOptions_=a,this.state==="INIT"&&(t.syncInfo={mediaSequence:t.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(t));var l=null;if(s&&(s.id?l=s.id:s.uri&&(l=s.uri)),this.logger_("playlist update ["+l+" => "+(t.id||t.uri)+"]"),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!s||s.uri!==t.uri){this.mediaIndex!==null&&(t.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}var c=t.mediaSequence-s.mediaSequence;if(this.logger_("live window shift ["+c+"]"),this.mediaIndex!==null)if(this.mediaIndex-=c,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var d=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!d.parts||!d.parts.length||!d.parts[this.partIndex])){var h=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=h}}o&&(o.mediaIndex-=c,o.mediaIndex<0?(o.mediaIndex=null,o.partIndex=null):(o.mediaIndex>=0&&(o.segment=t.segments[o.mediaIndex]),o.partIndex>=0&&o.segment.parts&&(o.part=o.segment.parts[o.partIndex]))),this.syncController_.saveExpiredSegmentInfo(s,t)}},i.pause=function(){this.checkBufferTimeout_&&(q.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},i.paused=function(){return this.checkBufferTimeout_===null},i.resetEverything=function(t){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,t),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},i.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},i.resyncLoader=function(){this.transmuxer_&&Pm.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},i.remove=function(t,a,s,o){if(s===void 0&&(s=function(){}),o===void 0&&(o=!1),a===1/0&&(a=this.duration_()),a<=t){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}var l=1,c=function(){l--,l===0&&s()};(o||!this.audioDisabled_)&&(l++,this.sourceUpdater_.removeAudio(t,a,c)),(o||this.loaderType_==="main")&&(this.gopBuffer_=_H(this.gopBuffer_,t,a,this.timeMapping_),l++,this.sourceUpdater_.removeVideo(t,a,c));for(var d in this.inbandTextTracks_)il(t,a,this.inbandTextTracks_[d]);il(t,a,this.segmentMetadataTrack_),c()},i.monitorBuffer_=function(){this.checkBufferTimeout_&&q.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=q.setTimeout(this.monitorBufferTick_.bind(this),1)},i.monitorBufferTick_=function(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&q.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=q.setTimeout(this.monitorBufferTick_.bind(this),SH)},i.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var t=this.chooseNextRequest_();!t||(typeof t.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline})),this.loadSegment_(t))}},i.isEndOfStream_=function(t,a,s){if(t===void 0&&(t=this.mediaIndex),a===void 0&&(a=this.playlist_),s===void 0&&(s=this.partIndex),!a||!this.mediaSource_)return!1;var o=typeof t=="number"&&a.segments[t],l=t+1===a.segments.length,c=!o||!o.parts||s+1===o.parts.length;return a.endList&&this.mediaSource_.readyState==="open"&&l&&c},i.chooseNextRequest_=function(){var t=this.buffered_(),a=Xb(t)||0,s=My(t,this.currentTime_()),o=!this.hasPlayed_()&&s>=1,l=s>=this.goalBufferLength_(),c=this.playlist_.segments;if(!c.length||o||l)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var d={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(d.isSyncRequest)d.mediaIndex=bH(this.currentTimeline_,c,a);else if(this.mediaIndex!==null){var h=c[this.mediaIndex],p=typeof this.partIndex=="number"?this.partIndex:-1;d.startOfSegment=h.end?h.end:a,h.parts&&h.parts[p+1]?(d.mediaIndex=this.mediaIndex,d.partIndex=p+1):d.mediaIndex=this.mediaIndex+1}else{var y=ri.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?a:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),S=y.segmentIndex,C=y.startTime,x=y.partIndex;d.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+a:"currentTime "+this.currentTime_(),d.mediaIndex=S,d.startOfSegment=C,d.partIndex=x}var I=c[d.mediaIndex],H=I&&typeof d.partIndex=="number"&&I.parts&&I.parts[d.partIndex];if(!I||typeof d.partIndex=="number"&&!H)return null;if(typeof d.partIndex!="number"&&I.parts&&(d.partIndex=0,H=I.parts[0]),!s&&H&&!H.independent)if(d.partIndex===0){var Z=c[d.mediaIndex-1],W=Z.parts&&Z.parts.length&&Z.parts[Z.parts.length-1];W&&W.independent&&(d.mediaIndex-=1,d.partIndex=Z.parts.length-1,d.independent="previous segment")}else I.parts[d.partIndex-1].independent&&(d.partIndex-=1,d.independent="previous part");var j=this.mediaSource_&&this.mediaSource_.readyState==="ended";return d.mediaIndex>=c.length-1&&j&&!this.seeking_()?null:this.generateSegmentInfo_(d)},i.generateSegmentInfo_=function(t){var a=t.independent,s=t.playlist,o=t.mediaIndex,l=t.startOfSegment,c=t.isSyncRequest,d=t.partIndex,h=t.forceTimestampOffset,p=t.getMediaInfoForTime,y=s.segments[o],S=typeof d=="number"&&y.parts[d],C={requestId:"segment-loader-"+Math.random(),uri:S&&S.resolvedUri||y.resolvedUri,mediaIndex:o,partIndex:S?d:null,isSyncRequest:c,startOfSegment:l,playlist:s,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:y.timeline,duration:S&&S.duration||y.duration,segment:y,part:S,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:p,independent:a},x=typeof h<"u"?h:this.isPendingTimestampOffset_;C.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:y.timeline,currentTimeline:this.currentTimeline_,startOfSegment:l,buffered:this.buffered_(),overrideCheck:x});var I=Xb(this.sourceUpdater_.audioBuffered());return typeof I=="number"&&(C.audioAppendStart=I-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(C.gopsToAlignWith=vH(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),C},i.timestampOffsetForSegment_=function(t){return CH(t)},i.earlyAbortWhenNeeded_=function(t){if(!(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)&&!(Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3)){var a=this.currentTime_(),s=t.bandwidth,o=this.pendingSegment_.duration,l=ri.estimateSegmentRequestTime(o,s,this.playlist_,t.bytesReceived),c=Q4(this.buffered_(),a,this.vhs_.tech_.playbackRate())-1;if(!(l<=c)){var d=uH({master:this.vhs_.playlists.master,currentTime:a,bandwidth:s,duration:this.duration_(),segmentDuration:o,timeUntilRebuffer:c,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!!d){var h=l-c,p=h-d.rebufferingImpact,y=.5;c<=Pa&&(y=1),!(!d.playlist||d.playlist.uri===this.playlist_.uri||p<y)&&(this.bandwidth=d.playlist.attributes.BANDWIDTH*fr.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},i.handleAbort_=function(t){this.logger_("Aborting "+co(t)),this.mediaRequestsAborted+=1},i.handleProgress_=function(t,a){this.earlyAbortWhenNeeded_(a.stats),!this.checkForAbort_(a.requestId)&&this.trigger("progress")},i.handleTrackInfo_=function(t,a){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&(this.checkForIllegalMediaSwitch(a)||(a=a||{},TH(this.currentMediaInfo_,a)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=a,this.currentMediaInfo_=a,this.logger_("trackinfo update",a),this.trigger("trackinfo")),!this.checkForAbort_(t.requestId)&&(this.pendingSegment_.trackInfo=a,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},i.handleTimingInfo_=function(t,a,s,o){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){var l=this.pendingSegment_,c=oS(a);l[c]=l[c]||{},l[c][s]=o,this.logger_("timinginfo: "+a+" - "+s+" - "+o),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},i.handleCaptions_=function(t,a){var s=this;if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){if(a.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,t,a));return}var l=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),c={};a.forEach(function(d){c[d.stream]=c[d.stream]||{startTime:1/0,captions:[],endTime:0};var h=c[d.stream];h.startTime=Math.min(h.startTime,d.startTime+l),h.endTime=Math.max(h.endTime,d.endTime+l),h.captions.push(d)}),Object.keys(c).forEach(function(d){var h=c[d],p=h.startTime,y=h.endTime,S=h.captions,C=s.inbandTextTracks_;s.logger_("adding cues from "+p+" -> "+y+" for "+d),fH(C,s.vhs_.tech_,d),il(p,y,C[d]),dH({captionArray:S,inbandTextTracks:C,timestampOffset:l})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},i.handleId3_=function(t,a,s){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,t,a,s));return}var l=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();mH(this.inbandTextTracks_,s,this.vhs_.tech_),pH({inbandTextTracks:this.inbandTextTracks_,metadataArray:a,timestampOffset:l,videoDuration:this.duration_()})}},i.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(t){return t()}),this.metadataQueue_.caption.forEach(function(t){return t()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},i.processCallQueue_=function(){var t=this.callQueue_;this.callQueue_=[],t.forEach(function(a){return a()})},i.processLoadQueue_=function(){var t=this.loadQueue_;this.loadQueue_=[],t.forEach(function(a){return a()})},i.hasEnoughInfoToLoad_=function(){if(this.loaderType_!=="audio")return!0;var t=this.pendingSegment_;return t?this.getCurrentMediaInfo_()?!uS({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1},i.getCurrentMediaInfo_=function(t){return t===void 0&&(t=this.pendingSegment_),t&&t.trackInfo||this.currentMediaInfo_},i.getMediaInfo_=function(t){return t===void 0&&(t=this.pendingSegment_),this.getCurrentMediaInfo_(t)||this.startingMediaInfo_},i.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var t=this.pendingSegment_,a=this.getCurrentMediaInfo_();if(!t||!a)return!1;var s=a.hasAudio,o=a.hasVideo,l=a.isMuxed;return!(o&&!t.videoTimingInfo||s&&!this.audioDisabled_&&!l&&!t.audioTimingInfo||uS({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},i.handleData_=function(t,a){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,t,a));return}var s=this.pendingSegment_;if(this.setTimeMapping_(s.timeline),this.updateMediaSecondsLoaded_(s.part||s.segment),this.mediaSource_.readyState!=="closed"){if(t.map&&(t.map=this.initSegmentForMap(t.map,!0),s.segment.map=t.map),t.key&&this.segmentKey(t.key,!0),s.isFmp4=t.isFmp4,s.timingInfo=s.timingInfo||{},s.isFmp4)this.trigger("fmp4"),s.timingInfo.start=s[oS(a.type)].start;else{var o=this.getCurrentMediaInfo_(),l=this.loaderType_==="main"&&o&&o.hasVideo,c;l&&(c=s.videoTimingInfo.start),s.timingInfo.start=this.trueSegmentStart_({currentStart:s.timingInfo.start,playlist:s.playlist,mediaIndex:s.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:l,firstVideoFrameTimeForData:c,videoTimingInfo:s.videoTimingInfo,audioTimingInfo:s.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(s,a.type),this.updateSourceBufferTimestampOffset_(s),s.isSyncRequest){this.updateTimingInfoEnd_(s),this.syncController_.saveSegmentTimingInfo({segmentInfo:s,shouldSaveTimelineMapping:this.loaderType_==="main"});var d=this.chooseNextRequest_();if(d.mediaIndex!==s.mediaIndex||d.partIndex!==s.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}s.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(s,a)}}},i.updateAppendInitSegmentStatus=function(t,a){this.loaderType_==="main"&&typeof t.timestampOffset=="number"&&!t.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[a]!==t.playlist&&(this.appendInitSegment_[a]=!0)},i.getInitSegmentAndUpdateState_=function(t){var a=t.type,s=t.initSegment,o=t.map,l=t.playlist;if(o){var c=dd(o);if(this.activeInitSegmentId_===c)return null;s=this.initSegmentForMap(o,!0).bytes,this.activeInitSegmentId_=c}return s&&this.appendInitSegment_[a]?(this.playlistOfLastInitSegment_[a]=l,this.appendInitSegment_[a]=!1,this.activeInitSegmentId_=null,s):null},i.handleQuotaExceededError_=function(t,a){var s=this,o=t.segmentInfo,l=t.type,c=t.bytes,d=this.sourceUpdater_.audioBuffered(),h=this.sourceUpdater_.videoBuffered();d.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+hs(d).join(", ")),h.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+hs(h).join(", "));var p=d.length?d.start(0):0,y=d.length?d.end(d.length-1):0,S=h.length?h.start(0):0,C=h.length?h.end(h.length-1):0;if(y-p<=Yu&&C-S<=Yu){this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. "+("Appended byte length: "+c.byteLength+", ")+("audio buffer: "+hs(d).join(", ")+", ")+("video buffer: "+hs(h).join(", ")+", ")),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:o,type:l,bytes:c}));var x=this.currentTime_(),I=x-Yu;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+I),this.remove(0,I,function(){s.logger_("On QUOTA_EXCEEDED_ERR, retrying append in "+Yu+"s"),s.waitingOnRemove_=!1,s.quotaExceededErrorRetryTimeout_=q.setTimeout(function(){s.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),s.quotaExceededErrorRetryTimeout_=null,s.processCallQueue_()},Yu*1e3)},!0)},i.handleAppendError_=function(t,a){var s=t.segmentInfo,o=t.type,l=t.bytes;if(!!a){if(a.code===HR){this.handleQuotaExceededError_({segmentInfo:s,type:o,bytes:l});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",a),this.error(o+" append of "+l.length+"b failed for segment "+("#"+s.mediaIndex+" in playlist "+s.playlist.id)),this.trigger("appenderror")}},i.appendToSourceBuffer_=function(t){var a=t.segmentInfo,s=t.type,o=t.initSegment,l=t.data,c=t.bytes;if(!c){var d=[l],h=l.byteLength;o&&(d.unshift(o),h+=o.byteLength),c=cH({bytes:h,segments:d})}this.sourceUpdater_.appendBuffer({segmentInfo:a,type:s,bytes:c},this.handleAppendError_.bind(this,{segmentInfo:a,type:s,bytes:c}))},i.handleSegmentTimingInfo_=function(t,a,s){if(!(!this.pendingSegment_||a!==this.pendingSegment_.requestId)){var o=this.pendingSegment_.segment,l=t+"TimingInfo";o[l]||(o[l]={}),o[l].transmuxerPrependedSeconds=s.prependedContentDuration||0,o[l].transmuxedPresentationStart=s.start.presentation,o[l].transmuxedDecodeStart=s.start.decode,o[l].transmuxedPresentationEnd=s.end.presentation,o[l].transmuxedDecodeEnd=s.end.decode,o[l].baseMediaDecodeTime=s.baseMediaDecodeTime}},i.appendData_=function(t,a){var s=a.type,o=a.data;if(!(!o||!o.byteLength)&&!(s==="audio"&&this.audioDisabled_)){var l=this.getInitSegmentAndUpdateState_({type:s,initSegment:a.initSegment,playlist:t.playlist,map:t.isFmp4?t.segment.map:null});this.appendToSourceBuffer_({segmentInfo:t,type:s,initSegment:l,data:o})}},i.loadSegment_=function(t){var a=this;if(this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),typeof t.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(function(){var s=Ai({},t,{forceTimestampOffset:!0});Ai(t,a.generateSegmentInfo_(s)),a.isPendingTimestampOffset_=!1,a.updateTransmuxerAndRequestSegment_(t)});return}this.updateTransmuxerAndRequestSegment_(t)},i.updateTransmuxerAndRequestSegment_=function(t){var a=this;this.shouldUpdateTransmuxerTimestampOffset_(t.timestampOffset)&&(this.gopBuffer_.length=0,t.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t.timestampOffset}));var s=this.createSimplifiedSegmentObj_(t),o=this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex),l=this.mediaIndex!==null,c=t.timeline!==this.currentTimeline_&&t.timeline>0,d=o||l&&c;this.logger_("Requesting "+co(t)),s.map&&!s.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),t.abortRequests=rH({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:s,abortFn:this.handleAbort_.bind(this,t),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",t.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",t.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:d,endedTimelineFn:function(){a.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(p){var y=p.message,S=p.level,C=p.stream;a.logger_(co(t)+" logged from transmuxer stream "+C+" as a "+S+": "+y)}})},i.trimBackBuffer_=function(t){var a=EH(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);a>0&&this.remove(0,a)},i.createSimplifiedSegmentObj_=function(t){var a=t.segment,s=t.part,o={resolvedUri:s?s.resolvedUri:a.resolvedUri,byterange:s?s.byterange:a.byterange,requestId:t.requestId,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,part:t.part},l=t.playlist.segments[t.mediaIndex-1];if(l&&l.timeline===a.timeline&&(l.videoTimingInfo?o.baseStartTime=l.videoTimingInfo.transmuxedDecodeEnd:l.audioTimingInfo&&(o.baseStartTime=l.audioTimingInfo.transmuxedDecodeEnd)),a.key){var c=a.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);o.key=this.segmentKey(a.key),o.key.iv=c}return a.map&&(o.map=this.initSegmentForMap(a.map)),o},i.saveTransferStats_=function(t){this.mediaRequests+=1,t&&(this.mediaBytesTransferred+=t.bytesReceived,this.mediaTransferDuration+=t.roundTripTime)},i.saveBandwidthRelatedStats_=function(t,a){if(this.pendingSegment_.byteLength=a.bytesReceived,t<vf){this.logger_("Ignoring segment's bandwidth because its duration of "+t+(" is less than the min to record "+vf));return}this.bandwidth=a.bandwidth,this.roundTrip=a.roundTripTime},i.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},i.segmentRequestFinished_=function(t,a,s){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,t,a,s));return}if(this.saveTransferStats_(a.stats),!!this.pendingSegment_&&a.requestId===this.pendingSegment_.requestId){if(t){if(this.pendingSegment_=null,this.state="READY",t.code===hn.ABORTED)return;if(this.pause(),t.code===hn.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(t),this.trigger("error");return}var o=this.pendingSegment_;this.saveBandwidthRelatedStats_(o.duration,a.stats),o.endOfAllRequests=a.endOfAllRequests,s.gopInfo&&(this.gopBuffer_=yH(this.gopBuffer_,s.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(o)}},i.setTimeMapping_=function(t){var a=this.syncController_.mappingForTimeline(t);a!==null&&(this.timeMapping_=a)},i.updateMediaSecondsLoaded_=function(t){typeof t.start=="number"&&typeof t.end=="number"?this.mediaSecondsLoaded+=t.end-t.start:this.mediaSecondsLoaded+=t.duration},i.shouldUpdateTransmuxerTimestampOffset_=function(t){return t===null?!1:this.loaderType_==="main"&&t!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&t!==this.sourceUpdater_.audioTimestampOffset()},i.trueSegmentStart_=function(t){var a=t.currentStart,s=t.playlist,o=t.mediaIndex,l=t.firstVideoFrameTimeForData,c=t.currentVideoTimestampOffset,d=t.useVideoTimingInfo,h=t.videoTimingInfo,p=t.audioTimingInfo;if(typeof a<"u")return a;if(!d)return p.start;var y=s.segments[o-1];return o===0||!y||typeof y.start>"u"||y.end!==l+c?l:h.start},i.waitForAppendsToComplete_=function(t){var a=this.getCurrentMediaInfo_(t);if(!a){this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),this.trigger("error");return}var s=a.hasAudio,o=a.hasVideo,l=a.isMuxed,c=this.loaderType_==="main"&&o,d=!this.audioDisabled_&&s&&!l;if(t.waitingOnAppends=0,!t.hasAppendedData_){!t.timingInfo&&typeof t.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),t.timingInfo={start:0},t.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(t),this.processMetadataQueue_()),this.checkAppendsDone_(t);return}c&&t.waitingOnAppends++,d&&t.waitingOnAppends++,c&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,t)),d&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,t))},i.checkAppendsDone_=function(t){this.checkForAbort_(t.requestId)||(t.waitingOnAppends--,t.waitingOnAppends===0&&this.handleAppendsDone_())},i.checkForIllegalMediaSwitch=function(t){var a=xH(this.loaderType_,this.getCurrentMediaInfo_(),t);return a?(this.error({message:a,blacklistDuration:1/0}),this.trigger("error"),!0):!1},i.updateSourceBufferTimestampOffset_=function(t){if(!(t.timestampOffset===null||typeof t.timingInfo.start!="number"||t.changedTimestampOffset||this.loaderType_!=="main")){var a=!1;t.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:t.segment.videoTimingInfo,audioTimingInfo:t.segment.audioTimingInfo,timingInfo:t.timingInfo}),t.changedTimestampOffset=!0,t.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(t.timestampOffset),a=!0),t.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(t.timestampOffset),a=!0),a&&this.trigger("timestampoffset")}},i.getSegmentStartTimeForTimestampOffsetCalculation_=function(t){var a=t.videoTimingInfo,s=t.audioTimingInfo,o=t.timingInfo;return this.useDtsForTimestampOffset_?a&&typeof a.transmuxedDecodeStart=="number"?a.transmuxedDecodeStart:s&&typeof s.transmuxedDecodeStart=="number"?s.transmuxedDecodeStart:o.start:o.start},i.updateTimingInfoEnd_=function(t){t.timingInfo=t.timingInfo||{};var a=this.getMediaInfo_(),s=this.loaderType_==="main"&&a&&a.hasVideo,o=s&&t.videoTimingInfo?t.videoTimingInfo:t.audioTimingInfo;!o||(t.timingInfo.end=typeof o.end=="number"?o.end:o.start+t.duration)},i.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}var t=this.pendingSegment_;this.updateTimingInfoEnd_(t),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:this.loaderType_==="main"});var a=wH(t,this.sourceType_);if(a&&(a.severity==="warn"?ce.log.warn(a.message):this.logger_(a.message)),this.recordThroughput_(t),this.pendingSegment_=null,this.state="READY",t.isSyncRequest&&(this.trigger("syncinfoupdate"),!t.hasAppendedData_)){this.logger_("Throwing away un-appended sync request "+co(t));return}this.logger_("Appended "+co(t)),this.addSegmentMetadataCue_(t),this.fetchAtBuffer_=!0,this.currentTimeline_!==t.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:t.timeline})),this.currentTimeline_=t.timeline,this.trigger("syncinfoupdate");var s=t.segment,o=t.part,l=s.end&&this.currentTime_()-s.end>t.playlist.targetDuration*3,c=o&&o.end&&this.currentTime_()-o.end>t.playlist.partTargetDuration*3;if(l||c){this.logger_("bad "+(l?"segment":"part")+" "+co(t)),this.resetEverything();return}var d=this.mediaIndex!==null;d&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=t.mediaIndex,this.partIndex=t.partIndex,this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex)&&this.endOfStream(),this.trigger("appended"),t.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()},i.recordThroughput_=function(t){if(t.duration<vf){this.logger_("Ignoring segment's throughput because its duration of "+t.duration+(" is less than the min to record "+vf));return}var a=this.throughput.rate,s=Date.now()-t.endOfAllRequests+1,o=Math.floor(t.byteLength/s*8*1e3);this.throughput.rate+=(o-a)/++this.throughput.count},i.addSegmentMetadataCue_=function(t){if(!!this.segmentMetadataTrack_){var a=t.segment,s=a.start,o=a.end;if(!(!sS(s)||!sS(o))){il(s,o,this.segmentMetadataTrack_);var l=q.WebKitDataCue||q.VTTCue,c={custom:a.custom,dateTimeObject:a.dateTimeObject,dateTimeString:a.dateTimeString,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.id,start:s,end:o},d=JSON.stringify(c),h=new l(s,o,d);h.value=c,this.segmentMetadataTrack_.addCue(h)}}},e}(ce.EventTarget);function Hn(){}var WR=function(e){return typeof e!="string"?e:e.replace(/./,function(i){return i.toUpperCase()})},AH=["video","audio"],Fg=function(e,i){var n=i[e+"Buffer"];return n&&n.updating||i.queuePending[e]},PH=function(e,i){for(var n=0;n<i.length;n++){var t=i[n];if(t.type==="mediaSource")return null;if(t.type===e)return n}return null},Hy=function r(e,i){if(i.queue.length!==0){var n=0,t=i.queue[n];if(t.type==="mediaSource"){!i.updating()&&i.mediaSource.readyState!=="closed"&&(i.queue.shift(),t.action(i),t.doneFn&&t.doneFn(),r("audio",i),r("video",i));return}if(e!=="mediaSource"&&!(!i.ready()||i.mediaSource.readyState==="closed"||Fg(e,i))){if(t.type!==e){if(n=PH(e,i.queue),n===null)return;t=i.queue[n]}if(i.queue.splice(n,1),i.queuePending[e]=t,t.action(e,i),!t.doneFn){i.queuePending[e]=null,r(e,i);return}}}},$R=function(e,i){var n=i[e+"Buffer"],t=WR(e);!n||(n.removeEventListener("updateend",i["on"+t+"UpdateEnd_"]),n.removeEventListener("error",i["on"+t+"Error_"]),i.codecs[e]=null,i[e+"Buffer"]=null)},ln=function(e,i){return e&&i&&Array.prototype.indexOf.call(e.sourceBuffers,i)!==-1},hi={appendBuffer:function(e,i,n){return function(t,a){var s=a[t+"Buffer"];if(!!ln(a.mediaSource,s)){a.logger_("Appending segment "+i.mediaIndex+"'s "+e.length+" bytes to "+t+"Buffer");try{s.appendBuffer(e)}catch(o){a.logger_("Error with code "+o.code+" "+(o.code===HR?"(QUOTA_EXCEEDED_ERR) ":"")+("when appending segment "+i.mediaIndex+" to "+t+"Buffer")),a.queuePending[t]=null,n(o)}}}},remove:function(e,i){return function(n,t){var a=t[n+"Buffer"];if(!!ln(t.mediaSource,a)){t.logger_("Removing "+e+" to "+i+" from "+n+"Buffer");try{a.remove(e,i)}catch{t.logger_("Remove "+e+" to "+i+" from "+n+"Buffer failed")}}}},timestampOffset:function(e){return function(i,n){var t=n[i+"Buffer"];!ln(n.mediaSource,t)||(n.logger_("Setting "+i+"timestampOffset to "+e),t.timestampOffset=e)}},callback:function(e){return function(i,n){e()}},endOfStream:function(e){return function(i){if(i.mediaSource.readyState==="open"){i.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{i.mediaSource.endOfStream(e)}catch(n){ce.log.warn("Failed to call media source endOfStream",n)}}}},duration:function(e){return function(i){i.logger_("Setting mediaSource duration to "+e);try{i.mediaSource.duration=e}catch(n){ce.log.warn("Failed to set media source duration",n)}}},abort:function(){return function(e,i){if(i.mediaSource.readyState==="open"){var n=i[e+"Buffer"];if(!!ln(i.mediaSource,n)){i.logger_("calling abort on "+e+"Buffer");try{n.abort()}catch(t){ce.log.warn("Failed to abort on "+e+"Buffer",t)}}}}},addSourceBuffer:function(e,i){return function(n){var t=WR(e),a=Tl(i);n.logger_("Adding "+e+"Buffer with codec "+i+" to mediaSource");var s=n.mediaSource.addSourceBuffer(a);s.addEventListener("updateend",n["on"+t+"UpdateEnd_"]),s.addEventListener("error",n["on"+t+"Error_"]),n.codecs[e]=i,n[e+"Buffer"]=s}},removeSourceBuffer:function(e){return function(i){var n=i[e+"Buffer"];if($R(e,i),!!ln(i.mediaSource,n)){i.logger_("Removing "+e+"Buffer with codec "+i.codecs[e]+" from mediaSource");try{i.mediaSource.removeSourceBuffer(n)}catch(t){ce.log.warn("Failed to removeSourceBuffer "+e+"Buffer",t)}}}},changeType:function(e){return function(i,n){var t=n[i+"Buffer"],a=Tl(e);!ln(n.mediaSource,t)||n.codecs[i]!==e&&(n.logger_("changing "+i+"Buffer codec from "+n.codecs[i]+" to "+e),t.changeType(a),n.codecs[i]=e)}}},pi=function(e){var i=e.type,n=e.sourceUpdater,t=e.action,a=e.doneFn,s=e.name;n.queue.push({type:i,action:t,doneFn:a,name:s}),Hy(i,n)},cS=function(e,i){return function(n){if(i.queuePending[e]){var t=i.queuePending[e].doneFn;i.queuePending[e]=null,t&&t(i[e+"Error_"])}Hy(e,i)}},GR=function(r){Ve(e,r);function e(n){var t;return t=r.call(this)||this,t.mediaSource=n,t.sourceopenListener_=function(){return Hy("mediaSource",rt(t))},t.mediaSource.addEventListener("sourceopen",t.sourceopenListener_),t.logger_=Yi("SourceUpdater"),t.audioTimestampOffset_=0,t.videoTimestampOffset_=0,t.queue=[],t.queuePending={audio:null,video:null},t.delayedAudioAppendQueue_=[],t.videoAppendQueued_=!1,t.codecs={},t.onVideoUpdateEnd_=cS("video",rt(t)),t.onAudioUpdateEnd_=cS("audio",rt(t)),t.onVideoError_=function(a){t.videoError_=a},t.onAudioError_=function(a){t.audioError_=a},t.createdSourceBuffers_=!1,t.initializedEme_=!1,t.triggeredReady_=!1,t}var i=e.prototype;return i.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},i.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},i.hasInitializedAnyEme=function(){return this.initializedEme_},i.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},i.createSourceBuffers=function(t){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(t),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},i.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},i.addSourceBuffer=function(t,a){pi({type:"mediaSource",sourceUpdater:this,action:hi.addSourceBuffer(t,a),name:"addSourceBuffer"})},i.abort=function(t){pi({type:t,sourceUpdater:this,action:hi.abort(t),name:"abort"})},i.removeSourceBuffer=function(t){if(!this.canRemoveSourceBuffer()){ce.log.error("removeSourceBuffer is not supported!");return}pi({type:"mediaSource",sourceUpdater:this,action:hi.removeSourceBuffer(t),name:"removeSourceBuffer"})},i.canRemoveSourceBuffer=function(){return!ce.browser.IE_VERSION&&!ce.browser.IS_FIREFOX&&q.MediaSource&&q.MediaSource.prototype&&typeof q.MediaSource.prototype.removeSourceBuffer=="function"},e.canChangeType=function(){return q.SourceBuffer&&q.SourceBuffer.prototype&&typeof q.SourceBuffer.prototype.changeType=="function"},i.canChangeType=function(){return this.constructor.canChangeType()},i.changeType=function(t,a){if(!this.canChangeType()){ce.log.error("changeType is not supported!");return}pi({type:t,sourceUpdater:this,action:hi.changeType(a),name:"changeType"})},i.addOrChangeSourceBuffers=function(t){var a=this;if(!t||typeof t!="object"||Object.keys(t).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(t).forEach(function(s){var o=t[s];if(!a.hasCreatedSourceBuffers())return a.addSourceBuffer(s,o);a.canChangeType()&&a.changeType(s,o)})},i.appendBuffer=function(t,a){var s=this,o=t.segmentInfo,l=t.type,c=t.bytes;if(this.processedAppend_=!0,l==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([t,a]),this.logger_("delayed audio append of "+c.length+" until video append");return}var d=a;if(pi({type:l,sourceUpdater:this,action:hi.appendBuffer(c,o||{mediaIndex:-1},d),doneFn:a,name:"appendBuffer"}),l==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var h=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+h.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,h.forEach(function(p){s.appendBuffer.apply(s,p)})}},i.audioBuffered=function(){return ln(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:ce.createTimeRange()},i.videoBuffered=function(){return ln(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:ce.createTimeRange()},i.buffered=function(){var t=ln(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,a=ln(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return a&&!t?this.audioBuffered():t&&!a?this.videoBuffered():X4(this.audioBuffered(),this.videoBuffered())},i.setDuration=function(t,a){a===void 0&&(a=Hn),pi({type:"mediaSource",sourceUpdater:this,action:hi.duration(t),name:"duration",doneFn:a})},i.endOfStream=function(t,a){t===void 0&&(t=null),a===void 0&&(a=Hn),typeof t!="string"&&(t=void 0),pi({type:"mediaSource",sourceUpdater:this,action:hi.endOfStream(t),name:"endOfStream",doneFn:a})},i.removeAudio=function(t,a,s){if(s===void 0&&(s=Hn),!this.audioBuffered().length||this.audioBuffered().end(0)===0){s();return}pi({type:"audio",sourceUpdater:this,action:hi.remove(t,a),doneFn:s,name:"remove"})},i.removeVideo=function(t,a,s){if(s===void 0&&(s=Hn),!this.videoBuffered().length||this.videoBuffered().end(0)===0){s();return}pi({type:"video",sourceUpdater:this,action:hi.remove(t,a),doneFn:s,name:"remove"})},i.updating=function(){return!!(Fg("audio",this)||Fg("video",this))},i.audioTimestampOffset=function(t){return typeof t<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==t&&(pi({type:"audio",sourceUpdater:this,action:hi.timestampOffset(t),name:"timestampOffset"}),this.audioTimestampOffset_=t),this.audioTimestampOffset_},i.videoTimestampOffset=function(t){return typeof t<"u"&&this.videoBuffer&&this.videoTimestampOffset!==t&&(pi({type:"video",sourceUpdater:this,action:hi.timestampOffset(t),name:"timestampOffset"}),this.videoTimestampOffset_=t),this.videoTimestampOffset_},i.audioQueueCallback=function(t){!this.audioBuffer||pi({type:"audio",sourceUpdater:this,action:hi.callback(t),name:"callback"})},i.videoQueueCallback=function(t){!this.videoBuffer||pi({type:"video",sourceUpdater:this,action:hi.callback(t),name:"callback"})},i.dispose=function(){var t=this;this.trigger("dispose"),AH.forEach(function(a){t.abort(a),t.canRemoveSourceBuffer()?t.removeSourceBuffer(a):t[a+"QueueCallback"](function(){return $R(a,t)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},e}(ce.EventTarget),fS=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},dS=new Uint8Array(`

`.split("").map(function(r){return r.charCodeAt(0)})),OH=function(r){Ve(e,r);function e(n,t){var a;return t===void 0&&(t={}),a=r.call(this,n,t)||this,a.mediaSource_=null,a.subtitlesTrack_=null,a.loaderType_="subtitle",a.featuresNativeTextTracks_=n.featuresNativeTextTracks,a.shouldSaveSegmentTimingInfo_=!1,a}var i=e.prototype;return i.createTransmuxer_=function(){return null},i.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return ce.createTimeRanges();var t=this.subtitlesTrack_.cues,a=t[0].startTime,s=t[t.length-1].startTime;return ce.createTimeRanges([[a,s]])},i.initSegmentForMap=function(t,a){if(a===void 0&&(a=!1),!t)return null;var s=dd(t),o=this.initSegments_[s];if(a&&!o&&t.bytes){var l=dS.byteLength+t.bytes.byteLength,c=new Uint8Array(l);c.set(t.bytes),c.set(dS,t.bytes.byteLength),this.initSegments_[s]=o={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:c}}return o||t},i.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},i.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},i.track=function(t){return typeof t>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=t,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)},i.remove=function(t,a){il(t,a,this.subtitlesTrack_)},i.fillBuffer_=function(){var t=this,a=this.chooseNextRequest_();if(!!a){if(this.syncController_.timestampOffsetForTimeline(a.timeline)===null){var s=function(){t.state="READY",t.paused()||t.monitorBuffer_()};this.syncController_.one("timestampoffset",s),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(a)}},i.timestampOffsetForSegment_=function(){return null},i.chooseNextRequest_=function(){return this.skipEmptySegments_(r.prototype.chooseNextRequest_.call(this))},i.skipEmptySegments_=function(t){for(;t&&t.segment.empty;){if(t.mediaIndex+1>=t.playlist.segments.length){t=null;break}t=this.generateSegmentInfo_({playlist:t.playlist,mediaIndex:t.mediaIndex+1,startOfSegment:t.startOfSegment+t.duration,isSyncRequest:t.isSyncRequest})}return t},i.stopForError=function(t){this.error(t),this.state="READY",this.pause(),this.trigger("error")},i.segmentRequestFinished_=function(t,a,s){var o=this;if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(a.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(t){t.code===hn.TIMEOUT&&this.handleTimeout_(),t.code===hn.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(t);return}var l=this.pendingSegment_;this.saveBandwidthRelatedStats_(l.duration,a.stats),a.key&&this.segmentKey(a.key,!0),this.state="APPENDING",this.trigger("appending");var c=l.segment;if(c.map&&(c.map.bytes=a.map.bytes),l.bytes=a.bytes,typeof q.WebVTT!="function"&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var d,h=function(){o.subtitlesTrack_.tech_.off("vttjsloaded",d),o.stopForError({message:"Error loading vtt.js"})};d=function(){o.subtitlesTrack_.tech_.off("vttjserror",h),o.segmentRequestFinished_(t,a,s)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",d),this.subtitlesTrack_.tech_.one("vttjserror",h);return}c.requested=!0;try{this.parseVTTCues_(l)}catch(p){this.stopForError({message:p.message});return}if(this.updateTimeMapping_(l,this.syncController_.timelines[l.timeline],this.playlist_),l.cues.length?l.timingInfo={start:l.cues[0].startTime,end:l.cues[l.cues.length-1].endTime}:l.timingInfo={start:l.startOfSegment,end:l.startOfSegment+l.duration},l.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}l.byteLength=l.bytes.byteLength,this.mediaSecondsLoaded+=c.duration,l.cues.forEach(function(p){o.subtitlesTrack_.addCue(o.featuresNativeTextTracks_?new q.VTTCue(p.startTime,p.endTime,p.text):p)}),gH(this.subtitlesTrack_),this.handleAppendsDone_()},i.handleData_=function(){},i.updateTimingInfoEnd_=function(){},i.parseVTTCues_=function(t){var a,s=!1;typeof q.TextDecoder=="function"?a=new q.TextDecoder("utf8"):(a=q.WebVTT.StringDecoder(),s=!0);var o=new q.WebVTT.Parser(q,q.vttjs,a);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},o.oncue=t.cues.push.bind(t.cues),o.ontimestampmap=function(d){t.timestampmap=d},o.onparsingerror=function(d){ce.log.warn("Error encountered when parsing cues: "+d.message)},t.segment.map){var l=t.segment.map.bytes;s&&(l=fS(l)),o.parse(l)}var c=t.bytes;s&&(c=fS(c)),o.parse(c),o.flush()},i.updateTimeMapping_=function(t,a,s){var o=t.segment;if(!!a){if(!t.cues.length){o.empty=!0;return}var l=t.timestampmap,c=l.MPEGTS/ed.ONE_SECOND_IN_TS-l.LOCAL+a.mapping;if(t.cues.forEach(function(p){p.startTime+=c,p.endTime+=c}),!s.syncInfo){var d=t.cues[0].startTime,h=t.cues[t.cues.length-1].startTime;s.syncInfo={mediaSequence:s.mediaSequence+t.mediaIndex,time:Math.min(d,h-o.duration)}}}},e}(Ng),IH=function(e,i){for(var n=e.cues,t=0;t<n.length;t++){var a=n[t];if(i>=a.adStartTime&&i<=a.adEndTime)return a}return null},DH=function(e,i,n){if(n===void 0&&(n=0),!!e.segments)for(var t=n,a,s=0;s<e.segments.length;s++){var o=e.segments[s];if(a||(a=IH(i,t+o.duration/2)),a){if("cueIn"in o){a.endTime=t,a.adEndTime=t,t+=o.duration,a=null;continue}if(t<a.endTime){t+=o.duration;continue}a.endTime+=o.duration}else if("cueOut"in o&&(a=new q.VTTCue(t,t+o.duration,o.cueOut),a.adStartTime=t,a.adEndTime=t+parseFloat(o.cueOut),i.addCue(a)),"cueOutCont"in o){var l=o.cueOutCont.split("/").map(parseFloat),c=l[0],d=l[1];a=new q.VTTCue(t,t+o.duration,""),a.adStartTime=t-c,a.adEndTime=a.adStartTime+d,i.addCue(a)}t+=o.duration}},kH=86400,hS=[{name:"VOD",run:function(e,i,n,t,a){if(n!==1/0){var s={time:0,segmentIndex:0,partIndex:null};return s}return null}},{name:"ProgramDateTime",run:function(e,i,n,t,a){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var s=null,o=null,l=Ag(i);a=a||0;for(var c=0;c<l.length;c++){var d=i.endList||a===0?c:l.length-(c+1),h=l[d],p=h.segment,y=e.timelineToDatetimeMappings[p.timeline];if(!(!y||!p.dateTimeObject)){var S=p.dateTimeObject.getTime()/1e3,C=S+y;if(p.parts&&typeof h.partIndex=="number")for(var x=0;x<h.partIndex;x++)C+=p.parts[x].duration;var I=Math.abs(a-C);if(o!==null&&(I===0||o<I))break;o=I,s={time:C,segmentIndex:h.segmentIndex,partIndex:h.partIndex}}}return s}},{name:"Segment",run:function(e,i,n,t,a){var s=null,o=null;a=a||0;for(var l=Ag(i),c=0;c<l.length;c++){var d=i.endList||a===0?c:l.length-(c+1),h=l[d],p=h.segment,y=h.part&&h.part.start||p&&p.start;if(p.timeline===t&&typeof y<"u"){var S=Math.abs(a-y);if(o!==null&&o<S)break;(!s||o===null||o>=S)&&(o=S,s={time:y,segmentIndex:h.segmentIndex,partIndex:h.partIndex})}}return s}},{name:"Discontinuity",run:function(e,i,n,t,a){var s=null;if(a=a||0,i.discontinuityStarts&&i.discontinuityStarts.length)for(var o=null,l=0;l<i.discontinuityStarts.length;l++){var c=i.discontinuityStarts[l],d=i.discontinuitySequence+l+1,h=e.discontinuities[d];if(h){var p=Math.abs(a-h.time);if(o!==null&&o<p)break;(!s||o===null||o>=p)&&(o=p,s={time:h.time,segmentIndex:c,partIndex:null})}}return s}},{name:"Playlist",run:function(e,i,n,t,a){if(i.syncInfo){var s={time:i.syncInfo.time,segmentIndex:i.syncInfo.mediaSequence-i.mediaSequence,partIndex:null};return s}return null}}],LH=function(r){Ve(e,r);function e(n){var t;return t=r.call(this)||this,t.timelines=[],t.discontinuities=[],t.timelineToDatetimeMappings={},t.logger_=Yi("SyncController"),t}var i=e.prototype;return i.getSyncPoint=function(t,a,s,o){var l=this.runStrategies_(t,a,s,o);return l.length?this.selectSyncPoint_(l,{key:"time",value:o}):null},i.getExpiredTime=function(t,a){if(!t||!t.segments)return null;var s=this.runStrategies_(t,a,t.discontinuitySequence,0);if(!s.length)return null;var o=this.selectSyncPoint_(s,{key:"segmentIndex",value:0});return o.segmentIndex>0&&(o.time*=-1),Math.abs(o.time+cl({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:o.segmentIndex,endIndex:0}))},i.runStrategies_=function(t,a,s,o){for(var l=[],c=0;c<hS.length;c++){var d=hS[c],h=d.run(this,t,a,s,o);h&&(h.strategy=d.name,l.push({strategy:d.name,syncPoint:h}))}return l},i.selectSyncPoint_=function(t,a){for(var s=t[0].syncPoint,o=Math.abs(t[0].syncPoint[a.key]-a.value),l=t[0].strategy,c=1;c<t.length;c++){var d=Math.abs(t[c].syncPoint[a.key]-a.value);d<o&&(o=d,s=t[c].syncPoint,l=t[c].strategy)}return this.logger_("syncPoint for ["+a.key+": "+a.value+"] chosen with strategy"+(" ["+l+"]: [time:"+s.time+",")+(" segmentIndex:"+s.segmentIndex)+(typeof s.partIndex=="number"?",partIndex:"+s.partIndex:"")+"]"),s},i.saveExpiredSegmentInfo=function(t,a){var s=a.mediaSequence-t.mediaSequence;if(s>kH){ce.log.warn("Not saving expired segment info. Media sequence gap "+s+" is too large.");return}for(var o=s-1;o>=0;o--){var l=t.segments[o];if(l&&typeof l.start<"u"){a.syncInfo={mediaSequence:t.mediaSequence+o,time:l.start},this.logger_("playlist refresh sync: [time:"+a.syncInfo.time+","+(" mediaSequence: "+a.syncInfo.mediaSequence+"]")),this.trigger("syncinfoupdate");break}}},i.setDateTimeMappingForStart=function(t){if(this.timelineToDatetimeMappings={},t.segments&&t.segments.length&&t.segments[0].dateTimeObject){var a=t.segments[0],s=a.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[a.timeline]=-s}},i.saveSegmentTimingInfo=function(t){var a=t.segmentInfo,s=t.shouldSaveTimelineMapping,o=this.calculateSegmentTimeMapping_(a,a.timingInfo,s),l=a.segment;o&&(this.saveDiscontinuitySyncInfo_(a),a.playlist.syncInfo||(a.playlist.syncInfo={mediaSequence:a.playlist.mediaSequence+a.mediaIndex,time:l.start}));var c=l.dateTimeObject;l.discontinuity&&s&&c&&(this.timelineToDatetimeMappings[l.timeline]=-(c.getTime()/1e3))},i.timestampOffsetForTimeline=function(t){return typeof this.timelines[t]>"u"?null:this.timelines[t].time},i.mappingForTimeline=function(t){return typeof this.timelines[t]>"u"?null:this.timelines[t].mapping},i.calculateSegmentTimeMapping_=function(t,a,s){var o=t.segment,l=t.part,c=this.timelines[t.timeline],d,h;if(typeof t.timestampOffset=="number")c={time:t.startOfSegment,mapping:t.startOfSegment-a.start},s&&(this.timelines[t.timeline]=c,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+t.timeline+": "+("[time: "+c.time+"] [mapping: "+c.mapping+"]"))),d=t.startOfSegment,h=a.end+c.mapping;else if(c)d=a.start+c.mapping,h=a.end+c.mapping;else return!1;return l&&(l.start=d,l.end=h),(!o.start||d<o.start)&&(o.start=d),o.end=h,!0},i.saveDiscontinuitySyncInfo_=function(t){var a=t.playlist,s=t.segment;if(s.discontinuity)this.discontinuities[s.timeline]={time:s.start,accuracy:0};else if(a.discontinuityStarts&&a.discontinuityStarts.length)for(var o=0;o<a.discontinuityStarts.length;o++){var l=a.discontinuityStarts[o],c=a.discontinuitySequence+o+1,d=l-t.mediaIndex,h=Math.abs(d);if(!this.discontinuities[c]||this.discontinuities[c].accuracy>h){var p=void 0;d<0?p=s.start-cl({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:t.mediaIndex,endIndex:l}):p=s.end+cl({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:t.mediaIndex+1,endIndex:l}),this.discontinuities[c]={time:p,accuracy:h}}}},i.dispose=function(){this.trigger("dispose"),this.off()},e}(ce.EventTarget),MH=function(r){Ve(e,r);function e(){var n;return n=r.call(this)||this,n.pendingTimelineChanges_={},n.lastTimelineChanges_={},n}var i=e.prototype;return i.clearPendingTimelineChange=function(t){this.pendingTimelineChanges_[t]=null,this.trigger("pendingtimelinechange")},i.pendingTimelineChange=function(t){var a=t.type,s=t.from,o=t.to;return typeof s=="number"&&typeof o=="number"&&(this.pendingTimelineChanges_[a]={type:a,from:s,to:o},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[a]},i.lastTimelineChange=function(t){var a=t.type,s=t.from,o=t.to;return typeof s=="number"&&typeof o=="number"&&(this.lastTimelineChanges_[a]={type:a,from:s,to:o},delete this.pendingTimelineChanges_[a],this.trigger("timelinechange")),this.lastTimelineChanges_[a]},i.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},e}(ce.EventTarget),NH=IR(DR(function(){var r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function e(W,j,le){return le={path:j,exports:{},require:function(Y,oe){return i(Y,oe==null?le.path:oe)}},W(le,le.exports),le.exports}function i(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var n=e(function(W){function j(fe,Y){for(var oe=0;oe<Y.length;oe++){var V=Y[oe];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(fe,V.key,V)}}function le(fe,Y,oe){return Y&&j(fe.prototype,Y),oe&&j(fe,oe),fe}W.exports=le,W.exports.default=W.exports,W.exports.__esModule=!0}),t=e(function(W){function j(le,fe){return W.exports=j=Object.setPrototypeOf||function(oe,V){return oe.__proto__=V,oe},W.exports.default=W.exports,W.exports.__esModule=!0,j(le,fe)}W.exports=j,W.exports.default=W.exports,W.exports.__esModule=!0}),a=e(function(W){function j(le,fe){le.prototype=Object.create(fe.prototype),le.prototype.constructor=le,t(le,fe)}W.exports=j,W.exports.default=W.exports,W.exports.__esModule=!0}),s=function(){function W(){this.listeners={}}var j=W.prototype;return j.on=function(fe,Y){this.listeners[fe]||(this.listeners[fe]=[]),this.listeners[fe].push(Y)},j.off=function(fe,Y){if(!this.listeners[fe])return!1;var oe=this.listeners[fe].indexOf(Y);return this.listeners[fe]=this.listeners[fe].slice(0),this.listeners[fe].splice(oe,1),oe>-1},j.trigger=function(fe){var Y=this.listeners[fe];if(!!Y)if(arguments.length===2)for(var oe=Y.length,V=0;V<oe;++V)Y[V].call(this,arguments[1]);else for(var pe=Array.prototype.slice.call(arguments,1),de=Y.length,Se=0;Se<de;++Se)Y[Se].apply(this,pe)},j.dispose=function(){this.listeners={}},j.pipe=function(fe){this.on("data",function(Y){fe.push(Y)})},W}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function o(W){return W.subarray(0,W.byteLength-W[W.byteLength-1])}/*! @name aes-decrypter @version 3.1.3 @license Apache-2.0 */var l=function(){var j=[[[],[],[],[],[]],[[],[],[],[],[]]],le=j[0],fe=j[1],Y=le[4],oe=fe[4],V,pe,de,Se=[],Ae=[],ke,De,Fe,ge,Ye,K;for(V=0;V<256;V++)Ae[(Se[V]=V<<1^(V>>7)*283)^V]=V;for(pe=de=0;!Y[pe];pe^=ke||1,de=Ae[de]||1)for(ge=de^de<<1^de<<2^de<<3^de<<4,ge=ge>>8^ge&255^99,Y[pe]=ge,oe[ge]=pe,Fe=Se[De=Se[ke=Se[pe]]],K=Fe*16843009^De*65537^ke*257^pe*16843008,Ye=Se[ge]*257^ge*16843008,V=0;V<4;V++)le[V][pe]=Ye=Ye<<24^Ye>>>8,fe[V][ge]=K=K<<24^K>>>8;for(V=0;V<5;V++)le[V]=le[V].slice(0),fe[V]=fe[V].slice(0);return j},c=null,d=function(){function W(le){c||(c=l()),this._tables=[[c[0][0].slice(),c[0][1].slice(),c[0][2].slice(),c[0][3].slice(),c[0][4].slice()],[c[1][0].slice(),c[1][1].slice(),c[1][2].slice(),c[1][3].slice(),c[1][4].slice()]];var fe,Y,oe,V=this._tables[0][4],pe=this._tables[1],de=le.length,Se=1;if(de!==4&&de!==6&&de!==8)throw new Error("Invalid aes key size");var Ae=le.slice(0),ke=[];for(this._key=[Ae,ke],fe=de;fe<4*de+28;fe++)oe=Ae[fe-1],(fe%de===0||de===8&&fe%de===4)&&(oe=V[oe>>>24]<<24^V[oe>>16&255]<<16^V[oe>>8&255]<<8^V[oe&255],fe%de===0&&(oe=oe<<8^oe>>>24^Se<<24,Se=Se<<1^(Se>>7)*283)),Ae[fe]=Ae[fe-de]^oe;for(Y=0;fe;Y++,fe--)oe=Ae[Y&3?fe:fe-4],fe<=4||Y<4?ke[Y]=oe:ke[Y]=pe[0][V[oe>>>24]]^pe[1][V[oe>>16&255]]^pe[2][V[oe>>8&255]]^pe[3][V[oe&255]]}var j=W.prototype;return j.decrypt=function(fe,Y,oe,V,pe,de){var Se=this._key[1],Ae=fe^Se[0],ke=V^Se[1],De=oe^Se[2],Fe=Y^Se[3],ge,Ye,K,w=Se.length/4-2,te,ye=4,xe=this._tables[1],re=xe[0],se=xe[1],J=xe[2],ie=xe[3],B=xe[4];for(te=0;te<w;te++)ge=re[Ae>>>24]^se[ke>>16&255]^J[De>>8&255]^ie[Fe&255]^Se[ye],Ye=re[ke>>>24]^se[De>>16&255]^J[Fe>>8&255]^ie[Ae&255]^Se[ye+1],K=re[De>>>24]^se[Fe>>16&255]^J[Ae>>8&255]^ie[ke&255]^Se[ye+2],Fe=re[Fe>>>24]^se[Ae>>16&255]^J[ke>>8&255]^ie[De&255]^Se[ye+3],ye+=4,Ae=ge,ke=Ye,De=K;for(te=0;te<4;te++)pe[(3&-te)+de]=B[Ae>>>24]<<24^B[ke>>16&255]<<16^B[De>>8&255]<<8^B[Fe&255]^Se[ye++],ge=Ae,Ae=ke,ke=De,De=Fe,Fe=ge},W}(),h=function(W){a(j,W);function j(){var fe;return fe=W.call(this,s)||this,fe.jobs=[],fe.delay=1,fe.timeout_=null,fe}var le=j.prototype;return le.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},le.push=function(Y){this.jobs.push(Y),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},j}(s),p=function(j){return j<<24|(j&65280)<<8|(j&16711680)>>8|j>>>24},y=function(j,le,fe){var Y=new Int32Array(j.buffer,j.byteOffset,j.byteLength>>2),oe=new d(Array.prototype.slice.call(le)),V=new Uint8Array(j.byteLength),pe=new Int32Array(V.buffer),de,Se,Ae,ke,De,Fe,ge,Ye,K;for(de=fe[0],Se=fe[1],Ae=fe[2],ke=fe[3],K=0;K<Y.length;K+=4)De=p(Y[K]),Fe=p(Y[K+1]),ge=p(Y[K+2]),Ye=p(Y[K+3]),oe.decrypt(De,Fe,ge,Ye,pe,K),pe[K]=p(pe[K]^de),pe[K+1]=p(pe[K+1]^Se),pe[K+2]=p(pe[K+2]^Ae),pe[K+3]=p(pe[K+3]^ke),de=De,Se=Fe,Ae=ge,ke=Ye;return V},S=function(){function W(le,fe,Y,oe){var V=W.STEP,pe=new Int32Array(le.buffer),de=new Uint8Array(le.byteLength),Se=0;for(this.asyncStream_=new h,this.asyncStream_.push(this.decryptChunk_(pe.subarray(Se,Se+V),fe,Y,de)),Se=V;Se<pe.length;Se+=V)Y=new Uint32Array([p(pe[Se-4]),p(pe[Se-3]),p(pe[Se-2]),p(pe[Se-1])]),this.asyncStream_.push(this.decryptChunk_(pe.subarray(Se,Se+V),fe,Y,de));this.asyncStream_.push(function(){oe(null,o(de))})}var j=W.prototype;return j.decryptChunk_=function(fe,Y,oe,V){return function(){var pe=y(fe,Y,oe);V.set(pe,fe.byteOffset)}},n(W,null,[{key:"STEP",get:function(){return 32e3}}]),W}(),C;typeof window<"u"?C=window:typeof r<"u"?C=r:typeof self<"u"?C=self:C={};var x=C,I=function(j){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(j):j&&j.buffer instanceof ArrayBuffer},H=x.BigInt||Number;H("0x1"),H("0x100"),H("0x10000"),H("0x1000000"),H("0x100000000"),H("0x10000000000"),H("0x1000000000000"),H("0x100000000000000"),H("0x10000000000000000");var Z=function(j){var le={};return Object.keys(j).forEach(function(fe){var Y=j[fe];I(Y)?le[fe]={bytes:Y.buffer,byteOffset:Y.byteOffset,byteLength:Y.byteLength}:le[fe]=Y}),le};self.onmessage=function(W){var j=W.data,le=new Uint8Array(j.encrypted.bytes,j.encrypted.byteOffset,j.encrypted.byteLength),fe=new Uint32Array(j.key.bytes,j.key.byteOffset,j.key.byteLength/4),Y=new Uint32Array(j.iv.bytes,j.iv.byteOffset,j.iv.byteLength/4);new S(le,fe,Y,function(oe,V){self.postMessage(Z({source:j.source,decrypted:V}),[V.buffer])})}})),FH=OR(NH),UH=function(e){var i=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(i="main-desc"),i},gd=function(e,i){e.abort(),e.pause(),i&&i.activePlaylistLoader&&(i.activePlaylistLoader.pause(),i.activePlaylistLoader=null)},Ug=function(e,i){i.activePlaylistLoader=e,e.load()},BH=function(e,i){return function(){var n=i.segmentLoaders,t=n[e],a=n.main,s=i.mediaTypes[e],o=s.activeTrack(),l=s.getActiveGroup(),c=s.activePlaylistLoader,d=s.lastGroup_;if(!(l&&d&&l.id===d.id)&&(s.lastGroup_=l,s.lastTrack_=o,gd(t,s),!(!l||l.isMasterPlaylist))){if(!l.playlistLoader){c&&a.resetEverything();return}t.resyncLoader(),Ug(l.playlistLoader,s)}}},jH=function(e,i){return function(){var n=i.segmentLoaders[e],t=i.mediaTypes[e];t.lastGroup_=null,n.abort(),n.pause()}},VH=function(e,i){return function(){var n=i.masterPlaylistLoader,t=i.segmentLoaders,a=t[e],s=t.main,o=i.mediaTypes[e],l=o.activeTrack(),c=o.getActiveGroup(),d=o.activePlaylistLoader,h=o.lastTrack_;if(!(h&&l&&h.id===l.id)&&(o.lastGroup_=c,o.lastTrack_=l,gd(a,o),!!c)){if(c.isMasterPlaylist){if(!l||!h||l.id===h.id)return;var p=i.vhs.masterPlaylistController_,y=p.selectPlaylist();if(p.media()===y)return;o.logger_("track change. Switching master audio from "+h.id+" to "+l.id),n.pause(),s.resetEverything(),p.fastQualityChange_(y);return}if(e==="AUDIO"){if(!c.playlistLoader){s.setAudio(!0),s.resetEverything();return}a.setAudio(!0),s.setAudio(!1)}if(d===c.playlistLoader){Ug(c.playlistLoader,o);return}a.track&&a.track(l),a.resetEverything(),Ug(c.playlistLoader,o)}}},vd={AUDIO:function(e,i){return function(){var n=i.segmentLoaders[e],t=i.mediaTypes[e],a=i.blacklistCurrentPlaylist;gd(n,t);var s=t.activeTrack(),o=t.activeGroup(),l=(o.filter(function(h){return h.default})[0]||o[0]).id,c=t.tracks[l];if(s===c){a({message:"Problem encountered loading the default audio track."});return}ce.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var d in t.tracks)t.tracks[d].enabled=t.tracks[d]===c;t.onTrackChanged()}},SUBTITLES:function(e,i){return function(){var n=i.segmentLoaders[e],t=i.mediaTypes[e];ce.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),gd(n,t);var a=t.activeTrack();a&&(a.mode="disabled"),t.onTrackChanged()}}},pS={AUDIO:function(e,i,n){if(!!i){var t=n.tech,a=n.requestOptions,s=n.segmentLoaders[e];i.on("loadedmetadata",function(){var o=i.media();s.playlist(o,a),(!t.paused()||o.endList&&t.preload()!=="none")&&s.load()}),i.on("loadedplaylist",function(){s.playlist(i.media(),a),t.paused()||s.load()}),i.on("error",vd[e](e,n))}},SUBTITLES:function(e,i,n){var t=n.tech,a=n.requestOptions,s=n.segmentLoaders[e],o=n.mediaTypes[e];i.on("loadedmetadata",function(){var l=i.media();s.playlist(l,a),s.track(o.activeTrack()),(!t.paused()||l.endList&&t.preload()!=="none")&&s.load()}),i.on("loadedplaylist",function(){s.playlist(i.media(),a),t.paused()||s.load()}),i.on("error",vd[e](e,n))}},HH={AUDIO:function(e,i){var n=i.vhs,t=i.sourceType,a=i.segmentLoaders[e],s=i.requestOptions,o=i.master.mediaGroups,l=i.mediaTypes[e],c=l.groups,d=l.tracks,h=l.logger_,p=i.masterPlaylistLoader,y=$l(p.master);(!o[e]||Object.keys(o[e]).length===0)&&(o[e]={main:{default:{default:!0}}},y&&(o[e].main.default.playlists=p.master.playlists));for(var S in o[e]){c[S]||(c[S]=[]);for(var C in o[e][S]){var x=o[e][S][C],I=void 0;if(y?(h("AUDIO group '"+S+"' label '"+C+"' is a master playlist"),x.isMasterPlaylist=!0,I=null):t==="vhs-json"&&x.playlists?I=new mo(x.playlists[0],n,s):x.resolvedUri?I=new mo(x.resolvedUri,n,s):x.playlists&&t==="dash"?I=new Lg(x.playlists[0],n,s,p):I=null,x=ce.mergeOptions({id:C,playlistLoader:I},x),pS[e](e,x.playlistLoader,i),c[S].push(x),typeof d[C]>"u"){var H=new ce.AudioTrack({id:C,kind:UH(x),enabled:!1,language:x.language,default:x.default,label:C});d[C]=H}}}a.on("error",vd[e](e,i))},SUBTITLES:function(e,i){var n=i.tech,t=i.vhs,a=i.sourceType,s=i.segmentLoaders[e],o=i.requestOptions,l=i.master.mediaGroups,c=i.mediaTypes[e],d=c.groups,h=c.tracks,p=i.masterPlaylistLoader;for(var y in l[e]){d[y]||(d[y]=[]);for(var S in l[e][y])if(!l[e][y][S].forced){var C=l[e][y][S],x=void 0;if(a==="hls")x=new mo(C.resolvedUri,t,o);else if(a==="dash"){var I=C.playlists.filter(function(Z){return Z.excludeUntil!==1/0});if(!I.length)return;x=new Lg(C.playlists[0],t,o,p)}else a==="vhs-json"&&(x=new mo(C.playlists?C.playlists[0]:C.resolvedUri,t,o));if(C=ce.mergeOptions({id:S,playlistLoader:x},C),pS[e](e,C.playlistLoader,i),d[y].push(C),typeof h[S]>"u"){var H=n.addRemoteTextTrack({id:S,kind:"subtitles",default:C.default&&C.autoselect,language:C.language,label:S},!1).track;h[S]=H}}}s.on("error",vd[e](e,i))},"CLOSED-CAPTIONS":function(e,i){var n=i.tech,t=i.master.mediaGroups,a=i.mediaTypes[e],s=a.groups,o=a.tracks;for(var l in t[e]){s[l]||(s[l]=[]);for(var c in t[e][l]){var d=t[e][l][c];if(!!/^(?:CC|SERVICE)/.test(d.instreamId)){var h=n.options_.vhs&&n.options_.vhs.captionServices||{},p={label:c,language:d.language,instreamId:d.instreamId,default:d.default&&d.autoselect};if(h[p.instreamId]&&(p=ce.mergeOptions(p,h[p.instreamId])),p.default===void 0&&delete p.default,s[l].push(ce.mergeOptions({id:c},d)),typeof o[c]>"u"){var y=n.addRemoteTextTrack({id:p.instreamId,kind:"captions",default:p.default,language:p.language,label:p.label},!1).track;o[c]=y}}}}}},WH=function r(e,i){for(var n=0;n<e.length;n++)if(Uy(i,e[n])||e[n].playlists&&r(e[n].playlists,i))return!0;return!1},$H=function(e,i){return function(n){var t=i.masterPlaylistLoader,a=i.mediaTypes[e].groups,s=t.media();if(!s)return null;var o=null;s.attributes[e]&&(o=a[s.attributes[e]]);var l=Object.keys(a);if(!o)if(e==="AUDIO"&&l.length>1&&$l(i.master))for(var c=0;c<l.length;c++){var d=a[l[c]];if(WH(d,s)){o=d;break}}else a.main?o=a.main:l.length===1&&(o=a[l[0]]);return typeof n>"u"?o:n===null||!o?null:o.filter(function(h){return h.id===n.id})[0]||null}},GH={AUDIO:function(e,i){return function(){var n=i.mediaTypes[e].tracks;for(var t in n)if(n[t].enabled)return n[t];return null}},SUBTITLES:function(e,i){return function(){var n=i.mediaTypes[e].tracks;for(var t in n)if(n[t].mode==="showing"||n[t].mode==="hidden")return n[t];return null}}},zH=function(e,i){var n=i.mediaTypes;return function(){var t=n[e].activeTrack();return t?n[e].activeGroup(t):null}},qH=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(S){HH[S](S,e)});var i=e.mediaTypes,n=e.masterPlaylistLoader,t=e.tech,a=e.vhs,s=e.segmentLoaders,o=s.AUDIO,l=s.main;["AUDIO","SUBTITLES"].forEach(function(S){i[S].activeGroup=$H(S,e),i[S].activeTrack=GH[S](S,e),i[S].onGroupChanged=BH(S,e),i[S].onGroupChanging=jH(S,e),i[S].onTrackChanged=VH(S,e),i[S].getActiveGroup=zH(S,e)});var c=i.AUDIO.activeGroup();if(c){var d=(c.filter(function(S){return S.default})[0]||c[0]).id;i.AUDIO.tracks[d].enabled=!0,i.AUDIO.onGroupChanged(),i.AUDIO.onTrackChanged();var h=i.AUDIO.getActiveGroup();h.playlistLoader?(l.setAudio(!1),o.setAudio(!0)):l.setAudio(!0)}n.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(S){return i[S].onGroupChanged()})}),n.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(S){return i[S].onGroupChanging()})});var p=function(){i.AUDIO.onTrackChanged(),t.trigger({type:"usage",name:"vhs-audio-change"}),t.trigger({type:"usage",name:"hls-audio-change"})};t.audioTracks().addEventListener("change",p),t.remoteTextTracks().addEventListener("change",i.SUBTITLES.onTrackChanged),a.on("dispose",function(){t.audioTracks().removeEventListener("change",p),t.remoteTextTracks().removeEventListener("change",i.SUBTITLES.onTrackChanged)}),t.clearTracks("audio");for(var y in i.AUDIO.tracks)t.audioTracks().addTrack(i.AUDIO.tracks[y])},KH=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(i){e[i]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Hn,activeTrack:Hn,getActiveGroup:Hn,onGroupChanged:Hn,onTrackChanged:Hn,lastTrack_:null,logger_:Yi("MediaGroups["+i+"]")}}),e},YH=60*2,Un,XH=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],QH=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},JH=function(e){var i=e.currentPlaylist,n=e.buffered,t=e.currentTime,a=e.nextPlaylist,s=e.bufferLowWaterLine,o=e.bufferHighWaterLine,l=e.duration,c=e.experimentalBufferBasedABR,d=e.log;if(!a)return ce.log.warn("We received no playlist to switch to. Please check your stream."),!1;var h="allowing switch "+(i&&i.id||"null")+" -> "+a.id;if(!i)return d(h+" as current playlist is not set"),!0;if(a.id===i.id)return!1;var p=Boolean(po(n,t).length);if(!i.endList)return!p&&typeof i.partTargetDuration=="number"?(d("not "+h+" as current playlist is live llhls, but currentTime isn't in buffered."),!1):(d(h+" as current playlist is live"),!0);var y=My(n,t),S=c?fr.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:fr.MAX_BUFFER_LOW_WATER_LINE;if(l<S)return d(h+" as duration < max low water line ("+l+" < "+S+")"),!0;var C=a.attributes.BANDWIDTH,x=i.attributes.BANDWIDTH;if(C<x&&(!c||y<o)){var I=h+" as next bandwidth < current bandwidth ("+C+" < "+x+")";return c&&(I+=" and forwardBuffer < bufferHighWaterLine ("+y+" < "+o+")"),d(I),!0}if((!c||C>x)&&y>=s){var H=h+" as forwardBuffer >= bufferLowWaterLine ("+y+" >= "+s+")";return c&&(H+=" and next bandwidth > current bandwidth ("+C+" > "+x+")"),d(H),!0}return d("not "+h+" as no switching criteria met"),!1},ZH=function(r){Ve(e,r);function e(n){var t;t=r.call(this)||this;var a=n.src,s=n.handleManifestRedirects,o=n.withCredentials,l=n.tech,c=n.bandwidth,d=n.externVhs,h=n.useCueTags,p=n.blacklistDuration,y=n.enableLowInitialPlaylist,S=n.sourceType,C=n.cacheEncryptionKeys,x=n.experimentalBufferBasedABR,I=n.experimentalLeastPixelDiffSelector,H=n.captionServices;if(!a)throw new Error("A non-empty playlist URL or JSON manifest string is required");var Z=n.maxPlaylistRetries;(Z===null||typeof Z>"u")&&(Z=1/0),Un=d,t.experimentalBufferBasedABR=Boolean(x),t.experimentalLeastPixelDiffSelector=Boolean(I),t.withCredentials=o,t.tech_=l,t.vhs_=l.vhs,t.sourceType_=S,t.useCueTags_=h,t.blacklistDuration=p,t.maxPlaylistRetries=Z,t.enableLowInitialPlaylist=y,t.useCueTags_&&(t.cueTagsTrack_=t.tech_.addTextTrack("metadata","ad-cues"),t.cueTagsTrack_.inBandMetadataTrackDispatchType=""),t.requestOptions_={withCredentials:o,handleManifestRedirects:s,maxPlaylistRetries:Z,timeout:null},t.on("error",t.pauseLoading),t.mediaTypes_=KH(),t.mediaSource=new q.MediaSource,t.handleDurationChange_=t.handleDurationChange_.bind(rt(t)),t.handleSourceOpen_=t.handleSourceOpen_.bind(rt(t)),t.handleSourceEnded_=t.handleSourceEnded_.bind(rt(t)),t.mediaSource.addEventListener("durationchange",t.handleDurationChange_),t.mediaSource.addEventListener("sourceopen",t.handleSourceOpen_),t.mediaSource.addEventListener("sourceended",t.handleSourceEnded_),t.seekable_=ce.createTimeRanges(),t.hasPlayed_=!1,t.syncController_=new LH(n),t.segmentMetadataTrack_=l.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,t.decrypter_=new FH,t.sourceUpdater_=new GR(t.mediaSource),t.inbandTextTracks_={},t.timelineChangeController_=new MH;var W={vhs:t.vhs_,parse708captions:n.parse708captions,useDtsForTimestampOffset:n.useDtsForTimestampOffset,captionServices:H,mediaSource:t.mediaSource,currentTime:t.tech_.currentTime.bind(t.tech_),seekable:function(){return t.seekable()},seeking:function(){return t.tech_.seeking()},duration:function(){return t.duration()},hasPlayed:function(){return t.hasPlayed_},goalBufferLength:function(){return t.goalBufferLength()},bandwidth:c,syncController:t.syncController_,decrypter:t.decrypter_,sourceType:t.sourceType_,inbandTextTracks:t.inbandTextTracks_,cacheEncryptionKeys:C,sourceUpdater:t.sourceUpdater_,timelineChangeController:t.timelineChangeController_,experimentalExactManifestTimings:n.experimentalExactManifestTimings};t.masterPlaylistLoader_=t.sourceType_==="dash"?new Lg(a,t.vhs_,t.requestOptions_):new mo(a,t.vhs_,t.requestOptions_),t.setupMasterPlaylistLoaderListeners_(),t.mainSegmentLoader_=new Ng(ce.mergeOptions(W,{segmentMetadataTrack:t.segmentMetadataTrack_,loaderType:"main"}),n),t.audioSegmentLoader_=new Ng(ce.mergeOptions(W,{loaderType:"audio"}),n),t.subtitleSegmentLoader_=new OH(ce.mergeOptions(W,{loaderType:"vtt",featuresNativeTextTracks:t.tech_.featuresNativeTextTracks}),n),t.setupSegmentLoaderListeners_(),t.experimentalBufferBasedABR&&(t.masterPlaylistLoader_.one("loadedplaylist",function(){return t.startABRTimer_()}),t.tech_.on("pause",function(){return t.stopABRTimer_()}),t.tech_.on("play",function(){return t.startABRTimer_()})),XH.forEach(function(le){t[le+"_"]=QH.bind(rt(t),le)}),t.logger_=Yi("MPC"),t.triggeredFmp4Usage=!1,t.tech_.preload()==="none"?(t.loadOnPlay_=function(){t.loadOnPlay_=null,t.masterPlaylistLoader_.load()},t.tech_.one("play",t.loadOnPlay_)):t.masterPlaylistLoader_.load(),t.timeToLoadedData__=-1,t.mainAppendsToLoadedData__=-1,t.audioAppendsToLoadedData__=-1;var j=t.tech_.preload()==="none"?"play":"loadstart";return t.tech_.one(j,function(){var le=Date.now();t.tech_.one("loadeddata",function(){t.timeToLoadedData__=Date.now()-le,t.mainAppendsToLoadedData__=t.mainSegmentLoader_.mediaAppends,t.audioAppendsToLoadedData__=t.audioSegmentLoader_.mediaAppends})}),t}var i=e.prototype;return i.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},i.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},i.appendsToLoadedData_=function(){var t=this.mainAppendsToLoadedData_(),a=this.audioAppendsToLoadedData_();return t===-1||a===-1?-1:t+a},i.timeToLoadedData_=function(){return this.timeToLoadedData__},i.checkABR_=function(){var t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,"abr")},i.switchMedia_=function(t,a,s){var o=this.media(),l=o&&(o.id||o.uri),c=t.id||t.uri;l&&l!==c&&(this.logger_("switch media "+l+" -> "+c+" from "+a),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+a})),this.masterPlaylistLoader_.media(t,s)},i.startABRTimer_=function(){var t=this;this.stopABRTimer_(),this.abrTimer_=q.setInterval(function(){return t.checkABR_()},250)},i.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(q.clearInterval(this.abrTimer_),this.abrTimer_=null)},i.getAudioTrackPlaylists_=function(){var t=this.master(),a=t&&t.playlists||[];if(!t||!t.mediaGroups||!t.mediaGroups.AUDIO)return a;var s=t.mediaGroups.AUDIO,o=Object.keys(s),l;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)l=this.mediaTypes_.AUDIO.activeTrack();else{var c=s.main||o.length&&s[o[0]];for(var d in c)if(c[d].default){l={label:d};break}}if(!l)return a;var h=[];for(var p in s)if(s[p][l.label]){var y=s[p][l.label];if(y.playlists&&y.playlists.length)h.push.apply(h,y.playlists);else if(y.uri)h.push(y);else if(t.playlists.length)for(var S=0;S<t.playlists.length;S++){var C=t.playlists[S];C.attributes&&C.attributes.AUDIO&&C.attributes.AUDIO===p&&h.push(C)}}return h.length?h:a},i.setupMasterPlaylistLoaderListeners_=function(){var t=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var a=t.masterPlaylistLoader_.media(),s=a.targetDuration*1.5*1e3;Pg(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?t.requestOptions_.timeout=0:t.requestOptions_.timeout=s,a.endList&&t.tech_.preload()!=="none"&&(t.mainSegmentLoader_.playlist(a,t.requestOptions_),t.mainSegmentLoader_.load()),qH({sourceType:t.sourceType_,segmentLoaders:{AUDIO:t.audioSegmentLoader_,SUBTITLES:t.subtitleSegmentLoader_,main:t.mainSegmentLoader_},tech:t.tech_,requestOptions:t.requestOptions_,masterPlaylistLoader:t.masterPlaylistLoader_,vhs:t.vhs_,master:t.master(),mediaTypes:t.mediaTypes_,blacklistCurrentPlaylist:t.blacklistCurrentPlaylist.bind(t)}),t.triggerPresenceUsage_(t.master(),a),t.setupFirstPlay(),!t.mediaTypes_.AUDIO.activePlaylistLoader||t.mediaTypes_.AUDIO.activePlaylistLoader.media()?t.trigger("selectedinitialmedia"):t.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){t.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){t.loadOnPlay_&&t.tech_.off("play",t.loadOnPlay_);var a=t.masterPlaylistLoader_.media();if(!a){t.excludeUnsupportedVariants_();var s;if(t.enableLowInitialPlaylist&&(s=t.selectInitialPlaylist()),s||(s=t.selectPlaylist()),!s||!t.shouldSwitchToMedia_(s))return;t.initialMedia_=s,t.switchMedia_(t.initialMedia_,"initial");var o=t.sourceType_==="vhs-json"&&t.initialMedia_.segments;if(!o)return;a=t.initialMedia_}t.handleUpdatedMediaPlaylist(a)}),this.masterPlaylistLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){t.mainSegmentLoader_.abort(),t.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var a=t.masterPlaylistLoader_.media(),s=a.targetDuration*1.5*1e3;Pg(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?t.requestOptions_.timeout=0:t.requestOptions_.timeout=s,t.mainSegmentLoader_.playlist(a,t.requestOptions_),t.mainSegmentLoader_.load(),t.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var a=t.masterPlaylistLoader_.media();if(a.lastExcludeReason_!=="playlist-unchanged"){var s=t.stuckAtPlaylistEnd_(a);s&&(t.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),t.tech_.trigger("playliststuck"))}}),this.masterPlaylistLoader_.on("renditiondisabled",function(){t.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),t.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){t.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),t.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},i.handleUpdatedMediaPlaylist=function(t){this.useCueTags_&&this.updateAdCues_(t),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.updateDuration(!t.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},i.triggerPresenceUsage_=function(t,a){var s=t.mediaGroups||{},o=!0,l=Object.keys(s.AUDIO);for(var c in s.AUDIO)for(var d in s.AUDIO[c]){var h=s.AUDIO[c][d];h.uri||(o=!1)}o&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(s.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),Un.Playlist.isAes(a)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),l.length&&Object.keys(s.AUDIO[l[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},i.shouldSwitchToMedia_=function(t){var a=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,s=this.tech_.currentTime(),o=this.bufferLowWaterLine(),l=this.bufferHighWaterLine(),c=this.tech_.buffered();return JH({buffered:c,currentTime:s,currentPlaylist:a,nextPlaylist:t,bufferLowWaterLine:o,bufferHighWaterLine:l,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},i.setupSegmentLoaderListeners_=function(){var t=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var s=t.selectPlaylist();t.shouldSwitchToMedia_(s)&&t.switchMedia_(s,"bandwidthupdate"),t.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){t.trigger("progress")})),this.mainSegmentLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){t.error=t.mainSegmentLoader_.error_,t.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){t.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),t.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){t.error=t.audioSegmentLoader_.error_,t.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){t.logger_("main segment loader ended"),t.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(s){t.experimentalBufferBasedABR||(t.delegateLoaders_("all",["abort"]),t.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},YH))});var a=function(){if(!t.sourceUpdater_.hasCreatedSourceBuffers())return t.tryToCreateSourceBuffers_();var o=t.getCodecsOrExclude_();!o||t.sourceUpdater_.addOrChangeSourceBuffers(o)};this.mainSegmentLoader_.on("trackinfo",a),this.audioSegmentLoader_.on("trackinfo",a),this.mainSegmentLoader_.on("fmp4",function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){t.logger_("audioSegmentLoader ended"),t.onEndOfStream()})},i.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},i.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},i.smoothQualityChange_=function(t){t===void 0&&(t=this.selectPlaylist()),this.fastQualityChange_(t)},i.fastQualityChange_=function(t){var a=this;if(t===void 0&&(t=this.selectPlaylist()),t===this.masterPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(t,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){ce.browser.IE_VERSION||ce.browser.IS_EDGE?a.tech_.setCurrentTime(a.tech_.currentTime()+.04):a.tech_.setCurrentTime(a.tech_.currentTime())})},i.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var t=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<t.start(0))return this.tech_.setCurrentTime(t.end(t.length-1))}},i.setupFirstPlay=function(){var t=this,a=this.masterPlaylistLoader_.media();if(!a||this.tech_.paused()||this.hasPlayed_)return!1;if(!a.endList){var s=this.seekable();if(!s.length)return!1;if(ce.browser.IE_VERSION&&this.tech_.readyState()===0)return this.tech_.one("loadedmetadata",function(){t.trigger("firstplay"),t.tech_.setCurrentTime(s.end(0)),t.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(s.end(0))}return this.hasPlayed_=!0,this.load(),!0},i.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var t=this.tech_.play();typeof t<"u"&&typeof t.then=="function"&&t.then(null,function(a){})}this.trigger("sourceopen")},i.handleSourceEnded_=function(){if(!!this.inbandTextTracks_.metadataTrack_){var t=this.inbandTextTracks_.metadataTrack_.cues;if(!(!t||!t.length)){var a=this.duration();t[t.length-1].endTime=isNaN(a)||Math.abs(a)===1/0?Number.MAX_VALUE:a}}},i.handleDurationChange_=function(){this.tech_.trigger("durationchange")},i.onEndOfStream=function(){var t=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var a=this.mainSegmentLoader_.getCurrentMediaInfo_();!a||a.hasVideo?t=t&&this.audioSegmentLoader_.ended_:t=this.audioSegmentLoader_.ended_}!t||(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},i.stuckAtPlaylistEnd_=function(t){var a=this.seekable();if(!a.length)return!1;var s=this.syncController_.getExpiredTime(t,this.duration());if(s===null)return!1;var o=Un.Playlist.playlistEnd(t,s),l=this.tech_.currentTime(),c=this.tech_.buffered();if(!c.length)return o-l<=dn;var d=c.end(c.length-1);return d-l<=dn&&o-d<=dn},i.blacklistCurrentPlaylist=function(t,a){t===void 0&&(t={});var s=t.playlist||this.masterPlaylistLoader_.media();if(a=a||t.blacklistDuration||this.blacklistDuration,!s){this.error=t,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}s.playlistErrors_++;var o=this.masterPlaylistLoader_.master.playlists,l=o.filter(dh),c=l.length===1&&l[0]===s;if(o.length===1&&a!==1/0)return ce.log.warn("Problem encountered with playlist "+s.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(c);if(c){var d=!1;o.forEach(function(I){if(I!==s){var H=I.excludeUntil;typeof H<"u"&&H!==1/0&&(d=!0,delete I.excludeUntil)}}),d&&(ce.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}var h;s.playlistErrors_>this.maxPlaylistRetries?h=1/0:h=Date.now()+a*1e3,s.excludeUntil=h,t.reason&&(s.lastExcludeReason_=t.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var p=this.selectPlaylist();if(!p){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}var y=t.internal?this.logger_:ce.log.warn,S=t.message?" "+t.message:"";y((t.internal?"Internal problem":"Problem")+" encountered with playlist "+s.id+"."+(S+" Switching to playlist "+p.id+".")),p.attributes.AUDIO!==s.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),p.attributes.SUBTITLES!==s.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var C=p.targetDuration/2*1e3||5*1e3,x=typeof p.lastRequest=="number"&&Date.now()-p.lastRequest<=C;return this.switchMedia_(p,"exclude",c||x)},i.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},i.delegateLoaders_=function(t,a){var s=this,o=[],l=t==="all";(l||t==="main")&&o.push(this.masterPlaylistLoader_);var c=[];(l||t==="audio")&&c.push("AUDIO"),(l||t==="subtitle")&&(c.push("CLOSED-CAPTIONS"),c.push("SUBTITLES")),c.forEach(function(d){var h=s.mediaTypes_[d]&&s.mediaTypes_[d].activePlaylistLoader;h&&o.push(h)}),["main","audio","subtitle"].forEach(function(d){var h=s[d+"SegmentLoader_"];h&&(t===d||t==="all")&&o.push(h)}),o.forEach(function(d){return a.forEach(function(h){typeof d[h]=="function"&&d[h]()})})},i.setCurrentTime=function(t){var a=po(this.tech_.buffered(),t);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())||!this.masterPlaylistLoader_.media().segments)return 0;if(a&&a.length)return t;this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.load()},i.duration=function(){if(!this.masterPlaylistLoader_)return 0;var t=this.masterPlaylistLoader_.media();return t?t.endList?this.mediaSource?this.mediaSource.duration:Un.Playlist.duration(t):1/0:0},i.seekable=function(){return this.seekable_},i.onSyncInfoUpdate_=function(){var t;if(!!this.masterPlaylistLoader_){var a=this.masterPlaylistLoader_.media();if(!!a){var s=this.syncController_.getExpiredTime(a,this.duration());if(s!==null){var o=this.masterPlaylistLoader_.master,l=Un.Playlist.seekable(a,s,Un.Playlist.liveEdgeDelay(o,a));if(l.length!==0&&!(this.mediaTypes_.AUDIO.activePlaylistLoader&&(a=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),s=this.syncController_.getExpiredTime(a,this.duration()),s===null||(t=Un.Playlist.seekable(a,s,Un.Playlist.liveEdgeDelay(o,a)),t.length===0)))){var c,d;this.seekable_&&this.seekable_.length&&(c=this.seekable_.end(0),d=this.seekable_.start(0)),t?t.start(0)>l.end(0)||l.start(0)>t.end(0)?this.seekable_=l:this.seekable_=ce.createTimeRanges([[t.start(0)>l.start(0)?t.start(0):l.start(0),t.end(0)<l.end(0)?t.end(0):l.end(0)]]):this.seekable_=l,!(this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===c&&this.seekable_.start(0)===d)&&(this.logger_("seekable updated ["+uR(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},i.updateDuration=function(t){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,t),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(t){var a=this.seekable();if(!a.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<a.end(a.length-1))&&this.sourceUpdater_.setDuration(a.end(a.length-1));return}var s=this.tech_.buffered(),o=Un.Playlist.duration(this.masterPlaylistLoader_.media());s.length>0&&(o=Math.max(o,s.end(s.length-1))),this.mediaSource.duration!==o&&this.sourceUpdater_.setDuration(o)},i.dispose=function(){var t=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(a){var s=t.mediaTypes_[a].groups;for(var o in s)s[o].forEach(function(l){l.playlistLoader&&l.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},i.master=function(){return this.masterPlaylistLoader_.master},i.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},i.areMediaTypesKnown_=function(){var t=!!this.mediaTypes_.AUDIO.activePlaylistLoader,a=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),s=t?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!a||!s)},i.getCodecsOrExclude_=function(){var t=this,a={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};a.video=a.main;var s=fl(this.master(),this.media()),o={},l=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(a.main.hasVideo&&(o.video=s.video||a.main.videoCodec||D2),a.main.isMuxed&&(o.video+=","+(s.audio||a.main.audioCodec||eb)),(a.main.hasAudio&&!a.main.isMuxed||a.audio.hasAudio||l)&&(o.audio=s.audio||a.main.audioCodec||a.audio.audioCodec||eb,a.audio.isFmp4=a.main.hasAudio&&!a.main.isMuxed?a.main.isFmp4:a.audio.isFmp4),!o.audio&&!o.video){this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0});return}var c=function(x,I){return x?Rf(I):fm(I)},d={},h;if(["video","audio"].forEach(function(C){if(o.hasOwnProperty(C)&&!c(a[C].isFmp4,o[C])){var x=a[C].isFmp4?"browser":"muxer";d[x]=d[x]||[],d[x].push(o[C]),C==="audio"&&(h=x)}}),l&&h&&this.media().attributes.AUDIO){var p=this.media().attributes.AUDIO;this.master().playlists.forEach(function(C){var x=C.attributes&&C.attributes.AUDIO;x===p&&C!==t.media()&&(C.excludeUntil=1/0)}),this.logger_("excluding audio group "+p+" as "+h+' does not support codec(s): "'+o.audio+'"')}if(Object.keys(d).length){var y=Object.keys(d).reduce(function(C,x){return C&&(C+=", "),C+=x+' does not support codec(s): "'+d[x].join(",")+'"',C},"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:y,blacklistDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var S=[];if(["video","audio"].forEach(function(C){var x=(on(t.sourceUpdater_.codecs[C]||"")[0]||{}).type,I=(on(o[C]||"")[0]||{}).type;x&&I&&x.toLowerCase()!==I.toLowerCase()&&S.push('"'+t.sourceUpdater_.codecs[C]+'" -> "'+o[C]+'"')}),S.length){this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+S.join(", ")+".",blacklistDuration:1/0,internal:!0});return}}return o},i.tryToCreateSourceBuffers_=function(){if(!(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers())&&!!this.areMediaTypesKnown_()){var t=this.getCodecsOrExclude_();if(!!t){this.sourceUpdater_.createSourceBuffers(t);var a=[t.video,t.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(a)}}},i.excludeUnsupportedVariants_=function(){var t=this,a=this.master().playlists,s=[];Object.keys(a).forEach(function(o){var l=a[o];if(s.indexOf(l.id)===-1){s.push(l.id);var c=fl(t.master,l),d=[];c.audio&&!fm(c.audio)&&!Rf(c.audio)&&d.push("audio codec "+c.audio),c.video&&!fm(c.video)&&!Rf(c.video)&&d.push("video codec "+c.video),c.text&&c.text==="stpp.ttml.im1t"&&d.push("text codec "+c.text),d.length&&(l.excludeUntil=1/0,t.logger_("excluding "+l.id+" for unsupported: "+d.join(", ")))}})},i.excludeIncompatibleVariants_=function(t){var a=this,s=[],o=this.master().playlists,l=pd(on(t)),c=iS(l),d=l.video&&on(l.video)[0]||null,h=l.audio&&on(l.audio)[0]||null;Object.keys(o).forEach(function(p){var y=o[p];if(!(s.indexOf(y.id)!==-1||y.excludeUntil===1/0)){s.push(y.id);var S=[],C=fl(a.masterPlaylistLoader_.master,y),x=iS(C);if(!(!C.audio&&!C.video)){if(x!==c&&S.push('codec count "'+x+'" !== "'+c+'"'),!a.sourceUpdater_.canChangeType()){var I=C.video&&on(C.video)[0]||null,H=C.audio&&on(C.audio)[0]||null;I&&d&&I.type.toLowerCase()!==d.type.toLowerCase()&&S.push('video codec "'+I.type+'" !== "'+d.type+'"'),H&&h&&H.type.toLowerCase()!==h.type.toLowerCase()&&S.push('audio codec "'+H.type+'" !== "'+h.type+'"')}S.length&&(y.excludeUntil=1/0,a.logger_("blacklisting "+y.id+": "+S.join(" && ")))}}})},i.updateAdCues_=function(t){var a=0,s=this.seekable();s.length&&(a=s.start(0)),DH(t,this.cueTagsTrack_,a)},i.goalBufferLength=function(){var t=this.tech_.currentTime(),a=fr.GOAL_BUFFER_LENGTH,s=fr.GOAL_BUFFER_LENGTH_RATE,o=Math.max(a,fr.MAX_GOAL_BUFFER_LENGTH);return Math.min(a+t*s,o)},i.bufferLowWaterLine=function(){var t=this.tech_.currentTime(),a=fr.BUFFER_LOW_WATER_LINE,s=fr.BUFFER_LOW_WATER_LINE_RATE,o=Math.max(a,fr.MAX_BUFFER_LOW_WATER_LINE),l=Math.max(a,fr.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(a+t*s,this.experimentalBufferBasedABR?l:o)},i.bufferHighWaterLine=function(){return fr.BUFFER_HIGH_WATER_LINE},e}(ce.EventTarget),e8=function(e,i,n){return function(t){var a=e.master.playlists[i],s=Fy(a),o=dh(a);return typeof t>"u"?o:(t?delete a.disabled:a.disabled=!0,t!==o&&!s&&(n(),t?e.trigger("renditionenabled"):e.trigger("renditiondisabled")),t)}},t8=function(e,i,n){var t=e.masterPlaylistController_,a=e.options_.smoothQualityChange,s=a?"smooth":"fast",o=t[s+"QualityChange_"].bind(t);if(i.attributes){var l=i.attributes.RESOLUTION;this.width=l&&l.width,this.height=l&&l.height,this.bandwidth=i.attributes.BANDWIDTH}this.codecs=fl(t.master(),i),this.playlist=i,this.id=n,this.enabled=e8(e.playlists,i.id,o)},r8=function(e){e.representations=function(){var i=e.masterPlaylistController_.master(),n=$l(i)?e.masterPlaylistController_.getAudioTrackPlaylists_():i.playlists;return n?n.filter(function(t){return!Fy(t)}).map(function(t,a){return new t8(e,t,t.id)}):[]}},mS=["seeking","seeked","pause","playing","error"],i8=function(){function r(i){var n=this;this.masterPlaylistController_=i.masterPlaylistController,this.tech_=i.tech,this.seekable=i.seekable,this.allowSeeksWithinUnsafeLiveWindow=i.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=i.liveRangeSafeTimeDelta,this.media=i.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Yi("PlaybackWatcher"),this.logger_("initialize");var t=function(){return n.monitorCurrentTime_()},a=function(){return n.monitorCurrentTime_()},s=function(){return n.techWaiting_()},o=function(){return n.cancelTimer_()},l=this.masterPlaylistController_,c=["main","subtitle","audio"],d={};c.forEach(function(p){d[p]={reset:function(){return n.resetSegmentDownloads_(p)},updateend:function(){return n.checkSegmentDownloads_(p)}},l[p+"SegmentLoader_"].on("appendsdone",d[p].updateend),l[p+"SegmentLoader_"].on("playlistupdate",d[p].reset),n.tech_.on(["seeked","seeking"],d[p].reset)});var h=function(y){["main","audio"].forEach(function(S){l[S+"SegmentLoader_"][y]("appended",n.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){n.fixesBadSeeks_()&&(n.consecutiveUpdates=0,n.lastRecordedTime=n.tech_.currentTime(),h("off"))},this.clearSeekingAppendCheck_=function(){return h("off")},this.watchForBadSeeking_=function(){n.clearSeekingAppendCheck_(),h("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",s),this.tech_.on(mS,o),this.tech_.on("canplay",a),this.tech_.one("play",t),this.dispose=function(){n.clearSeekingAppendCheck_(),n.logger_("dispose"),n.tech_.off("waiting",s),n.tech_.off(mS,o),n.tech_.off("canplay",a),n.tech_.off("play",t),n.tech_.off("seeking",n.watchForBadSeeking_),n.tech_.off("seeked",n.clearSeekingAppendCheck_),c.forEach(function(p){l[p+"SegmentLoader_"].off("appendsdone",d[p].updateend),l[p+"SegmentLoader_"].off("playlistupdate",d[p].reset),n.tech_.off(["seeked","seeking"],d[p].reset)}),n.checkCurrentTimeTimeout_&&q.clearTimeout(n.checkCurrentTimeTimeout_),n.cancelTimer_()}}var e=r.prototype;return e.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&q.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=q.setTimeout(this.monitorCurrentTime_.bind(this),250)},e.resetSegmentDownloads_=function(n){var t=this.masterPlaylistController_[n+"SegmentLoader_"];this[n+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+n+" loader"),this[n+"StalledDownloads_"]=0,this[n+"Buffered_"]=t.buffered_()},e.checkSegmentDownloads_=function(n){var t=this.masterPlaylistController_,a=t[n+"SegmentLoader_"],s=a.buffered_(),o=J4(this[n+"Buffered_"],s);if(this[n+"Buffered_"]=s,o){this.resetSegmentDownloads_(n);return}this[n+"StalledDownloads_"]++,this.logger_("found #"+this[n+"StalledDownloads_"]+" "+n+" appends that did not increase buffer (possible stalled download)",{playlistId:a.playlist_&&a.playlist_.id,buffered:hs(s)}),!(this[n+"StalledDownloads_"]<10)&&(this.logger_(n+" loader stalled download exclusion"),this.resetSegmentDownloads_(n),this.tech_.trigger({type:"usage",name:"vhs-"+n+"-download-exclusion"}),n!=="subtitle"&&t.blacklistCurrentPlaylist({message:"Excessive "+n+" segment downloading detected."},1/0))},e.checkCurrentTime_=function(){if(!(this.tech_.paused()||this.tech_.seeking())){var n=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===n&&(!t.length||n+dn>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&n===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):n===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=n)}},e.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},e.fixesBadSeeks_=function(){var n=this.tech_.seeking();if(!n)return!1;var t=this.seekable(),a=this.tech_.currentTime(),s=this.afterSeekableWindow_(t,a,this.media(),this.allowSeeksWithinUnsafeLiveWindow),o;if(s){var l=t.end(t.length-1);o=l}if(this.beforeSeekableWindow_(t,a)){var c=t.start(0);o=c+(c===t.end(0)?0:dn)}if(typeof o<"u")return this.logger_("Trying to seek outside of seekable at time "+a+" with "+("seekable range "+uR(t)+". Seeking to ")+(o+".")),this.tech_.setCurrentTime(o),!0;for(var d=this.masterPlaylistController_.sourceUpdater_,h=this.tech_.buffered(),p=d.audioBuffer?d.audioBuffered():null,y=d.videoBuffer?d.videoBuffered():null,S=this.media(),C=S.partTargetDuration?S.partTargetDuration:(S.targetDuration-Pa)*2,x=[p,y],I=0;I<x.length;I++)if(!!x[I]){var H=My(x[I],a);if(H<C)return!1}var Z=mf(h,a);return Z.length===0?!1:(o=Z.start(0)+dn,this.logger_("Buffered region starts ("+Z.start(0)+") "+(" just beyond seek point ("+a+"). Seeking to "+o+".")),this.tech_.setCurrentTime(o),!0)},e.waiting_=function(){if(!this.techWaiting_()){var n=this.tech_.currentTime(),t=this.tech_.buffered(),a=po(t,n);if(a.length&&n+3<=a.end(0)){this.cancelTimer_(),this.tech_.setCurrentTime(n),this.logger_("Stopped at "+n+" while inside a buffered region "+("["+a.start(0)+" -> "+a.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}},e.techWaiting_=function(){var n=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()||this.timer_!==null)return!0;if(this.beforeSeekableWindow_(n,t)){var a=n.end(n.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to "+("live point (seekable end) "+a)),this.cancelTimer_(),this.tech_.setCurrentTime(a),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var s=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,o=this.tech_.buffered(),l=this.videoUnderflow_({audioBuffered:s.audioBuffered(),videoBuffered:s.videoBuffered(),currentTime:t});if(l)return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var c=mf(o,t);if(c.length>0){var d=c.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+d+", seeking "+("to "+c.start(0))),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),d*1e3,t),!0}return!1},e.afterSeekableWindow_=function(n,t,a,s){if(s===void 0&&(s=!1),!n.length)return!1;var o=n.end(n.length-1)+dn,l=!a.endList;return l&&s&&(o=n.end(n.length-1)+a.targetDuration*3),t>o},e.beforeSeekableWindow_=function(n,t){return!!(n.length&&n.start(0)>0&&t<n.start(0)-this.liveRangeSafeTimeDelta)},e.videoUnderflow_=function(n){var t=n.videoBuffered,a=n.audioBuffered,s=n.currentTime;if(!!t){var o;if(t.length&&a.length){var l=po(t,s-3),c=po(t,s),d=po(a,s);d.length&&!c.length&&l.length&&(o={start:l.end(0),end:d.end(0)})}else{var h=mf(t,s);h.length||(o=this.gapFromVideoUnderflow_(t,s))}return o?(this.logger_("Encountered a gap in video from "+o.start+" to "+o.end+". "+("Seeking to current time "+s)),!0):!1}},e.skipTheGap_=function(n){var t=this.tech_.buffered(),a=this.tech_.currentTime(),s=mf(t,a);this.cancelTimer_(),!(s.length===0||a!==n)&&(this.logger_("skipTheGap_:","currentTime:",a,"scheduled currentTime:",n,"nextRange start:",s.start(0)),this.tech_.setCurrentTime(s.start(0)+Pa),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},e.gapFromVideoUnderflow_=function(n,t){for(var a=Y4(n),s=0;s<a.length;s++){var o=a.start(s),l=a.end(s);if(t-o<4&&t-o>2)return{start:o,end:l}}return null},r}(),n8={errorInterval:30,getSource:function(e){var i=this.tech({IWillNotUseThisInPlugins:!0}),n=i.currentSource_||this.currentSource();return e(n)}},a8=function r(e,i){var n=0,t=0,a=ce.mergeOptions(n8,i);e.ready(function(){e.trigger({type:"usage",name:"vhs-error-reload-initialized"}),e.trigger({type:"usage",name:"hls-error-reload-initialized"})});var s=function(){t&&e.currentTime(t)},o=function(p){p!=null&&(t=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",s),e.src(p),e.trigger({type:"usage",name:"vhs-error-reload"}),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())},l=function(){if(Date.now()-n<a.errorInterval*1e3){e.trigger({type:"usage",name:"vhs-error-reload-canceled"}),e.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!a.getSource||typeof a.getSource!="function"){ce.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return n=Date.now(),a.getSource.call(e,o)},c=function h(){e.off("loadedmetadata",s),e.off("error",l),e.off("dispose",h)},d=function(p){c(),r(e,p)};e.on("error",l),e.on("dispose",c),e.reloadSourceOnError=d},s8=function(e){a8(this,e)},zR="2.14.3",o8="6.0.1",u8="0.21.1",l8="4.7.1",c8="3.1.3",Sr={PlaylistLoader:mo,Playlist:ri,utils:SV,STANDARD_PLAYLIST_SELECTOR:aS,INITIAL_PLAYLIST_SELECTOR:lH,lastBandwidthSelector:aS,movingAverageBandwidthSelector:oH,comparePlaylistBandwidth:Vy,comparePlaylistResolution:sH,xhr:xR()};Object.keys(fr).forEach(function(r){Object.defineProperty(Sr,r,{get:function(){return ce.log.warn("using Vhs."+r+" is UNSAFE be sure you know what you are doing"),fr[r]},set:function(i){if(ce.log.warn("using Vhs."+r+" is UNSAFE be sure you know what you are doing"),typeof i!="number"||i<0){ce.log.warn("value of Vhs."+r+" must be greater than or equal to 0");return}fr[r]=i}})});var qR="videojs-vhs",KR=function(e,i){for(var n=i.media(),t=-1,a=0;a<e.length;a++)if(e[a].id===n.id){t=a;break}e.selectedIndex_=t,e.trigger({selectedIndex:t,type:"change"})},f8=function(e,i){i.representations().forEach(function(n){e.addQualityLevel(n)}),KR(e,i.playlists)};Sr.canPlaySource=function(){return ce.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var d8=function(e,i,n){if(!e)return e;var t={};i&&i.attributes&&i.attributes.CODECS&&(t=pd(on(i.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(t.audio=n.attributes.CODECS);var a=Tl(t.video),s=Tl(t.audio),o={};for(var l in e)o[l]={},s&&(o[l].audioContentType=s),a&&(o[l].videoContentType=a),i.contentProtection&&i.contentProtection[l]&&i.contentProtection[l].pssh&&(o[l].pssh=i.contentProtection[l].pssh),typeof e[l]=="string"&&(o[l].url=e[l]);return ce.mergeOptions(e,o)},h8=function(e,i){return e.reduce(function(n,t){if(!t.contentProtection)return n;var a=i.reduce(function(s,o){var l=t.contentProtection[o];return l&&l.pssh&&(s[o]={pssh:l.pssh}),s},{});return Object.keys(a).length&&n.push(a),n},[])},p8=function(e){var i=e.player,n=e.sourceKeySystems,t=e.audioMedia,a=e.mainPlaylists;if(!i.eme.initializeMediaKeys)return Promise.resolve();var s=t?a.concat([t]):a,o=h8(s,Object.keys(n)),l=[],c=[];return o.forEach(function(d){c.push(new Promise(function(h,p){i.tech_.one("keysessioncreated",h)})),l.push(new Promise(function(h,p){i.eme.initializeMediaKeys({keySystems:d},function(y){if(y){p(y);return}h()})}))}),Promise.race([Promise.all(l),Promise.race(c)])},m8=function(e){var i=e.player,n=e.sourceKeySystems,t=e.media,a=e.audioMedia,s=d8(n,t,a);return s?(i.currentSource().keySystems=s,s&&!i.eme?(ce.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},YR=function(){if(!q.localStorage)return null;var e=q.localStorage.getItem(qR);if(!e)return null;try{return JSON.parse(e)}catch{return null}},g8=function(e){if(!q.localStorage)return!1;var i=YR();i=i?ce.mergeOptions(i,e):e;try{q.localStorage.setItem(qR,JSON.stringify(i))}catch{return!1}return i},v8=function(e){return e.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(e.substring(e.indexOf(",")+1)):e};Sr.supportsNativeHls=function(){if(!je||!je.createElement)return!1;var r=je.createElement("video");if(!ce.getTech("Html5").isSupported())return!1;var e=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return e.some(function(i){return/maybe|probably/i.test(r.canPlayType(i))})}();Sr.supportsNativeDash=function(){return!je||!je.createElement||!ce.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(je.createElement("video").canPlayType("application/dash+xml"))}();Sr.supportsTypeNatively=function(r){return r==="hls"?Sr.supportsNativeHls:r==="dash"?Sr.supportsNativeDash:!1};Sr.isSupported=function(){return ce.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var y8=ce.getComponent("Component"),Wy=function(r){Ve(e,r);function e(n,t,a){var s;if(s=r.call(this,t,ce.mergeOptions(a.hls,a.vhs))||this,a.hls&&Object.keys(a.hls).length&&ce.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),typeof a.initialBandwidth=="number"&&(s.options_.bandwidth=a.initialBandwidth),s.logger_=Yi("VhsHandler"),t.options_&&t.options_.playerId){var o=ce(t.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return ce.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),t.trigger({type:"usage",name:"hls-player-access"}),rt(s)},configurable:!0}),o.hasOwnProperty("vhs")||Object.defineProperty(o,"vhs",{get:function(){return ce.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),t.trigger({type:"usage",name:"vhs-player-access"}),rt(s)},configurable:!0}),o.hasOwnProperty("dash")||Object.defineProperty(o,"dash",{get:function(){return ce.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),rt(s)},configurable:!0}),s.player_=o}if(s.tech_=t,s.source_=n,s.stats={},s.ignoreNextSeekingEvent_=!1,s.setOptions_(),s.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(s.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return s.on(je,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(l){var c=je.fullscreenElement||je.webkitFullscreenElement||je.mozFullScreenElement||je.msFullscreenElement;c&&c.contains(s.tech_.el())?s.masterPlaylistController_.fastQualityChange_():s.masterPlaylistController_.checkABR_()}),s.on(s.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),s.on(s.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),s.on(s.tech_,"play",s.play),s}var i=e.prototype;return i.setOptions_=function(){var t=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects!==!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,typeof this.options_.blacklistDuration!="number"&&(this.options_.blacklistDuration=5*60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){var a=YR();a&&a.bandwidth&&(this.options_.bandwidth=a.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),a&&a.throughput&&(this.options_.throughput=a.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=fr.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===fr.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(s){typeof t.source_[s]<"u"&&(t.options_[s]=t.source_[s])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},i.src=function(t,a){var s=this;if(!!t){this.setOptions_(),this.options_.src=v8(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Sr,this.options_.sourceType=fC(a),this.options_.seekTo=function(c){s.tech_.setCurrentTime(c)},this.options_.smoothQualityChange&&ce.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new ZH(this.options_);var o=ce.mergeOptions({liveRangeSafeTimeDelta:dn},this.options_,{seekable:function(){return s.seekable()},media:function(){return s.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new i8(o),this.masterPlaylistController_.on("error",function(){var c=ce.players[s.tech_.options_.playerId],d=s.masterPlaylistController_.error;typeof d=="object"&&!d.code?d.code=3:typeof d=="string"&&(d={message:d,code:3}),c.error(d)});var l=this.options_.experimentalBufferBasedABR?Sr.movingAverageBandwidthSelector(.55):Sr.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):l.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Sr.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(d){this.masterPlaylistController_.selectPlaylist=d.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(d){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=d,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var d=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,h=q.navigator.connection||q.navigator.mozConnection||q.navigator.webkitConnection,p=1e7;if(this.options_.useNetworkInformationApi&&h){var y=h.downlink*1e3*1e3;y>=p&&d>=p?d=Math.max(d,y):d=y}return d},set:function(d){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=d,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var d=1/(this.bandwidth||1),h;this.throughput>0?h=1/this.throughput:h=0;var p=Math.floor(1/(d+h));return p},set:function(){ce.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return s.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return s.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return s.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return s.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return s.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return s.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return s.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return s.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return s.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return s.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return s.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return hs(s.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return s.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return s.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return s.tech_.name_},enumerable:!0},duration:{get:function(){return s.tech_.duration()},enumerable:!0},master:{get:function(){return s.playlists.master},enumerable:!0},playerDimensions:{get:function(){return s.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return hs(s.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return s.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){s.options_.useBandwidthFromLocalStorage&&g8({bandwidth:s.bandwidth,throughput:Math.round(s.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){r8(s)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){s.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=q.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},i.createKeySessions_=function(){var t=this,a=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),p8({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:a&&a.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){t.logger_("created EME key session"),t.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(s){t.logger_("error while creating EME key session",s),t.player_.error({message:"Failed to initialize media keys for EME",code:3})})},i.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},i.setupEme_=function(){var t=this,a=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,s=m8({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:a&&a.media()});if(this.player_.tech_.on("keystatuschange",function(o){if(o.status==="output-restricted"){var l=t.masterPlaylistController_.master();if(!(!l||!l.playlists)){var c=[];if(l.playlists.forEach(function(h){h&&h.attributes&&h.attributes.RESOLUTION&&h.attributes.RESOLUTION.height>=720&&(!h.excludeUntil||h.excludeUntil<1/0)&&(h.excludeUntil=1/0,c.push(h))}),c.length){var d;(d=ce.log).warn.apply(d,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(c)),t.masterPlaylistController_.fastQualityChange_()}}}}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),ce.browser.IE_VERSION===11||!s){this.masterPlaylistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()},i.setupQualityLevels_=function(){var t=this,a=ce.players[this.tech_.options_.playerId];!a||!a.qualityLevels||this.qualityLevels_||(this.qualityLevels_=a.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){f8(t.qualityLevels_,t)}),this.playlists.on("mediachange",function(){KR(t.qualityLevels_,t.playlists)}))},e.version=function(){return{"@videojs/http-streaming":zR,"mux.js":o8,"mpd-parser":u8,"m3u8-parser":l8,"aes-decrypter":c8}},i.version=function(){return this.constructor.version()},i.canChangeType=function(){return GR.canChangeType()},i.play=function(){this.masterPlaylistController_.play()},i.setCurrentTime=function(t){this.masterPlaylistController_.setCurrentTime(t)},i.duration=function(){return this.masterPlaylistController_.duration()},i.seekable=function(){return this.masterPlaylistController_.seekable()},i.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&q.URL.revokeObjectURL&&(q.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),r.prototype.dispose.call(this)},i.convertToProgramTime=function(t,a){return PV({playlist:this.masterPlaylistController_.media(),time:t,callback:a})},i.seekToProgramTime=function(t,a,s,o){return s===void 0&&(s=!0),o===void 0&&(o=2),OV({programTime:t,playlist:this.masterPlaylistController_.media(),retryCount:o,pauseAfterSeek:s,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:a})},e}(y8),hh={name:"videojs-http-streaming",VERSION:zR,canHandleSource:function(e,i){i===void 0&&(i={});var n=ce.mergeOptions(ce.options,i);return hh.canPlayType(e.type,n)},handleSource:function(e,i,n){n===void 0&&(n={});var t=ce.mergeOptions(ce.options,n);return i.vhs=new Wy(e,i,t),ce.hasOwnProperty("hls")||Object.defineProperty(i,"hls",{get:function(){return ce.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),i.vhs},configurable:!0}),i.vhs.xhr=xR(),i.vhs.src(e.src,e.type),i.vhs},canPlayType:function(e,i){i===void 0&&(i={});var n=ce.mergeOptions(ce.options,i),t=n.vhs;t=t===void 0?{}:t;var a=t.overrideNative,s=a===void 0?!ce.browser.IS_ANY_SAFARI:a,o=n.hls;o=o===void 0?{}:o;var l=o.overrideNative,c=l===void 0?!1:l,d=fC(e),h=d&&(!Sr.supportsTypeNatively(d)||c||s);return h?"maybe":""}},_8=function(){return Rf("avc1.4d400d,mp4a.40.2")};_8()&&ce.getTech("Html5").registerSourceHandler(hh,0);ce.VhsHandler=Wy;Object.defineProperty(ce,"HlsHandler",{get:function(){return ce.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Wy},configurable:!0});ce.VhsSourceHandler=hh;Object.defineProperty(ce,"HlsSourceHandler",{get:function(){return ce.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),hh},configurable:!0});ce.Vhs=Sr;Object.defineProperty(ce,"Hls",{get:function(){return ce.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Sr},configurable:!0});ce.use||(ce.registerComponent("Hls",Sr),ce.registerComponent("Vhs",Sr));ce.options.vhs=ce.options.vhs||{};ce.options.hls=ce.options.hls||{};if(!ce.getPlugin||!ce.getPlugin("reloadSourceOnError")){var T8=ce.registerPlugin||ce.plugin;T8("reloadSourceOnError",s8)}const b8=Object.freeze(Object.defineProperty({__proto__:null,default:ce},Symbol.toStringTag,{value:"Module"}));let XR=!0,QR=!0;function If(r,e,i){const n=r.match(e);return n&&n.length>=i&&parseInt(n[i],10)}function tu(r,e,i){if(!r.RTCPeerConnection)return;const n=r.RTCPeerConnection.prototype,t=n.addEventListener;n.addEventListener=function(s,o){if(s!==e)return t.apply(this,arguments);const l=c=>{const d=i(c);d&&(o.handleEvent?o.handleEvent(d):o(d))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(o,l),t.apply(this,[s,l])};const a=n.removeEventListener;n.removeEventListener=function(s,o){if(s!==e||!this._eventMap||!this._eventMap[e])return a.apply(this,arguments);if(!this._eventMap[e].has(o))return a.apply(this,arguments);const l=this._eventMap[e].get(o);return this._eventMap[e].delete(o),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,a.apply(this,[s,l])},Object.defineProperty(n,"on"+e,{get(){return this["_on"+e]},set(s){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),s&&this.addEventListener(e,this["_on"+e]=s)},enumerable:!0,configurable:!0})}function S8(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(XR=r,r?"adapter.js logging disabled":"adapter.js logging enabled")}function x8(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(QR=!r,"adapter.js deprecation warnings "+(r?"disabled":"enabled"))}function JR(){if(typeof window=="object"){if(XR)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function $y(r,e){!QR||console.warn(r+" is deprecated, please use "+e+" instead.")}function E8(r){const e={browser:null,version:null};if(typeof r>"u"||!r.navigator)return e.browser="Not a browser.",e;const{navigator:i}=r;if(i.mozGetUserMedia)e.browser="firefox",e.version=If(i.userAgent,/Firefox\/(\d+)\./,1);else if(i.webkitGetUserMedia||r.isSecureContext===!1&&r.webkitRTCPeerConnection)e.browser="chrome",e.version=If(i.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(r.RTCPeerConnection&&i.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=If(i.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=r.RTCRtpTransceiver&&"currentDirection"in r.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function gS(r){return Object.prototype.toString.call(r)==="[object Object]"}function ZR(r){return gS(r)?Object.keys(r).reduce(function(e,i){const n=gS(r[i]),t=n?ZR(r[i]):r[i],a=n&&!Object.keys(t).length;return t===void 0||a?e:Object.assign(e,{[i]:t})},{}):r}function Bg(r,e,i){!e||i.has(e.id)||(i.set(e.id,e),Object.keys(e).forEach(n=>{n.endsWith("Id")?Bg(r,r.get(e[n]),i):n.endsWith("Ids")&&e[n].forEach(t=>{Bg(r,r.get(t),i)})}))}function vS(r,e,i){const n=i?"outbound-rtp":"inbound-rtp",t=new Map;if(e===null)return t;const a=[];return r.forEach(s=>{s.type==="track"&&s.trackIdentifier===e.id&&a.push(s)}),a.forEach(s=>{r.forEach(o=>{o.type===n&&o.trackId===s.id&&Bg(r,o,t)})}),t}const yS=JR;function ew(r,e){const i=r&&r.navigator;if(!i.mediaDevices)return;const n=function(o){if(typeof o!="object"||o.mandatory||o.optional)return o;const l={};return Object.keys(o).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const d=typeof o[c]=="object"?o[c]:{ideal:o[c]};d.exact!==void 0&&typeof d.exact=="number"&&(d.min=d.max=d.exact);const h=function(p,y){return p?p+y.charAt(0).toUpperCase()+y.slice(1):y==="deviceId"?"sourceId":y};if(d.ideal!==void 0){l.optional=l.optional||[];let p={};typeof d.ideal=="number"?(p[h("min",c)]=d.ideal,l.optional.push(p),p={},p[h("max",c)]=d.ideal,l.optional.push(p)):(p[h("",c)]=d.ideal,l.optional.push(p))}d.exact!==void 0&&typeof d.exact!="number"?(l.mandatory=l.mandatory||{},l.mandatory[h("",c)]=d.exact):["min","max"].forEach(p=>{d[p]!==void 0&&(l.mandatory=l.mandatory||{},l.mandatory[h(p,c)]=d[p])})}),o.advanced&&(l.optional=(l.optional||[]).concat(o.advanced)),l},t=function(o,l){if(e.version>=61)return l(o);if(o=JSON.parse(JSON.stringify(o)),o&&typeof o.audio=="object"){const c=function(d,h,p){h in d&&!(p in d)&&(d[p]=d[h],delete d[h])};o=JSON.parse(JSON.stringify(o)),c(o.audio,"autoGainControl","googAutoGainControl"),c(o.audio,"noiseSuppression","googNoiseSuppression"),o.audio=n(o.audio)}if(o&&typeof o.video=="object"){let c=o.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const d=e.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(i.mediaDevices.getSupportedConstraints&&i.mediaDevices.getSupportedConstraints().facingMode&&!d)){delete o.video.facingMode;let h;if(c.exact==="environment"||c.ideal==="environment"?h=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(h=["front"]),h)return i.mediaDevices.enumerateDevices().then(p=>{p=p.filter(S=>S.kind==="videoinput");let y=p.find(S=>h.some(C=>S.label.toLowerCase().includes(C)));return!y&&p.length&&h.includes("back")&&(y=p[p.length-1]),y&&(o.video.deviceId=c.exact?{exact:y.deviceId}:{ideal:y.deviceId}),o.video=n(o.video),yS("chrome: "+JSON.stringify(o)),l(o)})}o.video=n(o.video)}return yS("chrome: "+JSON.stringify(o)),l(o)},a=function(o){return e.version>=64?o:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[o.name]||o.name,message:o.message,constraint:o.constraint||o.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},s=function(o,l,c){t(o,d=>{i.webkitGetUserMedia(d,l,h=>{c&&c(a(h))})})};if(i.getUserMedia=s.bind(i),i.mediaDevices.getUserMedia){const o=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(l){return t(l,c=>o(c).then(d=>{if(c.audio&&!d.getAudioTracks().length||c.video&&!d.getVideoTracks().length)throw d.getTracks().forEach(h=>{h.stop()}),new DOMException("","NotFoundError");return d},d=>Promise.reject(a(d))))}}}function C8(r,e){if(!(r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices)&&!!r.navigator.mediaDevices){if(typeof e!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}r.navigator.mediaDevices.getDisplayMedia=function(n){return e(n).then(t=>{const a=n.video&&n.video.width,s=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},a&&(n.video.mandatory.maxWidth=a),s&&(n.video.mandatory.maxHeight=s),r.navigator.mediaDevices.getUserMedia(n)})}}}function tw(r){r.MediaStream=r.MediaStream||r.webkitMediaStream}function rw(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("ontrack"in r.RTCPeerConnection.prototype)){Object.defineProperty(r.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(i){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=i)},enumerable:!0,configurable:!0});const e=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=n=>{n.stream.addEventListener("addtrack",t=>{let a;r.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(o=>o.track&&o.track.id===t.track.id):a={track:t.track};const s=new Event("track");s.track=t.track,s.receiver=a,s.transceiver={receiver:a},s.streams=[n.stream],this.dispatchEvent(s)}),n.stream.getTracks().forEach(t=>{let a;r.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(o=>o.track&&o.track.id===t.id):a={track:t};const s=new Event("track");s.track=t,s.receiver=a,s.transceiver={receiver:a},s.streams=[n.stream],this.dispatchEvent(s)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else tu(r,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function iw(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("getSenders"in r.RTCPeerConnection.prototype)&&"createDTMFSender"in r.RTCPeerConnection.prototype){const e=function(t,a){return{track:a,get dtmf(){return this._dtmf===void 0&&(a.kind==="audio"?this._dtmf=t.createDTMFSender(a):this._dtmf=null),this._dtmf},_pc:t}};if(!r.RTCPeerConnection.prototype.getSenders){r.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const t=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(o,l){let c=t.apply(this,arguments);return c||(c=e(this,o),this._senders.push(c)),c};const a=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(o){a.apply(this,arguments);const l=this._senders.indexOf(o);l!==-1&&this._senders.splice(l,1)}}const i=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(a){this._senders=this._senders||[],i.apply(this,[a]),a.getTracks().forEach(s=>{this._senders.push(e(this,s))})};const n=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(a){this._senders=this._senders||[],n.apply(this,[a]),a.getTracks().forEach(s=>{const o=this._senders.find(l=>l.track===s);o&&this._senders.splice(this._senders.indexOf(o),1)})}}else if(typeof r=="object"&&r.RTCPeerConnection&&"getSenders"in r.RTCPeerConnection.prototype&&"createDTMFSender"in r.RTCPeerConnection.prototype&&r.RTCRtpSender&&!("dtmf"in r.RTCRtpSender.prototype)){const e=r.RTCPeerConnection.prototype.getSenders;r.RTCPeerConnection.prototype.getSenders=function(){const n=e.apply(this,[]);return n.forEach(t=>t._pc=this),n},Object.defineProperty(r.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function nw(r){if(!r.RTCPeerConnection)return;const e=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){const[n,t,a]=arguments;if(arguments.length>0&&typeof n=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof n!="function"))return e.apply(this,[]);const s=function(l){const c={};return l.result().forEach(h=>{const p={id:h.id,timestamp:h.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[h.type]||h.type};h.names().forEach(y=>{p[y]=h.stat(y)}),c[p.id]=p}),c},o=function(l){return new Map(Object.keys(l).map(c=>[c,l[c]]))};if(arguments.length>=2){const l=function(c){t(o(s(c)))};return e.apply(this,[l,n])}return new Promise((l,c)=>{e.apply(this,[function(d){l(o(s(d)))},c])}).then(t,a)}}function aw(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender&&r.RTCRtpReceiver))return;if(!("getStats"in r.RTCRtpSender.prototype)){const i=r.RTCPeerConnection.prototype.getSenders;i&&(r.RTCPeerConnection.prototype.getSenders=function(){const a=i.apply(this,[]);return a.forEach(s=>s._pc=this),a});const n=r.RTCPeerConnection.prototype.addTrack;n&&(r.RTCPeerConnection.prototype.addTrack=function(){const a=n.apply(this,arguments);return a._pc=this,a}),r.RTCRtpSender.prototype.getStats=function(){const a=this;return this._pc.getStats().then(s=>vS(s,a.track,!0))}}if(!("getStats"in r.RTCRtpReceiver.prototype)){const i=r.RTCPeerConnection.prototype.getReceivers;i&&(r.RTCPeerConnection.prototype.getReceivers=function(){const t=i.apply(this,[]);return t.forEach(a=>a._pc=this),t}),tu(r,"track",n=>(n.receiver._pc=n.srcElement,n)),r.RTCRtpReceiver.prototype.getStats=function(){const t=this;return this._pc.getStats().then(a=>vS(a,t.track,!1))}}if(!("getStats"in r.RTCRtpSender.prototype&&"getStats"in r.RTCRtpReceiver.prototype))return;const e=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof r.MediaStreamTrack){const n=arguments[0];let t,a,s;return this.getSenders().forEach(o=>{o.track===n&&(t?s=!0:t=o)}),this.getReceivers().forEach(o=>(o.track===n&&(a?s=!0:a=o),o.track===n)),s||t&&a?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():a?a.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function sw(r){r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(s=>this._shimmedLocalStreams[s][0])};const e=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(s,o){if(!o)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const l=e.apply(this,arguments);return this._shimmedLocalStreams[o.id]?this._shimmedLocalStreams[o.id].indexOf(l)===-1&&this._shimmedLocalStreams[o.id].push(l):this._shimmedLocalStreams[o.id]=[o,l],l};const i=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(s){this._shimmedLocalStreams=this._shimmedLocalStreams||{},s.getTracks().forEach(c=>{if(this.getSenders().find(h=>h.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const o=this.getSenders();i.apply(this,arguments);const l=this.getSenders().filter(c=>o.indexOf(c)===-1);this._shimmedLocalStreams[s.id]=[s].concat(l)};const n=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[s.id],n.apply(this,arguments)};const t=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},s&&Object.keys(this._shimmedLocalStreams).forEach(o=>{const l=this._shimmedLocalStreams[o].indexOf(s);l!==-1&&this._shimmedLocalStreams[o].splice(l,1),this._shimmedLocalStreams[o].length===1&&delete this._shimmedLocalStreams[o]}),t.apply(this,arguments)}}function ow(r,e){if(!r.RTCPeerConnection)return;if(r.RTCPeerConnection.prototype.addTrack&&e.version>=65)return sw(r);const i=r.RTCPeerConnection.prototype.getLocalStreams;r.RTCPeerConnection.prototype.getLocalStreams=function(){const d=i.apply(this);return this._reverseStreams=this._reverseStreams||{},d.map(h=>this._reverseStreams[h.id])};const n=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(d){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},d.getTracks().forEach(h=>{if(this.getSenders().find(y=>y.track===h))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[d.id]){const h=new r.MediaStream(d.getTracks());this._streams[d.id]=h,this._reverseStreams[h.id]=d,d=h}n.apply(this,[d])};const t=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(d){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.apply(this,[this._streams[d.id]||d]),delete this._reverseStreams[this._streams[d.id]?this._streams[d.id].id:d.id],delete this._streams[d.id]},r.RTCPeerConnection.prototype.addTrack=function(d,h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const p=[].slice.call(arguments,1);if(p.length!==1||!p[0].getTracks().find(C=>C===d))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(C=>C.track===d))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const S=this._streams[h.id];if(S)S.addTrack(d),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const C=new r.MediaStream([d]);this._streams[h.id]=C,this._reverseStreams[C.id]=h,this.addStream(C)}return this.getSenders().find(C=>C.track===d)};function a(c,d){let h=d.sdp;return Object.keys(c._reverseStreams||[]).forEach(p=>{const y=c._reverseStreams[p],S=c._streams[y.id];h=h.replace(new RegExp(S.id,"g"),y.id)}),new RTCSessionDescription({type:d.type,sdp:h})}function s(c,d){let h=d.sdp;return Object.keys(c._reverseStreams||[]).forEach(p=>{const y=c._reverseStreams[p],S=c._streams[y.id];h=h.replace(new RegExp(y.id,"g"),S.id)}),new RTCSessionDescription({type:d.type,sdp:h})}["createOffer","createAnswer"].forEach(function(c){const d=r.RTCPeerConnection.prototype[c],h={[c](){const p=arguments;return arguments.length&&typeof arguments[0]=="function"?d.apply(this,[S=>{const C=a(this,S);p[0].apply(null,[C])},S=>{p[1]&&p[1].apply(null,S)},arguments[2]]):d.apply(this,arguments).then(S=>a(this,S))}};r.RTCPeerConnection.prototype[c]=h[c]});const o=r.RTCPeerConnection.prototype.setLocalDescription;r.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?o.apply(this,arguments):(arguments[0]=s(this,arguments[0]),o.apply(this,arguments))};const l=Object.getOwnPropertyDescriptor(r.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(r.RTCPeerConnection.prototype,"localDescription",{get(){const c=l.get.apply(this);return c.type===""?c:a(this,c)}}),r.RTCPeerConnection.prototype.removeTrack=function(d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!d._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(d._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let p;Object.keys(this._streams).forEach(y=>{this._streams[y].getTracks().find(C=>d.track===C)&&(p=this._streams[y])}),p&&(p.getTracks().length===1?this.removeStream(this._reverseStreams[p.id]):p.removeTrack(d.track),this.dispatchEvent(new Event("negotiationneeded")))}}function jg(r,e){!r.RTCPeerConnection&&r.webkitRTCPeerConnection&&(r.RTCPeerConnection=r.webkitRTCPeerConnection),!!r.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const n=r.RTCPeerConnection.prototype[i],t={[i](){return arguments[0]=new(i==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};r.RTCPeerConnection.prototype[i]=t[i]})}function uw(r,e){tu(r,"negotiationneeded",i=>{const n=i.target;if(!((e.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")&&n.signalingState!=="stable"))return i})}const _S=Object.freeze(Object.defineProperty({__proto__:null,shimMediaStream:tw,shimOnTrack:rw,shimGetSendersWithDtmf:iw,shimGetStats:nw,shimSenderReceiverGetStats:aw,shimAddTrackRemoveTrackWithNative:sw,shimAddTrackRemoveTrack:ow,shimPeerConnection:jg,fixNegotiationNeeded:uw,shimGetUserMedia:ew,shimGetDisplayMedia:C8},Symbol.toStringTag,{value:"Module"}));function lw(r,e){const i=r&&r.navigator,n=r&&r.MediaStreamTrack;if(i.getUserMedia=function(t,a,s){$y("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(t).then(a,s)},!(e.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){const t=function(s,o,l){o in s&&!(l in s)&&(s[l]=s[o],delete s[o])},a=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(s){return typeof s=="object"&&typeof s.audio=="object"&&(s=JSON.parse(JSON.stringify(s)),t(s.audio,"autoGainControl","mozAutoGainControl"),t(s.audio,"noiseSuppression","mozNoiseSuppression")),a(s)},n&&n.prototype.getSettings){const s=n.prototype.getSettings;n.prototype.getSettings=function(){const o=s.apply(this,arguments);return t(o,"mozAutoGainControl","autoGainControl"),t(o,"mozNoiseSuppression","noiseSuppression"),o}}if(n&&n.prototype.applyConstraints){const s=n.prototype.applyConstraints;n.prototype.applyConstraints=function(o){return this.kind==="audio"&&typeof o=="object"&&(o=JSON.parse(JSON.stringify(o)),t(o,"autoGainControl","mozAutoGainControl"),t(o,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[o])}}}}function R8(r,e){r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices||!r.navigator.mediaDevices||(r.navigator.mediaDevices.getDisplayMedia=function(n){if(!(n&&n.video)){const t=new DOMException("getDisplayMedia without video constraints is undefined");return t.name="NotFoundError",t.code=8,Promise.reject(t)}return n.video===!0?n.video={mediaSource:e}:n.video.mediaSource=e,r.navigator.mediaDevices.getUserMedia(n)})}function cw(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Vg(r,e){if(typeof r!="object"||!(r.RTCPeerConnection||r.mozRTCPeerConnection))return;!r.RTCPeerConnection&&r.mozRTCPeerConnection&&(r.RTCPeerConnection=r.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const a=r.RTCPeerConnection.prototype[t],s={[t](){return arguments[0]=new(t==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};r.RTCPeerConnection.prototype[t]=s[t]});const i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){const[a,s,o]=arguments;return n.apply(this,[a||null]).then(l=>{if(e.version<53&&!s)try{l.forEach(c=>{c.type=i[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;l.forEach((d,h)=>{l.set(h,Object.assign({},d,{type:i[d.type]||d.type}))})}return l}).then(s,o)}}function fw(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpSender.prototype)return;const e=r.RTCPeerConnection.prototype.getSenders;e&&(r.RTCPeerConnection.prototype.getSenders=function(){const t=e.apply(this,[]);return t.forEach(a=>a._pc=this),t});const i=r.RTCPeerConnection.prototype.addTrack;i&&(r.RTCPeerConnection.prototype.addTrack=function(){const t=i.apply(this,arguments);return t._pc=this,t}),r.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function dw(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpReceiver.prototype)return;const e=r.RTCPeerConnection.prototype.getReceivers;e&&(r.RTCPeerConnection.prototype.getReceivers=function(){const n=e.apply(this,[]);return n.forEach(t=>t._pc=this),n}),tu(r,"track",i=>(i.receiver._pc=i.srcElement,i)),r.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function hw(r){!r.RTCPeerConnection||"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(i){$y("removeStream","removeTrack"),this.getSenders().forEach(n=>{n.track&&i.getTracks().includes(n.track)&&this.removeTrack(n)})})}function pw(r){r.DataChannel&&!r.RTCDataChannel&&(r.RTCDataChannel=r.DataChannel)}function mw(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.addTransceiver;e&&(r.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let n=arguments[1]&&arguments[1].sendEncodings;n===void 0&&(n=[]),n=[...n];const t=n.length>0;t&&n.forEach(s=>{if("rid"in s&&!/^[a-z0-9]{0,16}$/i.test(s.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in s&&!(parseFloat(s.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in s&&!(parseFloat(s.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const a=e.apply(this,arguments);if(t){const{sender:s}=a,o=s.getParameters();(!("encodings"in o)||o.encodings.length===1&&Object.keys(o.encodings[0]).length===0)&&(o.encodings=n,s.sendEncodings=n,this.setParametersPromises.push(s.setParameters(o).then(()=>{delete s.sendEncodings}).catch(()=>{delete s.sendEncodings})))}return a})}function gw(r){if(!(typeof r=="object"&&r.RTCRtpSender))return;const e=r.RTCRtpSender.prototype.getParameters;e&&(r.RTCRtpSender.prototype.getParameters=function(){const n=e.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}function vw(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function yw(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.createAnswer;r.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const TS=Object.freeze(Object.defineProperty({__proto__:null,shimOnTrack:cw,shimPeerConnection:Vg,shimSenderGetStats:fw,shimReceiverGetStats:dw,shimRemoveStream:hw,shimRTCDataChannel:pw,shimAddTransceiver:mw,shimGetParameters:gw,shimCreateOffer:vw,shimCreateAnswer:yw,shimGetUserMedia:lw,shimGetDisplayMedia:R8},Symbol.toStringTag,{value:"Module"}));function _w(r){if(!(typeof r!="object"||!r.RTCPeerConnection)){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in r.RTCPeerConnection.prototype)){const e=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(n){this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(t=>e.call(this,t,n)),n.getVideoTracks().forEach(t=>e.call(this,t,n))},r.RTCPeerConnection.prototype.addTrack=function(n,...t){return t&&t.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),e.apply(this,arguments)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(i){this._localStreams||(this._localStreams=[]);const n=this._localStreams.indexOf(i);if(n===-1)return;this._localStreams.splice(n,1);const t=i.getTracks();this.getSenders().forEach(a=>{t.includes(a.track)&&this.removeTrack(a)})})}}function Tw(r){if(!(typeof r!="object"||!r.RTCPeerConnection)&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(i){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=i),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(t=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(t))return;this._remoteStreams.push(t);const a=new Event("addstream");a.stream=t,this.dispatchEvent(a)})})}});const e=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){const n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(a=>{if(n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.indexOf(a)>=0)return;n._remoteStreams.push(a);const s=new Event("addstream");s.stream=a,n.dispatchEvent(s)})}),e.apply(n,arguments)}}}function bw(r){if(typeof r!="object"||!r.RTCPeerConnection)return;const e=r.RTCPeerConnection.prototype,i=e.createOffer,n=e.createAnswer,t=e.setLocalDescription,a=e.setRemoteDescription,s=e.addIceCandidate;e.createOffer=function(c,d){const h=arguments.length>=2?arguments[2]:arguments[0],p=i.apply(this,[h]);return d?(p.then(c,d),Promise.resolve()):p},e.createAnswer=function(c,d){const h=arguments.length>=2?arguments[2]:arguments[0],p=n.apply(this,[h]);return d?(p.then(c,d),Promise.resolve()):p};let o=function(l,c,d){const h=t.apply(this,[l]);return d?(h.then(c,d),Promise.resolve()):h};e.setLocalDescription=o,o=function(l,c,d){const h=a.apply(this,[l]);return d?(h.then(c,d),Promise.resolve()):h},e.setRemoteDescription=o,o=function(l,c,d){const h=s.apply(this,[l]);return d?(h.then(c,d),Promise.resolve()):h},e.addIceCandidate=o}function Sw(r){const e=r&&r.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const i=e.mediaDevices,n=i.getUserMedia.bind(i);e.mediaDevices.getUserMedia=t=>n(xw(t))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(n,t,a){e.mediaDevices.getUserMedia(n).then(t,a)}.bind(e))}function xw(r){return r&&r.video!==void 0?Object.assign({},r,{video:ZR(r.video)}):r}function Ew(r){if(!r.RTCPeerConnection)return;const e=r.RTCPeerConnection;r.RTCPeerConnection=function(n,t){if(n&&n.iceServers){const a=[];for(let s=0;s<n.iceServers.length;s++){let o=n.iceServers[s];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?($y("RTCIceServer.url","RTCIceServer.urls"),o=JSON.parse(JSON.stringify(o)),o.urls=o.url,delete o.url,a.push(o)):a.push(n.iceServers[s])}n.iceServers=a}return new e(n,t)},r.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function Cw(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Rw(r){const e=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);const t=this.getTransceivers().find(s=>s.receiver.track.kind==="audio");n.offerToReceiveAudio===!1&&t?t.direction==="sendrecv"?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":t.direction==="recvonly"&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):n.offerToReceiveAudio===!0&&!t&&this.addTransceiver("audio",{direction:"recvonly"}),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);const a=this.getTransceivers().find(s=>s.receiver.track.kind==="video");n.offerToReceiveVideo===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):n.offerToReceiveVideo===!0&&!a&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function ww(r){typeof r!="object"||r.AudioContext||(r.AudioContext=r.webkitAudioContext)}const bS=Object.freeze(Object.defineProperty({__proto__:null,shimLocalStreamsAPI:_w,shimRemoteStreamsAPI:Tw,shimCallbacksAPI:bw,shimGetUserMedia:Sw,shimConstraints:xw,shimRTCIceServerUrls:Ew,shimTrackEventTransceiver:Cw,shimCreateOfferLegacy:Rw,shimAudioContext:ww},Symbol.toStringTag,{value:"Module"}));var Gy={exports:{}};(function(r){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},e.localCName=e.generateIdentifier(),e.splitLines=function(i){return i.trim().split(`
`).map(n=>n.trim())},e.splitSections=function(i){return i.split(`
m=`).map((t,a)=>(a>0?"m="+t:t).trim()+`\r
`)},e.getDescription=function(i){const n=e.splitSections(i);return n&&n[0]},e.getMediaSections=function(i){const n=e.splitSections(i);return n.shift(),n},e.matchPrefix=function(i,n){return e.splitLines(i).filter(t=>t.indexOf(n)===0)},e.parseCandidate=function(i){let n;i.indexOf("a=candidate:")===0?n=i.substring(12).split(" "):n=i.substring(10).split(" ");const t={foundation:n[0],component:{1:"rtp",2:"rtcp"}[n[1]]||n[1],protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]};for(let a=8;a<n.length;a+=2)switch(n[a]){case"raddr":t.relatedAddress=n[a+1];break;case"rport":t.relatedPort=parseInt(n[a+1],10);break;case"tcptype":t.tcpType=n[a+1];break;case"ufrag":t.ufrag=n[a+1],t.usernameFragment=n[a+1];break;default:t[n[a]]===void 0&&(t[n[a]]=n[a+1]);break}return t},e.writeCandidate=function(i){const n=[];n.push(i.foundation);const t=i.component;t==="rtp"?n.push(1):t==="rtcp"?n.push(2):n.push(t),n.push(i.protocol.toUpperCase()),n.push(i.priority),n.push(i.address||i.ip),n.push(i.port);const a=i.type;return n.push("typ"),n.push(a),a!=="host"&&i.relatedAddress&&i.relatedPort&&(n.push("raddr"),n.push(i.relatedAddress),n.push("rport"),n.push(i.relatedPort)),i.tcpType&&i.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(i.tcpType)),(i.usernameFragment||i.ufrag)&&(n.push("ufrag"),n.push(i.usernameFragment||i.ufrag)),"candidate:"+n.join(" ")},e.parseIceOptions=function(i){return i.substr(14).split(" ")},e.parseRtpMap=function(i){let n=i.substr(9).split(" ");const t={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),t.name=n[0],t.clockRate=parseInt(n[1],10),t.channels=n.length===3?parseInt(n[2],10):1,t.numChannels=t.channels,t},e.writeRtpMap=function(i){let n=i.payloadType;i.preferredPayloadType!==void 0&&(n=i.preferredPayloadType);const t=i.channels||i.numChannels||1;return"a=rtpmap:"+n+" "+i.name+"/"+i.clockRate+(t!==1?"/"+t:"")+`\r
`},e.parseExtmap=function(i){const n=i.substr(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1]}},e.writeExtmap=function(i){return"a=extmap:"+(i.id||i.preferredId)+(i.direction&&i.direction!=="sendrecv"?"/"+i.direction:"")+" "+i.uri+`\r
`},e.parseFmtp=function(i){const n={};let t;const a=i.substr(i.indexOf(" ")+1).split(";");for(let s=0;s<a.length;s++)t=a[s].trim().split("="),n[t[0].trim()]=t[1];return n},e.writeFmtp=function(i){let n="",t=i.payloadType;if(i.preferredPayloadType!==void 0&&(t=i.preferredPayloadType),i.parameters&&Object.keys(i.parameters).length){const a=[];Object.keys(i.parameters).forEach(s=>{i.parameters[s]!==void 0?a.push(s+"="+i.parameters[s]):a.push(s)}),n+="a=fmtp:"+t+" "+a.join(";")+`\r
`}return n},e.parseRtcpFb=function(i){const n=i.substr(i.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},e.writeRtcpFb=function(i){let n="",t=i.payloadType;return i.preferredPayloadType!==void 0&&(t=i.preferredPayloadType),i.rtcpFeedback&&i.rtcpFeedback.length&&i.rtcpFeedback.forEach(a=>{n+="a=rtcp-fb:"+t+" "+a.type+(a.parameter&&a.parameter.length?" "+a.parameter:"")+`\r
`}),n},e.parseSsrcMedia=function(i){const n=i.indexOf(" "),t={ssrc:parseInt(i.substr(7,n-7),10)},a=i.indexOf(":",n);return a>-1?(t.attribute=i.substr(n+1,a-n-1),t.value=i.substr(a+1)):t.attribute=i.substr(n+1),t},e.parseSsrcGroup=function(i){const n=i.substr(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(t=>parseInt(t,10))}},e.getMid=function(i){const n=e.matchPrefix(i,"a=mid:")[0];if(n)return n.substr(6)},e.parseFingerprint=function(i){const n=i.substr(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1].toUpperCase()}},e.getDtlsParameters=function(i,n){const t=e.matchPrefix(i+n,"a=fingerprint:");return{role:"auto",fingerprints:t.map(e.parseFingerprint)}},e.writeDtlsParameters=function(i,n){let t="a=setup:"+n+`\r
`;return i.fingerprints.forEach(a=>{t+="a=fingerprint:"+a.algorithm+" "+a.value+`\r
`}),t},e.parseCryptoLine=function(i){const n=i.substr(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},e.writeCryptoLine=function(i){return"a=crypto:"+i.tag+" "+i.cryptoSuite+" "+(typeof i.keyParams=="object"?e.writeCryptoKeyParams(i.keyParams):i.keyParams)+(i.sessionParams?" "+i.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(i){if(i.indexOf("inline:")!==0)return null;const n=i.substr(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(i){return i.keyMethod+":"+i.keySalt+(i.lifeTime?"|"+i.lifeTime:"")+(i.mkiValue&&i.mkiLength?"|"+i.mkiValue+":"+i.mkiLength:"")},e.getCryptoParameters=function(i,n){return e.matchPrefix(i+n,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(i,n){const t=e.matchPrefix(i+n,"a=ice-ufrag:")[0],a=e.matchPrefix(i+n,"a=ice-pwd:")[0];return t&&a?{usernameFragment:t.substr(12),password:a.substr(10)}:null},e.writeIceParameters=function(i){let n="a=ice-ufrag:"+i.usernameFragment+`\r
a=ice-pwd:`+i.password+`\r
`;return i.iceLite&&(n+=`a=ice-lite\r
`),n},e.parseRtpParameters=function(i){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},a=e.splitLines(i)[0].split(" ");for(let s=3;s<a.length;s++){const o=a[s],l=e.matchPrefix(i,"a=rtpmap:"+o+" ")[0];if(l){const c=e.parseRtpMap(l),d=e.matchPrefix(i,"a=fmtp:"+o+" ");switch(c.parameters=d.length?e.parseFmtp(d[0]):{},c.rtcpFeedback=e.matchPrefix(i,"a=rtcp-fb:"+o+" ").map(e.parseRtcpFb),n.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(c.name.toUpperCase());break}}}return e.matchPrefix(i,"a=extmap:").forEach(s=>{n.headerExtensions.push(e.parseExtmap(s))}),n},e.writeRtpDescription=function(i,n){let t="";t+="m="+i+" ",t+=n.codecs.length>0?"9":"0",t+=" UDP/TLS/RTP/SAVPF ",t+=n.codecs.map(s=>s.preferredPayloadType!==void 0?s.preferredPayloadType:s.payloadType).join(" ")+`\r
`,t+=`c=IN IP4 0.0.0.0\r
`,t+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(s=>{t+=e.writeRtpMap(s),t+=e.writeFmtp(s),t+=e.writeRtcpFb(s)});let a=0;return n.codecs.forEach(s=>{s.maxptime>a&&(a=s.maxptime)}),a>0&&(t+="a=maxptime:"+a+`\r
`),n.headerExtensions&&n.headerExtensions.forEach(s=>{t+=e.writeExtmap(s)}),t},e.parseRtpEncodingParameters=function(i){const n=[],t=e.parseRtpParameters(i),a=t.fecMechanisms.indexOf("RED")!==-1,s=t.fecMechanisms.indexOf("ULPFEC")!==-1,o=e.matchPrefix(i,"a=ssrc:").map(p=>e.parseSsrcMedia(p)).filter(p=>p.attribute==="cname"),l=o.length>0&&o[0].ssrc;let c;const d=e.matchPrefix(i,"a=ssrc-group:FID").map(p=>p.substr(17).split(" ").map(S=>parseInt(S,10)));d.length>0&&d[0].length>1&&d[0][0]===l&&(c=d[0][1]),t.codecs.forEach(p=>{if(p.name.toUpperCase()==="RTX"&&p.parameters.apt){let y={ssrc:l,codecPayloadType:parseInt(p.parameters.apt,10)};l&&c&&(y.rtx={ssrc:c}),n.push(y),a&&(y=JSON.parse(JSON.stringify(y)),y.fec={ssrc:l,mechanism:s?"red+ulpfec":"red"},n.push(y))}}),n.length===0&&l&&n.push({ssrc:l});let h=e.matchPrefix(i,"b=");return h.length&&(h[0].indexOf("b=TIAS:")===0?h=parseInt(h[0].substr(7),10):h[0].indexOf("b=AS:")===0?h=parseInt(h[0].substr(5),10)*1e3*.95-50*40*8:h=void 0,n.forEach(p=>{p.maxBitrate=h})),n},e.parseRtcpParameters=function(i){const n={},t=e.matchPrefix(i,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="cname")[0];t&&(n.cname=t.value,n.ssrc=t.ssrc);const a=e.matchPrefix(i,"a=rtcp-rsize");n.reducedSize=a.length>0,n.compound=a.length===0;const s=e.matchPrefix(i,"a=rtcp-mux");return n.mux=s.length>0,n},e.writeRtcpParameters=function(i){let n="";return i.reducedSize&&(n+=`a=rtcp-rsize\r
`),i.mux&&(n+=`a=rtcp-mux\r
`),i.ssrc!==void 0&&i.cname&&(n+="a=ssrc:"+i.ssrc+" cname:"+i.cname+`\r
`),n},e.parseMsid=function(i){let n;const t=e.matchPrefix(i,"a=msid:");if(t.length===1)return n=t[0].substr(7).split(" "),{stream:n[0],track:n[1]};const a=e.matchPrefix(i,"a=ssrc:").map(s=>e.parseSsrcMedia(s)).filter(s=>s.attribute==="msid");if(a.length>0)return n=a[0].value.split(" "),{stream:n[0],track:n[1]}},e.parseSctpDescription=function(i){const n=e.parseMLine(i),t=e.matchPrefix(i,"a=max-message-size:");let a;t.length>0&&(a=parseInt(t[0].substr(19),10)),isNaN(a)&&(a=65536);const s=e.matchPrefix(i,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substr(12),10),protocol:n.fmt,maxMessageSize:a};const o=e.matchPrefix(i,"a=sctpmap:");if(o.length>0){const l=o[0].substr(10).split(" ");return{port:parseInt(l[0],10),protocol:l[1],maxMessageSize:a}}},e.writeSctpDescription=function(i,n){let t=[];return i.protocol!=="DTLS/SCTP"?t=["m="+i.kind+" 9 "+i.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:t=["m="+i.kind+" 9 "+i.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&t.push("a=max-message-size:"+n.maxMessageSize+`\r
`),t.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,21)},e.writeSessionBoilerplate=function(i,n,t){let a;const s=n!==void 0?n:2;return i?a=i:a=e.generateSessionId(),`v=0\r
o=`+(t||"thisisadapterortc")+" "+a+" "+s+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(i,n){const t=e.splitLines(i);for(let a=0;a<t.length;a++)switch(t[a]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return t[a].substr(2)}return n?e.getDirection(n):"sendrecv"},e.getKind=function(i){return e.splitLines(i)[0].split(" ")[0].substr(2)},e.isRejected=function(i){return i.split(" ",2)[1]==="0"},e.parseMLine=function(i){const t=e.splitLines(i)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},e.parseOLine=function(i){const t=e.matchPrefix(i,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},e.isValidSDP=function(i){if(typeof i!="string"||i.length===0)return!1;const n=e.splitLines(i);for(let t=0;t<n.length;t++)if(n[t].length<2||n[t].charAt(1)!=="=")return!1;return!0},r.exports=e})(Gy);const dl=Gy.exports,w8=Dk({__proto__:null,default:dl},[Gy.exports]);function Df(r){if(!r.RTCIceCandidate||r.RTCIceCandidate&&"foundation"in r.RTCIceCandidate.prototype)return;const e=r.RTCIceCandidate;r.RTCIceCandidate=function(n){if(typeof n=="object"&&n.candidate&&n.candidate.indexOf("a=")===0&&(n=JSON.parse(JSON.stringify(n)),n.candidate=n.candidate.substr(2)),n.candidate&&n.candidate.length){const t=new e(n),a=dl.parseCandidate(n.candidate),s=Object.assign(t,a);return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new e(n)},r.RTCIceCandidate.prototype=e.prototype,tu(r,"icecandidate",i=>(i.candidate&&Object.defineProperty(i,"candidate",{value:new r.RTCIceCandidate(i.candidate),writable:"false"}),i))}function kf(r,e){if(!r.RTCPeerConnection)return;"sctp"in r.RTCPeerConnection.prototype||Object.defineProperty(r.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const i=function(o){if(!o||!o.sdp)return!1;const l=dl.splitSections(o.sdp);return l.shift(),l.some(c=>{const d=dl.parseMLine(c);return d&&d.kind==="application"&&d.protocol.indexOf("SCTP")!==-1})},n=function(o){const l=o.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(l===null||l.length<2)return-1;const c=parseInt(l[1],10);return c!==c?-1:c},t=function(o){let l=65536;return e.browser==="firefox"&&(e.version<57?o===-1?l=16384:l=2147483637:e.version<60?l=e.version===57?65535:65536:l=2147483637),l},a=function(o,l){let c=65536;e.browser==="firefox"&&e.version===57&&(c=65535);const d=dl.matchPrefix(o.sdp,"a=max-message-size:");return d.length>0?c=parseInt(d[0].substr(19),10):e.browser==="firefox"&&l!==-1&&(c=2147483637),c},s=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:l}=this.getConfiguration();l==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(i(arguments[0])){const l=n(arguments[0]),c=t(l),d=a(arguments[0],l);let h;c===0&&d===0?h=Number.POSITIVE_INFINITY:c===0||d===0?h=Math.max(c,d):h=Math.min(c,d);const p={};Object.defineProperty(p,"maxMessageSize",{get(){return h}}),this._sctp=p}return s.apply(this,arguments)}}function Lf(r){if(!(r.RTCPeerConnection&&"createDataChannel"in r.RTCPeerConnection.prototype))return;function e(n,t){const a=n.send;n.send=function(){const o=arguments[0],l=o.length||o.size||o.byteLength;if(n.readyState==="open"&&t.sctp&&l>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return a.apply(n,arguments)}}const i=r.RTCPeerConnection.prototype.createDataChannel;r.RTCPeerConnection.prototype.createDataChannel=function(){const t=i.apply(this,arguments);return e(t,this),t},tu(r,"datachannel",n=>(e(n.channel,n.target),n))}function Hg(r){if(!r.RTCPeerConnection||"connectionState"in r.RTCPeerConnection.prototype)return;const e=r.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(i){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),i&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=i)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(i=>{const n=e[i];e[i]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=t=>{const a=t.target;if(a._lastConnectionState!==a.connectionState){a._lastConnectionState=a.connectionState;const s=new Event("connectionstatechange",t);a.dispatchEvent(s)}return t},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function Wg(r,e){if(!r.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const i=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&t.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const a=t.sdp.split(`
`).filter(s=>s.trim()!=="a=extmap-allow-mixed").join(`
`);r.RTCSessionDescription&&t instanceof r.RTCSessionDescription?arguments[0]=new r.RTCSessionDescription({type:t.type,sdp:a}):t.sdp=a}return i.apply(this,arguments)}}function Mf(r,e){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const i=r.RTCPeerConnection.prototype.addIceCandidate;!i||i.length===0||(r.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Nf(r,e){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const i=r.RTCPeerConnection.prototype.setLocalDescription;!i||i.length===0||(r.RTCPeerConnection.prototype.setLocalDescription=function(){let t=arguments[0]||{};if(typeof t!="object"||t.type&&t.sdp)return i.apply(this,arguments);if(t={type:t.type,sdp:t.sdp},!t.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":t.type="offer";break;default:t.type="answer";break}return t.sdp||t.type!=="offer"&&t.type!=="answer"?i.apply(this,[t]):(t.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(s=>i.apply(this,[s]))})}const A8=Object.freeze(Object.defineProperty({__proto__:null,shimRTCIceCandidate:Df,shimMaxMessageSize:kf,shimSendThrowTypeError:Lf,shimConnectionState:Hg,removeExtmapAllowMixed:Wg,shimAddIceCandidateNullOrEmpty:Mf,shimParameterlessSetLocalDescription:Nf},Symbol.toStringTag,{value:"Module"}));function P8({window:r}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const i=JR,n=E8(r),t={browserDetails:n,commonShim:A8,extractVersion:If,disableLog:S8,disableWarnings:x8,sdp:w8};switch(n.browser){case"chrome":if(!_S||!jg||!e.shimChrome)return i("Chrome shim is not included in this adapter release."),t;if(n.version===null)return i("Chrome shim can not determine version, not shimming."),t;i("adapter.js shimming chrome."),t.browserShim=_S,Mf(r,n),Nf(r),ew(r,n),tw(r),jg(r,n),rw(r),ow(r,n),iw(r),nw(r),aw(r),uw(r,n),Df(r),Hg(r),kf(r,n),Lf(r),Wg(r,n);break;case"firefox":if(!TS||!Vg||!e.shimFirefox)return i("Firefox shim is not included in this adapter release."),t;i("adapter.js shimming firefox."),t.browserShim=TS,Mf(r,n),Nf(r),lw(r,n),Vg(r,n),cw(r),hw(r),fw(r),dw(r),pw(r),mw(r),gw(r),vw(r),yw(r),Df(r),Hg(r),kf(r,n),Lf(r);break;case"safari":if(!bS||!e.shimSafari)return i("Safari shim is not included in this adapter release."),t;i("adapter.js shimming safari."),t.browserShim=bS,Mf(r,n),Nf(r),Ew(r),Rw(r),bw(r),_w(r),Tw(r),Cw(r),Sw(r),ww(r),Df(r),kf(r,n),Lf(r),Wg(r,n);break;default:i("Unsupported browser!");break}return t}P8({window:typeof window>"u"?void 0:window});var zy={exports:{}};(function(r){/**
 * {@link https://github.com/muaz-khan/RecordRTC|RecordRTC} is a WebRTC JavaScript library for audio/video as well as screen activity recording. It supports Chrome, Firefox, Opera, Android, and Microsoft Edge. Platforms: Linux, Mac and Windows. 
 * @summary Record audio, video or screen inside the browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTC
 * @class
 * @example
 * var recorder = RecordRTC(mediaStream or [arrayOfMediaStream], {
 *     type: 'video', // audio or video or gif or canvas
 *     recorderType: MediaStreamRecorder || CanvasRecorder || StereoAudioRecorder || Etc
 * });
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, desiredSampRate: 16000, video: HTMLVideoElement, etc.}
 */function e(K,w){if(!K)throw"First parameter is required.";w=w||{type:"video"},w=new i(K,w);var te=this;function ye(G){return w.disableLogs||console.log("RecordRTC version: ",te.version),G&&(w=new i(K,G)),w.disableLogs||console.log("started recording "+w.type+" stream."),U?(U.clearRecordedData(),U.record(),Ee("recording"),te.recordingDuration&&ee(),te):(xe(function(){te.recordingDuration&&ee()}),te)}function xe(G){G&&(w.initCallback=function(){G(),G=w.initCallback=null});var ve=new n(K,w);U=new ve(K,w),U.record(),Ee("recording"),w.disableLogs||console.log("Initialized recorderType:",U.constructor.name,"for output-type:",w.type)}function re(G){if(G=G||function(){},!U){M();return}if(te.state==="paused"){te.resumeRecording(),setTimeout(function(){re(G)},1);return}te.state!=="recording"&&!w.disableLogs&&console.warn('Recording state should be: "recording", however current state is: ',te.state),w.disableLogs||console.log("Stopped recording "+w.type+" stream."),w.type!=="gif"?U.stop(ve):(U.stop(),ve()),Ee("stopped");function ve(Te){if(!U){typeof G.call=="function"?G.call(te,""):G("");return}Object.keys(U).forEach(function(_e){typeof U[_e]!="function"&&(te[_e]=U[_e])});var X=U.blob;if(!X)if(Te)U.blob=X=Te;else throw"Recording failed.";if(X&&!w.disableLogs&&console.log(X.type,"->",I(X.size)),G){var ue;try{ue=d.createObjectURL(X)}catch{}typeof G.call=="function"?G.call(te,ue):G(ue)}!w.autoWriteToDisk||B(function(_e){var Re={};Re[w.type+"Blob"]=_e,Ae.Store(Re)})}}function se(){if(!U){M();return}if(te.state!=="recording"){w.disableLogs||console.warn("Unable to pause the recording. Recording state: ",te.state);return}Ee("paused"),U.pause(),w.disableLogs||console.log("Paused recording.")}function J(){if(!U){M();return}if(te.state!=="paused"){w.disableLogs||console.warn("Unable to resume the recording. Recording state: ",te.state);return}Ee("recording"),U.resume(),w.disableLogs||console.log("Resumed recording.")}function ie(G){postMessage(new FileReaderSync().readAsDataURL(G))}function B(G,ve){if(!G)throw"Pass a callback function over getDataURL.";var Te=ve?ve.blob:(U||{}).blob;if(!Te){w.disableLogs||console.warn("Blob encoder did not finish its job yet."),setTimeout(function(){B(G,ve)},1e3);return}if(typeof Worker<"u"&&!navigator.mozGetUserMedia){var X=_e(ie);X.onmessage=function(Re){G(Re.data)},X.postMessage(Te)}else{var ue=new FileReader;ue.readAsDataURL(Te),ue.onload=function(Re){G(Re.target.result)}}function _e(Re){try{var Ue=d.createObjectURL(new Blob([Re.toString(),"this.onmessage =  function (eee) {"+Re.name+"(eee.data);}"],{type:"application/javascript"})),Ne=new Worker(Ue);return d.revokeObjectURL(Ue),Ne}catch{}}}function ee(G){if(G=G||0,te.state==="paused"){setTimeout(function(){ee(G)},1e3);return}if(te.state!=="stopped"){if(G>=te.recordingDuration){re(te.onRecordingStopped);return}G+=1e3,setTimeout(function(){ee(G)},1e3)}}function Ee(G){!te||(te.state=G,typeof te.onStateChanged.call=="function"?te.onStateChanged.call(te,G):te.onStateChanged(G))}var Ce='It seems that recorder is destroyed or "startRecording" is not invoked for '+w.type+" recorder.";function M(){w.disableLogs!==!0&&console.warn(Ce)}var U,ae={startRecording:ye,stopRecording:re,pauseRecording:se,resumeRecording:J,initRecorder:xe,setRecordingDuration:function(G,ve){if(typeof G>"u")throw"recordingDuration is required.";if(typeof G!="number")throw"recordingDuration must be a number.";return te.recordingDuration=G,te.onRecordingStopped=ve||function(){},{onRecordingStopped:function(Te){te.onRecordingStopped=Te}}},clearRecordedData:function(){if(!U){M();return}U.clearRecordedData(),w.disableLogs||console.log("Cleared old recorded data.")},getBlob:function(){if(!U){M();return}return U.blob},getDataURL:B,toURL:function(){if(!U){M();return}return d.createObjectURL(U.blob)},getInternalRecorder:function(){return U},save:function(G){if(!U){M();return}H(U.blob,G)},getFromDisk:function(G){if(!U){M();return}e.getFromDisk(w.type,G)},setAdvertisementArray:function(G){w.advertisement=[];for(var ve=G.length,Te=0;Te<ve;Te++)w.advertisement.push({duration:Te,image:G[Te]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){te.state==="recording"&&!w.disableLogs&&console.warn("Stop an active recorder."),U&&typeof U.clearRecordedData=="function"&&U.clearRecordedData(),U=null,Ee("inactive"),te.blob=null},onStateChanged:function(G){w.disableLogs||console.log("Recorder state changed:",G)},state:"inactive",getState:function(){return te.state},destroy:function(){var G=w.disableLogs;w={disableLogs:!0},te.reset(),Ee("destroyed"),ae=te=null,fe.AudioContextConstructor&&(fe.AudioContextConstructor.close(),fe.AudioContextConstructor=null),w.disableLogs=G,w.disableLogs||console.log("RecordRTC is destroyed.")},version:"5.6.2"};if(!this)return te=ae,ae;for(var be in ae)this[be]=ae[be];return te=this,ae}e.version="5.6.2",r.exports=e,e.getFromDisk=function(K,w){if(!w)throw"callback is mandatory.";console.log("Getting recorded "+(K==="all"?"blobs":K+" blob ")+" from disk!"),Ae.Fetch(function(te,ye){K!=="all"&&ye===K+"Blob"&&w&&w(te),K==="all"&&w&&w(te,ye.replace("Blob",""))})},e.writeToDisk=function(K){console.log("Writing recorded blob(s) to disk!"),K=K||{},K.audio&&K.video&&K.gif?K.audio.getDataURL(function(w){K.video.getDataURL(function(te){K.gif.getDataURL(function(ye){Ae.Store({audioBlob:w,videoBlob:te,gifBlob:ye})})})}):K.audio&&K.video?K.audio.getDataURL(function(w){K.video.getDataURL(function(te){Ae.Store({audioBlob:w,videoBlob:te})})}):K.audio&&K.gif?K.audio.getDataURL(function(w){K.gif.getDataURL(function(te){Ae.Store({audioBlob:w,gifBlob:te})})}):K.video&&K.gif?K.video.getDataURL(function(w){K.gif.getDataURL(function(te){Ae.Store({videoBlob:w,gifBlob:te})})}):K.audio?K.audio.getDataURL(function(w){Ae.Store({audioBlob:w})}):K.video?K.video.getDataURL(function(w){Ae.Store({videoBlob:w})}):K.gif&&K.gif.getDataURL(function(w){Ae.Store({gifBlob:w})})};/**
 * {@link RecordRTCConfiguration} is an inner/private helper for {@link RecordRTC}.
 * @summary It configures the 2nd parameter passed over {@link RecordRTC} and returns a valid "config" object.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCConfiguration
 * @class
 * @example
 * var options = RecordRTCConfiguration(mediaStream, options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, getNativeBlob:true, etc.}
 */function i(K,w){return!w.recorderType&&!w.type&&(!!w.audio&&!!w.video?w.type="video":!!w.audio&&!w.video&&(w.type="audio")),w.recorderType&&!w.type&&(w.recorderType===de||w.recorderType===pe||typeof Ye<"u"&&w.recorderType===Ye?w.type="video":w.recorderType===ke?w.type="gif":w.recorderType===V?w.type="audio":w.recorderType===oe&&(W(K,"audio").length&&W(K,"video").length||!W(K,"audio").length&&W(K,"video").length?w.type="video":W(K,"audio").length&&!W(K,"video").length&&(w.type="audio"))),typeof oe<"u"&&typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&(w.mimeType||(w.mimeType="video/webm"),w.type||(w.type=w.mimeType.split("/")[0]),w.bitsPerSecond),w.type||(w.mimeType&&(w.type=w.mimeType.split("/")[0]),w.type||(w.type="audio")),w}/**
 * {@link GetRecorderType} is an inner/private helper for {@link RecordRTC}.
 * @summary It returns best recorder-type available for your browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GetRecorderType
 * @class
 * @example
 * var RecorderType = GetRecorderType(options);
 * var recorder = new RecorderType(options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 */function n(K,w){var te;return(S||h||p)&&(te=V),typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&!S&&(te=oe),w.type==="video"&&(S||p)&&(te=de,typeof Ye<"u"&&typeof ReadableStream<"u"&&(te=Ye)),w.type==="gif"&&(te=ke),w.type==="canvas"&&(te=pe),Y()&&te!==pe&&te!==ke&&typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&(W(K,"video").length||W(K,"audio").length)&&(w.type==="audio"?typeof MediaRecorder.isTypeSupported=="function"&&MediaRecorder.isTypeSupported("audio/webm")&&(te=oe):typeof MediaRecorder.isTypeSupported=="function"&&MediaRecorder.isTypeSupported("video/webm")&&(te=oe)),K instanceof Array&&K.length&&(te=Fe),w.recorderType&&(te=w.recorderType),!w.disableLogs&&!!te&&!!te.name&&console.log("Using recorderType:",te.name||te.constructor.name),!te&&C&&(te=oe),te}/**
 * MRecordRTC runs on top of {@link RecordRTC} to bring multiple recordings in a single place, by providing simple API.
 * @summary MRecordRTC stands for "Multiple-RecordRTC".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MRecordRTC
 * @class
 * @example
 * var recorder = new MRecordRTC();
 * recorder.addStream(MediaStream);
 * recorder.mediaType = {
 *     audio: true, // or StereoAudioRecorder or MediaStreamRecorder
 *     video: true, // or WhammyRecorder or MediaStreamRecorder or WebAssemblyRecorder or CanvasRecorder
 *     gif: true    // or GifRecorder
 * };
 * // mimeType is optional and should be set only in advance cases.
 * recorder.mimeType = {
 *     audio: 'audio/wav',
 *     video: 'video/webm',
 *     gif:   'image/gif'
 * };
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC/tree/master/MRecordRTC|MRecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @requires {@link RecordRTC}
 */function t(K){this.addStream=function(w){w&&(K=w)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var w=this.mediaType,te,ye=this.mimeType||{audio:null,video:null,gif:null};if(typeof w.audio!="function"&&Y()&&!W(K,"audio").length&&(w.audio=!1),typeof w.video!="function"&&Y()&&!W(K,"video").length&&(w.video=!1),typeof w.gif!="function"&&Y()&&!W(K,"video").length&&(w.gif=!1),!w.audio&&!w.video&&!w.gif)throw"MediaStream must have either audio or video tracks.";if(w.audio&&(te=null,typeof w.audio=="function"&&(te=w.audio),this.audioRecorder=new e(K,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:te,mimeType:ye.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),w.video||this.audioRecorder.startRecording()),w.video){te=null,typeof w.video=="function"&&(te=w.video);var xe=K;if(Y()&&!!w.audio&&typeof w.audio=="function"){var re=W(K,"video")[0];y?(xe=new x,xe.addTrack(re),te&&te===de&&(te=oe)):(xe=new x,xe.addTrack(re))}this.videoRecorder=new e(xe,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:te,mimeType:ye.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),w.audio||this.videoRecorder.startRecording()}if(!!w.audio&&!!w.video){var se=this,J=Y()===!0;(w.audio instanceof V&&!!w.video||w.audio!==!0&&w.video!==!0&&w.audio!==w.video)&&(J=!1),J===!0?(se.audioRecorder=null,se.videoRecorder.startRecording()):se.videoRecorder.initRecorder(function(){se.audioRecorder.initRecorder(function(){se.videoRecorder.startRecording(),se.audioRecorder.startRecording()})})}w.gif&&(te=null,typeof w.gif=="function"&&(te=w.gif),this.gifRecorder=new e(K,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:te,mimeType:ye.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(w){w=w||function(){},this.audioRecorder&&this.audioRecorder.stopRecording(function(te){w(te,"audio")}),this.videoRecorder&&this.videoRecorder.stopRecording(function(te){w(te,"video")}),this.gifRecorder&&this.gifRecorder.stopRecording(function(te){w(te,"gif")})},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(w){var te={};return this.audioRecorder&&(te.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(te.video=this.videoRecorder.getBlob()),this.gifRecorder&&(te.gif=this.gifRecorder.getBlob()),w&&w(te),te},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(w){this.getBlob(function(xe){xe.audio&&xe.video?te(xe.audio,function(re){te(xe.video,function(se){w({audio:re,video:se})})}):xe.audio?te(xe.audio,function(re){w({audio:re})}):xe.video&&te(xe.video,function(re){w({video:re})})});function te(xe,re){if(typeof Worker<"u"){var se=ye(function(B){postMessage(new FileReaderSync().readAsDataURL(B))});se.onmessage=function(ie){re(ie.data)},se.postMessage(xe)}else{var J=new FileReader;J.readAsDataURL(xe),J.onload=function(ie){re(ie.target.result)}}}function ye(xe){var re=d.createObjectURL(new Blob([xe.toString(),"this.onmessage =  function (eee) {"+xe.name+"(eee.data);}"],{type:"application/javascript"})),se=new Worker(re),J;if(typeof d<"u")J=d;else if(typeof webkitURL<"u")J=webkitURL;else throw"Neither URL nor webkitURL detected.";return J.revokeObjectURL(re),se}},this.writeToDisk=function(){e.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(w){w=w||{audio:!0,video:!0,gif:!0},!!w.audio&&this.audioRecorder&&this.audioRecorder.save(typeof w.audio=="string"?w.audio:""),!!w.video&&this.videoRecorder&&this.videoRecorder.save(typeof w.video=="string"?w.video:""),!!w.gif&&this.gifRecorder&&this.gifRecorder.save(typeof w.gif=="string"?w.gif:"")}}t.getFromDisk=e.getFromDisk,t.writeToDisk=e.writeToDisk,typeof e<"u"&&(e.MRecordRTC=t);var a="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(K){!K||typeof window<"u"||typeof St>"u"||(St.navigator={userAgent:a,getUserMedia:function(){}},St.console||(St.console={}),(typeof St.console.log>"u"||typeof St.console.error>"u")&&(St.console.error=St.console.log=St.console.log||function(){console.log(arguments)}),typeof document>"u"&&(K.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var w={getContext:function(){return w},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return w},K.HTMLVideoElement=function(){}),typeof location>"u"&&(K.location={protocol:"file:",href:"",hash:""}),typeof screen>"u"&&(K.screen={width:0,height:0}),typeof d>"u"&&(K.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),K.window=St)})(typeof St<"u"?St:null);var s=window.requestAnimationFrame;if(typeof s>"u"){if(typeof webkitRequestAnimationFrame<"u")s=webkitRequestAnimationFrame;else if(typeof mozRequestAnimationFrame<"u")s=mozRequestAnimationFrame;else if(typeof msRequestAnimationFrame<"u")s=msRequestAnimationFrame;else if(typeof s>"u"){var o=0;s=function(K,w){var te=new Date().getTime(),ye=Math.max(0,16-(te-o)),xe=setTimeout(function(){K(te+ye)},ye);return o=te+ye,xe}}}var l=window.cancelAnimationFrame;typeof l>"u"&&(typeof webkitCancelAnimationFrame<"u"?l=webkitCancelAnimationFrame:typeof mozCancelAnimationFrame<"u"?l=mozCancelAnimationFrame:typeof msCancelAnimationFrame<"u"?l=msCancelAnimationFrame:typeof l>"u"&&(l=function(K){clearTimeout(K)}));var c=window.AudioContext;typeof c>"u"&&(typeof webkitAudioContext<"u"&&(c=webkitAudioContext),typeof mozAudioContext<"u"&&(c=mozAudioContext));var d=window.URL;typeof d>"u"&&typeof webkitURL<"u"&&(d=webkitURL),typeof navigator<"u"&&typeof navigator.getUserMedia>"u"&&(typeof navigator.webkitGetUserMedia<"u"&&(navigator.getUserMedia=navigator.webkitGetUserMedia),typeof navigator.mozGetUserMedia<"u"&&(navigator.getUserMedia=navigator.mozGetUserMedia));var h=navigator.userAgent.indexOf("Edge")!==-1&&(!!navigator.msSaveBlob||!!navigator.msSaveOrOpenBlob),p=!!window.opera||navigator.userAgent.indexOf("OPR/")!==-1,y=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),S=!p&&!h&&!!navigator.webkitGetUserMedia||Z()||navigator.userAgent.toLowerCase().indexOf("chrome/")!==-1,C=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);C&&!S&&navigator.userAgent.indexOf("CriOS")!==-1&&(C=!1,S=!0);var x=window.MediaStream;typeof x>"u"&&typeof webkitMediaStream<"u"&&(x=webkitMediaStream),typeof x<"u"&&typeof x.prototype.stop>"u"&&(x.prototype.stop=function(){this.getTracks().forEach(function(K){K.stop()})});function I(K){var w=1e3,te=["Bytes","KB","MB","GB","TB"];if(K===0)return"0 Bytes";var ye=parseInt(Math.floor(Math.log(K)/Math.log(w)),10);return(K/Math.pow(w,ye)).toPrecision(3)+" "+te[ye]}function H(K,w){if(!K)throw"Blob object is required.";if(!K.type)try{K.type="video/webm"}catch{}var te=(K.type||"video/webm").split("/")[1];if(te.indexOf(";")!==-1&&(te=te.split(";")[0]),w&&w.indexOf(".")!==-1){var ye=w.split(".");w=ye[0],te=ye[1]}var xe=(w||Math.round(Math.random()*9999999999)+888888888)+"."+te;if(typeof navigator.msSaveOrOpenBlob<"u")return navigator.msSaveOrOpenBlob(K,xe);if(typeof navigator.msSaveBlob<"u")return navigator.msSaveBlob(K,xe);var re=document.createElement("a");re.href=d.createObjectURL(K),re.download=xe,re.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(re),typeof re.click=="function"?re.click():(re.target="_blank",re.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),d.revokeObjectURL(re.href)}function Z(){return typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&!!process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0}function W(K,w){return!K||!K.getTracks?[]:K.getTracks().filter(function(te){return te.kind===(w||"audio")})}function j(K,w){"srcObject"in w?w.srcObject=K:"mozSrcObject"in w?w.mozSrcObject=K:w.srcObject=K}function le(K,w){if(typeof EBML>"u")throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var te=new EBML.Reader,ye=new EBML.Decoder,xe=EBML.tools,re=new FileReader;re.onload=function(se){var J=ye.decode(this.result);J.forEach(function(Ee){te.read(Ee)}),te.stop();var ie=xe.makeMetadataSeekable(te.metadatas,te.duration,te.cues),B=this.result.slice(te.metadataSize),ee=new Blob([ie,B],{type:"video/webm"});w(ee)},re.readAsArrayBuffer(K)}typeof e<"u"&&(e.invokeSaveAsDialog=H,e.getTracks=W,e.getSeekableBlob=le,e.bytesToSize=I,e.isElectron=Z);/**
 * Storage is a standalone object used by {@link RecordRTC} to store reusable objects e.g. "new AudioContext".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * Storage.AudioContext === webkitAudioContext
 * @property {webkitAudioContext} AudioContext - Keeps a reference to AudioContext object.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var fe={};typeof c<"u"?fe.AudioContext=c:typeof webkitAudioContext<"u"&&(fe.AudioContext=webkitAudioContext),typeof e<"u"&&(e.Storage=fe);function Y(){if(y||C||h)return!0;var K=navigator.userAgent,w=""+parseFloat(navigator.appVersion),te=parseInt(navigator.appVersion,10),ye,xe;return(S||p)&&(ye=K.indexOf("Chrome"),w=K.substring(ye+7)),(xe=w.indexOf(";"))!==-1&&(w=w.substring(0,xe)),(xe=w.indexOf(" "))!==-1&&(w=w.substring(0,xe)),te=parseInt(""+w,10),isNaN(te)&&(w=""+parseFloat(navigator.appVersion),te=parseInt(navigator.appVersion,10)),te>=49}/**
 * MediaStreamRecorder is an abstraction layer for {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}. It is used by {@link RecordRTC} to record MediaStream(s) in both Chrome and Firefox.
 * @summary Runs top over {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://github.com/muaz-khan|Muaz Khan}
 * @typedef MediaStreamRecorder
 * @class
 * @example
 * var config = {
 *     mimeType: 'video/webm', // vp8, vp9, h264, mkv, opus/vorbis
 *     audioBitsPerSecond : 256 * 8 * 1024,
 *     videoBitsPerSecond : 256 * 8 * 1024,
 *     bitsPerSecond: 256 * 8 * 1024,  // if this is provided, skip above two
 *     checkForInactiveTracks: true,
 *     timeSlice: 1000, // concatenate intervals based blobs
 *     ondataavailable: function() {} // get intervals based blobs
 * }
 * var recorder = new MediaStreamRecorder(mediaStream, config);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs:true, initCallback: function, mimeType: "video/webm", timeSlice: 1000}
 * @throws Will throw an error if first argument "MediaStream" is missing. Also throws error if "MediaRecorder API" are not supported by the browser.
 */function oe(K,w){var ee=this;if(typeof K>"u")throw'First argument "MediaStream" is required.';if(typeof MediaRecorder>"u")throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";if(w=w||{mimeType:"video/webm"},w.type==="audio"){if(W(K,"video").length&&W(K,"audio").length){var te;navigator.mozGetUserMedia?(te=new x,te.addTrack(W(K,"audio")[0])):te=new x(W(K,"audio")),K=te}(!w.mimeType||w.mimeType.toString().toLowerCase().indexOf("audio")===-1)&&(w.mimeType=S?"audio/webm":"audio/ogg"),w.mimeType&&w.mimeType.toString().toLowerCase()!=="audio/ogg"&&!!navigator.mozGetUserMedia&&(w.mimeType="audio/ogg")}var ye=[];this.getArrayOfBlobs=function(){return ye},this.record=function(){ee.blob=null,ee.clearRecordedData(),ee.timestamps=[],B=[],ye=[];var Ee=w;w.disableLogs||console.log("Passing following config over MediaRecorder API.",Ee),J&&(J=null),S&&!Y()&&(Ee="video/vp8"),typeof MediaRecorder.isTypeSupported=="function"&&Ee.mimeType&&(MediaRecorder.isTypeSupported(Ee.mimeType)||(w.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",Ee.mimeType),Ee.mimeType=w.type==="audio"?"audio/webm":"video/webm"));try{J=new MediaRecorder(K,Ee),w.mimeType=Ee.mimeType}catch{J=new MediaRecorder(K)}Ee.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in J&&J.canRecordMimeType(Ee.mimeType)===!1&&(w.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",Ee.mimeType)),J.ondataavailable=function(Ce){if(Ce.data&&B.push("ondataavailable: "+I(Ce.data.size)),typeof w.timeSlice=="number"){if(Ce.data&&Ce.data.size&&(ye.push(Ce.data),xe(),typeof w.ondataavailable=="function")){var M=w.getNativeBlob?Ce.data:new Blob([Ce.data],{type:re(Ee)});w.ondataavailable(M)}return}if(!Ce.data||!Ce.data.size||Ce.data.size<100||ee.blob){ee.recordingCallback&&(ee.recordingCallback(new Blob([],{type:re(Ee)})),ee.recordingCallback=null);return}ee.blob=w.getNativeBlob?Ce.data:new Blob([Ce.data],{type:re(Ee)}),ee.recordingCallback&&(ee.recordingCallback(ee.blob),ee.recordingCallback=null)},J.onstart=function(){B.push("started")},J.onpause=function(){B.push("paused")},J.onresume=function(){B.push("resumed")},J.onstop=function(){B.push("stopped")},J.onerror=function(Ce){!Ce||(Ce.name||(Ce.name="UnknownError"),B.push("error: "+Ce),w.disableLogs||(Ce.name.toString().toLowerCase().indexOf("invalidstate")!==-1?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",Ce):Ce.name.toString().toLowerCase().indexOf("notsupported")!==-1?console.error("MIME type (",Ee.mimeType,") is not supported.",Ce):Ce.name.toString().toLowerCase().indexOf("security")!==-1?console.error("MediaRecorder security error",Ce):Ce.name==="OutOfMemory"?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",Ce):Ce.name==="IllegalStreamModification"?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",Ce):Ce.name==="OtherRecordingError"?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",Ce):Ce.name==="GenericError"?console.error("The UA cannot provide the codec or recording option that has been requested.",Ce):console.error("MediaRecorder Error",Ce)),function(M){if(!ee.manuallyStopped&&J&&J.state==="inactive"){delete w.timeslice,J.start(10*60*1e3);return}setTimeout(M,1e3)}(),J.state!=="inactive"&&J.state!=="stopped"&&J.stop())},typeof w.timeSlice=="number"?(xe(),J.start(w.timeSlice)):J.start(36e5),w.initCallback&&w.initCallback()},this.timestamps=[];function xe(){ee.timestamps.push(new Date().getTime()),typeof w.onTimeStamp=="function"&&w.onTimeStamp(ee.timestamps[ee.timestamps.length-1],ee.timestamps)}function re(Ee){return J&&J.mimeType?J.mimeType:Ee.mimeType||"video/webm"}this.stop=function(Ee){Ee=Ee||function(){},ee.manuallyStopped=!0,J&&(this.recordingCallback=Ee,J.state==="recording"&&J.stop(),typeof w.timeSlice=="number"&&setTimeout(function(){ee.blob=new Blob(ye,{type:re(w)}),ee.recordingCallback(ee.blob)},100))},this.pause=function(){!J||J.state==="recording"&&J.pause()},this.resume=function(){!J||J.state==="paused"&&J.resume()},this.clearRecordedData=function(){J&&J.state==="recording"&&ee.stop(se),se()};function se(){ye=[],J=null,ee.timestamps=[]}var J;this.getInternalRecorder=function(){return J};function ie(){if("active"in K){if(!K.active)return!1}else if("ended"in K&&K.ended)return!1;return!0}this.blob=null,this.getState=function(){return J&&J.state||"inactive"};var B=[];this.getAllStates=function(){return B},typeof w.checkForInactiveTracks>"u"&&(w.checkForInactiveTracks=!1);var ee=this;(function Ee(){if(!(!J||w.checkForInactiveTracks===!1)){if(ie()===!1){w.disableLogs||console.log("MediaStream seems stopped."),ee.stop();return}setTimeout(Ee,1e3)}})(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}typeof e<"u"&&(e.MediaStreamRecorder=oe);/**
 * StereoAudioRecorder is a standalone class used by {@link RecordRTC} to bring "stereo" audio-recording in chrome.
 * @summary JavaScript standalone object for stereo audio recording.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef StereoAudioRecorder
 * @class
 * @example
 * var recorder = new StereoAudioRecorder(MediaStream, {
 *     sampleRate: 44100,
 *     bufferSize: 4096
 * });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {sampleRate: 44100, bufferSize: 4096, numberOfAudioChannels: 1, etc.}
 */function V(K,w){if(!W(K,"audio").length)throw"Your stream has no audio tracks.";w=w||{};var te=this,ye=[],xe=[],re=!1,se=0,J,ie=2,B=w.desiredSampRate;w.leftChannel===!0&&(ie=1),w.numberOfAudioChannels===1&&(ie=1),(!ie||ie<1)&&(ie=2),w.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+ie),typeof w.checkForInactiveTracks>"u"&&(w.checkForInactiveTracks=!0);function ee(){if(w.checkForInactiveTracks===!1)return!0;if("active"in K){if(!K.active)return!1}else if("ended"in K&&K.ended)return!1;return!0}this.record=function(){if(ee()===!1)throw"Please make sure MediaStream is active.";Te(),ue=ve=!1,re=!0,typeof w.timeSlice<"u"&&Ue()};function Ee(Ne,$e){function Ge(Xe,ut){var qe=Xe.numberOfAudioChannels,Pt=Xe.leftBuffers.slice(0),gr=Xe.rightBuffers.slice(0),$t=Xe.sampleRate,ur=Xe.internalInterleavedLength,Tt=Xe.desiredSampRate;qe===2&&(Pt=Ia(Pt,ur),gr=Ia(gr,ur),Tt&&(Pt=Ot(Pt,Tt,$t),gr=Ot(gr,Tt,$t))),qe===1&&(Pt=Ia(Pt,ur),Tt&&(Pt=Ot(Pt,Tt,$t))),Tt&&($t=Tt);function Ot(Ft,qr,Kt){var Ut=Math.round(Ft.length*(qr/Kt)),Gt=[],dt=Number((Ft.length-1)/(Ut-1));Gt[0]=Ft[0];for(var Pi=1;Pi<Ut-1;Pi++){var Qi=Pi*dt,_n=Number(Math.floor(Qi)).toFixed(),nu=Number(Math.ceil(Qi)).toFixed(),Oi=Qi-_n;Gt[Pi]=Xi(Ft[_n],Ft[nu],Oi)}return Gt[Ut-1]=Ft[Ft.length-1],Gt}function Xi(Ft,qr,Kt){return Ft+(qr-Ft)*Kt}function Ia(Ft,qr){for(var Kt=new Float64Array(qr),Ut=0,Gt=Ft.length,dt=0;dt<Gt;dt++){var Pi=Ft[dt];Kt.set(Pi,Ut),Ut+=Pi.length}return Kt}function ru(Ft,qr){for(var Kt=Ft.length+qr.length,Ut=new Float64Array(Kt),Gt=0,dt=0;dt<Kt;)Ut[dt++]=Ft[Gt],Ut[dt++]=qr[Gt],Gt++;return Ut}function gn(Ft,qr,Kt){for(var Ut=Kt.length,Gt=0;Gt<Ut;Gt++)Ft.setUint8(qr+Gt,Kt.charCodeAt(Gt))}var ir;qe===2&&(ir=ru(Pt,gr)),qe===1&&(ir=Pt);var vn=ir.length,iu=44+vn*2,Da=new ArrayBuffer(iu),er=new DataView(Da);gn(er,0,"RIFF"),er.setUint32(4,36+vn*2,!0),gn(er,8,"WAVE"),gn(er,12,"fmt "),er.setUint32(16,16,!0),er.setUint16(20,1,!0),er.setUint16(22,qe,!0),er.setUint32(24,$t,!0),er.setUint32(28,$t*qe*2,!0),er.setUint16(32,qe*2,!0),er.setUint16(34,16,!0),gn(er,36,"data"),er.setUint32(40,vn*2,!0);for(var Is=vn,Ds=44,yn=1,nr=0;nr<Is;nr++)er.setInt16(Ds,ir[nr]*(32767*yn),!0),Ds+=2;if(ut)return ut({buffer:Da,view:er});postMessage({buffer:Da,view:er})}if(Ne.noWorker){Ge(Ne,function(Xe){$e(Xe.buffer,Xe.view)});return}var tt=Ce(Ge);tt.onmessage=function(Xe){$e(Xe.data.buffer,Xe.data.view),d.revokeObjectURL(tt.workerURL),tt.terminate()},tt.postMessage(Ne)}function Ce(Ne){var $e=d.createObjectURL(new Blob([Ne.toString(),";this.onmessage =  function (eee) {"+Ne.name+"(eee.data);}"],{type:"application/javascript"})),Ge=new Worker($e);return Ge.workerURL=$e,Ge}this.stop=function(Ne){Ne=Ne||function(){},re=!1,Ee({desiredSampRate:B,sampleRate:G,numberOfAudioChannels:ie,internalInterleavedLength:se,leftBuffers:ye,rightBuffers:ie===1?[]:xe,noWorker:w.noWorker},function($e,Ge){te.blob=new Blob([Ge],{type:"audio/wav"}),te.buffer=new ArrayBuffer(Ge.buffer.byteLength),te.view=Ge,te.sampleRate=B||G,te.bufferSize=be,te.length=se,ue=!1,Ne&&Ne(te.blob)})},typeof e.Storage>"u"&&(e.Storage={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext}),(!e.Storage.AudioContextConstructor||e.Storage.AudioContextConstructor.state==="closed")&&(e.Storage.AudioContextConstructor=new e.Storage.AudioContext);var M=e.Storage.AudioContextConstructor,U=M.createMediaStreamSource(K),ae=[0,256,512,1024,2048,4096,8192,16384],be=typeof w.bufferSize>"u"?4096:w.bufferSize;if(ae.indexOf(be)===-1&&(w.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(ae,null,"	"))),M.createJavaScriptNode)J=M.createJavaScriptNode(be,ie,ie);else if(M.createScriptProcessor)J=M.createScriptProcessor(be,ie,ie);else throw"WebAudio API has no support on this browser.";U.connect(J),w.bufferSize||(be=J.bufferSize);var G=typeof w.sampleRate<"u"?w.sampleRate:M.sampleRate||44100;(G<22050||G>96e3)&&(w.disableLogs||console.log("sample-rate must be under range 22050 and 96000.")),w.disableLogs||w.desiredSampRate&&console.log("Desired sample-rate: "+w.desiredSampRate);var ve=!1;this.pause=function(){ve=!0},this.resume=function(){if(ee()===!1)throw"Please make sure MediaStream is active.";if(!re){w.disableLogs||console.log("Seems recording has been restarted."),this.record();return}ve=!1},this.clearRecordedData=function(){w.checkForInactiveTracks=!1,re&&this.stop(X),X()};function Te(){ye=[],xe=[],se=0,ue=!1,re=!1,ve=!1,M=null,te.leftchannel=ye,te.rightchannel=xe,te.numberOfAudioChannels=ie,te.desiredSampRate=B,te.sampleRate=G,te.recordingLength=se,Re={left:[],right:[],recordingLength:0}}function X(){J&&(J.onaudioprocess=null,J.disconnect(),J=null),U&&(U.disconnect(),U=null),Te()}this.name="StereoAudioRecorder",this.toString=function(){return this.name};var ue=!1;function _e(Ne){if(!ve){if(ee()===!1&&(w.disableLogs||console.log("MediaStream seems stopped."),J.disconnect(),re=!1),!re){U&&(U.disconnect(),U=null);return}ue||(ue=!0,w.onAudioProcessStarted&&w.onAudioProcessStarted(),w.initCallback&&w.initCallback());var $e=Ne.inputBuffer.getChannelData(0),Ge=new Float32Array($e);if(ye.push(Ge),ie===2){var tt=Ne.inputBuffer.getChannelData(1),Xe=new Float32Array(tt);xe.push(Xe)}se+=be,te.recordingLength=se,typeof w.timeSlice<"u"&&(Re.recordingLength+=be,Re.left.push(Ge),ie===2&&Re.right.push(Xe))}}J.onaudioprocess=_e,M.createMediaStreamDestination?J.connect(M.createMediaStreamDestination()):J.connect(M.destination),this.leftchannel=ye,this.rightchannel=xe,this.numberOfAudioChannels=ie,this.desiredSampRate=B,this.sampleRate=G,te.recordingLength=se;var Re={left:[],right:[],recordingLength:0};function Ue(){!re||typeof w.ondataavailable!="function"||typeof w.timeSlice>"u"||(Re.left.length?(Ee({desiredSampRate:B,sampleRate:G,numberOfAudioChannels:ie,internalInterleavedLength:Re.recordingLength,leftBuffers:Re.left,rightBuffers:ie===1?[]:Re.right},function(Ne,$e){var Ge=new Blob([$e],{type:"audio/wav"});w.ondataavailable(Ge),setTimeout(Ue,w.timeSlice)}),Re={left:[],right:[],recordingLength:0}):setTimeout(Ue,w.timeSlice))}}typeof e<"u"&&(e.StereoAudioRecorder=V);/**
 * CanvasRecorder is a standalone class used by {@link RecordRTC} to bring HTML5-Canvas recording into video WebM. It uses HTML2Canvas library and runs top over {@link Whammy}.
 * @summary HTML2Canvas recording into video WebM.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef CanvasRecorder
 * @class
 * @example
 * var recorder = new CanvasRecorder(htmlElement, { disableLogs: true, useWhammyRecorder: true });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {HTMLElement} htmlElement - querySelector/getElementById/getElementsByTagName[0]/etc.
 * @param {object} config - {disableLogs:true, initCallback: function}
 */function pe(K,w){if(typeof html2canvas>"u")throw"Please link: https://www.webrtc-experiment.com/screenshot.js";w=w||{},w.frameInterval||(w.frameInterval=10);var te=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(ae){ae in document.createElement("canvas")&&(te=!0)});var ye=(!!window.webkitRTCPeerConnection||!!window.webkitGetUserMedia)&&!!window.chrome,xe=50,re=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);ye&&re&&re[2]&&(xe=parseInt(re[2],10)),ye&&xe<52&&(te=!1),w.useWhammyRecorder&&(te=!1);var se,J;if(te)if(w.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),K instanceof HTMLCanvasElement)se=K;else if(K instanceof CanvasRenderingContext2D)se=K.canvas;else throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";else navigator.mozGetUserMedia&&(w.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));var ie;this.record=function(){if(ie=!0,te&&!w.useWhammyRecorder){var ae;"captureStream"in se?ae=se.captureStream(25):"mozCaptureStream"in se?ae=se.mozCaptureStream(25):"webkitCaptureStream"in se&&(ae=se.webkitCaptureStream(25));try{var be=new x;be.addTrack(W(ae,"video")[0]),ae=be}catch{}if(!ae)throw"captureStream API are NOT available.";J=new oe(ae,{mimeType:w.mimeType||"video/webm"}),J.record()}else U.frames=[],M=new Date().getTime(),Ce();w.initCallback&&w.initCallback()},this.getWebPImages=function(ae){if(K.nodeName.toLowerCase()!=="canvas"){ae();return}var be=U.frames.length;U.frames.forEach(function(G,ve){var Te=be-ve;w.disableLogs||console.log(Te+"/"+be+" frames remaining"),w.onEncodingCallback&&w.onEncodingCallback(Te,be);var X=G.image.toDataURL("image/webp",1);U.frames[ve].image=X}),w.disableLogs||console.log("Generating WebM"),ae()},this.stop=function(ae){ie=!1;var be=this;if(te&&J){J.stop(ae);return}this.getWebPImages(function(){U.compile(function(G){w.disableLogs||console.log("Recording finished!"),be.blob=G,be.blob.forEach&&(be.blob=new Blob([],{type:"video/webm"})),ae&&ae(be.blob),U.frames=[]})})};var B=!1;this.pause=function(){if(B=!0,J instanceof oe){J.pause();return}},this.resume=function(){if(B=!1,J instanceof oe){J.resume();return}ie||this.record()},this.clearRecordedData=function(){ie&&this.stop(ee),ee()};function ee(){U.frames=[],ie=!1,B=!1}this.name="CanvasRecorder",this.toString=function(){return this.name};function Ee(){var ae=document.createElement("canvas"),be=ae.getContext("2d");return ae.width=K.width,ae.height=K.height,be.drawImage(K,0,0),ae}function Ce(){if(B)return M=new Date().getTime(),setTimeout(Ce,500);if(K.nodeName.toLowerCase()==="canvas"){var ae=new Date().getTime()-M;M=new Date().getTime(),U.frames.push({image:Ee(),duration:ae}),ie&&setTimeout(Ce,w.frameInterval);return}html2canvas(K,{grabMouse:typeof w.showMousePointer>"u"||w.showMousePointer,onrendered:function(be){var G=new Date().getTime()-M;if(!G)return setTimeout(Ce,w.frameInterval);M=new Date().getTime(),U.frames.push({image:be.toDataURL("image/webp",1),duration:G}),ie&&setTimeout(Ce,w.frameInterval)}})}var M=new Date().getTime(),U=new Se.Video(100)}typeof e<"u"&&(e.CanvasRecorder=pe);/**
 * WhammyRecorder is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It runs top over {@link Whammy}.
 * @summary Video recording feature in Chrome.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WhammyRecorder
 * @class
 * @example
 * var recorder = new WhammyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs: true, initCallback: function, video: HTMLVideoElement, etc.}
 */function de(K,w){w=w||{},w.frameInterval||(w.frameInterval=10),w.disableLogs||console.log("Using frames-interval:",w.frameInterval),this.record=function(){w.width||(w.width=320),w.height||(w.height=240),w.video||(w.video={width:w.width,height:w.height}),w.canvas||(w.canvas={width:w.width,height:w.height}),ie.width=w.canvas.width||320,ie.height=w.canvas.height||240,B=ie.getContext("2d"),w.video&&w.video instanceof HTMLVideoElement?(ee=w.video.cloneNode(),w.initCallback&&w.initCallback()):(ee=document.createElement("video"),j(K,ee),ee.onloadedmetadata=function(){w.initCallback&&w.initCallback()},ee.width=w.video.width,ee.height=w.video.height),ee.muted=!0,ee.play(),Ee=new Date().getTime(),Ce=new Se.Video,w.disableLogs||(console.log("canvas resolutions",ie.width,"*",ie.height),console.log("video width/height",ee.width||ie.width,"*",ee.height||ie.height)),te(w.frameInterval)};function te(M){M=typeof M<"u"?M:10;var U=new Date().getTime()-Ee;if(!U)return setTimeout(te,M,M);if(se)return Ee=new Date().getTime(),setTimeout(te,100);Ee=new Date().getTime(),ee.paused&&ee.play(),B.drawImage(ee,0,0,ie.width,ie.height),Ce.frames.push({duration:U,image:ie.toDataURL("image/webp")}),re||setTimeout(te,M,M)}function ye(M){var U=-1,ae=M.length;(function be(){if(U++,U===ae){M.callback();return}setTimeout(function(){M.functionToLoop(be,U)},1)})()}function xe(M,U,ae,be,G){var ve=document.createElement("canvas");ve.width=ie.width,ve.height=ie.height;var Te=ve.getContext("2d"),X=[],ue=U===-1,_e=U&&U>0&&U<=M.length?U:M.length,Re={r:0,g:0,b:0},Ue=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),Ne=ae&&ae>=0&&ae<=1?ae:0,$e=be&&be>=0&&be<=1?be:0,Ge=!1;ye({length:_e,functionToLoop:function(tt,Xe){var ut,qe,Pt,gr=function(){!Ge&&Pt-ut<=Pt*$e||(ue&&(Ge=!0),X.push(M[Xe])),tt()};if(Ge)gr();else{var $t=new Image;$t.onload=function(){Te.drawImage($t,0,0,ie.width,ie.height);var ur=Te.getImageData(0,0,ie.width,ie.height);ut=0,qe=ur.data.length,Pt=ur.data.length/4;for(var Tt=0;Tt<qe;Tt+=4){var Ot={r:ur.data[Tt],g:ur.data[Tt+1],b:ur.data[Tt+2]},Xi=Math.sqrt(Math.pow(Ot.r-Re.r,2)+Math.pow(Ot.g-Re.g,2)+Math.pow(Ot.b-Re.b,2));Xi<=Ue*Ne&&ut++}gr()},$t.src=M[Xe].image}},callback:function(){X=X.concat(M.slice(_e)),X.length<=0&&X.push(M[M.length-1]),G(X)}})}var re=!1;this.stop=function(M){M=M||function(){},re=!0;var U=this;setTimeout(function(){xe(Ce.frames,-1,null,null,function(ae){Ce.frames=ae,w.advertisement&&w.advertisement.length&&(Ce.frames=w.advertisement.concat(Ce.frames)),Ce.compile(function(be){U.blob=be,U.blob.forEach&&(U.blob=new Blob([],{type:"video/webm"})),M&&M(U.blob)})})},10)};var se=!1;this.pause=function(){se=!0},this.resume=function(){se=!1,re&&this.record()},this.clearRecordedData=function(){re||this.stop(J),J()};function J(){Ce.frames=[],re=!0,se=!1}this.name="WhammyRecorder",this.toString=function(){return this.name};var ie=document.createElement("canvas"),B=ie.getContext("2d"),ee,Ee,Ce}typeof e<"u"&&(e.WhammyRecorder=de);/**
 * Whammy is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It is written by {@link https://github.com/antimatter15|antimatter15}
 * @summary A real time javascript webm encoder based on a canvas hack.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef Whammy
 * @class
 * @example
 * var recorder = new Whammy().Video(15);
 * recorder.add(context || canvas || dataURL);
 * var output = recorder.compile();
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var Se=function(){function K(ye){this.frames=[],this.duration=ye||1,this.quality=.8}K.prototype.add=function(ye,xe){if("canvas"in ye&&(ye=ye.canvas),"toDataURL"in ye&&(ye=ye.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/ig.test(ye))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:ye,duration:xe||this.duration})};function w(ye){var xe=d.createObjectURL(new Blob([ye.toString(),"this.onmessage =  function (eee) {"+ye.name+"(eee.data);}"],{type:"application/javascript"})),re=new Worker(xe);return d.revokeObjectURL(xe),re}function te(ye){function xe(G){var ve=se(G);if(!ve)return[];for(var Te=3e4,X=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:ae(ve.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:ve.width,id:176},{data:ve.height,id:186}]}]}]}]}],ue=0,_e=0;ue<G.length;){var Re=[],Ue=0;do Re.push(G[ue]),Ue+=G[ue].duration,ue++;while(ue<G.length&&Ue<Te);var Ne=0,$e={id:524531317,data:re(_e,Ne,Re)};X[1].data.push($e),_e+=Ue}return ee(X)}function re(G,ve,Te){return[{data:G,id:231}].concat(Te.map(function(X){var ue=Ee({discardable:0,frame:X.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(ve)});return ve+=X.duration,{data:ue,id:163}}))}function se(G){if(!G[0]){postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."});return}for(var ve=G[0].width,Te=G[0].height,X=G[0].duration,ue=1;ue<G.length;ue++)X+=G[ue].duration;return{duration:X,width:ve,height:Te}}function J(G){for(var ve=[];G>0;)ve.push(G&255),G=G>>8;return new Uint8Array(ve.reverse())}function ie(G){return new Uint8Array(G.split("").map(function(ve){return ve.charCodeAt(0)}))}function B(G){var ve=[],Te=G.length%8?new Array(9-G.length%8).join("0"):"";G=Te+G;for(var X=0;X<G.length;X+=8)ve.push(parseInt(G.substr(X,8),2));return new Uint8Array(ve)}function ee(G){for(var ve=[],Te=0;Te<G.length;Te++){var X=G[Te].data;typeof X=="object"&&(X=ee(X)),typeof X=="number"&&(X=B(X.toString(2))),typeof X=="string"&&(X=ie(X));var ue=X.size||X.byteLength||X.length,_e=Math.ceil(Math.ceil(Math.log(ue)/Math.log(2))/8),Re=ue.toString(2),Ue=new Array(_e*7+7+1-Re.length).join("0")+Re,Ne=new Array(_e).join("0")+"1"+Ue;ve.push(J(G[Te].id)),ve.push(B(Ne)),ve.push(X)}return new Blob(ve,{type:"video/webm"})}function Ee(G){var ve=0;if(G.keyframe&&(ve|=128),G.invisible&&(ve|=8),G.lacing&&(ve|=G.lacing<<1),G.discardable&&(ve|=1),G.trackNum>127)throw"TrackNumber > 127 not supported";var Te=[G.trackNum|128,G.timecode>>8,G.timecode&255,ve].map(function(X){return String.fromCharCode(X)}).join("")+G.frame;return Te}function Ce(G){for(var ve=G.RIFF[0].WEBP[0],Te=ve.indexOf("\x9D*"),X=0,ue=[];X<4;X++)ue[X]=ve.charCodeAt(Te+3+X);var _e,Re,Ue;return Ue=ue[1]<<8|ue[0],_e=Ue&16383,Ue=ue[3]<<8|ue[2],Re=Ue&16383,{width:_e,height:Re,data:ve,riff:G}}function M(G,ve){return parseInt(G.substr(ve+4,4).split("").map(function(Te){var X=Te.charCodeAt(0).toString(2);return new Array(8-X.length+1).join("0")+X}).join(""),2)}function U(G){for(var ve=0,Te={};ve<G.length;){var X=G.substr(ve,4),ue=M(G,ve),_e=G.substr(ve+4+4,ue);ve+=4+4+ue,Te[X]=Te[X]||[],X==="RIFF"||X==="LIST"?Te[X].push(U(_e)):Te[X].push(_e)}return Te}function ae(G){return[].slice.call(new Uint8Array(new Float64Array([G]).buffer),0).map(function(ve){return String.fromCharCode(ve)}).reverse().join("")}var be=new xe(ye.map(function(G){var ve=Ce(U(atob(G.image.slice(23))));return ve.duration=G.duration,ve}));postMessage(be)}return K.prototype.compile=function(ye){var xe=w(te);xe.onmessage=function(re){if(re.data.error){console.error(re.data.error);return}ye(re.data)},xe.postMessage(this.frames)},{Video:K}}();typeof e<"u"&&(e.Whammy=Se);/**
 * DiskStorage is a standalone object used by {@link RecordRTC} to store recorded blobs in IndexedDB storage.
 * @summary Writing blobs into IndexedDB.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * DiskStorage.Store({
 *     audioBlob: yourAudioBlob,
 *     videoBlob: yourVideoBlob,
 *     gifBlob  : yourGifBlob
 * });
 * DiskStorage.Fetch(function(dataURL, type) {
 *     if(type === 'audioBlob') { }
 *     if(type === 'videoBlob') { }
 *     if(type === 'gifBlob')   { }
 * });
 * // DiskStorage.dataStoreName = 'recordRTC';
 * // DiskStorage.onError = function(error) { };
 * @property {function} init - This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.
 * @property {function} Fetch - This method fetches stored blobs from IndexedDB.
 * @property {function} Store - This method stores blobs in IndexedDB.
 * @property {function} onError - This function is invoked for any known/unknown error.
 * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var Ae={init:function(){var K=this;if(typeof indexedDB>"u"||typeof indexedDB.open>"u"){console.error("IndexedDB API are not available in this browser.");return}var w=1,te=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),ye,xe=indexedDB.open(te,w);function re(J){J.createObjectStore(K.dataStoreName)}function se(){var J=ye.transaction([K.dataStoreName],"readwrite");K.videoBlob&&J.objectStore(K.dataStoreName).put(K.videoBlob,"videoBlob"),K.gifBlob&&J.objectStore(K.dataStoreName).put(K.gifBlob,"gifBlob"),K.audioBlob&&J.objectStore(K.dataStoreName).put(K.audioBlob,"audioBlob");function ie(B){J.objectStore(K.dataStoreName).get(B).onsuccess=function(ee){K.callback&&K.callback(ee.target.result,B)}}ie("audioBlob"),ie("videoBlob"),ie("gifBlob")}xe.onerror=K.onError,xe.onsuccess=function(){if(ye=xe.result,ye.onerror=K.onError,ye.setVersion)if(ye.version!==w){var J=ye.setVersion(w);J.onsuccess=function(){re(ye),se()}}else se();else se()},xe.onupgradeneeded=function(J){re(J.target.result)}},Fetch:function(K){return this.callback=K,this.init(),this},Store:function(K){return this.audioBlob=K.audioBlob,this.videoBlob=K.videoBlob,this.gifBlob=K.gifBlob,this.init(),this},onError:function(K){console.error(JSON.stringify(K,null,"	"))},dataStoreName:"recordRTC",dbName:null};typeof e<"u"&&(e.DiskStorage=Ae);/**
 * GifRecorder is standalone calss used by {@link RecordRTC} to record video or canvas into animated gif.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GifRecorder
 * @class
 * @example
 * var recorder = new GifRecorder(mediaStream || canvas || context, { onGifPreview: function, onGifRecordingStarted: function, width: 1280, height: 720, frameRate: 200, quality: 10 });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     img.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object or HTMLCanvasElement or CanvasRenderingContext2D.
 * @param {object} config - {disableLogs:true, initCallback: function, width: 320, height: 240, frameRate: 200, quality: 10}
 */function ke(K,w){if(typeof GIFEncoder>"u"){var te=document.createElement("script");te.src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(te)}w=w||{};var ye=K instanceof CanvasRenderingContext2D||K instanceof HTMLCanvasElement;this.record=function(){if(typeof GIFEncoder>"u"){setTimeout(M.record,1e3);return}if(!ie){setTimeout(M.record,1e3);return}ye||(w.width||(w.width=B.offsetWidth||320),w.height||(w.height=B.offsetHeight||240),w.video||(w.video={width:w.width,height:w.height}),w.canvas||(w.canvas={width:w.width,height:w.height}),se.width=w.canvas.width||320,se.height=w.canvas.height||240,B.width=w.video.width||320,B.height=w.video.height||240),Ce=new GIFEncoder,Ce.setRepeat(0),Ce.setDelay(w.frameRate||200),Ce.setQuality(w.quality||10),Ce.start(),typeof w.onGifRecordingStarted=="function"&&w.onGifRecordingStarted();function U(ae){if(M.clearedRecordedData!==!0){if(xe)return setTimeout(function(){U(ae)},100);ee=s(U),typeof Ee===void 0&&(Ee=ae),!(ae-Ee<90)&&(!ye&&B.paused&&B.play(),ye||J.drawImage(B,0,0,se.width,se.height),w.onGifPreview&&w.onGifPreview(se.toDataURL("image/png")),Ce.addFrame(J),Ee=ae)}}ee=s(U),w.initCallback&&w.initCallback()},this.stop=function(U){U=U||function(){},ee&&l(ee),this.blob=new Blob([new Uint8Array(Ce.stream().bin)],{type:"image/gif"}),U(this.blob),Ce.stream().bin=[]};var xe=!1;this.pause=function(){xe=!0},this.resume=function(){xe=!1},this.clearRecordedData=function(){M.clearedRecordedData=!0,re()};function re(){Ce&&(Ce.stream().bin=[])}this.name="GifRecorder",this.toString=function(){return this.name};var se=document.createElement("canvas"),J=se.getContext("2d");ye&&(K instanceof CanvasRenderingContext2D?(J=K,se=J.canvas):K instanceof HTMLCanvasElement&&(J=K.getContext("2d"),se=K));var ie=!0;if(!ye){var B=document.createElement("video");B.muted=!0,B.autoplay=!0,B.playsInline=!0,ie=!1,B.onloadedmetadata=function(){ie=!0},j(K,B),B.play()}var ee=null,Ee,Ce,M=this}typeof e<"u"&&(e.GifRecorder=ke);function De(K,w){var te="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(X){typeof e<"u"||!X||typeof window<"u"||typeof St>"u"||(St.navigator={userAgent:te,getUserMedia:function(){}},St.console||(St.console={}),(typeof St.console.log>"u"||typeof St.console.error>"u")&&(St.console.error=St.console.log=St.console.log||function(){console.log(arguments)}),typeof document>"u"&&(X.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var ue={getContext:function(){return ue},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return ue},X.HTMLVideoElement=function(){}),typeof location>"u"&&(X.location={protocol:"file:",href:"",hash:""}),typeof screen>"u"&&(X.screen={width:0,height:0}),typeof B>"u"&&(X.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),X.window=St)})(typeof St<"u"?St:null),w=w||"multi-streams-mixer";var ye=[],xe=!1,re=document.createElement("canvas"),se=re.getContext("2d");re.style.opacity=0,re.style.position="absolute",re.style.zIndex=-1,re.style.top="-1000em",re.style.left="-1000em",re.className=w,(document.body||document.documentElement).appendChild(re),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var J=this,ie=window.AudioContext;typeof ie>"u"&&(typeof webkitAudioContext<"u"&&(ie=webkitAudioContext),typeof mozAudioContext<"u"&&(ie=mozAudioContext));var B=window.URL;typeof B>"u"&&typeof webkitURL<"u"&&(B=webkitURL),typeof navigator<"u"&&typeof navigator.getUserMedia>"u"&&(typeof navigator.webkitGetUserMedia<"u"&&(navigator.getUserMedia=navigator.webkitGetUserMedia),typeof navigator.mozGetUserMedia<"u"&&(navigator.getUserMedia=navigator.mozGetUserMedia));var ee=window.MediaStream;typeof ee>"u"&&typeof webkitMediaStream<"u"&&(ee=webkitMediaStream),typeof ee<"u"&&typeof ee.prototype.stop>"u"&&(ee.prototype.stop=function(){this.getTracks().forEach(function(X){X.stop()})});var Ee={};typeof ie<"u"?Ee.AudioContext=ie:typeof webkitAudioContext<"u"&&(Ee.AudioContext=webkitAudioContext);function Ce(X,ue){"srcObject"in ue?ue.srcObject=X:"mozSrcObject"in ue?ue.mozSrcObject=X:ue.srcObject=X}this.startDrawingFrames=function(){M()};function M(){if(!xe){var X=ye.length,ue=!1,_e=[];if(ye.forEach(function(Ue){Ue.stream||(Ue.stream={}),Ue.stream.fullcanvas?ue=Ue:_e.push(Ue)}),ue)re.width=ue.stream.width,re.height=ue.stream.height;else if(_e.length){re.width=X>1?_e[0].width*2:_e[0].width;var Re=1;(X===3||X===4)&&(Re=2),(X===5||X===6)&&(Re=3),(X===7||X===8)&&(Re=4),(X===9||X===10)&&(Re=5),re.height=_e[0].height*Re}else re.width=J.width||360,re.height=J.height||240;ue&&ue instanceof HTMLVideoElement&&U(ue),_e.forEach(function(Ue,Ne){U(Ue,Ne)}),setTimeout(M,J.frameInterval)}}function U(X,ue){if(!xe){var _e=0,Re=0,Ue=X.width,Ne=X.height;ue===1&&(_e=X.width),ue===2&&(Re=X.height),ue===3&&(_e=X.width,Re=X.height),ue===4&&(Re=X.height*2),ue===5&&(_e=X.width,Re=X.height*2),ue===6&&(Re=X.height*3),ue===7&&(_e=X.width,Re=X.height*3),typeof X.stream.left<"u"&&(_e=X.stream.left),typeof X.stream.top<"u"&&(Re=X.stream.top),typeof X.stream.width<"u"&&(Ue=X.stream.width),typeof X.stream.height<"u"&&(Ne=X.stream.height),se.drawImage(X,_e,Re,Ue,Ne),typeof X.stream.onRender=="function"&&X.stream.onRender(se,_e,Re,Ue,Ne,ue)}}function ae(){xe=!1;var X=be(),ue=G();return ue&&ue.getTracks().filter(function(_e){return _e.kind==="audio"}).forEach(function(_e){X.addTrack(_e)}),K.forEach(function(_e){_e.fullcanvas}),X}function be(){Te();var X;"captureStream"in re?X=re.captureStream():"mozCaptureStream"in re?X=re.mozCaptureStream():J.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var ue=new ee;return X.getTracks().filter(function(_e){return _e.kind==="video"}).forEach(function(_e){ue.addTrack(_e)}),re.stream=ue,ue}function G(){Ee.AudioContextConstructor||(Ee.AudioContextConstructor=new Ee.AudioContext),J.audioContext=Ee.AudioContextConstructor,J.audioSources=[],J.useGainNode===!0&&(J.gainNode=J.audioContext.createGain(),J.gainNode.connect(J.audioContext.destination),J.gainNode.gain.value=0);var X=0;if(K.forEach(function(ue){if(!!ue.getTracks().filter(function(Re){return Re.kind==="audio"}).length){X++;var _e=J.audioContext.createMediaStreamSource(ue);J.useGainNode===!0&&_e.connect(J.gainNode),J.audioSources.push(_e)}}),!!X)return J.audioDestination=J.audioContext.createMediaStreamDestination(),J.audioSources.forEach(function(ue){ue.connect(J.audioDestination)}),J.audioDestination.stream}function ve(X){var ue=document.createElement("video");return Ce(X,ue),ue.className=w,ue.muted=!0,ue.volume=0,ue.width=X.width||J.width||360,ue.height=X.height||J.height||240,ue.play(),ue}this.appendStreams=function(X){if(!X)throw"First parameter is required.";X instanceof Array||(X=[X]),X.forEach(function(ue){var _e=new ee;if(ue.getTracks().filter(function(Ne){return Ne.kind==="video"}).length){var Re=ve(ue);Re.stream=ue,ye.push(Re),_e.addTrack(ue.getTracks().filter(function(Ne){return Ne.kind==="video"})[0])}if(ue.getTracks().filter(function(Ne){return Ne.kind==="audio"}).length){var Ue=J.audioContext.createMediaStreamSource(ue);J.audioDestination=J.audioContext.createMediaStreamDestination(),Ue.connect(J.audioDestination),_e.addTrack(J.audioDestination.stream.getTracks().filter(function(Ne){return Ne.kind==="audio"})[0])}K.push(_e)})},this.releaseStreams=function(){ye=[],xe=!0,J.gainNode&&(J.gainNode.disconnect(),J.gainNode=null),J.audioSources.length&&(J.audioSources.forEach(function(X){X.disconnect()}),J.audioSources=[]),J.audioDestination&&(J.audioDestination.disconnect(),J.audioDestination=null),J.audioContext&&J.audioContext.close(),J.audioContext=null,se.clearRect(0,0,re.width,re.height),re.stream&&(re.stream.stop(),re.stream=null)},this.resetVideoStreams=function(X){X&&!(X instanceof Array)&&(X=[X]),Te(X)};function Te(X){ye=[],X=X||K,X.forEach(function(ue){if(!!ue.getTracks().filter(function(Re){return Re.kind==="video"}).length){var _e=ve(ue);_e.stream=ue,ye.push(_e)}})}this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=ae}typeof e>"u"&&(r.exports=De);/**
 * MultiStreamRecorder can record multiple videos in single container.
 * @summary Multi-videos recorder.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MultiStreamRecorder
 * @class
 * @example
 * var options = {
 *     mimeType: 'video/webm'
 * }
 * var recorder = new MultiStreamRecorder(ArrayOfMediaStreams, options);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStreams} mediaStreams - Array of MediaStreams.
 * @param {object} config - {disableLogs:true, frameInterval: 1, mimeType: "video/webm"}
 */function Fe(K,w){K=K||[];var te=this,ye,xe;w=w||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}},w.frameInterval||(w.frameInterval=10),w.video||(w.video={}),w.video.width||(w.video.width=360),w.video.height||(w.video.height=240),this.record=function(){ye=new De(K,w.elementClass||"multi-streams-mixer"),re().length&&(ye.frameInterval=w.frameInterval||10,ye.width=w.video.width||360,ye.height=w.video.height||240,ye.startDrawingFrames()),w.previewStream&&typeof w.previewStream=="function"&&w.previewStream(ye.getMixedStream()),xe=new oe(ye.getMixedStream(),w),xe.record()};function re(){var se=[];return K.forEach(function(J){W(J,"video").forEach(function(ie){se.push(ie)})}),se}this.stop=function(se){!xe||xe.stop(function(J){te.blob=J,se(J),te.clearRecordedData()})},this.pause=function(){xe&&xe.pause()},this.resume=function(){xe&&xe.resume()},this.clearRecordedData=function(){xe&&(xe.clearRecordedData(),xe=null),ye&&(ye.releaseStreams(),ye=null)},this.addStreams=function(se){if(!se)throw"First parameter is required.";se instanceof Array||(se=[se]),K.concat(se),!(!xe||!ye)&&(ye.appendStreams(se),w.previewStream&&typeof w.previewStream=="function"&&w.previewStream(ye.getMixedStream()))},this.resetVideoStreams=function(se){!ye||(se&&!(se instanceof Array)&&(se=[se]),ye.resetVideoStreams(se))},this.getMixer=function(){return ye},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}typeof e<"u"&&(e.MultiStreamRecorder=Fe);/**
 * RecordRTCPromisesHandler adds promises support in {@link RecordRTC}. Try a {@link https://github.com/muaz-khan/RecordRTC/blob/master/simple-demos/RecordRTCPromisesHandler.html|demo here}
 * @summary Promises for {@link RecordRTC}
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCPromisesHandler
 * @class
 * @example
 * var recorder = new RecordRTCPromisesHandler(mediaStream, options);
 * recorder.startRecording()
 *         .then(successCB)
 *         .catch(errorCB);
 * // Note: You can access all RecordRTC API using "recorder.recordRTC" e.g. 
 * recorder.recordRTC.onStateChanged = function(state) {};
 * recorder.recordRTC.setRecordingDuration(5000);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 * @throws Will throw an error if "new" keyword is not used to initiate "RecordRTCPromisesHandler". Also throws error if first argument "MediaStream" is missing.
 * @requires {@link RecordRTC}
 */function ge(K,w){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if(typeof K>"u")throw'First argument "MediaStream" is required.';var te=this;te.recordRTC=new e(K,w),this.startRecording=function(){return new Promise(function(ye,xe){try{te.recordRTC.startRecording(),ye()}catch(re){xe(re)}})},this.stopRecording=function(){return new Promise(function(ye,xe){try{te.recordRTC.stopRecording(function(re){if(te.blob=te.recordRTC.getBlob(),!te.blob||!te.blob.size){xe("Empty blob.",te.blob);return}ye(re)})}catch(re){xe(re)}})},this.pauseRecording=function(){return new Promise(function(ye,xe){try{te.recordRTC.pauseRecording(),ye()}catch(re){xe(re)}})},this.resumeRecording=function(){return new Promise(function(ye,xe){try{te.recordRTC.resumeRecording(),ye()}catch(re){xe(re)}})},this.getDataURL=function(ye){return new Promise(function(xe,re){try{te.recordRTC.getDataURL(function(se){xe(se)})}catch(se){re(se)}})},this.getBlob=function(){return new Promise(function(ye,xe){try{ye(te.recordRTC.getBlob())}catch(re){xe(re)}})},this.getInternalRecorder=function(){return new Promise(function(ye,xe){try{ye(te.recordRTC.getInternalRecorder())}catch(re){xe(re)}})},this.reset=function(){return new Promise(function(ye,xe){try{ye(te.recordRTC.reset())}catch(re){xe(re)}})},this.destroy=function(){return new Promise(function(ye,xe){try{ye(te.recordRTC.destroy())}catch(re){xe(re)}})},this.getState=function(){return new Promise(function(ye,xe){try{ye(te.recordRTC.getState())}catch(re){xe(re)}})},this.blob=null,this.version="5.6.2"}typeof e<"u"&&(e.RecordRTCPromisesHandler=ge);/**
 * WebAssemblyRecorder lets you create webm videos in JavaScript via WebAssembly. The library consumes raw RGBA32 buffers (4 bytes per pixel) and turns them into a webm video with the given framerate and quality. This makes it compatible out-of-the-box with ImageData from a CANVAS. With realtime mode you can also use webm-wasm for streaming webm videos.
 * @summary Video recording feature in Chrome, Firefox and maybe Edge.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WebAssemblyRecorder
 * @class
 * @example
 * var recorder = new WebAssemblyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {webAssemblyPath:'webm-wasm.wasm',workerPath: 'webm-worker.js', frameRate: 30, width: 1920, height: 1080, bitrate: 1024, realtime: true}
 */function Ye(K,w){(typeof ReadableStream>"u"||typeof WritableStream>"u")&&console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),w=w||{},w.width=w.width||640,w.height=w.height||480,w.frameRate=w.frameRate||30,w.bitrate=w.bitrate||1200,w.realtime=w.realtime||!0;var te;function ye(){return new ReadableStream({start:function(B){var ee=document.createElement("canvas"),Ee=document.createElement("video"),Ce=!0;Ee.srcObject=K,Ee.muted=!0,Ee.height=w.height,Ee.width=w.width,Ee.volume=0,Ee.onplaying=function(){ee.width=w.width,ee.height=w.height;var M=ee.getContext("2d"),U=1e3/w.frameRate,ae=setInterval(function(){if(te&&(clearInterval(ae),B.close()),Ce&&(Ce=!1,w.onVideoProcessStarted&&w.onVideoProcessStarted()),M.drawImage(Ee,0,0),B._controlledReadableStream.state!=="closed")try{B.enqueue(M.getImageData(0,0,w.width,w.height))}catch{}},U)},Ee.play()}})}var xe;function re(B,ee){if(!w.workerPath&&!ee){te=!1,fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then(function(Ce){Ce.arrayBuffer().then(function(M){re(B,M)})});return}if(!w.workerPath&&ee instanceof ArrayBuffer){var Ee=new Blob([ee],{type:"text/javascript"});w.workerPath=d.createObjectURL(Ee)}w.workerPath||console.error("workerPath parameter is missing."),xe=new Worker(w.workerPath),xe.postMessage(w.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),xe.addEventListener("message",function(Ce){Ce.data==="READY"?(xe.postMessage({width:w.width,height:w.height,bitrate:w.bitrate||1200,timebaseDen:w.frameRate||30,realtime:w.realtime}),ye().pipeTo(new WritableStream({write:function(M){if(te){console.error("Got image, but recorder is finished!");return}xe.postMessage(M.data.buffer,[M.data.buffer])}}))):Ce.data&&(se||ie.push(Ce.data))})}this.record=function(){ie=[],se=!1,this.blob=null,re(K),typeof w.initCallback=="function"&&w.initCallback()};var se;this.pause=function(){se=!0},this.resume=function(){se=!1};function J(B){if(!xe){B&&B();return}xe.addEventListener("message",function(ee){ee.data===null&&(xe.terminate(),xe=null,B&&B())}),xe.postMessage(null)}var ie=[];this.stop=function(B){te=!0;var ee=this;J(function(){ee.blob=new Blob(ie,{type:"video/webm"}),B(ee.blob)})},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){ie=[],se=!1,this.blob=null},this.blob=null}typeof e<"u"&&(e.WebAssemblyRecorder=Ye)})(zy);const O8=zy.exports;var I8={exports:{}};const Aw=$g(b8);/*!
 * videojs-record
 * @version 4.5.0
 * @see https://github.com/collab-project/videojs-record
 * @copyright 2014-2021 Collab
 * @license MIT
 */(function(r,e){(function(n,t){r.exports=t(zy.exports,Aw)})(self,function(i,n){return(()=>{var t={"./node_modules/@babel/runtime/helpers/assertThisInitialized.js":l=>{function c(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}l.exports=c},"./node_modules/@babel/runtime/helpers/asyncToGenerator.js":l=>{function c(h,p,y,S,C,x,I){try{var H=h[x](I),Z=H.value}catch(W){y(W);return}H.done?p(Z):Promise.resolve(Z).then(S,C)}function d(h){return function(){var p=this,y=arguments;return new Promise(function(S,C){var x=h.apply(p,y);function I(Z){c(x,S,C,I,H,"next",Z)}function H(Z){c(x,S,C,I,H,"throw",Z)}I(void 0)})}}l.exports=d},"./node_modules/@babel/runtime/helpers/classCallCheck.js":l=>{function c(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}l.exports=c},"./node_modules/@babel/runtime/helpers/createClass.js":l=>{function c(h,p){for(var y=0;y<p.length;y++){var S=p[y];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(h,S.key,S)}}function d(h,p,y){return p&&c(h.prototype,p),y&&c(h,y),h}l.exports=d},"./node_modules/@babel/runtime/helpers/get.js":(l,c,d)=>{var h=d("./node_modules/@babel/runtime/helpers/superPropBase.js");function p(y,S,C){return typeof Reflect<"u"&&Reflect.get?l.exports=p=Reflect.get:l.exports=p=function(I,H,Z){var W=h(I,H);if(!!W){var j=Object.getOwnPropertyDescriptor(W,H);return j.get?j.get.call(Z):j.value}},p(y,S,C||y)}l.exports=p},"./node_modules/@babel/runtime/helpers/getPrototypeOf.js":l=>{function c(d){return l.exports=c=Object.setPrototypeOf?Object.getPrototypeOf:function(p){return p.__proto__||Object.getPrototypeOf(p)},c(d)}l.exports=c},"./node_modules/@babel/runtime/helpers/inherits.js":(l,c,d)=>{var h=d("./node_modules/@babel/runtime/helpers/setPrototypeOf.js");function p(y,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(S&&S.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),S&&h(y,S)}l.exports=p},"./node_modules/@babel/runtime/helpers/interopRequireDefault.js":l=>{function c(d){return d&&d.__esModule?d:{default:d}}l.exports=c},"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js":(l,c,d)=>{var h=d("./node_modules/@babel/runtime/helpers/typeof.js"),p=d("./node_modules/@babel/runtime/helpers/assertThisInitialized.js");function y(S,C){return C&&(h(C)==="object"||typeof C=="function")?C:p(S)}l.exports=y},"./node_modules/@babel/runtime/helpers/setPrototypeOf.js":l=>{function c(d,h){return l.exports=c=Object.setPrototypeOf||function(y,S){return y.__proto__=S,y},c(d,h)}l.exports=c},"./node_modules/@babel/runtime/helpers/superPropBase.js":(l,c,d)=>{var h=d("./node_modules/@babel/runtime/helpers/getPrototypeOf.js");function p(y,S){for(;!Object.prototype.hasOwnProperty.call(y,S)&&(y=h(y),y!==null););return y}l.exports=p},"./node_modules/@babel/runtime/helpers/typeof.js":l=>{function c(d){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?l.exports=c=function(p){return typeof p}:l.exports=c=function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},c(d)}l.exports=c},"./node_modules/@babel/runtime/regenerator/index.js":(l,c,d)=>{l.exports=d("./node_modules/regenerator-runtime/runtime.js")},"./node_modules/add-zero/index.js":function(l,c,d){var h;(function(p){function y(S,C){C=C||2;var x=Number(S)<0,I=S.toString(),H=0;return x&&(I=I.slice(1)),H=C-I.length+1,I=new Array(H).join("0").concat(I),(x?"-":"")+I}h=function(){return y}.call(p,d,p,l),h!==void 0&&(l.exports=h)})(this)},"./src/js/controls/animation-display.js":(l,c,d)=>{var h=d("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var p=h(d("./node_modules/@babel/runtime/helpers/classCallCheck.js")),y=h(d("./node_modules/@babel/runtime/helpers/createClass.js")),S=h(d("./node_modules/@babel/runtime/helpers/get.js")),C=h(d("./node_modules/@babel/runtime/helpers/inherits.js")),x=h(d("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),I=h(d("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),H=h(d("video.js"));function Z(Y){var oe=W();return function(){var pe=(0,I.default)(Y),de;if(oe){var Se=(0,I.default)(this).constructor;de=Reflect.construct(pe,arguments,Se)}else de=pe.apply(this,arguments);return(0,x.default)(this,de)}}function W(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var j=H.default.getComponent("Component"),le=function(Y){(0,C.default)(V,Y);var oe=Z(V);function V(){return(0,p.default)(this,V),oe.apply(this,arguments)}return(0,y.default)(V,[{key:"createEl",value:function(){var de=H.default.dom.createEl("img"),Se=(0,S.default)((0,I.default)(V.prototype),"createEl",this).call(this,"div",{className:"vjs-animation-display",dir:"ltr"});return Se.appendChild(de),Se}}]),V}(j);j.registerComponent("AnimationDisplay",le);var fe=le;c.default=fe,l.exports=c.default},"./src/js/controls/camera-button.js":(l,c,d)=>{var h=d("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var p=h(d("./node_modules/@babel/runtime/helpers/classCallCheck.js")),y=h(d("./node_modules/@babel/runtime/helpers/createClass.js")),S=h(d("./node_modules/@babel/runtime/helpers/get.js")),C=h(d("./node_modules/@babel/runtime/helpers/inherits.js")),x=h(d("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),I=h(d("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),H=h(d("video.js")),Z=h(d("./src/js/event.js"));function W(V){var pe=j();return function(){var Se=(0,I.default)(V),Ae;if(pe){var ke=(0,I.default)(this).constructor;Ae=Reflect.construct(Se,arguments,ke)}else Ae=Se.apply(this,arguments);return(0,x.default)(this,Ae)}}function j(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var le=H.default.getComponent("Button"),fe=H.default.getComponent("Component"),Y=function(V){(0,C.default)(de,V);var pe=W(de);function de(){return(0,p.default)(this,de),pe.apply(this,arguments)}return(0,y.default)(de,[{key:"buildCSSClass",value:function(){return"vjs-camera-button vjs-control vjs-button vjs-icon-photo-camera"}},{key:"enable",value:function(){(0,S.default)((0,I.default)(de.prototype),"enable",this).call(this),this.on(this.player_,Z.default.START_RECORD,this.onStart),this.on(this.player_,Z.default.STOP_RECORD,this.onStop)}},{key:"disable",value:function(){(0,S.default)((0,I.default)(de.prototype),"disable",this).call(this),this.off(this.player_,Z.default.START_RECORD,this.onStart),this.off(this.player_,Z.default.STOP_RECORD,this.onStop)}},{key:"show",value:function(){this.layoutExclude&&this.layoutExclude===!0||(0,S.default)((0,I.default)(de.prototype),"show",this).call(this)}},{key:"handleClick",value:function(Ae){var ke=this.player_.record();ke.isProcessing()?(ke.retrySnapshot(),this.onStop(),this.player_.trigger(Z.default.RETRY)):ke.start()}},{key:"onStart",value:function(Ae){this.removeClass("vjs-icon-photo-camera"),this.addClass("vjs-icon-replay"),this.controlText("Retry")}},{key:"onStop",value:function(Ae){this.removeClass("vjs-icon-replay"),this.addClass("vjs-icon-photo-camera"),this.controlText("Image")}}]),de}(le);Y.prototype.controlText_="Image",fe.registerComponent("CameraButton",Y);var oe=Y;c.default=oe,l.exports=c.default},"./src/js/controls/device-button.js":(l,c,d)=>{var h=d("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var p=h(d("./node_modules/@babel/runtime/helpers/classCallCheck.js")),y=h(d("./node_modules/@babel/runtime/helpers/createClass.js")),S=h(d("./node_modules/@babel/runtime/helpers/get.js")),C=h(d("./node_modules/@babel/runtime/helpers/inherits.js")),x=h(d("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),I=h(d("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),H=h(d("video.js"));function Z(oe){var V=W();return function(){var de=(0,I.default)(oe),Se;if(V){var Ae=(0,I.default)(this).constructor;Se=Reflect.construct(de,arguments,Ae)}else Se=de.apply(this,arguments);return(0,x.default)(this,Se)}}function W(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var j=H.default.getComponent("Button"),le=H.default.getComponent("Component"),fe=function(oe){(0,C.default)(pe,oe);var V=Z(pe);function pe(){return(0,p.default)(this,pe),V.apply(this,arguments)}return(0,y.default)(pe,[{key:"handleClick",value:function(Se){this.player_.record().getDevice()}},{key:"show",value:function(){this.layoutExclude&&this.layoutExclude===!0||(0,S.default)((0,I.default)(pe.prototype),"show",this).call(this)}}]),pe}(j);fe.prototype.controlText_="Device",le.registerComponent("DeviceButton",fe);var Y=fe;c.default=Y,l.exports=c.default},"./src/js/controls/picture-in-picture-toggle.js":(l,c,d)=>{var h=d("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var p=h(d("./node_modules/@babel/runtime/regenerator/index.js")),y=h(d("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),S=h(d("./node_modules/@babel/runtime/helpers/classCallCheck.js")),C=h(d("./node_modules/@babel/runtime/helpers/createClass.js")),x=h(d("./node_modules/@babel/runtime/helpers/get.js")),I=h(d("./node_modules/@babel/runtime/helpers/inherits.js")),H=h(d("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),Z=h(d("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),W=h(d("video.js")),j=h(d("./src/js/event.js"));function le(de){var Se=fe();return function(){var ke=(0,Z.default)(de),De;if(Se){var Fe=(0,Z.default)(this).constructor;De=Reflect.construct(ke,arguments,Fe)}else De=ke.apply(this,arguments);return(0,H.default)(this,De)}}function fe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Y=W.default.getComponent("Button"),oe=W.default.getComponent("Component"),V=function(de){(0,I.default)(Ae,de);var Se=le(Ae);function Ae(ke,De){var Fe;return(0,S.default)(this,Ae),Fe=Se.call(this,ke,De),Fe.on(Fe.player_,j.default.ENTER_PIP,Fe.onStart),Fe.on(Fe.player_,j.default.LEAVE_PIP,Fe.onStop),Fe}return(0,C.default)(Ae,[{key:"buildCSSClass",value:function(){return"vjs-pip-button vjs-control vjs-button vjs-icon-picture-in-picture-start"}},{key:"show",value:function(){this.layoutExclude&&this.layoutExclude===!0||(0,x.default)((0,Z.default)(Ae.prototype),"show",this).call(this)}},{key:"handleClick",value:function(){var ke=(0,y.default)(p.default.mark(function Fe(ge){var Ye;return p.default.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(Ye=this.player_.record(),this.disable(),w.prev=2,Ye.mediaElement===document.pictureInPictureElement){w.next=8;break}return w.next=6,Ye.mediaElement.requestPictureInPicture();case 6:w.next=10;break;case 8:return w.next=10,document.exitPictureInPicture();case 10:w.next=15;break;case 12:w.prev=12,w.t0=w.catch(2),this.player_.trigger(j.default.ERROR,w.t0);case 15:return w.prev=15,this.enable(),w.finish(15);case 18:case"end":return w.stop()}},Fe,this,[[2,12,15,18]])}));function De(Fe){return ke.apply(this,arguments)}return De}()},{key:"onStart",value:function(De){this.removeClass("vjs-icon-picture-in-picture-start"),this.addClass("vjs-icon-picture-in-picture-stop")}},{key:"onStop",value:function(De){this.removeClass("vjs-icon-picture-in-picture-stop"),this.addClass("vjs-icon-picture-in-picture-start")}}]),Ae}(Y);V.prototype.controlText_="Picture in Picture",oe.registerComponent("PictureInPictureToggle",V);var pe=V;c.default=pe,l.exports=c.default},"./src/js/controls/record-canvas.js":(l,c,d)=>{var h=d("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var p=h(d("./node_modules/@babel/runtime/helpers/classCallCheck.js")),y=h(d("./node_modules/@babel/runtime/helpers/createClass.js")),S=h(d("./node_modules/@babel/runtime/helpers/get.js")),C=h(d("./node_modules/@babel/runtime/helpers/inherits.js")),x=h(d("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),I=h(d("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),H=h(d("video.js"));function Z(Y){var oe=W();return function(){var pe=(0,I.default)(Y),de;if(oe){var Se=(0,I.default)(this).constructor;de=Reflect.construct(pe,arguments,Se)}else de=pe.apply(this,arguments);return(0,x.default)(this,de)}}function W(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var j=H.default.getComponent("Component"),le=function(Y){(0,C.default)(V,Y);var oe=Z(V);function V(){return(0,p.default)(this,V),oe.apply(this,arguments)}return(0,y.default)(V,[{key:"createEl",value:function(){var de=H.default.dom.createEl("canvas"),Se=(0,S.default)((0,I.default)(V.prototype),"createEl",this).call(this,"div",{className:"vjs-record-canvas",dir:"ltr"});return Se.appendChild(de),Se}}]),V}(j);j.registerComponent("RecordCanvas",le);var fe=le;c.default=fe,l.exports=c.default},"./src/js/controls/record-indicator.js":(l,c,d)=>{var h=d("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var p=h(d("./node_modules/@babel/runtime/helpers/classCallCheck.js")),y=h(d("./node_modules/@babel/runtime/helpers/createClass.js")),S=h(d("./node_modules/@babel/runtime/helpers/get.js")),C=h(d("./node_modules/@babel/runtime/helpers/inherits.js")),x=h(d("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),I=h(d("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),H=h(d("video.js")),Z=h(d("./src/js/event.js"));function W(oe){var V=j();return function(){var de=(0,I.default)(oe),Se;if(V){var Ae=(0,I.default)(this).constructor;Se=Reflect.construct(de,arguments,Ae)}else Se=de.apply(this,arguments);return(0,x.default)(this,Se)}}function j(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var le=H.default.getComponent("Component"),fe=function(oe){(0,C.default)(pe,oe);var V=W(pe);function pe(de,Se){var Ae;return(0,p.default)(this,pe),Ae=V.call(this,de,Se),Ae.enable(),Ae}return(0,y.default)(pe,[{key:"createEl",value:function(){var Se={className:"vjs-record-indicator vjs-control",dir:"ltr"},Ae={"data-label":this.localize("REC")};return(0,S.default)((0,I.default)(pe.prototype),"createEl",this).call(this,"div",Se,Ae)}},{key:"enable",value:function(){this.on(this.player_,Z.default.START_RECORD,this.show),this.on(this.player_,Z.default.STOP_RECORD,this.hide)}},{key:"disable",value:function(){this.off(this.player_,Z.default.START_RECORD,this.show),this.off(this.player_,Z.default.STOP_RECORD,this.hide)}},{key:"show",value:function(){this.layoutExclude&&this.layoutExclude===!0||(0,S.default)((0,I.default)(pe.prototype),"show",this).call(this)}}]),pe}(le);le.registerComponent("RecordIndicator",fe);var Y=fe;c.default=Y,l.exports=c.default},"./src/js/controls/record-toggle.js":(l,c,d)=>{var h=d("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var p=h(d("./node_modules/@babel/runtime/helpers/classCallCheck.js")),y=h(d("./node_modules/@babel/runtime/helpers/createClass.js")),S=h(d("./node_modules/@babel/runtime/helpers/get.js")),C=h(d("./node_modules/@babel/runtime/helpers/inherits.js")),x=h(d("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),I=h(d("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),H=h(d("video.js")),Z=h(d("./src/js/event.js"));function W(V){var pe=j();return function(){var Se=(0,I.default)(V),Ae;if(pe){var ke=(0,I.default)(this).constructor;Ae=Reflect.construct(Se,arguments,ke)}else Ae=Se.apply(this,arguments);return(0,x.default)(this,Ae)}}function j(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var le=H.default.getComponent("Button"),fe=H.default.getComponent("Component"),Y=function(V){(0,C.default)(de,V);var pe=W(de);function de(){return(0,p.default)(this,de),pe.apply(this,arguments)}return(0,y.default)(de,[{key:"buildCSSClass",value:function(){return"vjs-record-button vjs-control vjs-button vjs-icon-record-start"}},{key:"enable",value:function(){(0,S.default)((0,I.default)(de.prototype),"enable",this).call(this),this.on(this.player_,Z.default.START_RECORD,this.onStart),this.on(this.player_,Z.default.STOP_RECORD,this.onStop)}},{key:"disable",value:function(){(0,S.default)((0,I.default)(de.prototype),"disable",this).call(this),this.off(this.player_,Z.default.START_RECORD,this.onStart),this.off(this.player_,Z.default.STOP_RECORD,this.onStop)}},{key:"show",value:function(){this.layoutExclude&&this.layoutExclude===!0||(0,S.default)((0,I.default)(de.prototype),"show",this).call(this)}},{key:"handleClick",value:function(Ae){var ke=this.player_.record();ke.isRecording()?ke.stop():ke.start()}},{key:"onStart",value:function(Ae){this.removeClass("vjs-icon-record-start"),this.addClass("vjs-icon-record-stop"),this.controlText("Stop")}},{key:"onStop",value:function(Ae){this.removeClass("vjs-icon-record-stop"),this.addClass("vjs-icon-record-start"),this.controlText("Record")}}]),de}(le);Y.prototype.controlText_="Record",fe.registerComponent("RecordToggle",Y);var oe=Y;c.default=oe,l.exports=c.default},"./src/js/defaults.js":(l,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d={image:!1,audio:!1,video:!1,animation:!1,screen:!1,maxLength:10,maxFileSize:0,displayMilliseconds:!1,formatTime:void 0,frameWidth:320,frameHeight:240,debug:!1,pip:!1,autoMuteDevice:!1,videoBitRate:1200,videoEngine:"recordrtc",videoFrameRate:30,videoMimeType:"video/webm",videoRecorderType:"auto",videoWorkerURL:"",videoWebAssemblyURL:"",audioEngine:"recordrtc",audioRecorderType:"auto",audioMimeType:"auto",audioBufferSize:4096,audioSampleRate:44100,audioBitRate:128,audioChannels:2,audioWorkerURL:"",audioWebAssemblyURL:"",audioBufferUpdate:!1,animationFrameRate:200,animationQuality:10,imageOutputType:"dataURL",imageOutputFormat:"image/png",imageOutputQuality:.92,timeSlice:0,convertEngine:"",convertWorkerURL:"",convertOptions:[],convertAuto:!0,hotKeys:!1,pluginLibraryOptions:{}},h=d;c.default=h,l.exports=c.default},"./src/js/engine/convert-engine.js":(l,c,d)=>{var h=d("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(c,"__esModule",{value:!0}),c.FFMPEGWASM=c.FFMPEGJS=c.TSEBML=c.CONVERT_PLUGINS=c.ConvertEngine=void 0;var p=h(d("./node_modules/@babel/runtime/helpers/classCallCheck.js")),y=h(d("./node_modules/@babel/runtime/helpers/createClass.js")),S=h(d("./node_modules/@babel/runtime/helpers/inherits.js")),C=h(d("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),x=h(d("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),I=h(d("video.js")),H=d("./src/js/utils/file-util.js");function Z(pe){var de=W();return function(){var Ae=(0,x.default)(pe),ke;if(de){var De=(0,x.default)(this).constructor;ke=Reflect.construct(Ae,arguments,De)}else ke=Ae.apply(this,arguments);return(0,C.default)(this,ke)}}function W(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var j=I.default.getComponent("Component"),le="ts-ebml";c.TSEBML=le;var fe="ffmpeg.js";c.FFMPEGJS=fe;var Y="ffmpeg.wasm";c.FFMPEGWASM=Y;var oe=[le,fe,Y];c.CONVERT_PLUGINS=oe;var V=function(pe){(0,S.default)(Se,pe);var de=Z(Se);function Se(Ae,ke){return(0,p.default)(this,Se),ke.evented=!0,de.call(this,Ae,ke)}return(0,y.default)(Se,[{key:"setup",value:function(ke,De){this.mediaType=ke,this.debug=De}},{key:"loadBlob",value:function(ke){return(0,H.blobToArrayBuffer)(ke)}},{key:"addFileInfo",value:function(ke,De){(0,H.addFileInfo)(ke,De)}},{key:"saveAs",value:function(ke){var De=ke[Object.keys(ke)[0]];(0,H.downloadBlob)(De,this.player().convertedData)}}]),Se}(j);c.ConvertEngine=V,I.default.ConvertEngine=V,j.registerComponent("ConvertEngine",V)},"./src/js/engine/engine-loader.js":(l,c,d)=>{var h=d("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(c,"__esModule",{value:!0}),c.getConvertEngine=c.getVideoEngine=c.isAudioPluginActive=c.getAudioEngine=void 0;var p=h(d("video.js")),y=h(d("./src/js/engine/record-rtc.js")),S=d("./src/js/engine/convert-engine.js"),C=d("./src/js/engine/record-engine.js"),x=function(j){var le;switch(j){case C.RECORDRTC:le=y.default;break;case C.LIBVORBISJS:le=p.default.LibVorbisEngine;break;case C.RECORDERJS:le=p.default.RecorderjsEngine;break;case C.LAMEJS:le=p.default.LamejsEngine;break;case C.OPUSRECORDER:le=p.default.OpusRecorderEngine;break;case C.OPUSMEDIARECORDER:le=p.default.OpusMediaRecorderEngine;break;case C.VMSG:le=p.default.VmsgEngine;break;default:throw new Error("Unknown audioEngine: "+j)}return le};c.getAudioEngine=x;var I=function(j){var le;switch(j){case C.RECORDRTC:le=y.default;break;case C.WEBMWASM:le=p.default.WebmWasmEngine;break;default:throw new Error("Unknown videoEngine: "+j)}return le};c.getVideoEngine=I;var H=function(j){return C.AUDIO_PLUGINS.indexOf(j)>-1};c.isAudioPluginActive=H;var Z=function(j){var le;switch(j){case"":break;case S.TSEBML:le=p.default.TsEBMLEngine;break;case S.FFMPEGJS:le=p.default.FFmpegjsEngine;break;case S.FFMPEGWASM:le=p.default.FFmpegWasmEngine;break;default:throw new Error("Unknown convertEngine: "+j)}return le};c.getConvertEngine=Z},"./src/js/engine/record-engine.js":(l,c,d)=>{var h=d("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(c,"__esModule",{value:!0}),c.WEBMWASM=c.VMSG=c.OPUSMEDIARECORDER=c.OPUSRECORDER=c.LAMEJS=c.RECORDERJS=c.LIBVORBISJS=c.RECORDRTC=c.VIDEO_PLUGINS=c.AUDIO_PLUGINS=c.RECORD_PLUGINS=c.RecordEngine=void 0;var p=h(d("./node_modules/@babel/runtime/helpers/classCallCheck.js")),y=h(d("./node_modules/@babel/runtime/helpers/createClass.js")),S=h(d("./node_modules/@babel/runtime/helpers/inherits.js")),C=h(d("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),x=h(d("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),I=h(d("video.js")),H=h(d("./src/js/event.js")),Z=d("./src/js/utils/file-util.js");function W(Ye){var K=j();return function(){var te=(0,x.default)(Ye),ye;if(K){var xe=(0,x.default)(this).constructor;ye=Reflect.construct(te,arguments,xe)}else ye=te.apply(this,arguments);return(0,C.default)(this,ye)}}function j(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var le=I.default.getComponent("Component"),fe="recordrtc";c.RECORDRTC=fe;var Y="libvorbis.js";c.LIBVORBISJS=Y;var oe="recorder.js";c.RECORDERJS=oe;var V="lamejs";c.LAMEJS=V;var pe="opus-recorder";c.OPUSRECORDER=pe;var de="opus-media-recorder";c.OPUSMEDIARECORDER=de;var Se="vmsg";c.VMSG=Se;var Ae="webm-wasm";c.WEBMWASM=Ae;var ke=[Y,oe,V,pe,de,Se];c.AUDIO_PLUGINS=ke;var De=[Ae];c.VIDEO_PLUGINS=De;var Fe=ke.concat(De);c.RECORD_PLUGINS=Fe;var ge=function(Ye){(0,S.default)(w,Ye);var K=W(w);function w(te,ye){return(0,p.default)(this,w),ye.evented=!0,K.call(this,te,ye)}return(0,y.default)(w,[{key:"dispose",value:function(){this.recordedData!==void 0&&URL.revokeObjectURL(this.recordedData)}},{key:"destroy",value:function(){}},{key:"addFileInfo",value:function(ye){(0,Z.addFileInfo)(ye)}},{key:"onStopRecording",value:function(ye){this.recordedData=ye,this.addFileInfo(this.recordedData),this.dispose(),this.trigger(H.default.RECORD_COMPLETE)}},{key:"saveAs",value:function(ye){var xe=ye[Object.keys(ye)[0]];(0,Z.downloadBlob)(xe,this.recordedData)}}]),w}(le);c.RecordEngine=ge,I.default.RecordEngine=ge,le.registerComponent("RecordEngine",ge)},"./src/js/engine/record-mode.js":(l,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.AUDIO_SCREEN=c.SCREEN_ONLY=c.ANIMATION=c.AUDIO_VIDEO=c.VIDEO_ONLY=c.AUDIO_ONLY=c.IMAGE_ONLY=c.getRecorderMode=void 0;var d="image_only";c.IMAGE_ONLY=d;var h="audio_only";c.AUDIO_ONLY=h;var p="video_only";c.VIDEO_ONLY=p;var y="audio_video";c.AUDIO_VIDEO=y;var S="audio_screen";c.AUDIO_SCREEN=S;var C="animation";c.ANIMATION=C;var x="screen_only";c.SCREEN_ONLY=x;var I=function(W,j,le,fe,Y){if(H(W))return d;if(H(fe))return C;if(H(j)&&H(le))return y;if(H(j)&&H(Y))return S;if(!H(j)&&H(Y))return x;if(H(j)&&!H(le))return h;if(!H(j)&&H(le))return p};c.getRecorderMode=I;var H=function(W){return W===Object(W)||W===!0}},"./src/js/engine/record-rtc.js":(l,c,d)=>{var h=d("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var p=h(d("./node_modules/@babel/runtime/helpers/classCallCheck.js")),y=h(d("./node_modules/@babel/runtime/helpers/createClass.js")),S=h(d("./node_modules/@babel/runtime/helpers/get.js")),C=h(d("./node_modules/@babel/runtime/helpers/inherits.js")),x=h(d("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),I=h(d("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),H=h(d("video.js")),Z=h(d("recordrtc")),W=h(d("./src/js/event.js")),j=d("./src/js/engine/record-engine.js");d("./src/js/utils/detect-browser.js");var le=d("./src/js/engine/record-mode.js");function fe(de){var Se=Y();return function(){var ke=(0,I.default)(de),De;if(Se){var Fe=(0,I.default)(this).constructor;De=Reflect.construct(ke,arguments,Fe)}else De=ke.apply(this,arguments);return(0,x.default)(this,De)}}function Y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var oe=H.default.getComponent("Component"),V=function(de){(0,C.default)(Ae,de);var Se=fe(Ae);function Ae(){return(0,p.default)(this,Ae),Se.apply(this,arguments)}return(0,y.default)(Ae,[{key:"setup",value:function(De,Fe,ge){this.inputStream=De,this.mediaType=Fe,this.debug=ge,"screen"in this.mediaType&&(this.mediaType.video=!0),this.recorderType!==void 0&&(this.mediaType.video=this.recorderType),this.engine=new Z.default.MRecordRTC,this.engine.mediaType=this.mediaType,this.engine.disableLogs=!this.debug,this.engine.mimeType=this.mimeType,this.engine.bufferSize=this.bufferSize,this.engine.sampleRate=this.sampleRate,this.engine.numberOfAudioChannels=this.audioChannels,this.engine.video=this.video,this.engine.canvas=this.canvas,this.engine.bitrate=this.bitRate,this.engine.quality=this.quality,this.engine.frameRate=this.frameRate,this.timeSlice!==void 0&&(this.engine.timeSlice=this.timeSlice,this.engine.onTimeStamp=this.onTimeStamp.bind(this)),this.engine.workerPath=this.workerPath,this.engine.webAssemblyPath=this.videoWebAssemblyURL,this.engine.addStream(this.inputStream)}},{key:"dispose",value:function(){(0,S.default)((0,I.default)(Ae.prototype),"dispose",this).call(this),this.destroy()}},{key:"destroy",value:function(){this.engine&&typeof this.engine.destroy=="function"&&this.engine.destroy()}},{key:"start",value:function(){this.engine.startRecording()}},{key:"stop",value:function(){this.engine.stopRecording(this.onStopRecording.bind(this))}},{key:"pause",value:function(){this.engine.pauseRecording()}},{key:"resume",value:function(){this.engine.resumeRecording()}},{key:"saveAs",value:function(De){this.engine&&De!==void 0&&this.engine.save(De)}},{key:"onStopRecording",value:function(De,Fe){var ge=this;URL.revokeObjectURL(De);var Ye=this.player().record().getRecordType();this.engine.getBlob(function(K){switch(Ye){case le.AUDIO_ONLY:K.audio!==void 0&&(ge.recordedData=K.audio);break;case le.VIDEO_ONLY:case le.AUDIO_VIDEO:case le.AUDIO_SCREEN:case le.SCREEN_ONLY:K.video!==void 0&&(ge.recordedData=K.video);break;case le.ANIMATION:K.gif!==void 0&&(ge.recordedData=K.gif);break}ge.addFileInfo(ge.recordedData),ge.trigger(W.default.RECORD_COMPLETE)})}},{key:"onTimeStamp",value:function(De,Fe){this.player().currentTimestamp=De,this.player().allTimestamps=Fe;var ge;switch(this.player().record().getRecordType()){case le.AUDIO_ONLY:ge=this.engine.audioRecorder;break;case le.ANIMATION:ge=this.engine.gifRecorder;break;default:ge=this.engine.videoRecorder}var Ye=!1;if(ge&&(ge=ge.getInternalRecorder()),ge instanceof Z.default.MediaStreamRecorder&&(this.player().recordedData=ge.getArrayOfBlobs(),this.addFileInfo(this.player().recordedData[this.player_.recordedData.length-1]),this.maxFileSize>0)){var K=new Blob(this.player().recordedData).size;K>=this.maxFileSize&&(Ye=!0)}this.player().trigger(W.default.TIMESTAMP),Ye&&this.player().record().stop()}}]),Ae}(j.RecordEngine);H.default.RecordRTCEngine=V,oe.registerComponent("RecordRTCEngine",V);var pe=V;c.default=pe,l.exports=c.default},"./src/js/event.js":(l,c,d)=>{var h=d("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var p=h(d("./node_modules/@babel/runtime/helpers/classCallCheck.js")),y=function C(){(0,p.default)(this,C)};y.READY="ready",y.ERROR="error",y.PLAYING="playing",y.LOADEDMETADATA="loadedmetadata",y.LOADSTART="loadstart",y.USERINACTIVE="userinactive",y.TIMEUPDATE="timeupdate",y.DURATIONCHANGE="durationchange",y.ENDED="ended",y.PAUSE="pause",y.PLAY="play",y.DEVICE_READY="deviceReady",y.DEVICE_ERROR="deviceError",y.START_RECORD="startRecord",y.STOP_RECORD="stopRecord",y.FINISH_RECORD="finishRecord",y.RECORD_COMPLETE="recordComplete",y.PROGRESS_RECORD="progressRecord",y.TIMESTAMP="timestamp",y.ENUMERATE_READY="enumerateReady",y.ENUMERATE_ERROR="enumerateError",y.AUDIO_BUFFER_UPDATE="audioBufferUpdate",y.AUDIO_OUTPUT_READY="audioOutputReady",y.START_CONVERT="startConvert",y.FINISH_CONVERT="finishConvert",y.ENTER_PIP="enterPIP",y.LEAVE_PIP="leavePIP",y.RETRY="retry",y.ENTERPICTUREINPICTURE="enterpictureinpicture",y.LEAVEPICTUREINPICTURE="leavepictureinpicture",Object.freeze(y);var S=y;c.default=S,l.exports=c.default},"./src/js/hot-keys.js":(l,c,d)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var h=d("./src/js/engine/record-mode.js"),p=88,y=80,S=67,C=function(H){switch(H.which){case p:switch(this.player_.record().getRecordType()){case h.IMAGE_ONLY:this.player_.cameraButton.trigger("click");break;default:this.player_.recordToggle.trigger("click")}break;case y:this.player_.record().pictureInPicture===!0&&this.player_.pipToggle.trigger("click");break;case S:this.player_.controlBar.playToggle&&this.player_.controlBar.playToggle.contentEl()&&player.controlBar.playToggle.trigger("click");break}},x=C;c.default=x,l.exports=c.default},"./src/js/utils/browser-shim.js":(l,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=function(y,S){"srcObject"in S?S.srcObject=y:"mozSrcObject"in S?S.mozSrcObject=y:S.srcObject=y},h=d;c.default=h,l.exports=c.default},"./src/js/utils/compare-version.js":(l,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=function(y,S){if(typeof y!="string"||typeof S!="string")return!1;y=y.split("."),S=S.split(".");var C=Math.min(y.length,S.length),x=0;for(x;x<C;++x){if(y[x]=parseInt(y[x],10),S[x]=parseInt(S[x],10),y[x]>S[x])return 1;if(y[x]<S[x])return-1}return y.length===S.length?0:y.length<S.length?-1:1},h=d;c.default=h,l.exports=c.default},"./src/js/utils/detect-browser.js":(l,c,d)=>{var h=d("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(c,"__esModule",{value:!0}),c.isFirefox=c.isSafari=c.isChrome=c.isOpera=c.isEdge=c.detectBrowser=void 0;var p=h(d("./node_modules/global/window.js")),y=function(){var j={};if(j.browser=null,j.version=null,j.minVersion=null,typeof p.default>"u"||!p.default.navigator)return j.browser="Not a supported browser.",j;if(navigator.mozGetUserMedia)j.browser="firefox",j.version=S(navigator.userAgent,/Firefox\/(\d+)\./,1),j.minVersion=31;else if(navigator.webkitGetUserMedia)j.browser="chrome",j.version=S(navigator.userAgent,/Chrom(e|ium)\/(\d+)\./,2),j.minVersion=38;else if(navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))j.browser="edge",j.version=S(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),j.minVersion=10547;else if(p.default.RTCPeerConnection&&navigator.userAgent.match(/AppleWebKit\/(\d+)\./))j.browser="safari",j.version=S(navigator.userAgent,/AppleWebKit\/(\d+)\./,1);else return j.browser="Not a supported browser.",j;return j};c.detectBrowser=y;var S=function(j,le,fe){var Y=j.match(le);return Y&&Y.length>=fe&&parseInt(Y[fe],10)},C=function(){return y().browser==="edge"};c.isEdge=C;var x=function(){return y().browser==="safari"};c.isSafari=x;var I=function(){return!!p.default.opera||navigator.userAgent.indexOf("OPR/")!==-1};c.isOpera=I;var H=function(){return y().browser==="chrome"};c.isChrome=H;var Z=function(){return y().browser==="firefox"};c.isFirefox=Z},"./src/js/utils/file-util.js":(l,c,d)=>{var h=d("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(c,"__esModule",{value:!0}),c.addFileInfo=c.blobToArrayBuffer=c.downloadBlob=void 0;var p=h(d("./src/js/utils/mime.js")),y=function(I,H){if(typeof navigator.msSaveOrOpenBlob<"u")return navigator.msSaveOrOpenBlob(H,I);if(typeof navigator.msSaveBlob<"u")return navigator.msSaveBlob(H,I);var Z=document.createElement("a");Z.href=URL.createObjectURL(H),Z.download=I,Z.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(Z),typeof Z.click=="function"?Z.click():(Z.target="_blank",Z.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),URL.revokeObjectURL(Z.href)};c.downloadBlob=y;var S=function(I){return new Promise(function(H,Z){var W=new FileReader;W.onloadend=function(){H(W.result)},W.onerror=function(j){Z(j.error)},W.readAsArrayBuffer(I)})};c.blobToArrayBuffer=S;var C=function(I,H,Z){if(I instanceof Blob||I instanceof File){H===void 0&&(H=new Date);try{I.lastModified=H.getTime(),I.lastModifiedDate=H}catch(W){if(!(W instanceof TypeError))throw W}Z===void 0&&(Z="."+(0,p.default)(I.type));try{I.name=H.getTime()+Z}catch(W){if(!(W instanceof TypeError))throw W}}};c.addFileInfo=C},"./src/js/utils/format-time.js":(l,c,d)=>{var h=d("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var p=h(d("./node_modules/parse-ms/index.js")),y=h(d("./node_modules/add-zero/index.js")),S=function(I,H){var Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;I=I<0?0:I,(isNaN(I)||I===1/0)&&(I=0);var W=(0,p.default)(I*1e3),j=W;H!==void 0&&(j=(0,p.default)(H*1e3));var le=(0,y.default)(W.hours),fe=(0,y.default)(W.minutes),Y=(0,y.default)(W.seconds),oe=(0,y.default)(W.milliseconds,3);if(W.days>0||j.days>0){var V=(0,y.default)(W.days);return"".concat(V,":").concat(le,":").concat(fe,":").concat(Y)}return W.hours>0||j.hours>0?"".concat(le,":").concat(fe,":").concat(Y):Z?"".concat(fe,":").concat(Y,":").concat(oe):"".concat(fe,":").concat(Y)},C=S;c.default=C,l.exports=c.default},"./src/js/utils/mime.js":(l,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=/^\s*([^;\s]*)(?:;|\s|$)/,h={"video/ogg":"ogv","video/mp4":"mp4","video/x-matroska":"mkv","video/webm":"webm","audio/mp4":"m4a","audio/mpeg":"mp3","audio/aac":"aac","audio/flac":"flac","audio/ogg":"oga","audio/wav":"wav","audio/webm":"webm","application/x-mpegURL":"m3u8","image/jpeg":"jpg","image/gif":"gif","image/png":"png","image/svg+xml":"svg","image/webp":"webp"},p=function(C){var x=d.exec(C),I=x&&x[1].toLowerCase();return h[I]},y=p;c.default=y,l.exports=c.default},"./node_modules/global/window.js":(l,c,d)=>{var h;typeof window<"u"?h=window:typeof d.g<"u"?h=d.g:typeof self<"u"?h=self:h={},l.exports=h},"./node_modules/parse-ms/index.js":(l,c,d)=>{d.r(c),d.d(c,{default:()=>h});function h(p){if(typeof p!="number")throw new TypeError("Expected a number");const y=p>0?Math.floor:Math.ceil;return{days:y(p/864e5),hours:y(p/36e5)%24,minutes:y(p/6e4)%60,seconds:y(p/1e3)%60,milliseconds:y(p)%1e3,microseconds:y(p*1e3)%1e3,nanoseconds:y(p*1e6)%1e3}}},"./node_modules/regenerator-runtime/runtime.js":l=>{var c=function(d){var h=Object.prototype,p=h.hasOwnProperty,y,S=typeof Symbol=="function"?Symbol:{},C=S.iterator||"@@iterator",x=S.asyncIterator||"@@asyncIterator",I=S.toStringTag||"@@toStringTag";function H(re,se,J,ie){var B=se&&se.prototype instanceof oe?se:oe,ee=Object.create(B.prototype),Ee=new te(ie||[]);return ee._invoke=ge(re,J,Ee),ee}d.wrap=H;function Z(re,se,J){try{return{type:"normal",arg:re.call(se,J)}}catch(ie){return{type:"throw",arg:ie}}}var W="suspendedStart",j="suspendedYield",le="executing",fe="completed",Y={};function oe(){}function V(){}function pe(){}var de={};de[C]=function(){return this};var Se=Object.getPrototypeOf,Ae=Se&&Se(Se(ye([])));Ae&&Ae!==h&&p.call(Ae,C)&&(de=Ae);var ke=pe.prototype=oe.prototype=Object.create(de);V.prototype=ke.constructor=pe,pe.constructor=V,pe[I]=V.displayName="GeneratorFunction";function De(re){["next","throw","return"].forEach(function(se){re[se]=function(J){return this._invoke(se,J)}})}d.isGeneratorFunction=function(re){var se=typeof re=="function"&&re.constructor;return se?se===V||(se.displayName||se.name)==="GeneratorFunction":!1},d.mark=function(re){return Object.setPrototypeOf?Object.setPrototypeOf(re,pe):(re.__proto__=pe,I in re||(re[I]="GeneratorFunction")),re.prototype=Object.create(ke),re},d.awrap=function(re){return{__await:re}};function Fe(re,se){function J(ee,Ee,Ce,M){var U=Z(re[ee],re,Ee);if(U.type==="throw")M(U.arg);else{var ae=U.arg,be=ae.value;return be&&typeof be=="object"&&p.call(be,"__await")?se.resolve(be.__await).then(function(G){J("next",G,Ce,M)},function(G){J("throw",G,Ce,M)}):se.resolve(be).then(function(G){ae.value=G,Ce(ae)},function(G){return J("throw",G,Ce,M)})}}var ie;function B(ee,Ee){function Ce(){return new se(function(M,U){J(ee,Ee,M,U)})}return ie=ie?ie.then(Ce,Ce):Ce()}this._invoke=B}De(Fe.prototype),Fe.prototype[x]=function(){return this},d.AsyncIterator=Fe,d.async=function(re,se,J,ie,B){B===void 0&&(B=Promise);var ee=new Fe(H(re,se,J,ie),B);return d.isGeneratorFunction(se)?ee:ee.next().then(function(Ee){return Ee.done?Ee.value:ee.next()})};function ge(re,se,J){var ie=W;return function(ee,Ee){if(ie===le)throw new Error("Generator is already running");if(ie===fe){if(ee==="throw")throw Ee;return xe()}for(J.method=ee,J.arg=Ee;;){var Ce=J.delegate;if(Ce){var M=Ye(Ce,J);if(M){if(M===Y)continue;return M}}if(J.method==="next")J.sent=J._sent=J.arg;else if(J.method==="throw"){if(ie===W)throw ie=fe,J.arg;J.dispatchException(J.arg)}else J.method==="return"&&J.abrupt("return",J.arg);ie=le;var U=Z(re,se,J);if(U.type==="normal"){if(ie=J.done?fe:j,U.arg===Y)continue;return{value:U.arg,done:J.done}}else U.type==="throw"&&(ie=fe,J.method="throw",J.arg=U.arg)}}}function Ye(re,se){var J=re.iterator[se.method];if(J===y){if(se.delegate=null,se.method==="throw"){if(re.iterator.return&&(se.method="return",se.arg=y,Ye(re,se),se.method==="throw"))return Y;se.method="throw",se.arg=new TypeError("The iterator does not provide a 'throw' method")}return Y}var ie=Z(J,re.iterator,se.arg);if(ie.type==="throw")return se.method="throw",se.arg=ie.arg,se.delegate=null,Y;var B=ie.arg;if(!B)return se.method="throw",se.arg=new TypeError("iterator result is not an object"),se.delegate=null,Y;if(B.done)se[re.resultName]=B.value,se.next=re.nextLoc,se.method!=="return"&&(se.method="next",se.arg=y);else return B;return se.delegate=null,Y}De(ke),ke[I]="Generator",ke[C]=function(){return this},ke.toString=function(){return"[object Generator]"};function K(re){var se={tryLoc:re[0]};1 in re&&(se.catchLoc=re[1]),2 in re&&(se.finallyLoc=re[2],se.afterLoc=re[3]),this.tryEntries.push(se)}function w(re){var se=re.completion||{};se.type="normal",delete se.arg,re.completion=se}function te(re){this.tryEntries=[{tryLoc:"root"}],re.forEach(K,this),this.reset(!0)}d.keys=function(re){var se=[];for(var J in re)se.push(J);return se.reverse(),function ie(){for(;se.length;){var B=se.pop();if(B in re)return ie.value=B,ie.done=!1,ie}return ie.done=!0,ie}};function ye(re){if(re){var se=re[C];if(se)return se.call(re);if(typeof re.next=="function")return re;if(!isNaN(re.length)){var J=-1,ie=function B(){for(;++J<re.length;)if(p.call(re,J))return B.value=re[J],B.done=!1,B;return B.value=y,B.done=!0,B};return ie.next=ie}}return{next:xe}}d.values=ye;function xe(){return{value:y,done:!0}}return te.prototype={constructor:te,reset:function(re){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.method="next",this.arg=y,this.tryEntries.forEach(w),!re)for(var se in this)se.charAt(0)==="t"&&p.call(this,se)&&!isNaN(+se.slice(1))&&(this[se]=y)},stop:function(){this.done=!0;var re=this.tryEntries[0],se=re.completion;if(se.type==="throw")throw se.arg;return this.rval},dispatchException:function(re){if(this.done)throw re;var se=this;function J(M,U){return ee.type="throw",ee.arg=re,se.next=M,U&&(se.method="next",se.arg=y),!!U}for(var ie=this.tryEntries.length-1;ie>=0;--ie){var B=this.tryEntries[ie],ee=B.completion;if(B.tryLoc==="root")return J("end");if(B.tryLoc<=this.prev){var Ee=p.call(B,"catchLoc"),Ce=p.call(B,"finallyLoc");if(Ee&&Ce){if(this.prev<B.catchLoc)return J(B.catchLoc,!0);if(this.prev<B.finallyLoc)return J(B.finallyLoc)}else if(Ee){if(this.prev<B.catchLoc)return J(B.catchLoc,!0)}else if(Ce){if(this.prev<B.finallyLoc)return J(B.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(re,se){for(var J=this.tryEntries.length-1;J>=0;--J){var ie=this.tryEntries[J];if(ie.tryLoc<=this.prev&&p.call(ie,"finallyLoc")&&this.prev<ie.finallyLoc){var B=ie;break}}B&&(re==="break"||re==="continue")&&B.tryLoc<=se&&se<=B.finallyLoc&&(B=null);var ee=B?B.completion:{};return ee.type=re,ee.arg=se,B?(this.method="next",this.next=B.finallyLoc,Y):this.complete(ee)},complete:function(re,se){if(re.type==="throw")throw re.arg;return re.type==="break"||re.type==="continue"?this.next=re.arg:re.type==="return"?(this.rval=this.arg=re.arg,this.method="return",this.next="end"):re.type==="normal"&&se&&(this.next=se),Y},finish:function(re){for(var se=this.tryEntries.length-1;se>=0;--se){var J=this.tryEntries[se];if(J.finallyLoc===re)return this.complete(J.completion,J.afterLoc),w(J),Y}},catch:function(re){for(var se=this.tryEntries.length-1;se>=0;--se){var J=this.tryEntries[se];if(J.tryLoc===re){var ie=J.completion;if(ie.type==="throw"){var B=ie.arg;w(J)}return B}}throw new Error("illegal catch attempt")},delegateYield:function(re,se,J){return this.delegate={iterator:ye(re),resultName:se,nextLoc:J},this.method==="next"&&(this.arg=y),Y}},d}(l.exports);try{regeneratorRuntime=c}catch{Function("r","regeneratorRuntime = r")(c)}},recordrtc:l=>{l.exports=i},"video.js":l=>{l.exports=n}},a={};function s(l){var c=a[l];if(c!==void 0)return c.exports;var d=a[l]={exports:{}};return t[l].call(d.exports,d,d.exports,s),d.exports}s.d=(l,c)=>{for(var d in c)s.o(c,d)&&!s.o(l,d)&&Object.defineProperty(l,d,{enumerable:!0,get:c[d]})},s.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),s.o=(l,c)=>Object.prototype.hasOwnProperty.call(l,c),s.r=l=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})};var o={};return(()=>{var l=o;/*!**********************************!*\
  !*** ./src/js/videojs.record.js ***!
  \**********************************/var c=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.Record=void 0;var d=c(s("./node_modules/@babel/runtime/helpers/typeof.js")),h=c(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),p=c(s("./node_modules/@babel/runtime/helpers/createClass.js")),y=c(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),S=c(s("./node_modules/@babel/runtime/helpers/get.js")),C=c(s("./node_modules/@babel/runtime/helpers/inherits.js")),x=c(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),I=c(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),H=c(s("video.js")),Z=c(s("./src/js/controls/animation-display.js")),W=c(s("./src/js/controls/record-canvas.js")),j=c(s("./src/js/controls/device-button.js")),le=c(s("./src/js/controls/camera-button.js")),fe=c(s("./src/js/controls/record-toggle.js")),Y=c(s("./src/js/controls/record-indicator.js")),oe=c(s("./src/js/controls/picture-in-picture-toggle.js")),V=c(s("./src/js/event.js")),pe=c(s("./src/js/hot-keys.js")),de=c(s("./src/js/defaults.js")),Se=c(s("./src/js/utils/format-time.js")),Ae=c(s("./src/js/utils/browser-shim.js")),ke=c(s("./src/js/utils/compare-version.js")),De=s("./src/js/utils/detect-browser.js"),Fe=s("./src/js/engine/engine-loader.js"),ge=s("./src/js/engine/record-mode.js");function Ye(re){var se=K();return function(){var ie=(0,I.default)(re),B;if(se){var ee=(0,I.default)(this).constructor;B=Reflect.construct(ie,arguments,ee)}else B=ie.apply(this,arguments);return(0,x.default)(this,B)}}function K(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var w=H.default.getPlugin("plugin"),te=H.default.getComponent("Player"),ye="auto",xe=function(re){(0,C.default)(J,re);var se=Ye(J);function J(ie,B){var ee;(0,h.default)(this,J),ee=se.call(this,ie,B),te.prototype.play=function(){var ae=this.techGet_("play");return ae!==void 0&&typeof ae.then=="function"&&ae.then(null,function(be){}),ae},ie.addClass("vjs-record"),ee.loadOptions(),ee.resetState(),B.formatTime&&typeof B.formatTime=="function"?ee.setFormatTime(B.formatTime):ee.setFormatTime(function(U,ae){return(0,Se.default)(U,ae,ee.displayMilliseconds)});var Ee="av-perm";switch(ee.getRecordType()){case ge.IMAGE_ONLY:case ge.VIDEO_ONLY:case ge.ANIMATION:Ee="video-perm";break;case ge.AUDIO_ONLY:Ee="audio-perm";break;case ge.SCREEN_ONLY:Ee="screen-perm";break;case ge.AUDIO_SCREEN:Ee="sv-perm";break}j.default.prototype.buildCSSClass=function(){return"vjs-record vjs-device-button vjs-control vjs-icon-"+Ee},ie.deviceButton=new j.default(ie,B),ie.addChild(ie.deviceButton),ie.recordIndicator=new Y.default(ie,B),ie.recordIndicator.hide(),ie.addChild(ie.recordIndicator),ie.recordCanvas=new W.default(ie,B),ie.recordCanvas.hide(),ie.addChild(ie.recordCanvas),ie.animationDisplay=new Z.default(ie,B),ie.animationDisplay.hide(),ie.addChild(ie.animationDisplay),ie.cameraButton=new le.default(ie,B),ie.cameraButton.hide(),ie.recordToggle=new fe.default(ie,B),ie.recordToggle.hide();var Ce=H.default.VERSION===void 0||(0,ke.default)(H.default.VERSION,"7.6.0")===-1;if("pictureInPictureEnabled"in document||(ee.pictureInPicture=!1),ee.pictureInPicture===!0&&(Ce&&(ie.pipToggle=new oe.default(ie,B),ie.pipToggle.hide()),ee.onEnterPiPHandler=ee.onEnterPiP.bind((0,y.default)(ee)),ee.onLeavePiPHandler=ee.onLeavePiP.bind((0,y.default)(ee))),ee.player.options_.controlBar){var M=["deviceButton","recordIndicator","cameraButton","recordToggle"];ie.pipToggle&&M.push("pipToggle"),M.forEach(function(U){ee.player.options_.controlBar[U]!==void 0&&(ee.player[U].layoutExclude=!0,ee.player[U].hide())})}return ee.player.one(V.default.READY,ee.setupUI.bind((0,y.default)(ee))),ee}return(0,p.default)(J,[{key:"loadOptions",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ee=H.default.mergeOptions(de.default,this.player.options_.plugins.record,B);this.recordImage=ee.image,this.recordAudio=ee.audio,this.recordVideo=ee.video,this.recordAnimation=ee.animation,this.recordScreen=ee.screen,this.maxLength=ee.maxLength,this.maxFileSize=ee.maxFileSize,this.displayMilliseconds=ee.displayMilliseconds,this.debug=ee.debug,this.pictureInPicture=ee.pip,this.recordTimeSlice=ee.timeSlice,this.autoMuteDevice=ee.autoMuteDevice,this.pluginLibraryOptions=ee.pluginLibraryOptions,this.videoFrameWidth=ee.frameWidth,this.videoFrameHeight=ee.frameHeight,this.videoFrameRate=ee.videoFrameRate,this.videoBitRate=ee.videoBitRate,this.videoEngine=ee.videoEngine,this.videoRecorderType=ee.videoRecorderType,this.videoMimeType=ee.videoMimeType,this.videoWorkerURL=ee.videoWorkerURL,this.videoWebAssemblyURL=ee.videoWebAssemblyURL,this.convertEngine=ee.convertEngine,this.convertAuto=ee.convertAuto,this.convertWorkerURL=ee.convertWorkerURL,this.convertOptions=ee.convertOptions,this.audioEngine=ee.audioEngine,this.audioRecorderType=ee.audioRecorderType,this.audioWorkerURL=ee.audioWorkerURL,this.audioWebAssemblyURL=ee.audioWebAssemblyURL,this.audioBufferSize=ee.audioBufferSize,this.audioSampleRate=ee.audioSampleRate,this.audioBitRate=ee.audioBitRate,this.audioChannels=ee.audioChannels,this.audioMimeType=ee.audioMimeType,this.audioBufferUpdate=ee.audioBufferUpdate,this.imageOutputType=ee.imageOutputType,this.imageOutputFormat=ee.imageOutputFormat,this.imageOutputQuality=ee.imageOutputQuality,this.animationFrameRate=ee.animationFrameRate,this.animationQuality=ee.animationQuality}},{key:"setupUI",value:function(){var B=this;switch(this.player.controlBar.addChild(this.player.cameraButton),this.player.controlBar.el().insertBefore(this.player.cameraButton.el(),this.player.controlBar.el().firstChild),this.player.controlBar.el().insertBefore(this.player.recordToggle.el(),this.player.controlBar.el().firstChild),this.pictureInPicture===!0?this.player.controlBar.pictureInPictureToggle===void 0&&this.player.pipToggle!==void 0?this.player.controlBar.addChild(this.player.pipToggle):this.player.controlBar.pictureInPictureToggle!==void 0&&(this.player.pipToggle=this.player.controlBar.pictureInPictureToggle,this.player.pipToggle.hide()):this.pictureInPicture===!1&&this.player.controlBar.pictureInPictureToggle!==void 0&&this.player.controlBar.pictureInPictureToggle.hide(),this.player.controlBar.remainingTimeDisplay!==void 0&&(this.player.controlBar.remainingTimeDisplay.el().style.display="none"),this.player.controlBar.liveDisplay!==void 0&&(this.player.controlBar.liveDisplay.el().style.display="none"),this.player.loop(!1),this.getRecordType()){case ge.AUDIO_ONLY:this.surfer=this.player.wavesurfer(),this.surfer.setFormatTime(this._formatTime);break;case ge.IMAGE_ONLY:case ge.VIDEO_ONLY:case ge.AUDIO_VIDEO:case ge.ANIMATION:case ge.SCREEN_ONLY:case ge.AUDIO_SCREEN:this.player.bigPlayButton!==void 0&&this.player.bigPlayButton.hide(),this.player.one(V.default.LOADEDMETADATA,function(){B.setDuration(B.maxLength)}),this.player.one(V.default.LOADSTART,function(){B.setDuration(B.maxLength)}),this.player.usingNativeControls_===!0&&this.player.tech_.el_!==void 0&&(this.player.tech_.el_.controls=!1),this.player.removeTechControlsListeners_(),this.player.options_.controls&&(this.player.controlBar.progressControl!==void 0&&this.player.controlBar.progressControl.hide(),this.player.on(V.default.USERINACTIVE,function(Ee){B.player.userActive(!0)}),this.player.controlBar.show(),this.player.controlBar.el().style.display="flex");break}if(this.player.off(V.default.TIMEUPDATE),this.player.off(V.default.DURATIONCHANGE),this.player.off(V.default.LOADEDMETADATA),this.player.off(V.default.LOADSTART),this.player.off(V.default.ENDED),this.setDuration(this.maxLength),this.player.options_.plugins.record&&this.player.options_.plugins.record.hotKeys&&this.player.options_.plugins.record.hotKeys!==!1){var ee=this.player.options_.plugins.record.hotKeys;ee===!0&&(ee=pe.default),this.player.options_.userActions={hotkeys:ee}}this.player.controlBar.playToggle!==void 0&&this.player.controlBar.playToggle.hide()}},{key:"isRecording",value:function(){return this._recording}},{key:"isProcessing",value:function(){return this._processing}},{key:"isDestroyed",value:function(){var B=this.player===null;return B===!1&&(B=this.player.children()===null),B}},{key:"getDevice",value:function(){var B=this;if(this.deviceReadyCallback===void 0&&(this.deviceReadyCallback=this.onDeviceReady.bind(this)),this.deviceErrorCallback===void 0&&(this.deviceErrorCallback=this.onDeviceError.bind(this)),this.engineStopCallback===void 0&&(this.engineStopCallback=this.onRecordComplete.bind(this)),this.streamVisibleCallback===void 0&&(this.streamVisibleCallback=this.onStreamVisible.bind(this)),this.getRecordType()===ge.SCREEN_ONLY||this.getRecordType()===ge.AUDIO_SCREEN){if(navigator.mediaDevices===void 0||navigator.mediaDevices.getDisplayMedia===void 0){this.player.trigger(V.default.ERROR,"This browser does not support navigator.mediaDevices.getDisplayMedia");return}}else if(navigator.mediaDevices===void 0||navigator.mediaDevices.getUserMedia===void 0){this.player.trigger(V.default.ERROR,"This browser does not support navigator.mediaDevices.getUserMedia");return}switch(this.getRecordType()){case ge.AUDIO_ONLY:this.mediaType={audio:this.audioRecorderType===ye?!0:this.audioRecorderType,video:!1},this.surfer.surfer.microphone.un(V.default.DEVICE_READY,this.deviceReadyCallback),this.surfer.surfer.microphone.un(V.default.DEVICE_ERROR,this.deviceErrorCallback),this.surfer.surfer.microphone.on(V.default.DEVICE_READY,this.deviceReadyCallback),this.surfer.surfer.microphone.on(V.default.DEVICE_ERROR,this.deviceErrorCallback),this.surfer.setupPlaybackEvents(!1),this.surfer.liveMode=!0,this.surfer.surfer.microphone.paused=!1,this.surfer.surfer.backend.ac.state==="suspended"&&this.surfer.surfer.backend.ac.resume(),this.audioBufferUpdate===!0&&(this.surfer.surfer.microphone.reloadBufferFunction=function(Ce){B.surfer.surfer.microphone.paused||(B.surfer.surfer.empty(),B.surfer.surfer.loadDecodedBuffer(Ce.inputBuffer),B.player.recordedData=Ce.inputBuffer,B.player.trigger(V.default.AUDIO_BUFFER_UPDATE))}),this.surfer.surfer.microphone.start();break;case ge.IMAGE_ONLY:case ge.VIDEO_ONLY:this.getRecordType()===ge.IMAGE_ONLY&&this.player.el().firstChild.addEventListener(V.default.PLAYING,this.streamVisibleCallback),this.mediaType={audio:!1,video:this.videoRecorderType===ye?!0:this.videoRecorderType},navigator.mediaDevices.getUserMedia({audio:!1,video:this.getRecordType()===ge.IMAGE_ONLY?this.recordImage:this.recordVideo}).then(this.onDeviceReady.bind(this)).catch(this.onDeviceError.bind(this));break;case ge.AUDIO_SCREEN:this.mediaType={audio:this.audioRecorderType===ye?!0:this.audioRecorderType,video:this.videoRecorderType===ye?!0:this.videoRecorderType};var ee={};this.recordScreen===!0?ee={video:!0}:(0,d.default)(this.recordScreen)==="object"&&this.recordScreen.constructor===Object&&(ee=this.recordScreen),navigator.mediaDevices.getDisplayMedia(ee).then(function(Ce){navigator.mediaDevices.getUserMedia({audio:B.recordAudio}).then(function(M){Ce.addTrack(M.getTracks()[0]),B.onDeviceReady.bind(B)(Ce)}).catch(function(M){Ce.active&&Ce.stop(),B.onDeviceError(M)})}).catch(this.onDeviceError.bind(this));break;case ge.AUDIO_VIDEO:this.mediaType={audio:this.audioRecorderType===ye?!0:this.audioRecorderType,video:this.videoRecorderType===ye?!0:this.videoRecorderType},navigator.mediaDevices.getUserMedia({audio:this.recordAudio,video:this.recordVideo}).then(this.onDeviceReady.bind(this)).catch(this.onDeviceError.bind(this));break;case ge.ANIMATION:this.mediaType={audio:!1,video:!1,gif:!0},navigator.mediaDevices.getUserMedia({audio:!1,video:this.recordAnimation}).then(this.onDeviceReady.bind(this)).catch(this.onDeviceError.bind(this));break;case ge.SCREEN_ONLY:this.mediaType={audio:!1,video:!1,screen:!0,gif:!1};var Ee={};this.recordScreen===!0?Ee={video:!0}:(0,d.default)(this.recordScreen)==="object"&&this.recordScreen.constructor===Object&&(Ee=this.recordScreen),navigator.mediaDevices.getDisplayMedia(Ee).then(this.onDeviceReady.bind(this)).catch(this.onDeviceError.bind(this));break}}},{key:"onDeviceReady",value:function(B){var ee=this;if(this._deviceActive=!0,this.stream!==void 0&&this.stream.active&&this.stream.stop(),this.stream=B,this.player.deviceButton.hide(),this.setDuration(this.maxLength),this.setCurrentTime(0),this.player.controlBar.playToggle!==void 0&&this.player.controlBar.playToggle.hide(),this.off(this.player,V.default.TIMEUPDATE,this.playbackTimeUpdate),this.off(this.player,V.default.ENDED,this.playbackTimeUpdate),this.getRecordType()!==ge.IMAGE_ONLY){if(this.getRecordType()!==ge.AUDIO_ONLY&&(0,Fe.isAudioPluginActive)(this.audioEngine))throw new Error("Currently "+this.audioEngine+" is only supported in audio-only mode.");var Ee,Ce;switch(this.getRecordType()){case ge.AUDIO_ONLY:Ee=(0,Fe.getAudioEngine)(this.audioEngine),Ce=this.audioEngine;break;default:Ee=(0,Fe.getVideoEngine)(this.videoEngine),Ce=this.videoEngine}try{this.engine=new Ee(this.player,this.player.options_)}catch{throw new Error("Could not load "+Ce+" plugin")}if(this.engine.on(V.default.RECORD_COMPLETE,this.engineStopCallback),this.engine.bufferSize=this.audioBufferSize,this.engine.sampleRate=this.audioSampleRate,this.engine.bitRate=this.audioBitRate,this.engine.audioChannels=this.audioChannels,this.engine.audioWorkerURL=this.audioWorkerURL,this.engine.audioWebAssemblyURL=this.audioWebAssemblyURL,this.engine.mimeType={video:this.videoMimeType,gif:"image/gif"},this.audioMimeType!==null&&this.audioMimeType!==ye&&(this.engine.mimeType.audio=this.audioMimeType),this.engine.videoWorkerURL=this.videoWorkerURL,this.engine.videoWebAssemblyURL=this.videoWebAssemblyURL,this.engine.videoBitRate=this.videoBitRate,this.engine.videoFrameRate=this.videoFrameRate,this.engine.video={width:this.videoFrameWidth,height:this.videoFrameHeight},this.engine.canvas={width:this.videoFrameWidth,height:this.videoFrameHeight},this.engine.quality=this.animationQuality,this.engine.frameRate=this.animationFrameRate,this.recordTimeSlice&&this.recordTimeSlice>0&&(this.engine.timeSlice=this.recordTimeSlice,this.engine.maxFileSize=this.maxFileSize),this.engine.pluginLibraryOptions=this.pluginLibraryOptions,this.engine.setup(this.stream,this.mediaType,this.debug),this.convertEngine!==""){var M=(0,Fe.getConvertEngine)(this.convertEngine);try{this.converter=new M(this.player,this.player.options_)}catch{throw new Error("Could not load "+this.convertEngine+" plugin")}this.converter.convertAuto=this.convertAuto,this.converter.convertWorkerURL=this.convertWorkerURL,this.converter.convertOptions=this.convertOptions,this.converter.pluginLibraryOptions=this.pluginLibraryOptions,this.converter.setup(this.mediaType,this.debug)}var U=["currentTimeDisplay","timeDivider","durationDisplay"];U.forEach(function(ae){ae=ee.player.controlBar[ae],ae!==void 0&&(ae.el().style.display="block",ae.show())}),this.player.recordToggle.show()}else this.player.recordIndicator.disable(),this.retrySnapshot();this.getRecordType()!==ge.AUDIO_ONLY?(this.mediaElement=this.player.el().firstChild,this.mediaElement.controls=!1,this.mediaElement.muted=!0,this.displayVolumeControl(!1),this.pictureInPicture===!0&&(this.player.pipToggle.show(),this.mediaElement.removeEventListener(V.default.ENTERPICTUREINPICTURE,this.onEnterPiPHandler),this.mediaElement.removeEventListener(V.default.LEAVEPICTUREINPICTURE,this.onLeavePiPHandler),this.mediaElement.addEventListener(V.default.ENTERPICTUREINPICTURE,this.onEnterPiPHandler),this.mediaElement.addEventListener(V.default.LEAVEPICTUREINPICTURE,this.onLeavePiPHandler)),this.load(this.stream),this.player.one(V.default.LOADEDMETADATA,function(){ee.mediaElement.play(),ee.player.trigger(V.default.DEVICE_READY)})):this.player.trigger(V.default.DEVICE_READY)}},{key:"onDeviceError",value:function(B){this._deviceActive=!1,this.isDestroyed()||(this.player.deviceErrorCode=B,this.player.trigger(V.default.DEVICE_ERROR))}},{key:"start",value:function(){var B=this;if(!this.isProcessing()){if(this.stream&&this.stream.active===!1){this.getDevice();return}switch(this._recording=!0,this.player.controlBar.playToggle!==void 0&&this.player.controlBar.playToggle.hide(),this.off(this.player,V.default.TIMEUPDATE,this.playbackTimeUpdate),this.off(this.player,V.default.ENDED,this.playbackTimeUpdate),this.getRecordType()){case ge.AUDIO_ONLY:this.surfer.setupPlaybackEvents(!1),this.surfer.surfer.microphone.paused=!1,this.surfer.liveMode=!0,this.surfer.surfer.microphone.play();break;case ge.VIDEO_ONLY:case ge.AUDIO_VIDEO:case ge.AUDIO_SCREEN:case ge.SCREEN_ONLY:this.startVideoPreview();break;case ge.ANIMATION:this.player.recordCanvas.hide(),this.player.animationDisplay.hide(),this.mediaElement.style.display="block",this.captureFrame().then(function(ee){B.startVideoPreview()});break}switch(this.autoMuteDevice&&this.muteTracks(!1),this.getRecordType()){case ge.IMAGE_ONLY:this.createSnapshot(),this.player.trigger(V.default.START_RECORD);break;case ge.VIDEO_ONLY:case ge.AUDIO_VIDEO:case ge.AUDIO_SCREEN:case ge.ANIMATION:case ge.SCREEN_ONLY:this.player.one(V.default.LOADEDMETADATA,function(){B.startRecording()});break;default:this.startRecording()}}}},{key:"startRecording",value:function(){this.paused=!1,this.pauseTime=this.pausedTime=0,this.startTime=performance.now();var B=100;this.countDown=this.player.setInterval(this.onCountDown.bind(this),B),this.engine!==void 0&&this.engine.dispose(),this.engine.start(),this.player.trigger(V.default.START_RECORD)}},{key:"stop",value:function(){this.isProcessing()||(this._recording=!1,this._processing=!0,this.getRecordType()!==ge.IMAGE_ONLY?(this.player.trigger(V.default.STOP_RECORD),this.player.clearInterval(this.countDown),this.engine&&this.engine.stop(),this.autoMuteDevice&&this.muteTracks(!0)):this.player.recordedData&&this.player.trigger(V.default.FINISH_RECORD))}},{key:"stopDevice",value:function(){this.isRecording()?(this.player.one(V.default.FINISH_RECORD,this.stopStream.bind(this)),this.stop()):this.stopStream()}},{key:"stopStream",value:function(){if(this.stream){if(this._deviceActive=!1,this.getRecordType()===ge.AUDIO_ONLY){this.surfer.surfer.microphone.stopDevice();return}this.stream.getTracks().forEach(function(B){B.stop()})}}},{key:"pause",value:function(){this.paused||(this.pauseTime=performance.now(),this.paused=!0,this.engine.pause())}},{key:"resume",value:function(){this.paused&&(this.pausedTime+=performance.now()-this.pauseTime,this.engine.resume(),this.paused=!1)}},{key:"onRecordComplete",value:function(){var B=this;if(this.player.recordedData=this.engine.recordedData,this.player.controlBar.playToggle!==void 0&&(this.player.controlBar.playToggle.removeClass("vjs-ended"),this.player.controlBar.playToggle.show()),this.convertAuto===!0&&this.convert(),this.player.trigger(V.default.FINISH_RECORD),!this.isDestroyed())switch(this.getRecordType()){case ge.AUDIO_ONLY:this.surfer.pause(),this.surfer.setupPlaybackEvents(!0),this.player.loadingSpinner.show(),this.surfer.surfer.once(V.default.READY,function(){B._processing=!1}),this.load(this.player.recordedData);break;case ge.VIDEO_ONLY:case ge.AUDIO_VIDEO:case ge.AUDIO_SCREEN:case ge.SCREEN_ONLY:this.player.one(V.default.PAUSE,function(){B._processing=!1,B.player.loadingSpinner.hide(),B.setDuration(B.streamDuration),B.on(B.player,V.default.TIMEUPDATE,B.playbackTimeUpdate),B.on(B.player,V.default.ENDED,B.playbackTimeUpdate),(B.getRecordType()===ge.AUDIO_VIDEO||B.getRecordType()===ge.AUDIO_SCREEN)&&(B.mediaElement.muted=!1,B.displayVolumeControl(!0)),B.load(B.player.recordedData)}),this.player.pause();break;case ge.ANIMATION:this._processing=!1,this.player.loadingSpinner.hide(),this.setDuration(this.streamDuration),this.mediaElement.style.display="none",this.player.recordCanvas.show(),this.player.pause(),this.on(this.player,V.default.PLAY,this.showAnimation),this.on(this.player,V.default.PAUSE,this.hideAnimation);break}}},{key:"onCountDown",value:function(){if(!this.paused){var B=performance.now(),ee=this.maxLength,Ee=(B-(this.startTime+this.pausedTime))/1e3;this.streamDuration=Ee,Ee>=ee&&(Ee=ee,this.stop()),this.setDuration(ee),this.setCurrentTime(Ee,ee),this.player.trigger(V.default.PROGRESS_RECORD)}}},{key:"getCurrentTime",value:function(){var B=isNaN(this.streamCurrentTime)?0:this.streamCurrentTime;return this.getRecordType()===ge.AUDIO_ONLY&&(B=this.surfer.getCurrentTime()),B}},{key:"setCurrentTime",value:function(B,ee){switch(B=isNaN(B)?0:B,ee=isNaN(ee)?0:ee,this.getRecordType()){case ge.AUDIO_ONLY:this.surfer.setCurrentTime(B,ee);break;case ge.VIDEO_ONLY:case ge.AUDIO_VIDEO:case ge.AUDIO_SCREEN:case ge.ANIMATION:case ge.SCREEN_ONLY:this.player.controlBar.currentTimeDisplay&&this.player.controlBar.currentTimeDisplay.contentEl()&&this.player.controlBar.currentTimeDisplay.contentEl().lastChild&&(this.streamCurrentTime=Math.min(B,ee),this.player.controlBar.currentTimeDisplay.formattedTime_=this.player.controlBar.currentTimeDisplay.contentEl().lastChild.textContent=this._formatTime(this.streamCurrentTime,ee,this.displayMilliseconds));break}}},{key:"getDuration",value:function(){var B=isNaN(this.streamDuration)?0:this.streamDuration;return B}},{key:"setDuration",value:function(B){switch(B=isNaN(B)?0:B,this.getRecordType()){case ge.AUDIO_ONLY:this.surfer.setDuration(B);break;case ge.VIDEO_ONLY:case ge.AUDIO_VIDEO:case ge.AUDIO_SCREEN:case ge.ANIMATION:case ge.SCREEN_ONLY:this.player.controlBar.durationDisplay&&this.player.controlBar.durationDisplay.contentEl()&&this.player.controlBar.durationDisplay.contentEl().lastChild&&(this.player.controlBar.durationDisplay.formattedTime_=this.player.controlBar.durationDisplay.contentEl().lastChild.textContent=this._formatTime(B,B,this.displayMilliseconds));break}}},{key:"load",value:function(B){switch(this.getRecordType()){case ge.AUDIO_ONLY:this.surfer.load(B);break;case ge.IMAGE_ONLY:case ge.VIDEO_ONLY:case ge.AUDIO_VIDEO:case ge.AUDIO_SCREEN:case ge.ANIMATION:case ge.SCREEN_ONLY:B instanceof Blob||B instanceof File?(this.mediaElement.srcObject=null,this.mediaElement.src=URL.createObjectURL(B)):(0,Ae.default)(B,this.mediaElement);break}}},{key:"saveAs",value:function(B){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"record";ee==="record"?this.engine&&B!==void 0&&this.engine.saveAs(B):ee==="convert"&&this.converter&&B!==void 0&&this.converter.saveAs(B)}},{key:"dispose",value:function(){this.player.off(V.default.READY),this.player.off(V.default.USERINACTIVE),this.player.off(V.default.LOADEDMETADATA),this.engine&&(this.engine.dispose(),this.engine.destroy(),this.engine.off(V.default.RECORD_COMPLETE,this.engineStopCallback)),this.stop(),this.stopDevice(),this.removeRecording(),this.player.clearInterval(this.countDown),this.getRecordType()===ge.AUDIO_ONLY?this.surfer&&this.surfer.destroy():this.getRecordType()===ge.IMAGE_ONLY&&this.mediaElement&&this.streamVisibleCallback&&this.mediaElement.removeEventListener(V.default.PLAYING,this.streamVisibleCallback),this.resetState(),(0,S.default)((0,I.default)(J.prototype),"dispose",this).call(this)}},{key:"destroy",value:function(){this.player.dispose()}},{key:"reset",value:function(){var B=this;switch(this.engine&&(this.engine.dispose(),this.engine.off(V.default.RECORD_COMPLETE,this.engineStopCallback)),this.stop(),this.stopDevice(),this.player.clearInterval(this.countDown),this.removeRecording(),this.loadOptions(),this.resetState(),this.setDuration(this.maxLength),this.setCurrentTime(0),this.player.reset(),this.getRecordType()){case ge.AUDIO_ONLY:this.surfer&&this.surfer.surfer&&this.surfer.surfer.empty();break;case ge.IMAGE_ONLY:case ge.ANIMATION:this.player.recordCanvas.hide(),this.player.cameraButton.hide();break}this.player.controlBar.playToggle!==void 0&&this.player.controlBar.playToggle.hide(),this.player.deviceButton.show(),this.player.recordToggle.hide(),this.player.one(V.default.LOADEDMETADATA,function(){B.setDuration(B.maxLength)})}},{key:"resetState",value:function(){this._recording=!1,this._processing=!1,this._deviceActive=!1,this.devices=[]}},{key:"removeRecording",value:function(){this.mediaElement&&this.mediaElement.src&&this.mediaElement.src.startsWith("blob:")===!0&&(URL.revokeObjectURL(this.mediaElement.src),this.mediaElement.src="")}},{key:"exportImage",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;if(this.getRecordType()===ge.AUDIO_ONLY)return this.surfer.surfer.exportImage(B,ee,"blob");var Ee=this.player.recordCanvas.el().firstChild;return this.drawCanvas(Ee,this.mediaElement),new Promise(function(Ce){Ee.toBlob(Ce,B,ee)})}},{key:"muteTracks",value:function(B){(this.getRecordType()===ge.AUDIO_ONLY||this.getRecordType()===ge.AUDIO_SCREEN||this.getRecordType()===ge.AUDIO_VIDEO)&&this.stream.getAudioTracks().length>0&&(this.stream.getAudioTracks()[0].enabled=!B),this.getRecordType()!==ge.AUDIO_ONLY&&this.stream.getVideoTracks().length>0&&(this.stream.getVideoTracks()[0].enabled=!B)}},{key:"getRecordType",value:function(){return(0,ge.getRecorderMode)(this.recordImage,this.recordAudio,this.recordVideo,this.recordAnimation,this.recordScreen)}},{key:"convert",value:function(){this.converter!==void 0&&this.converter.convert(this.player.recordedData)}},{key:"createSnapshot",value:function(){var B=this;this.captureFrame().then(function(ee){B.imageOutputType==="blob"?ee.toBlob(function(Ee){B.player.recordedData=Ee,B.displaySnapshot()}):B.imageOutputType==="dataURL"&&(B.player.recordedData=ee.toDataURL(B.imageOutputFormat,B.imageOutputQuality),B.displaySnapshot())},this.imageOutputFormat,this.imageOutputQuality)}},{key:"displaySnapshot",value:function(){this.mediaElement.style.display="none",this.player.recordCanvas.show(),this.stop()}},{key:"retrySnapshot",value:function(){this._processing=!1,this.player.recordCanvas.hide(),this.player.el().firstChild.style.display="block"}},{key:"captureFrame",value:function(){var B=this,ee=(0,De.detectBrowser)(),Ee=this.player.recordCanvas.el().firstChild,Ce=this.stream.getVideoTracks()[0],M=Ce.getSettings();return Ee.width=M.width,Ee.height=M.height,new Promise(function(U,ae){var be=M.width/M.height,G=B.player.width()/B.player.height(),ve=0,Te=0,X=0,ue=0;if(be>=G?(ve=M.height*(B.player.width()/M.width),Te=B.player.width(),ue=B.player.height()/2-ve/2):(ve=B.player.height(),Te=M.width*(B.player.height()/M.height),X=B.player.width()/2-Te/2),ee.browser==="chrome"&&ee.version>=60&&(typeof ImageCapture>"u"?"undefined":(0,d.default)(ImageCapture))===(typeof Function>"u"?"undefined":(0,d.default)(Function)))try{var _e=new ImageCapture(Ce);_e.grabFrame().then(function(Re){B.drawCanvas(Ee,Re,Te,ve,X,ue),U(Ee)}).catch(function(Re){})}catch{}B.drawCanvas(Ee,B.mediaElement,Te,ve,X,ue),U(Ee)})}},{key:"drawCanvas",value:function(B,ee,Ee,Ce){var M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,U=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;Ee===void 0&&(Ee=B.width),Ce===void 0&&(Ce=B.height),B.getContext("2d").drawImage(ee,M,U,Ee,Ce)}},{key:"startVideoPreview",value:function(){this.off(V.default.TIMEUPDATE),this.off(V.default.DURATIONCHANGE),this.off(V.default.LOADEDMETADATA),this.off(V.default.PLAY),this.mediaElement.muted=!0,this.displayVolumeControl(!1),this.removeRecording(),this.load(this.stream),this.mediaElement.play()}},{key:"showAnimation",value:function(){var B=this.player.animationDisplay.el().firstChild;B.width=this.player.width(),B.height=this.player.height(),this.player.recordCanvas.hide(),(0,Ae.default)(this.player.recordedData,B),this.player.animationDisplay.show()}},{key:"hideAnimation",value:function(){this.player.recordCanvas.show(),this.player.animationDisplay.hide()}},{key:"playbackTimeUpdate",value:function(){this.setCurrentTime(this.player.currentTime(),this.streamDuration)}},{key:"enumerateDevices",value:function(){var B=this;if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices){this.player.enumerateErrorCode="enumerateDevices() not supported.",this.player.trigger(V.default.ENUMERATE_ERROR);return}navigator.mediaDevices.enumerateDevices(this).then(function(ee){B.devices=[],ee.forEach(function(Ee){B.devices.push(Ee)}),B.player.trigger(V.default.ENUMERATE_READY)}).catch(function(ee){B.player.enumerateErrorCode=ee,B.player.trigger(V.default.ENUMERATE_ERROR)})}},{key:"setVideoInput",value:function(B){this.recordVideo===Object(this.recordVideo)?this.recordVideo.deviceId={exact:B}:this.recordVideo===!0&&(this.recordVideo={deviceId:{exact:B}}),this.stopDevice(),this.getDevice()}},{key:"setAudioInput",value:function(B){switch(this.recordAudio===Object(this.recordAudio)?this.recordAudio.deviceId={exact:B}:this.recordAudio===!0&&(this.recordAudio={deviceId:{exact:B}}),this.getRecordType()){case ge.AUDIO_ONLY:this.surfer.surfer.microphone.constraints={video:!1,audio:this.recordAudio};break}this.stopDevice(),this.getDevice()}},{key:"setAudioOutput",value:function(B){var ee=this,Ee;switch(this.getRecordType()){case ge.AUDIO_ONLY:this.surfer.surfer.setSinkId(B).then(function(M){ee.player.trigger(V.default.AUDIO_OUTPUT_READY)}).catch(function(M){Ee=M});break;default:var Ce=player.tech_.el_;B?typeof Ce.sinkId<"u"?Ce.setSinkId(B).then(function(M){ee.player.trigger(V.default.AUDIO_OUTPUT_READY)}).catch(function(M){Ee=M}):Ee="Browser does not support audio output device selection.":Ee="Invalid deviceId: ".concat(B);break}this.player.trigger(V.default.ERROR,Ee)}},{key:"setFormatTime",value:function(B){this._formatTime=B,H.default.setFormatTime(this._formatTime),this.surfer&&this.surfer.setFormatTime(this._formatTime)}},{key:"displayVolumeControl",value:function(B){this.player.controlBar.volumePanel!==void 0&&(B===!0?B="flex":B="none",this.player.controlBar.volumePanel.el().style.display=B)}},{key:"onStreamVisible",value:function(B){this.mediaElement.removeEventListener(V.default.PLAYING,this.streamVisibleCallback),this.player.cameraButton.onStop(),this.player.cameraButton.show()}},{key:"onEnterPiP",value:function(B){this.player.trigger(V.default.ENTER_PIP,B)}},{key:"onLeavePiP",value:function(B){this.player.trigger(V.default.LEAVE_PIP)}}]),J}(w);l.Record=xe,xe.VERSION="4.5.0",H.default.Record=xe,H.default.getPlugin("record")===void 0&&H.default.registerPlugin("record",xe)})(),o})()})})(I8);var D8={exports:{}};/*!
 * ffmpegjs plugin for videojs-record
 * @version 4.5.0
 * @see https://github.com/collab-project/videojs-record
 * @copyright 2014-2021 Collab
 * @license MIT
 */(function(r,e){(function(n,t){r.exports=t(Aw)})(self,function(i){return(()=>{var n={"./node_modules/@babel/runtime/helpers/assertThisInitialized.js":o=>{function l(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}o.exports=l},"./node_modules/@babel/runtime/helpers/classCallCheck.js":o=>{function l(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}o.exports=l},"./node_modules/@babel/runtime/helpers/createClass.js":o=>{function l(d,h){for(var p=0;p<h.length;p++){var y=h[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(d,y.key,y)}}function c(d,h,p){return h&&l(d.prototype,h),p&&l(d,p),d}o.exports=c},"./node_modules/@babel/runtime/helpers/getPrototypeOf.js":o=>{function l(c){return o.exports=l=Object.setPrototypeOf?Object.getPrototypeOf:function(h){return h.__proto__||Object.getPrototypeOf(h)},l(c)}o.exports=l},"./node_modules/@babel/runtime/helpers/inherits.js":(o,l,c)=>{var d=c("./node_modules/@babel/runtime/helpers/setPrototypeOf.js");function h(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),y&&d(p,y)}o.exports=h},"./node_modules/@babel/runtime/helpers/interopRequireDefault.js":o=>{function l(c){return c&&c.__esModule?c:{default:c}}o.exports=l},"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js":(o,l,c)=>{var d=c("./node_modules/@babel/runtime/helpers/typeof.js"),h=c("./node_modules/@babel/runtime/helpers/assertThisInitialized.js");function p(y,S){return S&&(d(S)==="object"||typeof S=="function")?S:h(y)}o.exports=p},"./node_modules/@babel/runtime/helpers/setPrototypeOf.js":o=>{function l(c,d){return o.exports=l=Object.setPrototypeOf||function(p,y){return p.__proto__=y,p},l(c,d)}o.exports=l},"./node_modules/@babel/runtime/helpers/typeof.js":o=>{function l(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o.exports=l=function(h){return typeof h}:o.exports=l=function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},l(c)}o.exports=l},"./src/js/plugins/ffmpegjs-plugin.js":(o,l,c)=>{var d=c("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var h=d(c("./node_modules/@babel/runtime/helpers/classCallCheck.js")),p=d(c("./node_modules/@babel/runtime/helpers/createClass.js")),y=d(c("./node_modules/@babel/runtime/helpers/inherits.js")),S=d(c("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),C=d(c("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),x=d(c("video.js"));function I(le){var fe=H();return function(){var oe=(0,C.default)(le),V;if(fe){var pe=(0,C.default)(this).constructor;V=Reflect.construct(oe,arguments,pe)}else V=oe.apply(this,arguments);return(0,S.default)(this,V)}}function H(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Z=x.default.getComponent("ConvertEngine"),W=function(le){(0,y.default)(Y,le);var fe=I(Y);function Y(oe,V){var pe;return(0,h.default)(this,Y),pe=fe.call(this,oe,V),pe.debug=!1,pe.convertWorkerURL="ffmpeg-worker-mp4.js",pe.outputType=null,pe.pluginLibraryOptions={},pe}return(0,p.default)(Y,[{key:"setup",value:function(V,pe){if(this.mediaType=V,this.debug=pe,this.stdout=this.stderr="",this.pluginLibraryOptions.outputType===void 0)throw new Error("no outputType specified!");this.outputType=this.pluginLibraryOptions.outputType,this.engine=new Worker(this.convertWorkerURL),this.engine.onmessage=this.onWorkerMessage.bind(this)}},{key:"convert",value:function(V){var pe=this;this.timestamp=new Date,this.timestamp.setTime(V.lastModified),this.loadBlob(V).then(function(de){var Se=["-i",V.name];Se=Se.concat(pe.convertOptions),Se.push("output_"+pe.timestamp.getTime()),pe.engine.postMessage({type:"run",MEMFS:[{name:V.name,data:de}],arguments:Se})})}},{key:"onWorkerMessage",value:function(V){var pe=V.data;switch(pe.type){case"ready":break;case"run":this.player().trigger("startConvert");break;case"done":var de;try{de=pe.data.MEMFS[0].data}catch{this.player().trigger("error",this.stderr)}var Se=new Blob(de,{type:this.outputType});this.addFileInfo(Se,this.timestamp),this.player().convertedData=Se,this.player().trigger("finishConvert");break;case"stdout":this.stdout+=pe.data+`
`;break;case"stderr":this.stderr+=pe.data+`
`;break;case"exit":break;case"abort":case"error":this.player().trigger("error",pe.data);break}}}]),Y}(Z);x.default.FFmpegjsEngine=W;var j=W;l.default=j,o.exports=l.default},"video.js":o=>{o.exports=i}},t={};function a(o){var l=t[o];if(l!==void 0)return l.exports;var c=t[o]={exports:{}};return n[o](c,c.exports,a),c.exports}var s=a("./src/js/plugins/ffmpegjs-plugin.js");return s})()})})(D8);const k8=(r,e)=>{const i=r.__vccOpts||r;for(const[n,t]of e)i[n]=t;return i},L8={props:["uploadUrl","sources"],data(){return{title:"",content:null,type:"",hide:"",source_id:"",player:"",sources:[],retake:0,isSaveDisabled:!0,isStartRecording:!1,isRetakeDisabled:!0,submitText:"Submit",options:{controls:!0,bigPlayButton:!1,controlBar:{deviceButton:!1,recordToggle:!1,pipToggle:!1},width:500,height:300,fluid:!0,plugins:{record:{pip:!1,audio:!0,video:!0,maxLength:10,debug:!0}}}}},mounted(){this.player=ce("myVideo",this.options,()=>{var r="Using video.js "+ce.VERSION+" with videojs-record "+ce.getPluginVersion("record")+" and recordrtc "+O8.version;ce.log(r)}),this.player.on("deviceReady",()=>{this.player.record().start(),console.log("device ready:")}),this.player.on("deviceError",()=>{console.log("device error:",this.player.deviceErrorCode)}),this.player.on("error",(r,e)=>{console.error(e)}),this.player.on("startRecord",()=>{console.log("started recording!")}),this.player.on("finishRecord",()=>{this.isSaveDisabled=!1,this.retake==0&&(this.isRetakeDisabled=!1),console.log("finished recording: ",this.player.recordedData)})},created(){BS.get("/get-sources").then(r=>{console.log(r),this.sources=r.data})},methods:{startRecording(){this.isStartRecording=!0,this.player.record().getDevice()},submitVideo(){this.isSaveDisabled=!0,this.isRetakeDisabled=!0;var r=this.player.recordedData,e=new FormData;e.append("video",r,r.name),e.append("title",this.title),e.append("content",this.content),e.append("type",this.type),e.append("hide",this.hide),e.append("source_id",this.source_id),this.player.record().stopDevice(),fetch("/admin/stories/store",{method:"POST",body:e,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).then(i=>{this.submitText="Story Added Successfully!",window.location.href="/admin/stories"}).catch(i=>{this.submitText="Upload Failed"})},retakeVideo(){this.isSaveDisabled=!0,this.isRetakeDisabled=!0,this.retake+=1,this.player.record().start()}},beforeDestroy(){this.player&&this.player.dispose()}},M8={style:{width:"500px"}},N8={method:"POST"},F8={class:"max-w-7xl rounded mx-auto py-3 my-3 px-4 sm:px-6 lg:px-4 bg-white"},U8={class:"max-w-4xl mx-auto my-1 flex items-start flex-col sm:flex-row sm:items-center"},B8=ct("div",{class:"uppercase flex justify-start sm:justify-end w-full sm:w-48 font-semibold relative pr-3.5"},[ct("span",null,"Title"),ct("sup",{class:"top-[2px] right-[-12px]"},[ct("svg",{class:"w-3 fill-rose-500 absolute right-0 top-0",xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",viewBox:"0 0 24 24"},[ct("path",{d:"M18.562,14.63379,14.00031,12,18.562,9.36621a1.00016,1.00016,0,0,0-1-1.73242L13,10.26776V5a1,1,0,0,0-2,0v5.26776l-4.562-2.634a1.00016,1.00016,0,0,0-1,1.73242L9.99969,12,5.438,14.63379a1.00016,1.00016,0,0,0,1,1.73242L11,13.73224V19a1,1,0,0,0,2,0V13.73224l4.562,2.634a1.00016,1.00016,0,0,0,1-1.73242Z"})])])],-1),j8={class:"max-w-4xl mx-auto my-1 flex items-start flex-col sm:flex-row sm:items-center"},V8=ct("div",{class:"uppercase flex justify-start sm:justify-end w-full sm:w-48 font-semibold relative pr-3.5"},[ct("span",null,"Description"),ct("sup",{class:"top-[2px] right-[-12px]"},[ct("svg",{class:"w-3 fill-rose-500 absolute right-0 top-0",xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",viewBox:"0 0 24 24"},[ct("path",{d:"M18.562,14.63379,14.00031,12,18.562,9.36621a1.00016,1.00016,0,0,0-1-1.73242L13,10.26776V5a1,1,0,0,0-2,0v5.26776l-4.562-2.634a1.00016,1.00016,0,0,0-1,1.73242L9.99969,12,5.438,14.63379a1.00016,1.00016,0,0,0,1,1.73242L11,13.73224V19a1,1,0,0,0,2,0V13.73224l4.562,2.634a1.00016,1.00016,0,0,0,1-1.73242Z"})])])],-1),H8={class:"max-w-4xl mx-auto my-1 flex items-start flex-col sm:flex-row sm:items-center"},W8=ct("div",{class:"uppercase flex justify-start sm:justify-end w-full sm:w-48 font-semibold relative pr-3.5"},[ct("span",null,"Type"),ct("sup",{class:"top-[2px] right-[-12px]"},[ct("svg",{class:"w-3 fill-rose-500 absolute right-0 top-0",xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",viewBox:"0 0 24 24"},[ct("path",{d:"M18.562,14.63379,14.00031,12,18.562,9.36621a1.00016,1.00016,0,0,0-1-1.73242L13,10.26776V5a1,1,0,0,0-2,0v5.26776l-4.562-2.634a1.00016,1.00016,0,0,0-1,1.73242L9.99969,12,5.438,14.63379a1.00016,1.00016,0,0,0,1,1.73242L11,13.73224V19a1,1,0,0,0,2,0V13.73224l4.562,2.634a1.00016,1.00016,0,0,0,1-1.73242Z"})])])],-1),$8=OU('<option value="A" selected>A</option><option value="B">B</option><option value="C">C</option><option value="D">D</option><option value="E">E</option>',5),G8=[$8],z8={class:"max-w-4xl mx-auto my-1 flex items-start flex-col sm:flex-row sm:items-center"},q8=ct("div",{class:"uppercase flex justify-start sm:justify-end w-full sm:w-48 font-semibold relative pr-3.5"},[ct("span",null,"Hide"),ct("sup",{class:"top-[2px] right-[-12px]"},[ct("svg",{class:"w-3 fill-rose-500 absolute right-0 top-0",xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",viewBox:"0 0 24 24"},[ct("path",{d:"M18.562,14.63379,14.00031,12,18.562,9.36621a1.00016,1.00016,0,0,0-1-1.73242L13,10.26776V5a1,1,0,0,0-2,0v5.26776l-4.562-2.634a1.00016,1.00016,0,0,0-1,1.73242L9.99969,12,5.438,14.63379a1.00016,1.00016,0,0,0,1,1.73242L11,13.73224V19a1,1,0,0,0,2,0V13.73224l4.562,2.634a1.00016,1.00016,0,0,0,1-1.73242Z"})])])],-1),K8=ct("option",{value:"0",selected:""},"No",-1),Y8=ct("option",{value:"1"},"Yes",-1),X8=[K8,Y8],Q8={class:"max-w-4xl mx-auto my-1 flex items-start flex-col sm:flex-row sm:items-center"},J8=ct("div",{class:"uppercase flex justify-start sm:justify-end w-full sm:w-48 font-semibold relative pr-3.5"},[ct("span",null,"Source")],-1),Z8=["value"],e6=["disabled"];function t6(r,e,i,n,t,a){return im(),nm("div",M8,[ct("form",N8,[ct("div",F8,[ct("div",U8,[B8,Hu(ct("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>t.title=s),name:"title",class:"border border-gray-300 w-full my-2 sm:m-2 sm:w-9/12 px-2 py-1 rounded outline-offset-0 outline-none focus:outline-blue-400",placeholder:"Once upon a time, there was billa..."},null,512),[[WT,t.title]])]),ct("div",j8,[V8,Hu(ct("textarea",{type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>t.content=s),name:"content",class:"border border-gray-300 w-full my-2 sm:m-2 sm:w-9/12 px-2 py-1 rounded outline-offset-0 outline-none focus:outline-blue-400",placeholder:"Once upon a time, there was billa..."},null,512),[[WT,t.content]])]),ct("div",H8,[W8,Hu(ct("select",{name:"type","onUpdate:modelValue":e[2]||(e[2]=s=>t.type=s),id:"type",class:"border border-gray-300 text-gray-900 text-sm rounded focus:ring-blue-500 focus:border-blue-500 block dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 w-full my-2 sm:m-2 sm:w-9/12 px-2 py-1"},G8,512),[[sm,t.type]])]),ct("div",z8,[q8,Hu(ct("select",{name:"hide","onUpdate:modelValue":e[3]||(e[3]=s=>t.hide=s),id:"hide",class:"border border-gray-300 text-gray-900 text-sm rounded focus:ring-blue-500 focus:border-blue-500 block dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 w-full my-2 sm:m-2 sm:w-9/12 px-2 py-1"},X8,512),[[sm,t.hide]])]),ct("div",Q8,[J8,Hu(ct("select",{name:"source_id","onUpdate:modelValue":e[4]||(e[4]=s=>t.source_id=s),id:"source_id",class:"border border-gray-300 text-gray-900 text-sm rounded focus:ring-blue-500 focus:border-blue-500 block dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 w-full my-2 sm:m-2 sm:w-9/12 px-2 py-1"},[(im(!0),nm(Ui,null,sU(t.sources,(s,o)=>(im(),nm("option",{key:o,value:s.source_id},fT(s.source_name),9,Z8))),128))],512),[[sm,t.source_id]])])]),ct("button",{type:"button",class:"btn btn-info",onClick:e[5]||(e[5]=xB(s=>a.submitVideo(),["prevent"])),disabled:t.isSaveDisabled,id:"btnSave"},"\u2705"+fT(t.submitText),9,e6)])])}const r6=k8(L8,[["render",t6]]);window.Alpine=eE;eE.start();RB(r6).mount("#app");
